{"version":3,"file":"helios.js","sources":["../node_modules/d3-ease/src/linear.js","../node_modules/d3-ease/src/cubic.js","../node_modules/d3-selection/src/namespaces.js","../node_modules/d3-selection/src/namespace.js","../node_modules/d3-selection/src/creator.js","../node_modules/d3-selection/src/selector.js","../node_modules/d3-selection/src/selection/select.js","../node_modules/d3-selection/src/array.js","../node_modules/d3-selection/src/selectorAll.js","../node_modules/d3-selection/src/selection/selectAll.js","../node_modules/d3-selection/src/matcher.js","../node_modules/d3-selection/src/selection/selectChild.js","../node_modules/d3-selection/src/selection/selectChildren.js","../node_modules/d3-selection/src/selection/filter.js","../node_modules/d3-selection/src/selection/sparse.js","../node_modules/d3-selection/src/selection/enter.js","../node_modules/d3-selection/src/constant.js","../node_modules/d3-selection/src/selection/data.js","../node_modules/d3-selection/src/selection/exit.js","../node_modules/d3-selection/src/selection/join.js","../node_modules/d3-selection/src/selection/merge.js","../node_modules/d3-selection/src/selection/order.js","../node_modules/d3-selection/src/selection/sort.js","../node_modules/d3-selection/src/selection/call.js","../node_modules/d3-selection/src/selection/nodes.js","../node_modules/d3-selection/src/selection/node.js","../node_modules/d3-selection/src/selection/size.js","../node_modules/d3-selection/src/selection/empty.js","../node_modules/d3-selection/src/selection/each.js","../node_modules/d3-selection/src/selection/attr.js","../node_modules/d3-selection/src/window.js","../node_modules/d3-selection/src/selection/style.js","../node_modules/d3-selection/src/selection/property.js","../node_modules/d3-selection/src/selection/classed.js","../node_modules/d3-selection/src/selection/text.js","../node_modules/d3-selection/src/selection/html.js","../node_modules/d3-selection/src/selection/raise.js","../node_modules/d3-selection/src/selection/lower.js","../node_modules/d3-selection/src/selection/append.js","../node_modules/d3-selection/src/selection/insert.js","../node_modules/d3-selection/src/selection/remove.js","../node_modules/d3-selection/src/selection/clone.js","../node_modules/d3-selection/src/selection/datum.js","../node_modules/d3-selection/src/selection/on.js","../node_modules/d3-selection/src/selection/dispatch.js","../node_modules/d3-selection/src/selection/iterator.js","../node_modules/d3-selection/src/selection/index.js","../node_modules/d3-selection/src/select.js","../node_modules/d3-selection/src/sourceEvent.js","../node_modules/d3-selection/src/pointer.js","../node_modules/d3-dispatch/src/dispatch.js","../node_modules/d3-drag/src/noevent.js","../node_modules/d3-drag/src/nodrag.js","../node_modules/d3-color/src/define.js","../node_modules/d3-color/src/color.js","../node_modules/d3-interpolate/src/constant.js","../node_modules/d3-interpolate/src/color.js","../node_modules/d3-interpolate/src/rgb.js","../node_modules/d3-interpolate/src/number.js","../node_modules/d3-interpolate/src/string.js","../node_modules/d3-interpolate/src/transform/decompose.js","../node_modules/d3-interpolate/src/transform/parse.js","../node_modules/d3-interpolate/src/transform/index.js","../node_modules/d3-interpolate/src/zoom.js","../node_modules/d3-timer/src/timer.js","../node_modules/d3-timer/src/timeout.js","../node_modules/d3-transition/src/transition/schedule.js","../node_modules/d3-transition/src/interrupt.js","../node_modules/d3-transition/src/selection/interrupt.js","../node_modules/d3-transition/src/transition/tween.js","../node_modules/d3-transition/src/transition/interpolate.js","../node_modules/d3-transition/src/transition/attr.js","../node_modules/d3-transition/src/transition/attrTween.js","../node_modules/d3-transition/src/transition/delay.js","../node_modules/d3-transition/src/transition/duration.js","../node_modules/d3-transition/src/transition/ease.js","../node_modules/d3-transition/src/transition/easeVarying.js","../node_modules/d3-transition/src/transition/filter.js","../node_modules/d3-transition/src/transition/merge.js","../node_modules/d3-transition/src/transition/on.js","../node_modules/d3-transition/src/transition/remove.js","../node_modules/d3-transition/src/transition/select.js","../node_modules/d3-transition/src/transition/selectAll.js","../node_modules/d3-transition/src/transition/selection.js","../node_modules/d3-transition/src/transition/style.js","../node_modules/d3-transition/src/transition/styleTween.js","../node_modules/d3-transition/src/transition/text.js","../node_modules/d3-transition/src/transition/textTween.js","../node_modules/d3-transition/src/transition/transition.js","../node_modules/d3-transition/src/transition/end.js","../node_modules/d3-transition/src/transition/index.js","../node_modules/d3-transition/src/selection/transition.js","../node_modules/d3-transition/src/selection/index.js","../node_modules/d3-zoom/src/constant.js","../node_modules/d3-zoom/src/event.js","../node_modules/d3-zoom/src/transform.js","../node_modules/d3-zoom/src/noevent.js","../node_modules/d3-zoom/src/zoom.js","../node_modules/gl-matrix/esm/common.js","../node_modules/gl-matrix/esm/mat3.js","../node_modules/gl-matrix/esm/mat4.js","../node_modules/gl-matrix/esm/vec3.js","../node_modules/gl-matrix/esm/vec4.js","../src/utilities/webgl.js","../node_modules/@colormap/core/dist/index.esm.js","../node_modules/@colormap/presets/dist/index.esm.js","../src/core/Network.js","../src/core/Scheduler.js","../node_modules/pica/dist/pica.js","../src/layouts/d3force3dLayoutWorker.js","../src/shaders/edges.js","../src/shaders/nodes.js","../node_modules/sylvester-es6/target/LinkedList.js","../node_modules/sylvester-es6/target/CircularLinkedList.js","../node_modules/sylvester-es6/target/PRECISION.js","../node_modules/sylvester-es6/target/Matrix.js","../node_modules/sylvester-es6/target/Vector.js","../node_modules/sylvester-es6/target/Plane.js","../node_modules/sylvester-es6/target/Line.js","../node_modules/sylvester-es6/target/LineSegment.js","../node_modules/sylvester-es6/target/LinkedListNode.js","../node_modules/sylvester-es6/target/Polygon.js","../node_modules/sylvester-es6/target/Vertex.js","../node_modules/sylvester-es6/target/Utils.js","../node_modules/sylvester-es6/target/Sylvester.js","../node_modules/d3-scale-chromatic/src/colors.js","../node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js","../src/shaders/density.js","../src/utilities/densityGL.js","../node_modules/avl/src/utils.js","../node_modules/avl/src/index.js","../src/utilities/SortedMap.js","../src/core/HeliosCore.js","../src/utilities/parsers/xnet.js","../src/utilities/parsers/gexf.js","../src/utilities/parsers/gml.js","../src/behaviors/BehaviorFilter.js"],"sourcesContent":["export const linear = t => +t;\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we don’t ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don’t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isn’t worried about “live” collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// don’t; we’d rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0 ≅ u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and we’re done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","export default x => () => x;\n","export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event won’t trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","\n\n\nlet requestAnimationFrame = (function () {\n\treturn window.requestAnimationFrame ||\n\t\twindow.webkitRequestAnimationFrame ||\n\t\twindow.mozRequestAnimationFrame ||\n\t\twindow.oRequestAnimationFrame ||\n\t\twindow.msRequestAnimationFrame ||\n\t\tfunction ( /* function FrameRequestCallback */ callback, /* DOMElement Element */ element) {\n\t\t\treturn window.setTimeout(callback, 1000 / 60);\n\t\t};\n})();\n\nlet cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame;\n\n\nfunction createWebGLContext(canvas, opt_attribs) {\n\tlet names = [\"webgl\", \"experimental-webgl\", \"webkit-3d\", \"moz-webgl\"];\n\tlet context = null;\n\tfor (let ii = 0; ii < names.length; ++ii) {\n\t\ttry {\n\t\t\tcontext = canvas.getContext(names[ii], opt_attribs);\n\t\t} catch (e) { }\n\t\tif (context) {\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn context;\n}\n\n\n// GetShader function obtained from\n// https://developer.mozilla.org/en/WebGL/Adding_2D_content_to_a_WebGL_context\n// under public domain.\nasync function getShader(gl, ID) {\n\tlet shaderScript = document.getElementById(ID);\n\tif (!shaderScript) {\n\t\treturn null;\n\t}\n\n\tlet str = \"\";\n\tlet k = shaderScript.firstChild;\n\twhile (k) {\n\t\tif (k.nodeType == 3) {\n\t\t\tstr += k.textContent;\n\t\t}\n\t\tk = k.nextSibling;\n\t}\n\n\tif (shaderScript.src) {\n\t\tstr = await fetch(shaderScript.src).then(response => response.text());\n\t}\n\n\tlet shader;\n\tif (shaderScript.type == \"text/glsl-fragment\") {\n\t\tshader = gl.createShader(gl.FRAGMENT_SHADER);\n\t} else if (shaderScript.type == \"text/glsl-vertex\") {\n\t\tshader = gl.createShader(gl.VERTEX_SHADER);\n\t} else {\n\t\treturn null;\n\t}\n\t// console.log(str);\n\n\tgl.shaderSource(shader, str);\n\tgl.compileShader(shader);\n\n\tif (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n\t\tconsole.log(\"ERROR with script: \", ID);\n\t\tconsole.log(gl.getShaderInfoLog(shader));\n\t\treturn null;\n\t}\n\n\treturn shader;\n}\n\n//new URL('fancy-button.css', import.meta.url)\nasync function getShaderFromURL(gl, url, type) { //gl.FRAGMENT_SHADER or gl.VERTEX_SHADER\n\tlet str = await fetch(url).then(r => r.text());\n\n\tlet shader;\n\tshader = gl.createShader(type);\n\n\t// console.log(str);\n\n\tgl.shaderSource(shader, str);\n\tgl.compileShader(shader);\n\n\tif (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n\t\tconsole.log(\"ERROR with script: \", url);\n\t\tconsole.log(gl.getShaderInfoLog(shader));\n\t\treturn null;\n\t}\n\n\treturn shader;\n}\n\nfunction getShaderFromString(gl, str, type) { //gl.FRAGMENT_SHADER or gl.VERTEX_SHADER\n\tlet shader;\n\t// console.log(str);\n\tshader = gl.createShader(type);\n\n\t// console.log(str);\n\n\tgl.shaderSource(shader, str);\n\tgl.compileShader(shader);\n\n\tif (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n\t\tconsole.log(\"ERROR with script: \", str);\n\t\tconsole.log(gl.getShaderInfoLog(shader));\n\t\treturn null;\n\t}\n\n\treturn shader;\n}\n\n\nfunction ShaderProgram(vertexShader, fragmentShader, uniforms, attributes, glContext) {\n\tlet shaderProgram = glContext.createProgram();\n\tglContext.attachShader(shaderProgram, vertexShader);\n\tglContext.attachShader(shaderProgram, fragmentShader);\n\tglContext.linkProgram(shaderProgram);\n\n\n\tif (!glContext.getProgramParameter(shaderProgram, glContext.LINK_STATUS)) {\n\t\talert(\"Shader Compilation Error.\" + glContext.getProgramInfoLog(shaderProgram));\n\t\treturn;\n\t}\n\n\tthis.ID = shaderProgram;\n\n\tthis.uniforms = new Object();\n\tthis.attributes = new Object();\n\n\tif (uniforms) {\n\t\tfor (let i = 0; i < uniforms.length; i++) {\n\t\t\tthis.uniforms[uniforms[i]] = glContext.getUniformLocation(this.ID, uniforms[i]);\n\t\t}\n\t}\n\n\tthis.attributes.enable = function (attributeName) {\n\t\tglContext.enableVertexAttribArray(this[attributeName]);\n\t}\n\n\tthis.attributes.disable = function (attributeName) {\n\t\tglContext.disableVertexAttribArray(this[attributeName]);\n\t}\n\n\tif (attributes) {\n\t\tfor (let i = 0; i < attributes.length; i++) {\n\t\t\tthis.attributes[attributes[i]] = glContext.getAttribLocation(this.ID, attributes[i]);\n\t\t}\n\t}\n\n\tthis.use = function (glContext) {\n\t\tglContext.useProgram(this.ID);\n\t}\n}\n\n\n\n\n\n/*\n * Copyright (C) 2009 Apple Inc. All Rights Reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n/*\n\t taken from: https://cvs.khronos.org/svn/repos/registry/trunk/public/webgl/sdk/demos/webkit/resources/J3DI.js\n*/\n\n//\n// makeSphere\n//\n// Create a sphere with the passed number of latitude and longitude bands and the passed radius.\n// Sphere has vertices, normals and texCoords. Create VBOs for each as well as the index array.\n// Return an object with the following properties:\n//\n//  normalObject        WebGLBuffer object for normals\n//  texCoordObject      WebGLBuffer object for texCoords\n//  vertexObject        WebGLBuffer object for vertices\n//  indexObject         WebGLBuffer object for indices\n//  numIndices          The number of indices in the indexObject\n//\nfunction makeSphere(ctx, radius, lats, longs) {\n\tvar geometryData = [];\n\tvar normalData = [];\n\tvar texCoordData = [];\n\tvar indexData = [];\n\n\tfor (var latNumber = 0; latNumber <= lats; ++latNumber) {\n\t\tfor (var longNumber = 0; longNumber <= longs; ++longNumber) {\n\t\t\tvar theta = latNumber * Math.PI / lats;\n\t\t\tvar phi = longNumber * 2 * Math.PI / longs;\n\t\t\tvar sinTheta = Math.sin(theta);\n\t\t\tvar sinPhi = Math.sin(phi);\n\t\t\tvar cosTheta = Math.cos(theta);\n\t\t\tvar cosPhi = Math.cos(phi);\n\n\t\t\tvar x = cosPhi * sinTheta;\n\t\t\tvar y = cosTheta;\n\t\t\tvar z = sinPhi * sinTheta;\n\t\t\tvar u = 1 - (longNumber / longs);\n\t\t\tvar v = latNumber / lats;\n\n\t\t\tnormalData.push(x);\n\t\t\tnormalData.push(y);\n\t\t\tnormalData.push(z);\n\t\t\ttexCoordData.push(u);\n\t\t\ttexCoordData.push(v);\n\t\t\tgeometryData.push(radius * x);\n\t\t\tgeometryData.push(radius * y);\n\t\t\tgeometryData.push(radius * z);\n\t\t}\n\t}\n\n\tfor (var latNumber = 0; latNumber < lats; ++latNumber) {\n\t\tfor (var longNumber = 0; longNumber < longs; ++longNumber) {\n\t\t\tvar first = (latNumber * (longs + 1)) + longNumber;\n\t\t\tvar second = first + longs + 1;\n\t\t\tindexData.push(first);\n\t\t\tindexData.push(second);\n\t\t\tindexData.push(first + 1);\n\n\t\t\tindexData.push(second);\n\t\t\tindexData.push(second + 1);\n\t\t\tindexData.push(first + 1);\n\t\t}\n\t}\n\n\tvar retval = {};\n\n\tretval.normalObject = ctx.createBuffer();\n\tctx.bindBuffer(ctx.ARRAY_BUFFER, retval.normalObject);\n\tctx.bufferData(ctx.ARRAY_BUFFER, new Float32Array(normalData), ctx.STATIC_DRAW);\n\n\tretval.texCoordObject = ctx.createBuffer();\n\tctx.bindBuffer(ctx.ARRAY_BUFFER, retval.texCoordObject);\n\tctx.bufferData(ctx.ARRAY_BUFFER, new Float32Array(texCoordData), ctx.STATIC_DRAW);\n\n\tretval.vertexObject = ctx.createBuffer();\n\tctx.bindBuffer(ctx.ARRAY_BUFFER, retval.vertexObject);\n\tctx.bufferData(ctx.ARRAY_BUFFER, new Float32Array(geometryData), ctx.STATIC_DRAW);\n\n\tretval.numIndices = indexData.length;\n\tretval.indexObject = ctx.createBuffer();\n\tctx.bindBuffer(ctx.ELEMENT_ARRAY_BUFFER, retval.indexObject);\n\tctx.bufferData(ctx.ELEMENT_ARRAY_BUFFER, new Uint16Array(indexData), ctx.STREAM_DRAW);\n\tretval.indexType = ctx.UNSIGNED_SHORT;\n\n\treturn retval;\n}\n\n\n\n\n\nfunction makePlane(ctx, generateNormal = true, generateTexCoord = true) {\n\tlet geometryData = [\n\t\t-1.0, 1.0, 0.0,\n\t\t-1.0, -1.0, 0.0,\n\t\t1.0, 1.0, 0.0,\n\t\t1.0, -1.0, 0.0,\n\t];\n\tlet normalData = [\n\t\t0.0, 0.0, 1.0,\n\t\t0.0, 0.0, 1.0,\n\t\t0.0, 0.0, 1.0,\n\t\t0.0, 0.0, 1.0,\n\t];\n\tlet texCoordData = [\n\t\t0.0, 1.0, 0.0,\n\t\t1.0, 0.0, 0.0,\n\t\t1.0, 1.0, 0.0,\n\t\t0.0, 0.0, 0.0,\n\t];\n\n\tlet retval = {};\n\n\tif (generateTexCoord) {\n\t\tretval.texCoordObject = ctx.createBuffer();\n\t\tctx.bindBuffer(ctx.ARRAY_BUFFER, retval.texCoordObject);\n\t\tctx.bufferData(ctx.ARRAY_BUFFER, new Float32Array(texCoordData), ctx.STATIC_DRAW);\n\t}\n\n\tif (generateNormal) {\n\t\tretval.normalObject = ctx.createBuffer();\n\t\tctx.bindBuffer(ctx.ARRAY_BUFFER, retval.normalObject);\n\t\tctx.bufferData(ctx.ARRAY_BUFFER, new Float32Array(normalData), ctx.STATIC_DRAW);\n\t}\n\n\tretval.vertexObject = ctx.createBuffer();\n\tctx.bindBuffer(ctx.ARRAY_BUFFER, retval.vertexObject);\n\tctx.bufferData(ctx.ARRAY_BUFFER, new Float32Array(geometryData), ctx.STATIC_DRAW);\n\tretval.numIndices = 4;\n\n\t// retval.numIndices = indexData.length;\n\t// retval.indexObject = ctx.createBuffer();\n\t// ctx.bindBuffer(ctx.ELEMENT_ARRAY_BUFFER, retval.indexObject);\n\t// ctx.bufferData(ctx.ELEMENT_ARRAY_BUFFER, new Uint16Array(indexData), ctx.STREAM_DRAW);\n\t// retval.indexType = ctx.UNSIGNED_SHORT;\n\n\treturn retval;\n}\n\n// Degrees to Radians convert function\nfunction degToRad(degrees) {\n\treturn degrees * Math.PI / 180;\n}\n\nexport {\n\tmakeSphere,\n\tmakePlane,\n\tgetShader,\n\tgetShaderFromURL,\n\tgetShaderFromString,\n\tShaderProgram,\n\trequestAnimationFrame,\n\tcancelAnimationFrame,\n\tcreateWebGLContext,\n\tdegToRad\n};\n","function findIndex(nodes, value, start, stop) {\r\n    // Find the index in the color array for which\r\n    // nodes[index].value <= value < nodes[index + 1]\r\n    if (stop <= start) {\r\n        return start;\r\n    }\r\n    const index = Math.floor(start + (stop - start) / 2);\r\n    const delta = value - nodes[index].value;\r\n    const delta1 = value - nodes[index + 1].value;\r\n    if (delta < 0) {\r\n        return findIndex(nodes, value, start, index - 1);\r\n    }\r\n    else if (delta1 < 0) {\r\n        return index;\r\n    }\r\n    else {\r\n        return findIndex(nodes, value, index + 1, stop);\r\n    }\r\n}\r\nconst linearMixer = (value, lowerNodeValue, upperNodeValue) => {\r\n    const frac = (value - lowerNodeValue) / (upperNodeValue - lowerNodeValue);\r\n    return [1 - frac, frac];\r\n};\r\nconst floorMixer = (_value, _lowerNodeValue, _upperNodeValue) => {\r\n    return [1, 0];\r\n};\r\nconst ceilMixer = (_value, _lowerNodeValue, _upperNodeValue) => {\r\n    return [0, 1];\r\n};\r\nconst roundMixer = (value, lowerNodeValue, upperNodeValue) => {\r\n    if (value - lowerNodeValue < upperNodeValue - value) {\r\n        return [1, 0];\r\n    }\r\n    else {\r\n        return [0, 1];\r\n    }\r\n};\n\nfunction isNode(node) {\r\n    return node.value !== undefined && node.mapped !== undefined;\r\n}\r\nfunction isNodeArray(nodes) {\r\n    return nodes.length > 0 && isNode(nodes[0]);\r\n}\r\nfunction opacityCombination(a, X, b, Y) {\r\n    return a * X + b * Y;\r\n}\r\nfunction colorCombination(a, X, b, Y) {\r\n    return [\r\n        a * X[0] + b * Y[0],\r\n        a * X[1] + b * Y[1],\r\n        a * X[2] + b * Y[2]\r\n    ];\r\n}\r\nfunction ensureMixer(mixer) {\r\n    return mixer ? mixer : linearMixer;\r\n}\r\nfunction createColorMap(colors, scale, mixer) {\r\n    if (!Array.isArray(colors) || colors.length < 1) {\r\n        return noColorMap;\r\n    }\r\n    if (isNodeArray(colors)) {\r\n        return createMapFromNodes(colors, scale, ensureMixer(mixer), colorCombination);\r\n    }\r\n    else {\r\n        return createMapFromArray(colors, scale, ensureMixer(mixer), colorCombination);\r\n    }\r\n}\r\nfunction createOpacityMap(opacities, scale, mixer) {\r\n    if (!Array.isArray(opacities) || opacities.length < 1) {\r\n        return noOpacityMap;\r\n    }\r\n    if (isNodeArray(opacities)) {\r\n        return createMapFromNodes(opacities, scale, ensureMixer(mixer), opacityCombination);\r\n    }\r\n    else {\r\n        return createMapFromArray(opacities, scale, ensureMixer(mixer), opacityCombination);\r\n    }\r\n}\r\nfunction createColorOpacityMap(colorMap, opacityMap) {\r\n    return function (value) {\r\n        return colorMap(value).concat(opacityMap(value));\r\n    };\r\n}\r\nfunction createMapFromNodes(nodes, scale, mixer, linearCombination) {\r\n    const sortedNodes = nodes.sort((a, b) => a.value < b.value ? -1 : 1);\r\n    return function (value) {\r\n        const scaledValue = scale(value);\r\n        const index = findIndex(sortedNodes, scaledValue, 0, sortedNodes.length - 1);\r\n        if (index == 0 && scaledValue < sortedNodes[0].value) {\r\n            return sortedNodes[index].mapped;\r\n        }\r\n        else if (index == sortedNodes.length - 1) {\r\n            return sortedNodes[index].mapped;\r\n        }\r\n        const [coeff0, coeff1] = mixer(scaledValue, sortedNodes[index].value, sortedNodes[index + 1].value);\r\n        return linearCombination(coeff0, sortedNodes[index].mapped, coeff1, sortedNodes[index + 1].mapped);\r\n    };\r\n}\r\nfunction createMapFromArray(arr, scale, mixer, linearCombination) {\r\n    return function (value) {\r\n        const scaledValue = scale(value);\r\n        const indexFloat = (arr.length - 1) * scaledValue;\r\n        if (indexFloat <= 0) {\r\n            return arr[0];\r\n        }\r\n        else if (indexFloat >= arr.length - 1) {\r\n            return arr[arr.length - 1];\r\n        }\r\n        const index = Math.floor(indexFloat);\r\n        const [coeff0, coeff1] = mixer(indexFloat, index, index + 1);\r\n        return linearCombination(coeff0, arr[index], coeff1, arr[index + 1]);\r\n    };\r\n}\r\nfunction noColorMap(_value) {\r\n    return [0, 0, 0];\r\n}\r\nfunction noOpacityMap(_value) {\r\n    return 1;\r\n}\n\nfunction linearScale(domain, range) {\r\n    let [d0, d1] = domain;\r\n    const [r0, r1] = range;\r\n    if (Math.abs(d0 - d1) < Number.EPSILON) {\r\n        d1 = d0 + 1;\r\n    }\r\n    return function (value) {\r\n        return r0 + (r1 - r0) * ((value - d0) / (d1 - d0));\r\n    };\r\n}\n\nexport { ceilMixer, createColorMap, createColorOpacityMap, createOpacityMap, floorMixer, linearMixer, linearScale, roundMixer };\n","const colors = [\r\n    [0, 0, 0],\r\n    [1, 1, 1]\r\n];\n\nconst colors$1 = [\r\n    [0.0, 0.135112, 0.304751],\r\n    [0.0, 0.138068, 0.311105],\r\n    [0.0, 0.141013, 0.317579],\r\n    [0.0, 0.143951, 0.323982],\r\n    [0.0, 0.146877, 0.330479],\r\n    [0.0, 0.149791, 0.337065],\r\n    [0.0, 0.152673, 0.343704],\r\n    [0.0, 0.155377, 0.3505],\r\n    [0.0, 0.157932, 0.357521],\r\n    [0.0, 0.160495, 0.364534],\r\n    [0.0, 0.163058, 0.371608],\r\n    [0.0, 0.165621, 0.378769],\r\n    [0.0, 0.168204, 0.385902],\r\n    [0.0, 0.1708, 0.3931],\r\n    [0.0, 0.17342, 0.400353],\r\n    [0.0, 0.176082, 0.407577],\r\n    [0.0, 0.178802, 0.414764],\r\n    [0.0, 0.18161, 0.421859],\r\n    [0.0, 0.18455, 0.428802],\r\n    [0.0, 0.186915, 0.435532],\r\n    [0.0, 0.188769, 0.439563],\r\n    [0.0, 0.19095, 0.441085],\r\n    [0.0, 0.193366, 0.441561],\r\n    [0.003602, 0.195911, 0.441564],\r\n    [0.017852, 0.198528, 0.441248],\r\n    [0.03211, 0.201199, 0.440785],\r\n    [0.046205, 0.203903, 0.440196],\r\n    [0.058378, 0.206629, 0.439531],\r\n    [0.068968, 0.209372, 0.438863],\r\n    [0.078624, 0.212122, 0.438105],\r\n    [0.087465, 0.214879, 0.437342],\r\n    [0.095645, 0.217643, 0.436593],\r\n    [0.103401, 0.220406, 0.43579],\r\n    [0.110658, 0.22317, 0.435067],\r\n    [0.117612, 0.225935, 0.434308],\r\n    [0.124291, 0.228697, 0.433547],\r\n    [0.130669, 0.231458, 0.43284],\r\n    [0.13683, 0.234216, 0.432148],\r\n    [0.142852, 0.236972, 0.431404],\r\n    [0.148638, 0.239724, 0.430752],\r\n    [0.154261, 0.242475, 0.43012],\r\n    [0.159733, 0.245221, 0.429528],\r\n    [0.165113, 0.247965, 0.428908],\r\n    [0.170362, 0.250707, 0.428325],\r\n    [0.17549, 0.253444, 0.42779],\r\n    [0.180503, 0.25618, 0.427299],\r\n    [0.185453, 0.258914, 0.426788],\r\n    [0.190303, 0.261644, 0.426329],\r\n    [0.195057, 0.264372, 0.425924],\r\n    [0.199764, 0.267099, 0.425497],\r\n    [0.204385, 0.269823, 0.425126],\r\n    [0.208926, 0.272546, 0.424809],\r\n    [0.213431, 0.275266, 0.42448],\r\n    [0.217863, 0.277985, 0.424206],\r\n    [0.222264, 0.280702, 0.423914],\r\n    [0.226598, 0.283419, 0.423678],\r\n    [0.230871, 0.286134, 0.423498],\r\n    [0.23512, 0.288848, 0.423304],\r\n    [0.239312, 0.291562, 0.423167],\r\n    [0.243485, 0.294274, 0.423014],\r\n    [0.247605, 0.296986, 0.422917],\r\n    [0.251675, 0.299698, 0.422873],\r\n    [0.255731, 0.302409, 0.422814],\r\n    [0.25974, 0.30512, 0.42281],\r\n    [0.263738, 0.307831, 0.422789],\r\n    [0.267693, 0.310542, 0.422821],\r\n    [0.271639, 0.313253, 0.422837],\r\n    [0.275513, 0.315965, 0.422979],\r\n    [0.279411, 0.318677, 0.423031],\r\n    [0.28324, 0.32139, 0.423211],\r\n    [0.287065, 0.324103, 0.423373],\r\n    [0.290884, 0.326816, 0.423517],\r\n    [0.294669, 0.329531, 0.423716],\r\n    [0.298421, 0.332247, 0.423973],\r\n    [0.302169, 0.334963, 0.424213],\r\n    [0.305886, 0.337681, 0.424512],\r\n    [0.309601, 0.340399, 0.42479],\r\n    [0.313287, 0.34312, 0.42512],\r\n    [0.316941, 0.345842, 0.425512],\r\n    [0.320595, 0.348565, 0.425889],\r\n    [0.32425, 0.351289, 0.42625],\r\n    [0.327875, 0.354016, 0.42667],\r\n    [0.331474, 0.356744, 0.427144],\r\n    [0.335073, 0.359474, 0.427605],\r\n    [0.338673, 0.362206, 0.428053],\r\n    [0.342246, 0.364939, 0.428559],\r\n    [0.345793, 0.367676, 0.429127],\r\n    [0.349341, 0.370414, 0.429685],\r\n    [0.352892, 0.373153, 0.430226],\r\n    [0.356418, 0.375896, 0.430823],\r\n    [0.359916, 0.378641, 0.431501],\r\n    [0.363446, 0.381388, 0.432075],\r\n    [0.366923, 0.384139, 0.432796],\r\n    [0.37043, 0.38689, 0.433428],\r\n    [0.373884, 0.389646, 0.434209],\r\n    [0.377371, 0.392404, 0.43489],\r\n    [0.38083, 0.395164, 0.435653],\r\n    [0.384268, 0.397928, 0.436475],\r\n    [0.387705, 0.400694, 0.437305],\r\n    [0.391151, 0.403464, 0.438096],\r\n    [0.394568, 0.406236, 0.438986],\r\n    [0.397991, 0.409011, 0.439848],\r\n    [0.401418, 0.41179, 0.440708],\r\n    [0.40482, 0.414572, 0.441642],\r\n    [0.408226, 0.417357, 0.44257],\r\n    [0.411607, 0.420145, 0.443577],\r\n    [0.414992, 0.422937, 0.444578],\r\n    [0.418383, 0.425733, 0.44556],\r\n    [0.421748, 0.428531, 0.44664],\r\n    [0.42512, 0.431334, 0.447692],\r\n    [0.428462, 0.43414, 0.448864],\r\n    [0.431817, 0.43695, 0.449982],\r\n    [0.435168, 0.439763, 0.451134],\r\n    [0.438504, 0.44258, 0.452341],\r\n    [0.44181, 0.445402, 0.453659],\r\n    [0.445148, 0.448226, 0.454885],\r\n    [0.448447, 0.451053, 0.456264],\r\n    [0.451759, 0.453887, 0.457582],\r\n    [0.455072, 0.456718, 0.458976],\r\n    [0.458366, 0.459552, 0.460457],\r\n    [0.461616, 0.462405, 0.461969],\r\n    [0.464947, 0.465241, 0.463395],\r\n    [0.468254, 0.468083, 0.464908],\r\n    [0.471501, 0.47096, 0.466357],\r\n    [0.474812, 0.473832, 0.467681],\r\n    [0.478186, 0.476699, 0.468845],\r\n    [0.481622, 0.479573, 0.469767],\r\n    [0.485141, 0.482451, 0.470384],\r\n    [0.488697, 0.485318, 0.471008],\r\n    [0.492278, 0.488198, 0.471453],\r\n    [0.495913, 0.491076, 0.471751],\r\n    [0.499552, 0.49396, 0.472032],\r\n    [0.503185, 0.496851, 0.472305],\r\n    [0.506866, 0.499743, 0.472432],\r\n    [0.51054, 0.502643, 0.47255],\r\n    [0.514226, 0.505546, 0.47264],\r\n    [0.51792, 0.508454, 0.472707],\r\n    [0.521643, 0.511367, 0.472639],\r\n    [0.525348, 0.514285, 0.47266],\r\n    [0.529086, 0.517207, 0.472543],\r\n    [0.532829, 0.520135, 0.472401],\r\n    [0.536553, 0.523067, 0.472352],\r\n    [0.540307, 0.526005, 0.472163],\r\n    [0.544069, 0.528948, 0.471947],\r\n    [0.54784, 0.531895, 0.471704],\r\n    [0.551612, 0.534849, 0.471439],\r\n    [0.555393, 0.537807, 0.471147],\r\n    [0.559181, 0.540771, 0.470829],\r\n    [0.562972, 0.543741, 0.470488],\r\n    [0.566802, 0.546715, 0.469988],\r\n    [0.570607, 0.549695, 0.469593],\r\n    [0.574417, 0.552682, 0.469172],\r\n    [0.578236, 0.555673, 0.468724],\r\n    [0.582087, 0.55867, 0.468118],\r\n    [0.585916, 0.561674, 0.467618],\r\n    [0.589753, 0.564682, 0.46709],\r\n    [0.593622, 0.567697, 0.466401],\r\n    [0.597469, 0.570718, 0.465821],\r\n    [0.601354, 0.573743, 0.465074],\r\n    [0.605211, 0.576777, 0.464441],\r\n    [0.609105, 0.579816, 0.463638],\r\n    [0.612977, 0.582861, 0.46295],\r\n    [0.616852, 0.585913, 0.462237],\r\n    [0.620765, 0.58897, 0.461351],\r\n    [0.624654, 0.592034, 0.460583],\r\n    [0.628576, 0.595104, 0.459641],\r\n    [0.632506, 0.59818, 0.458668],\r\n    [0.636412, 0.601264, 0.457818],\r\n    [0.640352, 0.604354, 0.456791],\r\n    [0.64427, 0.60745, 0.455886],\r\n    [0.648222, 0.610553, 0.454801],\r\n    [0.652178, 0.613664, 0.453689],\r\n    [0.656114, 0.61678, 0.452702],\r\n    [0.660082, 0.619904, 0.451534],\r\n    [0.664055, 0.623034, 0.450338],\r\n    [0.668008, 0.626171, 0.44927],\r\n    [0.671991, 0.629316, 0.448018],\r\n    [0.675981, 0.632468, 0.446736],\r\n    [0.679979, 0.635626, 0.445424],\r\n    [0.68395, 0.638793, 0.444251],\r\n    [0.687957, 0.641966, 0.442886],\r\n    [0.691971, 0.645145, 0.441491],\r\n    [0.695985, 0.648334, 0.440072],\r\n    [0.700008, 0.651529, 0.438624],\r\n    [0.704037, 0.654731, 0.437147],\r\n    [0.708067, 0.657942, 0.435647],\r\n    [0.712105, 0.66116, 0.434117],\r\n    [0.716177, 0.664384, 0.432386],\r\n    [0.720222, 0.667618, 0.430805],\r\n    [0.724274, 0.670859, 0.429194],\r\n    [0.728334, 0.674107, 0.427554],\r\n    [0.732422, 0.677364, 0.425717],\r\n    [0.736488, 0.680629, 0.424028],\r\n    [0.740589, 0.6839, 0.422131],\r\n    [0.744664, 0.687181, 0.420393],\r\n    [0.748772, 0.69047, 0.418448],\r\n    [0.752886, 0.693766, 0.416472],\r\n    [0.756975, 0.697071, 0.414659],\r\n    [0.761096, 0.700384, 0.412638],\r\n    [0.765223, 0.703705, 0.410587],\r\n    [0.769353, 0.707035, 0.408516],\r\n    [0.773486, 0.710373, 0.406422],\r\n    [0.777651, 0.713719, 0.404112],\r\n    [0.781795, 0.717074, 0.401966],\r\n    [0.785965, 0.720438, 0.399613],\r\n    [0.790116, 0.72381, 0.397423],\r\n    [0.794298, 0.72719, 0.395016],\r\n    [0.79848, 0.73058, 0.392597],\r\n    [0.802667, 0.733978, 0.390153],\r\n    [0.806859, 0.737385, 0.387684],\r\n    [0.811054, 0.740801, 0.385198],\r\n    [0.815274, 0.744226, 0.382504],\r\n    [0.819499, 0.747659, 0.379785],\r\n    [0.823729, 0.751101, 0.377043],\r\n    [0.827959, 0.754553, 0.374292],\r\n    [0.832192, 0.758014, 0.371529],\r\n    [0.836429, 0.761483, 0.368747],\r\n    [0.840693, 0.764962, 0.365746],\r\n    [0.844957, 0.76845, 0.362741],\r\n    [0.849223, 0.771947, 0.359729],\r\n    [0.853515, 0.775454, 0.3565],\r\n    [0.857809, 0.778969, 0.353259],\r\n    [0.862105, 0.782494, 0.350011],\r\n    [0.866421, 0.786028, 0.346571],\r\n    [0.870717, 0.789572, 0.343333],\r\n    [0.875057, 0.793125, 0.339685],\r\n    [0.879378, 0.796687, 0.336241],\r\n    [0.88372, 0.800258, 0.332599],\r\n    [0.888081, 0.803839, 0.32877],\r\n    [0.89244, 0.80743, 0.324968],\r\n    [0.896818, 0.81103, 0.320982],\r\n    [0.901195, 0.814639, 0.317021],\r\n    [0.905589, 0.818257, 0.312889],\r\n    [0.91, 0.821885, 0.308594],\r\n    [0.914407, 0.825522, 0.304348],\r\n    [0.918828, 0.829168, 0.29996],\r\n    [0.923279, 0.832822, 0.295244],\r\n    [0.927724, 0.836486, 0.290611],\r\n    [0.93218, 0.840159, 0.28588],\r\n    [0.93666, 0.843841, 0.280876],\r\n    [0.941147, 0.84753, 0.275815],\r\n    [0.945654, 0.851228, 0.270532],\r\n    [0.950178, 0.854933, 0.265085],\r\n    [0.954725, 0.858646, 0.259365],\r\n    [0.959284, 0.862365, 0.253563],\r\n    [0.963872, 0.866089, 0.247445],\r\n    [0.968469, 0.869819, 0.24131],\r\n    [0.973114, 0.87355, 0.234677],\r\n    [0.97778, 0.877281, 0.227954],\r\n    [0.982497, 0.881008, 0.220878],\r\n    [0.987293, 0.884718, 0.213336],\r\n    [0.992218, 0.888385, 0.205468],\r\n    [0.994847, 0.892954, 0.203445],\r\n    [0.995249, 0.898384, 0.207561],\r\n    [0.995503, 0.903866, 0.21237],\r\n    [0.995737, 0.909344, 0.217772]\r\n];\n\nconst colors$2 = [\r\n    [0.001462, 0.000466, 0.013866],\r\n    [0.002267, 0.00127, 0.01857],\r\n    [0.003299, 0.002249, 0.024239],\r\n    [0.004547, 0.003392, 0.030909],\r\n    [0.006006, 0.004692, 0.038558],\r\n    [0.007676, 0.006136, 0.046836],\r\n    [0.009561, 0.007713, 0.055143],\r\n    [0.011663, 0.009417, 0.06346],\r\n    [0.013995, 0.011225, 0.071862],\r\n    [0.016561, 0.013136, 0.080282],\r\n    [0.019373, 0.015133, 0.088767],\r\n    [0.022447, 0.017199, 0.097327],\r\n    [0.025793, 0.019331, 0.10593],\r\n    [0.029432, 0.021503, 0.114621],\r\n    [0.033385, 0.023702, 0.123397],\r\n    [0.037668, 0.025921, 0.132232],\r\n    [0.042253, 0.028139, 0.141141],\r\n    [0.046915, 0.030324, 0.150164],\r\n    [0.051644, 0.032474, 0.159254],\r\n    [0.056449, 0.034569, 0.168414],\r\n    [0.06134, 0.03659, 0.177642],\r\n    [0.066331, 0.038504, 0.186962],\r\n    [0.071429, 0.040294, 0.196354],\r\n    [0.076637, 0.041905, 0.205799],\r\n    [0.081962, 0.043328, 0.215289],\r\n    [0.087411, 0.044556, 0.224813],\r\n    [0.09299, 0.045583, 0.234358],\r\n    [0.098702, 0.046402, 0.243904],\r\n    [0.104551, 0.047008, 0.25343],\r\n    [0.110536, 0.047399, 0.262912],\r\n    [0.116656, 0.047574, 0.272321],\r\n    [0.122908, 0.047536, 0.281624],\r\n    [0.129285, 0.047293, 0.290788],\r\n    [0.135778, 0.046856, 0.299776],\r\n    [0.142378, 0.046242, 0.308553],\r\n    [0.149073, 0.045468, 0.317085],\r\n    [0.15585, 0.044559, 0.325338],\r\n    [0.162689, 0.043554, 0.333277],\r\n    [0.169575, 0.042489, 0.340874],\r\n    [0.176493, 0.041402, 0.348111],\r\n    [0.183429, 0.040329, 0.354971],\r\n    [0.190367, 0.039309, 0.361447],\r\n    [0.197297, 0.0384, 0.367535],\r\n    [0.204209, 0.037632, 0.373238],\r\n    [0.211095, 0.03703, 0.378563],\r\n    [0.217949, 0.036615, 0.383522],\r\n    [0.224763, 0.036405, 0.388129],\r\n    [0.231538, 0.036405, 0.3924],\r\n    [0.238273, 0.036621, 0.396353],\r\n    [0.244967, 0.037055, 0.400007],\r\n    [0.25162, 0.037705, 0.403378],\r\n    [0.258234, 0.038571, 0.406485],\r\n    [0.26481, 0.039647, 0.409345],\r\n    [0.271347, 0.040922, 0.411976],\r\n    [0.27785, 0.042353, 0.414392],\r\n    [0.284321, 0.043933, 0.416608],\r\n    [0.290763, 0.045644, 0.418637],\r\n    [0.297178, 0.04747, 0.420491],\r\n    [0.303568, 0.049396, 0.422182],\r\n    [0.309935, 0.051407, 0.423721],\r\n    [0.316282, 0.05349, 0.425116],\r\n    [0.32261, 0.055634, 0.426377],\r\n    [0.328921, 0.057827, 0.427511],\r\n    [0.335217, 0.06006, 0.428524],\r\n    [0.3415, 0.062325, 0.429425],\r\n    [0.347771, 0.064616, 0.430217],\r\n    [0.354032, 0.066925, 0.430906],\r\n    [0.360284, 0.069247, 0.431497],\r\n    [0.366529, 0.071579, 0.431994],\r\n    [0.372768, 0.073915, 0.4324],\r\n    [0.379001, 0.076253, 0.432719],\r\n    [0.385228, 0.078591, 0.432955],\r\n    [0.391453, 0.080927, 0.433109],\r\n    [0.397674, 0.083257, 0.433183],\r\n    [0.403894, 0.08558, 0.433179],\r\n    [0.410113, 0.087896, 0.433098],\r\n    [0.416331, 0.090203, 0.432943],\r\n    [0.422549, 0.092501, 0.432714],\r\n    [0.428768, 0.09479, 0.432412],\r\n    [0.434987, 0.097069, 0.432039],\r\n    [0.441207, 0.099338, 0.431594],\r\n    [0.447428, 0.101597, 0.43108],\r\n    [0.453651, 0.103848, 0.430498],\r\n    [0.459875, 0.106089, 0.429846],\r\n    [0.4661, 0.108322, 0.429125],\r\n    [0.472328, 0.110547, 0.428334],\r\n    [0.478558, 0.112764, 0.427475],\r\n    [0.484789, 0.114974, 0.426548],\r\n    [0.491022, 0.117179, 0.425552],\r\n    [0.497257, 0.119379, 0.424488],\r\n    [0.503493, 0.121575, 0.423356],\r\n    [0.50973, 0.123769, 0.422156],\r\n    [0.515967, 0.12596, 0.420887],\r\n    [0.522206, 0.12815, 0.419549],\r\n    [0.528444, 0.130341, 0.418142],\r\n    [0.534683, 0.132534, 0.416667],\r\n    [0.54092, 0.134729, 0.415123],\r\n    [0.547157, 0.136929, 0.413511],\r\n    [0.553392, 0.139134, 0.411829],\r\n    [0.559624, 0.141346, 0.410078],\r\n    [0.565854, 0.143567, 0.408258],\r\n    [0.572081, 0.145797, 0.406369],\r\n    [0.578304, 0.148039, 0.404411],\r\n    [0.584521, 0.150294, 0.402385],\r\n    [0.590734, 0.152563, 0.40029],\r\n    [0.59694, 0.154848, 0.398125],\r\n    [0.603139, 0.157151, 0.395891],\r\n    [0.60933, 0.159474, 0.393589],\r\n    [0.615513, 0.161817, 0.391219],\r\n    [0.621685, 0.164184, 0.388781],\r\n    [0.627847, 0.166575, 0.386276],\r\n    [0.633998, 0.168992, 0.383704],\r\n    [0.640135, 0.171438, 0.381065],\r\n    [0.64626, 0.173914, 0.378359],\r\n    [0.652369, 0.176421, 0.375586],\r\n    [0.658463, 0.178962, 0.372748],\r\n    [0.66454, 0.181539, 0.369846],\r\n    [0.670599, 0.184153, 0.366879],\r\n    [0.676638, 0.186807, 0.363849],\r\n    [0.682656, 0.189501, 0.360757],\r\n    [0.688653, 0.192239, 0.357603],\r\n    [0.694627, 0.195021, 0.354388],\r\n    [0.700576, 0.197851, 0.351113],\r\n    [0.7065, 0.200728, 0.347777],\r\n    [0.712396, 0.203656, 0.344383],\r\n    [0.718264, 0.206636, 0.340931],\r\n    [0.724103, 0.20967, 0.337424],\r\n    [0.729909, 0.212759, 0.333861],\r\n    [0.735683, 0.215906, 0.330245],\r\n    [0.741423, 0.219112, 0.326576],\r\n    [0.747127, 0.222378, 0.322856],\r\n    [0.752794, 0.225706, 0.319085],\r\n    [0.758422, 0.229097, 0.315266],\r\n    [0.76401, 0.232554, 0.311399],\r\n    [0.769556, 0.236077, 0.307485],\r\n    [0.775059, 0.239667, 0.303526],\r\n    [0.780517, 0.243327, 0.299523],\r\n    [0.785929, 0.247056, 0.295477],\r\n    [0.791293, 0.250856, 0.29139],\r\n    [0.796607, 0.254728, 0.287264],\r\n    [0.801871, 0.258674, 0.283099],\r\n    [0.807082, 0.262692, 0.278898],\r\n    [0.812239, 0.266786, 0.274661],\r\n    [0.817341, 0.270954, 0.27039],\r\n    [0.822386, 0.275197, 0.266085],\r\n    [0.827372, 0.279517, 0.26175],\r\n    [0.832299, 0.283913, 0.257383],\r\n    [0.837165, 0.288385, 0.252988],\r\n    [0.841969, 0.292933, 0.248564],\r\n    [0.846709, 0.297559, 0.244113],\r\n    [0.851384, 0.30226, 0.239636],\r\n    [0.855992, 0.307038, 0.235133],\r\n    [0.860533, 0.311892, 0.230606],\r\n    [0.865006, 0.316822, 0.226055],\r\n    [0.869409, 0.321827, 0.221482],\r\n    [0.873741, 0.326906, 0.216886],\r\n    [0.878001, 0.33206, 0.212268],\r\n    [0.882188, 0.337287, 0.207628],\r\n    [0.886302, 0.342586, 0.202968],\r\n    [0.890341, 0.347957, 0.198286],\r\n    [0.894305, 0.353399, 0.193584],\r\n    [0.898192, 0.358911, 0.18886],\r\n    [0.902003, 0.364492, 0.184116],\r\n    [0.905735, 0.37014, 0.17935],\r\n    [0.90939, 0.375856, 0.174563],\r\n    [0.912966, 0.381636, 0.169755],\r\n    [0.916462, 0.387481, 0.164924],\r\n    [0.919879, 0.393389, 0.16007],\r\n    [0.923215, 0.399359, 0.155193],\r\n    [0.92647, 0.405389, 0.150292],\r\n    [0.929644, 0.411479, 0.145367],\r\n    [0.932737, 0.417627, 0.140417],\r\n    [0.935747, 0.423831, 0.13544],\r\n    [0.938675, 0.430091, 0.130438],\r\n    [0.941521, 0.436405, 0.125409],\r\n    [0.944285, 0.442772, 0.120354],\r\n    [0.946965, 0.449191, 0.115272],\r\n    [0.949562, 0.45566, 0.110164],\r\n    [0.952075, 0.462178, 0.105031],\r\n    [0.954506, 0.468744, 0.099874],\r\n    [0.956852, 0.475356, 0.094695],\r\n    [0.959114, 0.482014, 0.089499],\r\n    [0.961293, 0.488716, 0.084289],\r\n    [0.963387, 0.495462, 0.079073],\r\n    [0.965397, 0.502249, 0.073859],\r\n    [0.967322, 0.509078, 0.068659],\r\n    [0.969163, 0.515946, 0.063488],\r\n    [0.970919, 0.522853, 0.058367],\r\n    [0.97259, 0.529798, 0.053324],\r\n    [0.974176, 0.53678, 0.048392],\r\n    [0.975677, 0.543798, 0.043618],\r\n    [0.977092, 0.55085, 0.03905],\r\n    [0.978422, 0.557937, 0.034931],\r\n    [0.979666, 0.565057, 0.031409],\r\n    [0.980824, 0.572209, 0.028508],\r\n    [0.981895, 0.579392, 0.02625],\r\n    [0.982881, 0.586606, 0.024661],\r\n    [0.983779, 0.593849, 0.02377],\r\n    [0.984591, 0.601122, 0.023606],\r\n    [0.985315, 0.608422, 0.024202],\r\n    [0.985952, 0.61575, 0.025592],\r\n    [0.986502, 0.623105, 0.027814],\r\n    [0.986964, 0.630485, 0.030908],\r\n    [0.987337, 0.63789, 0.034916],\r\n    [0.987622, 0.64532, 0.039886],\r\n    [0.987819, 0.652773, 0.045581],\r\n    [0.987926, 0.66025, 0.05175],\r\n    [0.987945, 0.667748, 0.058329],\r\n    [0.987874, 0.675267, 0.065257],\r\n    [0.987714, 0.682807, 0.072489],\r\n    [0.987464, 0.690366, 0.07999],\r\n    [0.987124, 0.697944, 0.087731],\r\n    [0.986694, 0.70554, 0.095694],\r\n    [0.986175, 0.713153, 0.103863],\r\n    [0.985566, 0.720782, 0.112229],\r\n    [0.984865, 0.728427, 0.120785],\r\n    [0.984075, 0.736087, 0.129527],\r\n    [0.983196, 0.743758, 0.138453],\r\n    [0.982228, 0.751442, 0.147565],\r\n    [0.981173, 0.759135, 0.156863],\r\n    [0.980032, 0.766837, 0.166353],\r\n    [0.978806, 0.774545, 0.176037],\r\n    [0.977497, 0.782258, 0.185923],\r\n    [0.976108, 0.789974, 0.196018],\r\n    [0.974638, 0.797692, 0.206332],\r\n    [0.973088, 0.805409, 0.216877],\r\n    [0.971468, 0.813122, 0.227658],\r\n    [0.969783, 0.820825, 0.238686],\r\n    [0.968041, 0.828515, 0.249972],\r\n    [0.966243, 0.836191, 0.261534],\r\n    [0.964394, 0.843848, 0.273391],\r\n    [0.962517, 0.851476, 0.285546],\r\n    [0.960626, 0.859069, 0.29801],\r\n    [0.95872, 0.866624, 0.31082],\r\n    [0.956834, 0.874129, 0.323974],\r\n    [0.954997, 0.881569, 0.337475],\r\n    [0.953215, 0.888942, 0.351369],\r\n    [0.951546, 0.896226, 0.365627],\r\n    [0.950018, 0.903409, 0.380271],\r\n    [0.948683, 0.910473, 0.395289],\r\n    [0.947594, 0.917399, 0.410665],\r\n    [0.946809, 0.924168, 0.426373],\r\n    [0.946392, 0.930761, 0.442367],\r\n    [0.946403, 0.937159, 0.458592],\r\n    [0.946903, 0.943348, 0.47497],\r\n    [0.947937, 0.949318, 0.491426],\r\n    [0.949545, 0.955063, 0.50786],\r\n    [0.95174, 0.960587, 0.524203],\r\n    [0.954529, 0.965896, 0.540361],\r\n    [0.957896, 0.971003, 0.556275],\r\n    [0.961812, 0.975924, 0.571925],\r\n    [0.966249, 0.980678, 0.587206],\r\n    [0.971162, 0.985282, 0.602154],\r\n    [0.976511, 0.989753, 0.61676],\r\n    [0.982257, 0.994109, 0.631017],\r\n    [0.988362, 0.998364, 0.644924]\r\n];\n\nconst colors$3 = [\r\n    [0.001462, 0.000466, 0.013866],\r\n    [0.002258, 0.001295, 0.018331],\r\n    [0.003279, 0.002305, 0.023708],\r\n    [0.004512, 0.00349, 0.029965],\r\n    [0.00595, 0.004843, 0.03713],\r\n    [0.007588, 0.006356, 0.044973],\r\n    [0.009426, 0.008022, 0.052844],\r\n    [0.011465, 0.009828, 0.06075],\r\n    [0.013708, 0.011771, 0.068667],\r\n    [0.016156, 0.01384, 0.076603],\r\n    [0.018815, 0.016026, 0.084584],\r\n    [0.021692, 0.01832, 0.09261],\r\n    [0.024792, 0.020715, 0.100676],\r\n    [0.028123, 0.023201, 0.108787],\r\n    [0.031696, 0.025765, 0.116965],\r\n    [0.03552, 0.028397, 0.125209],\r\n    [0.039608, 0.03109, 0.133515],\r\n    [0.04383, 0.03383, 0.141886],\r\n    [0.048062, 0.036607, 0.150327],\r\n    [0.05232, 0.039407, 0.158841],\r\n    [0.056615, 0.04216, 0.167446],\r\n    [0.060949, 0.044794, 0.176129],\r\n    [0.06533, 0.047318, 0.184892],\r\n    [0.069764, 0.049726, 0.193735],\r\n    [0.074257, 0.052017, 0.20266],\r\n    [0.078815, 0.054184, 0.211667],\r\n    [0.083446, 0.056225, 0.220755],\r\n    [0.088155, 0.058133, 0.229922],\r\n    [0.092949, 0.059904, 0.239164],\r\n    [0.097833, 0.061531, 0.248477],\r\n    [0.102815, 0.06301, 0.257854],\r\n    [0.107899, 0.064335, 0.267289],\r\n    [0.113094, 0.065492, 0.276784],\r\n    [0.118405, 0.066479, 0.286321],\r\n    [0.123833, 0.067295, 0.295879],\r\n    [0.12938, 0.067935, 0.305443],\r\n    [0.135053, 0.068391, 0.315],\r\n    [0.140858, 0.068654, 0.324538],\r\n    [0.146785, 0.068738, 0.334011],\r\n    [0.152839, 0.068637, 0.343404],\r\n    [0.159018, 0.068354, 0.352688],\r\n    [0.165308, 0.067911, 0.361816],\r\n    [0.171713, 0.067305, 0.370771],\r\n    [0.178212, 0.066576, 0.379497],\r\n    [0.184801, 0.065732, 0.387973],\r\n    [0.19146, 0.064818, 0.396152],\r\n    [0.198177, 0.063862, 0.404009],\r\n    [0.204935, 0.062907, 0.411514],\r\n    [0.211718, 0.061992, 0.418647],\r\n    [0.218512, 0.061158, 0.425392],\r\n    [0.225302, 0.060445, 0.431742],\r\n    [0.232077, 0.059889, 0.437695],\r\n    [0.238826, 0.059517, 0.443256],\r\n    [0.245543, 0.059352, 0.448436],\r\n    [0.25222, 0.059415, 0.453248],\r\n    [0.258857, 0.059706, 0.45771],\r\n    [0.265447, 0.060237, 0.46184],\r\n    [0.271994, 0.060994, 0.46566],\r\n    [0.278493, 0.061978, 0.46919],\r\n    [0.284951, 0.063168, 0.472451],\r\n    [0.291366, 0.064553, 0.475462],\r\n    [0.29774, 0.066117, 0.478243],\r\n    [0.304081, 0.067835, 0.480812],\r\n    [0.310382, 0.069702, 0.483186],\r\n    [0.316654, 0.07169, 0.48538],\r\n    [0.322899, 0.073782, 0.487408],\r\n    [0.329114, 0.075972, 0.489287],\r\n    [0.335308, 0.078236, 0.491024],\r\n    [0.341482, 0.080564, 0.492631],\r\n    [0.347636, 0.082946, 0.494121],\r\n    [0.353773, 0.085373, 0.495501],\r\n    [0.359898, 0.087831, 0.496778],\r\n    [0.366012, 0.090314, 0.49796],\r\n    [0.372116, 0.092816, 0.499053],\r\n    [0.378211, 0.095332, 0.500067],\r\n    [0.384299, 0.097855, 0.501002],\r\n    [0.390384, 0.100379, 0.501864],\r\n    [0.396467, 0.102902, 0.502658],\r\n    [0.402548, 0.10542, 0.503386],\r\n    [0.408629, 0.10793, 0.504052],\r\n    [0.414709, 0.110431, 0.504662],\r\n    [0.420791, 0.11292, 0.505215],\r\n    [0.426877, 0.115395, 0.505714],\r\n    [0.432967, 0.117855, 0.50616],\r\n    [0.439062, 0.120298, 0.506555],\r\n    [0.445163, 0.122724, 0.506901],\r\n    [0.451271, 0.125132, 0.507198],\r\n    [0.457386, 0.127522, 0.507448],\r\n    [0.463508, 0.129893, 0.507652],\r\n    [0.46964, 0.132245, 0.507809],\r\n    [0.47578, 0.134577, 0.507921],\r\n    [0.481929, 0.136891, 0.507989],\r\n    [0.488088, 0.139186, 0.508011],\r\n    [0.494258, 0.141462, 0.507988],\r\n    [0.500438, 0.143719, 0.50792],\r\n    [0.506629, 0.145958, 0.507806],\r\n    [0.512831, 0.148179, 0.507648],\r\n    [0.519045, 0.150383, 0.507443],\r\n    [0.52527, 0.152569, 0.507192],\r\n    [0.531507, 0.154739, 0.506895],\r\n    [0.537755, 0.156894, 0.506551],\r\n    [0.544015, 0.159033, 0.506159],\r\n    [0.550287, 0.161158, 0.505719],\r\n    [0.556571, 0.163269, 0.50523],\r\n    [0.562866, 0.165368, 0.504692],\r\n    [0.569172, 0.167454, 0.504105],\r\n    [0.57549, 0.16953, 0.503466],\r\n    [0.581819, 0.171596, 0.502777],\r\n    [0.588158, 0.173652, 0.502035],\r\n    [0.594508, 0.175701, 0.501241],\r\n    [0.600868, 0.177743, 0.500394],\r\n    [0.607238, 0.179779, 0.499492],\r\n    [0.613617, 0.181811, 0.498536],\r\n    [0.620005, 0.18384, 0.497524],\r\n    [0.626401, 0.185867, 0.496456],\r\n    [0.632805, 0.187893, 0.495332],\r\n    [0.639216, 0.189921, 0.49415],\r\n    [0.645633, 0.191952, 0.49291],\r\n    [0.652056, 0.193986, 0.491611],\r\n    [0.658483, 0.196027, 0.490253],\r\n    [0.664915, 0.198075, 0.488836],\r\n    [0.671349, 0.200133, 0.487358],\r\n    [0.677786, 0.202203, 0.485819],\r\n    [0.684224, 0.204286, 0.484219],\r\n    [0.690661, 0.206384, 0.482558],\r\n    [0.697098, 0.208501, 0.480835],\r\n    [0.703532, 0.210638, 0.479049],\r\n    [0.709962, 0.212797, 0.477201],\r\n    [0.716387, 0.214982, 0.47529],\r\n    [0.722805, 0.217194, 0.473316],\r\n    [0.729216, 0.219437, 0.471279],\r\n    [0.735616, 0.221713, 0.46918],\r\n    [0.742004, 0.224025, 0.467018],\r\n    [0.748378, 0.226377, 0.464794],\r\n    [0.754737, 0.228772, 0.462509],\r\n    [0.761077, 0.231214, 0.460162],\r\n    [0.767398, 0.233705, 0.457755],\r\n    [0.773695, 0.236249, 0.455289],\r\n    [0.779968, 0.238851, 0.452765],\r\n    [0.786212, 0.241514, 0.450184],\r\n    [0.792427, 0.244242, 0.447543],\r\n    [0.798608, 0.24704, 0.444848],\r\n    [0.804752, 0.249911, 0.442102],\r\n    [0.810855, 0.252861, 0.439305],\r\n    [0.816914, 0.255895, 0.436461],\r\n    [0.822926, 0.259016, 0.433573],\r\n    [0.828886, 0.262229, 0.430644],\r\n    [0.834791, 0.26554, 0.427671],\r\n    [0.840636, 0.268953, 0.424666],\r\n    [0.846416, 0.272473, 0.421631],\r\n    [0.852126, 0.276106, 0.418573],\r\n    [0.857763, 0.279857, 0.415496],\r\n    [0.86332, 0.283729, 0.412403],\r\n    [0.868793, 0.287728, 0.409303],\r\n    [0.874176, 0.291859, 0.406205],\r\n    [0.879464, 0.296125, 0.403118],\r\n    [0.884651, 0.30053, 0.400047],\r\n    [0.889731, 0.305079, 0.397002],\r\n    [0.8947, 0.309773, 0.393995],\r\n    [0.899552, 0.314616, 0.391037],\r\n    [0.904281, 0.31961, 0.388137],\r\n    [0.908884, 0.324755, 0.385308],\r\n    [0.913354, 0.330052, 0.382563],\r\n    [0.917689, 0.3355, 0.379915],\r\n    [0.921884, 0.341098, 0.377376],\r\n    [0.925937, 0.346844, 0.374959],\r\n    [0.929845, 0.352734, 0.372677],\r\n    [0.933606, 0.358764, 0.370541],\r\n    [0.937221, 0.364929, 0.368567],\r\n    [0.940687, 0.371224, 0.366762],\r\n    [0.944006, 0.377643, 0.365136],\r\n    [0.94718, 0.384178, 0.363701],\r\n    [0.95021, 0.39082, 0.362468],\r\n    [0.953099, 0.397563, 0.361438],\r\n    [0.955849, 0.4044, 0.360619],\r\n    [0.958464, 0.411324, 0.360014],\r\n    [0.960949, 0.418323, 0.35963],\r\n    [0.96331, 0.42539, 0.359469],\r\n    [0.965549, 0.432519, 0.359529],\r\n    [0.967671, 0.439703, 0.35981],\r\n    [0.96968, 0.446936, 0.360311],\r\n    [0.971582, 0.45421, 0.36103],\r\n    [0.973381, 0.46152, 0.361965],\r\n    [0.975082, 0.468861, 0.363111],\r\n    [0.97669, 0.476226, 0.364466],\r\n    [0.97821, 0.483612, 0.366025],\r\n    [0.979645, 0.491014, 0.367783],\r\n    [0.981, 0.498428, 0.369734],\r\n    [0.982279, 0.505851, 0.371874],\r\n    [0.983485, 0.51328, 0.374198],\r\n    [0.984622, 0.520713, 0.376698],\r\n    [0.985693, 0.528148, 0.379371],\r\n    [0.9867, 0.535582, 0.38221],\r\n    [0.987646, 0.543015, 0.38521],\r\n    [0.988533, 0.550446, 0.388365],\r\n    [0.989363, 0.557873, 0.391671],\r\n    [0.990138, 0.565296, 0.395122],\r\n    [0.990871, 0.572706, 0.398714],\r\n    [0.991558, 0.580107, 0.402441],\r\n    [0.992196, 0.587502, 0.406299],\r\n    [0.992785, 0.594891, 0.410283],\r\n    [0.993326, 0.602275, 0.41439],\r\n    [0.993834, 0.609644, 0.418613],\r\n    [0.994309, 0.616999, 0.42295],\r\n    [0.994738, 0.62435, 0.427397],\r\n    [0.995122, 0.631696, 0.431951],\r\n    [0.99548, 0.639027, 0.436607],\r\n    [0.99581, 0.646344, 0.441361],\r\n    [0.996096, 0.653659, 0.446213],\r\n    [0.996341, 0.660969, 0.45116],\r\n    [0.99658, 0.668256, 0.456192],\r\n    [0.996775, 0.675541, 0.461314],\r\n    [0.996925, 0.682828, 0.466526],\r\n    [0.997077, 0.690088, 0.471811],\r\n    [0.997186, 0.697349, 0.477182],\r\n    [0.997254, 0.704611, 0.482635],\r\n    [0.997325, 0.711848, 0.488154],\r\n    [0.997351, 0.719089, 0.493755],\r\n    [0.997351, 0.726324, 0.499428],\r\n    [0.997341, 0.733545, 0.505167],\r\n    [0.997285, 0.740772, 0.510983],\r\n    [0.997228, 0.747981, 0.516859],\r\n    [0.997138, 0.75519, 0.522806],\r\n    [0.997019, 0.762398, 0.528821],\r\n    [0.996898, 0.769591, 0.534892],\r\n    [0.996727, 0.776795, 0.541039],\r\n    [0.996571, 0.783977, 0.547233],\r\n    [0.996369, 0.791167, 0.553499],\r\n    [0.996162, 0.798348, 0.55982],\r\n    [0.995932, 0.805527, 0.566202],\r\n    [0.99568, 0.812706, 0.572645],\r\n    [0.995424, 0.819875, 0.57914],\r\n    [0.995131, 0.827052, 0.585701],\r\n    [0.994851, 0.834213, 0.592307],\r\n    [0.994524, 0.841387, 0.598983],\r\n    [0.994222, 0.84854, 0.605696],\r\n    [0.993866, 0.855711, 0.612482],\r\n    [0.993545, 0.862859, 0.619299],\r\n    [0.99317, 0.870024, 0.626189],\r\n    [0.992831, 0.877168, 0.633109],\r\n    [0.99244, 0.88433, 0.640099],\r\n    [0.992089, 0.89147, 0.647116],\r\n    [0.991688, 0.898627, 0.654202],\r\n    [0.991332, 0.905763, 0.661309],\r\n    [0.99093, 0.912915, 0.668481],\r\n    [0.99057, 0.920049, 0.675675],\r\n    [0.990175, 0.927196, 0.682926],\r\n    [0.989815, 0.934329, 0.690198],\r\n    [0.989434, 0.94147, 0.697519],\r\n    [0.989077, 0.948604, 0.704863],\r\n    [0.988717, 0.955742, 0.712242],\r\n    [0.988367, 0.962878, 0.719649],\r\n    [0.988033, 0.970012, 0.727077],\r\n    [0.987691, 0.977154, 0.734536],\r\n    [0.987387, 0.984288, 0.742002],\r\n    [0.987053, 0.991438, 0.749504]\r\n];\n\nconst colors$4 = [\r\n    [0.050383, 0.029803, 0.527975],\r\n    [0.063536, 0.028426, 0.533124],\r\n    [0.075353, 0.027206, 0.538007],\r\n    [0.086222, 0.026125, 0.542658],\r\n    [0.096379, 0.025165, 0.547103],\r\n    [0.10598, 0.024309, 0.551368],\r\n    [0.115124, 0.023556, 0.555468],\r\n    [0.123903, 0.022878, 0.559423],\r\n    [0.132381, 0.022258, 0.56325],\r\n    [0.140603, 0.021687, 0.566959],\r\n    [0.148607, 0.021154, 0.570562],\r\n    [0.156421, 0.020651, 0.574065],\r\n    [0.16407, 0.020171, 0.577478],\r\n    [0.171574, 0.019706, 0.580806],\r\n    [0.17895, 0.019252, 0.584054],\r\n    [0.186213, 0.018803, 0.587228],\r\n    [0.193374, 0.018354, 0.59033],\r\n    [0.200445, 0.017902, 0.593364],\r\n    [0.207435, 0.017442, 0.596333],\r\n    [0.21435, 0.016973, 0.599239],\r\n    [0.221197, 0.016497, 0.602083],\r\n    [0.227983, 0.016007, 0.604867],\r\n    [0.234715, 0.015502, 0.607592],\r\n    [0.241396, 0.014979, 0.610259],\r\n    [0.248032, 0.014439, 0.612868],\r\n    [0.254627, 0.013882, 0.615419],\r\n    [0.261183, 0.013308, 0.617911],\r\n    [0.267703, 0.012716, 0.620346],\r\n    [0.274191, 0.012109, 0.622722],\r\n    [0.280648, 0.011488, 0.625038],\r\n    [0.287076, 0.010855, 0.627295],\r\n    [0.293478, 0.010213, 0.62949],\r\n    [0.299855, 0.009561, 0.631624],\r\n    [0.30621, 0.008902, 0.633694],\r\n    [0.312543, 0.008239, 0.6357],\r\n    [0.318856, 0.007576, 0.63764],\r\n    [0.32515, 0.006915, 0.639512],\r\n    [0.331426, 0.006261, 0.641316],\r\n    [0.337683, 0.005618, 0.643049],\r\n    [0.343925, 0.004991, 0.64471],\r\n    [0.35015, 0.004382, 0.646298],\r\n    [0.356359, 0.003798, 0.64781],\r\n    [0.362553, 0.003243, 0.649245],\r\n    [0.368733, 0.002724, 0.650601],\r\n    [0.374897, 0.002245, 0.651876],\r\n    [0.381047, 0.001814, 0.653068],\r\n    [0.387183, 0.001434, 0.654177],\r\n    [0.393304, 0.001114, 0.655199],\r\n    [0.399411, 0.000859, 0.656133],\r\n    [0.405503, 0.000678, 0.656977],\r\n    [0.41158, 0.000577, 0.65773],\r\n    [0.417642, 0.000564, 0.65839],\r\n    [0.423689, 0.000646, 0.658956],\r\n    [0.429719, 0.000831, 0.659425],\r\n    [0.435734, 0.001127, 0.659797],\r\n    [0.441732, 0.00154, 0.660069],\r\n    [0.447714, 0.00208, 0.66024],\r\n    [0.453677, 0.002755, 0.66031],\r\n    [0.459623, 0.003574, 0.660277],\r\n    [0.46555, 0.004545, 0.660139],\r\n    [0.471457, 0.005678, 0.659897],\r\n    [0.477344, 0.00698, 0.659549],\r\n    [0.48321, 0.00846, 0.659095],\r\n    [0.489055, 0.010127, 0.658534],\r\n    [0.494877, 0.01199, 0.657865],\r\n    [0.500678, 0.014055, 0.657088],\r\n    [0.506454, 0.016333, 0.656202],\r\n    [0.512206, 0.018833, 0.655209],\r\n    [0.517933, 0.021563, 0.654109],\r\n    [0.523633, 0.024532, 0.652901],\r\n    [0.529306, 0.027747, 0.651586],\r\n    [0.534952, 0.031217, 0.650165],\r\n    [0.54057, 0.03495, 0.64864],\r\n    [0.546157, 0.038954, 0.64701],\r\n    [0.551715, 0.043136, 0.645277],\r\n    [0.557243, 0.047331, 0.643443],\r\n    [0.562738, 0.051545, 0.641509],\r\n    [0.568201, 0.055778, 0.639477],\r\n    [0.573632, 0.060028, 0.637349],\r\n    [0.579029, 0.064296, 0.635126],\r\n    [0.584391, 0.068579, 0.632812],\r\n    [0.589719, 0.072878, 0.630408],\r\n    [0.595011, 0.07719, 0.627917],\r\n    [0.600266, 0.081516, 0.625342],\r\n    [0.605485, 0.085854, 0.622686],\r\n    [0.610667, 0.090204, 0.619951],\r\n    [0.615812, 0.094564, 0.61714],\r\n    [0.620919, 0.098934, 0.614257],\r\n    [0.625987, 0.103312, 0.611305],\r\n    [0.631017, 0.107699, 0.608287],\r\n    [0.636008, 0.112092, 0.605205],\r\n    [0.640959, 0.116492, 0.602065],\r\n    [0.645872, 0.120898, 0.598867],\r\n    [0.650746, 0.125309, 0.595617],\r\n    [0.65558, 0.129725, 0.592317],\r\n    [0.660374, 0.134144, 0.588971],\r\n    [0.665129, 0.138566, 0.585582],\r\n    [0.669845, 0.142992, 0.582154],\r\n    [0.674522, 0.147419, 0.578688],\r\n    [0.67916, 0.151848, 0.575189],\r\n    [0.683758, 0.156278, 0.57166],\r\n    [0.688318, 0.160709, 0.568103],\r\n    [0.69284, 0.165141, 0.564522],\r\n    [0.697324, 0.169573, 0.560919],\r\n    [0.701769, 0.174005, 0.557296],\r\n    [0.706178, 0.178437, 0.553657],\r\n    [0.710549, 0.182868, 0.550004],\r\n    [0.714883, 0.187299, 0.546338],\r\n    [0.719181, 0.191729, 0.542663],\r\n    [0.723444, 0.196158, 0.538981],\r\n    [0.72767, 0.200586, 0.535293],\r\n    [0.731862, 0.205013, 0.531601],\r\n    [0.736019, 0.209439, 0.527908],\r\n    [0.740143, 0.213864, 0.524216],\r\n    [0.744232, 0.218288, 0.520524],\r\n    [0.748289, 0.222711, 0.516834],\r\n    [0.752312, 0.227133, 0.513149],\r\n    [0.756304, 0.231555, 0.509468],\r\n    [0.760264, 0.235976, 0.505794],\r\n    [0.764193, 0.240396, 0.502126],\r\n    [0.76809, 0.244817, 0.498465],\r\n    [0.771958, 0.249237, 0.494813],\r\n    [0.775796, 0.253658, 0.491171],\r\n    [0.779604, 0.258078, 0.487539],\r\n    [0.783383, 0.2625, 0.483918],\r\n    [0.787133, 0.266922, 0.480307],\r\n    [0.790855, 0.271345, 0.476706],\r\n    [0.794549, 0.27577, 0.473117],\r\n    [0.798216, 0.280197, 0.469538],\r\n    [0.801855, 0.284626, 0.465971],\r\n    [0.805467, 0.289057, 0.462415],\r\n    [0.809052, 0.293491, 0.45887],\r\n    [0.812612, 0.297928, 0.455338],\r\n    [0.816144, 0.302368, 0.451816],\r\n    [0.819651, 0.306812, 0.448306],\r\n    [0.823132, 0.311261, 0.444806],\r\n    [0.826588, 0.315714, 0.441316],\r\n    [0.830018, 0.320172, 0.437836],\r\n    [0.833422, 0.324635, 0.434366],\r\n    [0.836801, 0.329105, 0.430905],\r\n    [0.840155, 0.33358, 0.427455],\r\n    [0.843484, 0.338062, 0.424013],\r\n    [0.846788, 0.342551, 0.420579],\r\n    [0.850066, 0.347048, 0.417153],\r\n    [0.853319, 0.351553, 0.413734],\r\n    [0.856547, 0.356066, 0.410322],\r\n    [0.85975, 0.360588, 0.406917],\r\n    [0.862927, 0.365119, 0.403519],\r\n    [0.866078, 0.36966, 0.400126],\r\n    [0.869203, 0.374212, 0.396738],\r\n    [0.872303, 0.378774, 0.393355],\r\n    [0.875376, 0.383347, 0.389976],\r\n    [0.878423, 0.387932, 0.3866],\r\n    [0.881443, 0.392529, 0.383229],\r\n    [0.884436, 0.397139, 0.37986],\r\n    [0.887402, 0.401762, 0.376494],\r\n    [0.89034, 0.406398, 0.37313],\r\n    [0.89325, 0.411048, 0.369768],\r\n    [0.896131, 0.415712, 0.366407],\r\n    [0.898984, 0.420392, 0.363047],\r\n    [0.901807, 0.425087, 0.359688],\r\n    [0.904601, 0.429797, 0.356329],\r\n    [0.907365, 0.434524, 0.35297],\r\n    [0.910098, 0.439268, 0.34961],\r\n    [0.9128, 0.444029, 0.346251],\r\n    [0.915471, 0.448807, 0.34289],\r\n    [0.918109, 0.453603, 0.339529],\r\n    [0.920714, 0.458417, 0.336166],\r\n    [0.923287, 0.463251, 0.332801],\r\n    [0.925825, 0.468103, 0.329435],\r\n    [0.928329, 0.472975, 0.326067],\r\n    [0.930798, 0.477867, 0.322697],\r\n    [0.933232, 0.48278, 0.319325],\r\n    [0.93563, 0.487712, 0.315952],\r\n    [0.93799, 0.492667, 0.312575],\r\n    [0.940313, 0.497642, 0.309197],\r\n    [0.942598, 0.502639, 0.305816],\r\n    [0.944844, 0.507658, 0.302433],\r\n    [0.947051, 0.512699, 0.299049],\r\n    [0.949217, 0.517763, 0.295662],\r\n    [0.951344, 0.52285, 0.292275],\r\n    [0.953428, 0.52796, 0.288883],\r\n    [0.95547, 0.533093, 0.28549],\r\n    [0.957469, 0.53825, 0.282096],\r\n    [0.959424, 0.543431, 0.278701],\r\n    [0.961336, 0.548636, 0.275305],\r\n    [0.963203, 0.553865, 0.271909],\r\n    [0.965024, 0.559118, 0.268513],\r\n    [0.966798, 0.564396, 0.265118],\r\n    [0.968526, 0.5697, 0.261721],\r\n    [0.970205, 0.575028, 0.258325],\r\n    [0.971835, 0.580382, 0.254931],\r\n    [0.973416, 0.585761, 0.25154],\r\n    [0.974947, 0.591165, 0.248151],\r\n    [0.976428, 0.596595, 0.244767],\r\n    [0.977856, 0.602051, 0.241387],\r\n    [0.979233, 0.607532, 0.238013],\r\n    [0.980556, 0.613039, 0.234646],\r\n    [0.981826, 0.618572, 0.231287],\r\n    [0.983041, 0.624131, 0.227937],\r\n    [0.984199, 0.629718, 0.224595],\r\n    [0.985301, 0.63533, 0.221265],\r\n    [0.986345, 0.640969, 0.217948],\r\n    [0.987332, 0.646633, 0.214648],\r\n    [0.98826, 0.652325, 0.211364],\r\n    [0.989128, 0.658043, 0.2081],\r\n    [0.989935, 0.663787, 0.204859],\r\n    [0.990681, 0.669558, 0.201642],\r\n    [0.991365, 0.675355, 0.198453],\r\n    [0.991985, 0.681179, 0.195295],\r\n    [0.992541, 0.68703, 0.19217],\r\n    [0.993032, 0.692907, 0.189084],\r\n    [0.993456, 0.69881, 0.186041],\r\n    [0.993814, 0.704741, 0.183043],\r\n    [0.994103, 0.710698, 0.180097],\r\n    [0.994324, 0.716681, 0.177208],\r\n    [0.994474, 0.722691, 0.174381],\r\n    [0.994553, 0.728728, 0.171622],\r\n    [0.994561, 0.734791, 0.168938],\r\n    [0.994495, 0.74088, 0.166335],\r\n    [0.994355, 0.746995, 0.163821],\r\n    [0.994141, 0.753137, 0.161404],\r\n    [0.993851, 0.759304, 0.159092],\r\n    [0.993482, 0.765499, 0.156891],\r\n    [0.993033, 0.77172, 0.154808],\r\n    [0.992505, 0.777967, 0.152855],\r\n    [0.991897, 0.784239, 0.151042],\r\n    [0.991209, 0.790537, 0.149377],\r\n    [0.990439, 0.796859, 0.14787],\r\n    [0.989587, 0.803205, 0.146529],\r\n    [0.988648, 0.809579, 0.145357],\r\n    [0.987621, 0.815978, 0.144363],\r\n    [0.986509, 0.822401, 0.143557],\r\n    [0.985314, 0.828846, 0.142945],\r\n    [0.984031, 0.835315, 0.142528],\r\n    [0.982653, 0.841812, 0.142303],\r\n    [0.98119, 0.848329, 0.142279],\r\n    [0.979644, 0.854866, 0.142453],\r\n    [0.977995, 0.861432, 0.142808],\r\n    [0.976265, 0.868016, 0.143351],\r\n    [0.974443, 0.874622, 0.144061],\r\n    [0.97253, 0.88125, 0.144923],\r\n    [0.970533, 0.887896, 0.145919],\r\n    [0.968443, 0.894564, 0.147014],\r\n    [0.966271, 0.901249, 0.14818],\r\n    [0.964021, 0.90795, 0.14937],\r\n    [0.961681, 0.914672, 0.15052],\r\n    [0.959276, 0.921407, 0.151566],\r\n    [0.956808, 0.928152, 0.152409],\r\n    [0.954287, 0.934908, 0.152921],\r\n    [0.951726, 0.941671, 0.152925],\r\n    [0.949151, 0.948435, 0.152178],\r\n    [0.946602, 0.95519, 0.150328],\r\n    [0.944152, 0.961916, 0.146861],\r\n    [0.941896, 0.96859, 0.140956],\r\n    [0.940015, 0.975158, 0.131326]\r\n];\n\nconst colors$5 = [\r\n    [0.267004, 0.004874, 0.329415],\r\n    [0.26851, 0.009605, 0.335427],\r\n    [0.269944, 0.014625, 0.341379],\r\n    [0.271305, 0.019942, 0.347269],\r\n    [0.272594, 0.025563, 0.353093],\r\n    [0.273809, 0.031497, 0.358853],\r\n    [0.274952, 0.037752, 0.364543],\r\n    [0.276022, 0.044167, 0.370164],\r\n    [0.277018, 0.050344, 0.375715],\r\n    [0.277941, 0.056324, 0.381191],\r\n    [0.278791, 0.062145, 0.386592],\r\n    [0.279566, 0.067836, 0.391917],\r\n    [0.280267, 0.073417, 0.397163],\r\n    [0.280894, 0.078907, 0.402329],\r\n    [0.281446, 0.08432, 0.407414],\r\n    [0.281924, 0.089666, 0.412415],\r\n    [0.282327, 0.094955, 0.417331],\r\n    [0.282656, 0.100196, 0.42216],\r\n    [0.28291, 0.105393, 0.426902],\r\n    [0.283091, 0.110553, 0.431554],\r\n    [0.283197, 0.11568, 0.436115],\r\n    [0.283229, 0.120777, 0.440584],\r\n    [0.283187, 0.125848, 0.44496],\r\n    [0.283072, 0.130895, 0.449241],\r\n    [0.282884, 0.13592, 0.453427],\r\n    [0.282623, 0.140926, 0.457517],\r\n    [0.28229, 0.145912, 0.46151],\r\n    [0.281887, 0.150881, 0.465405],\r\n    [0.281412, 0.155834, 0.469201],\r\n    [0.280868, 0.160771, 0.472899],\r\n    [0.280255, 0.165693, 0.476498],\r\n    [0.279574, 0.170599, 0.479997],\r\n    [0.278826, 0.17549, 0.483397],\r\n    [0.278012, 0.180367, 0.486697],\r\n    [0.277134, 0.185228, 0.489898],\r\n    [0.276194, 0.190074, 0.493001],\r\n    [0.275191, 0.194905, 0.496005],\r\n    [0.274128, 0.199721, 0.498911],\r\n    [0.273006, 0.20452, 0.501721],\r\n    [0.271828, 0.209303, 0.504434],\r\n    [0.270595, 0.214069, 0.507052],\r\n    [0.269308, 0.218818, 0.509577],\r\n    [0.267968, 0.223549, 0.512008],\r\n    [0.26658, 0.228262, 0.514349],\r\n    [0.265145, 0.232956, 0.516599],\r\n    [0.263663, 0.237631, 0.518762],\r\n    [0.262138, 0.242286, 0.520837],\r\n    [0.260571, 0.246922, 0.522828],\r\n    [0.258965, 0.251537, 0.524736],\r\n    [0.257322, 0.25613, 0.526563],\r\n    [0.255645, 0.260703, 0.528312],\r\n    [0.253935, 0.265254, 0.529983],\r\n    [0.252194, 0.269783, 0.531579],\r\n    [0.250425, 0.27429, 0.533103],\r\n    [0.248629, 0.278775, 0.534556],\r\n    [0.246811, 0.283237, 0.535941],\r\n    [0.244972, 0.287675, 0.53726],\r\n    [0.243113, 0.292092, 0.538516],\r\n    [0.241237, 0.296485, 0.539709],\r\n    [0.239346, 0.300855, 0.540844],\r\n    [0.237441, 0.305202, 0.541921],\r\n    [0.235526, 0.309527, 0.542944],\r\n    [0.233603, 0.313828, 0.543914],\r\n    [0.231674, 0.318106, 0.544834],\r\n    [0.229739, 0.322361, 0.545706],\r\n    [0.227802, 0.326594, 0.546532],\r\n    [0.225863, 0.330805, 0.547314],\r\n    [0.223925, 0.334994, 0.548053],\r\n    [0.221989, 0.339161, 0.548752],\r\n    [0.220057, 0.343307, 0.549413],\r\n    [0.21813, 0.347432, 0.550038],\r\n    [0.21621, 0.351535, 0.550627],\r\n    [0.214298, 0.355619, 0.551184],\r\n    [0.212395, 0.359683, 0.55171],\r\n    [0.210503, 0.363727, 0.552206],\r\n    [0.208623, 0.367752, 0.552675],\r\n    [0.206756, 0.371758, 0.553117],\r\n    [0.204903, 0.375746, 0.553533],\r\n    [0.203063, 0.379716, 0.553925],\r\n    [0.201239, 0.38367, 0.554294],\r\n    [0.19943, 0.387607, 0.554642],\r\n    [0.197636, 0.391528, 0.554969],\r\n    [0.19586, 0.395433, 0.555276],\r\n    [0.1941, 0.399323, 0.555565],\r\n    [0.192357, 0.403199, 0.555836],\r\n    [0.190631, 0.407061, 0.556089],\r\n    [0.188923, 0.41091, 0.556326],\r\n    [0.187231, 0.414746, 0.556547],\r\n    [0.185556, 0.41857, 0.556753],\r\n    [0.183898, 0.422383, 0.556944],\r\n    [0.182256, 0.426184, 0.55712],\r\n    [0.180629, 0.429975, 0.557282],\r\n    [0.179019, 0.433756, 0.55743],\r\n    [0.177423, 0.437527, 0.557565],\r\n    [0.175841, 0.44129, 0.557685],\r\n    [0.174274, 0.445044, 0.557792],\r\n    [0.172719, 0.448791, 0.557885],\r\n    [0.171176, 0.45253, 0.557965],\r\n    [0.169646, 0.456262, 0.55803],\r\n    [0.168126, 0.459988, 0.558082],\r\n    [0.166617, 0.463708, 0.558119],\r\n    [0.165117, 0.467423, 0.558141],\r\n    [0.163625, 0.471133, 0.558148],\r\n    [0.162142, 0.474838, 0.55814],\r\n    [0.160665, 0.47854, 0.558115],\r\n    [0.159194, 0.482237, 0.558073],\r\n    [0.157729, 0.485932, 0.558013],\r\n    [0.15627, 0.489624, 0.557936],\r\n    [0.154815, 0.493313, 0.55784],\r\n    [0.153364, 0.497, 0.557724],\r\n    [0.151918, 0.500685, 0.557587],\r\n    [0.150476, 0.504369, 0.55743],\r\n    [0.149039, 0.508051, 0.55725],\r\n    [0.147607, 0.511733, 0.557049],\r\n    [0.14618, 0.515413, 0.556823],\r\n    [0.144759, 0.519093, 0.556572],\r\n    [0.143343, 0.522773, 0.556295],\r\n    [0.141935, 0.526453, 0.555991],\r\n    [0.140536, 0.530132, 0.555659],\r\n    [0.139147, 0.533812, 0.555298],\r\n    [0.13777, 0.537492, 0.554906],\r\n    [0.136408, 0.541173, 0.554483],\r\n    [0.135066, 0.544853, 0.554029],\r\n    [0.133743, 0.548535, 0.553541],\r\n    [0.132444, 0.552216, 0.553018],\r\n    [0.131172, 0.555899, 0.552459],\r\n    [0.129933, 0.559582, 0.551864],\r\n    [0.128729, 0.563265, 0.551229],\r\n    [0.127568, 0.566949, 0.550556],\r\n    [0.126453, 0.570633, 0.549841],\r\n    [0.125394, 0.574318, 0.549086],\r\n    [0.124395, 0.578002, 0.548287],\r\n    [0.123463, 0.581687, 0.547445],\r\n    [0.122606, 0.585371, 0.546557],\r\n    [0.121831, 0.589055, 0.545623],\r\n    [0.121148, 0.592739, 0.544641],\r\n    [0.120565, 0.596422, 0.543611],\r\n    [0.120092, 0.600104, 0.54253],\r\n    [0.119738, 0.603785, 0.5414],\r\n    [0.119512, 0.607464, 0.540218],\r\n    [0.119423, 0.611141, 0.538982],\r\n    [0.119483, 0.614817, 0.537692],\r\n    [0.119699, 0.61849, 0.536347],\r\n    [0.120081, 0.622161, 0.534946],\r\n    [0.120638, 0.625828, 0.533488],\r\n    [0.12138, 0.629492, 0.531973],\r\n    [0.122312, 0.633153, 0.530398],\r\n    [0.123444, 0.636809, 0.528763],\r\n    [0.12478, 0.640461, 0.527068],\r\n    [0.126326, 0.644107, 0.525311],\r\n    [0.128087, 0.647749, 0.523491],\r\n    [0.130067, 0.651384, 0.521608],\r\n    [0.132268, 0.655014, 0.519661],\r\n    [0.134692, 0.658636, 0.517649],\r\n    [0.137339, 0.662252, 0.515571],\r\n    [0.14021, 0.665859, 0.513427],\r\n    [0.143303, 0.669459, 0.511215],\r\n    [0.146616, 0.67305, 0.508936],\r\n    [0.150148, 0.676631, 0.506589],\r\n    [0.153894, 0.680203, 0.504172],\r\n    [0.157851, 0.683765, 0.501686],\r\n    [0.162016, 0.687316, 0.499129],\r\n    [0.166383, 0.690856, 0.496502],\r\n    [0.170948, 0.694384, 0.493803],\r\n    [0.175707, 0.6979, 0.491033],\r\n    [0.180653, 0.701402, 0.488189],\r\n    [0.185783, 0.704891, 0.485273],\r\n    [0.19109, 0.708366, 0.482284],\r\n    [0.196571, 0.711827, 0.479221],\r\n    [0.202219, 0.715272, 0.476084],\r\n    [0.20803, 0.718701, 0.472873],\r\n    [0.214, 0.722114, 0.469588],\r\n    [0.220124, 0.725509, 0.466226],\r\n    [0.226397, 0.728888, 0.462789],\r\n    [0.232815, 0.732247, 0.459277],\r\n    [0.239374, 0.735588, 0.455688],\r\n    [0.24607, 0.73891, 0.452024],\r\n    [0.252899, 0.742211, 0.448284],\r\n    [0.259857, 0.745492, 0.444467],\r\n    [0.266941, 0.748751, 0.440573],\r\n    [0.274149, 0.751988, 0.436601],\r\n    [0.281477, 0.755203, 0.432552],\r\n    [0.288921, 0.758394, 0.428426],\r\n    [0.296479, 0.761561, 0.424223],\r\n    [0.304148, 0.764704, 0.419943],\r\n    [0.311925, 0.767822, 0.415586],\r\n    [0.319809, 0.770914, 0.411152],\r\n    [0.327796, 0.77398, 0.40664],\r\n    [0.335885, 0.777018, 0.402049],\r\n    [0.344074, 0.780029, 0.397381],\r\n    [0.35236, 0.783011, 0.392636],\r\n    [0.360741, 0.785964, 0.387814],\r\n    [0.369214, 0.788888, 0.382914],\r\n    [0.377779, 0.791781, 0.377939],\r\n    [0.386433, 0.794644, 0.372886],\r\n    [0.395174, 0.797475, 0.367757],\r\n    [0.404001, 0.800275, 0.362552],\r\n    [0.412913, 0.803041, 0.357269],\r\n    [0.421908, 0.805774, 0.35191],\r\n    [0.430983, 0.808473, 0.346476],\r\n    [0.440137, 0.811138, 0.340967],\r\n    [0.449368, 0.813768, 0.335384],\r\n    [0.458674, 0.816363, 0.329727],\r\n    [0.468053, 0.818921, 0.323998],\r\n    [0.477504, 0.821444, 0.318195],\r\n    [0.487026, 0.823929, 0.312321],\r\n    [0.496615, 0.826376, 0.306377],\r\n    [0.506271, 0.828786, 0.300362],\r\n    [0.515992, 0.831158, 0.294279],\r\n    [0.525776, 0.833491, 0.288127],\r\n    [0.535621, 0.835785, 0.281908],\r\n    [0.545524, 0.838039, 0.275626],\r\n    [0.555484, 0.840254, 0.269281],\r\n    [0.565498, 0.84243, 0.262877],\r\n    [0.575563, 0.844566, 0.256415],\r\n    [0.585678, 0.846661, 0.249897],\r\n    [0.595839, 0.848717, 0.243329],\r\n    [0.606045, 0.850733, 0.236712],\r\n    [0.616293, 0.852709, 0.230052],\r\n    [0.626579, 0.854645, 0.223353],\r\n    [0.636902, 0.856542, 0.21662],\r\n    [0.647257, 0.8584, 0.209861],\r\n    [0.657642, 0.860219, 0.203082],\r\n    [0.668054, 0.861999, 0.196293],\r\n    [0.678489, 0.863742, 0.189503],\r\n    [0.688944, 0.865448, 0.182725],\r\n    [0.699415, 0.867117, 0.175971],\r\n    [0.709898, 0.868751, 0.169257],\r\n    [0.720391, 0.87035, 0.162603],\r\n    [0.730889, 0.871916, 0.156029],\r\n    [0.741388, 0.873449, 0.149561],\r\n    [0.751884, 0.874951, 0.143228],\r\n    [0.762373, 0.876424, 0.137064],\r\n    [0.772852, 0.877868, 0.131109],\r\n    [0.783315, 0.879285, 0.125405],\r\n    [0.79376, 0.880678, 0.120005],\r\n    [0.804182, 0.882046, 0.114965],\r\n    [0.814576, 0.883393, 0.110347],\r\n    [0.82494, 0.88472, 0.106217],\r\n    [0.83527, 0.886029, 0.102646],\r\n    [0.845561, 0.887322, 0.099702],\r\n    [0.85581, 0.888601, 0.097452],\r\n    [0.866013, 0.889868, 0.095953],\r\n    [0.876168, 0.891125, 0.09525],\r\n    [0.886271, 0.892374, 0.095374],\r\n    [0.89632, 0.893616, 0.096335],\r\n    [0.906311, 0.894855, 0.098125],\r\n    [0.916242, 0.896091, 0.100717],\r\n    [0.926106, 0.89733, 0.104071],\r\n    [0.935904, 0.89857, 0.108131],\r\n    [0.945636, 0.899815, 0.112838],\r\n    [0.9553, 0.901065, 0.118128],\r\n    [0.964894, 0.902323, 0.123941],\r\n    [0.974417, 0.90359, 0.130215],\r\n    [0.983868, 0.904867, 0.136897],\r\n    [0.993248, 0.906157, 0.143936]\r\n];\n\nexport { colors as blackWhite, colors$1 as cividis, colors$2 as inferno, colors$3 as magma, colors$4 as plasma, colors$5 as viridis };\n","\nimport { createColorMap, linearScale } from \"@colormap/core\";\nimport { viridis, cividis, plasma, inferno, magma, blackWhite } from \"@colormap/presets\";\n\n//Make a node from a generic object\nclass Node{\n\tconstructor(originalObject,ID,index,network){\n\t\tfor (const [nodeProperty, value] of Object.entries(originalObject)) {\n\t\t\tif(nodeProperty == \"Color\"\n\t\t\t||  nodeProperty == \"Size\"\n\t\t\t||  nodeProperty == \"Position\"\n\t\t\t||  nodeProperty == \"OutlineColor\"\n\t\t\t||  nodeProperty == \"OutlineWidth\"){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis[nodeProperty] = value;\n\t\t}\n\t\tthis._network = network;\n\t\tthis.ID = ID;\n\t\tthis.index = index;\n\t}\n\n\tset color(newColor){\n\t\tlet nodeIndex = this.index;\n\t\tthis._network.colors[nodeIndex*4+0] = newColor[0];\n\t\tthis._network.colors[nodeIndex*4+1] = newColor[1];\n\t\tthis._network.colors[nodeIndex*4+2] = newColor[2];\n\t\tif(newColor.length > 3){\n\t\t\tthis._network.colors[nodeIndex*4+3] = newColor[3];\n\t\t}\n\t}\n\n\tget color(){\n\t\tlet nodeIndex = this.index;\n\t\treturn [this._network.colors[nodeIndex*4+0],this._network.colors[nodeIndex*4+1],this._network.colors[nodeIndex*4+2],this._network.colors[nodeIndex*4+3]];\n\t}\n\n\n\tset opacity(newOpacity){\n\t\tlet nodeIndex = this.index;\n\t\tthis._network.colors[nodeIndex*4+3] = newOpacity;\n\t}\n\n\tget opacity(){\n\t\tlet nodeIndex = this.index;\n\t\treturn this._network.colors[nodeIndex*4+3];\n\t}\n\n\n\tset size(newSize){\n\t\tthis._network.sizes[this.index] = newSize;\n\t}\n\n\tget size(){\n\t\treturn this._network.sizes[this.index];\n\t}\n\n\tset outlineColor(newColor){\n\t\tlet nodeIndex = this.index;\n\t\tthis._network.outlineColors[nodeIndex*4+0] = newColor[0];\n\t\tthis._network.outlineColors[nodeIndex*4+1] = newColor[1];\n\t\tthis._network.outlineColors[nodeIndex*4+2] = newColor[2];\n\t\tif(newColor.length > 3){\n\t\t\tthis._network.outlineColors[nodeIndex*4+3] = newColor[3];\n\t\t}\n\t}\n\n\tget outlineColor(){\n\t\tlet nodeIndex = this.index;\n\t\treturn [this._network.outlineColors[nodeIndex*4+0],this._network.outlineColors[nodeIndex*4+1],this._network.outlineColors[nodeIndex*4+2],this._network.outlineColors[nodeIndex*4+3]];\n\t}\n\n\tset outlineWidth(newWidth){\n\t\tthis._network.outlineWidths[this.index] = newWidth;\n\t}\n\n\tget outlineWidth(){\n\t\treturn this._network.outlineWidths[this.index];\n\t}\n\n\tget network(){\n\t\treturn this._network;\n\t}\n\n\tset position(newPosition){\n\t\tlet nodeIndex = this.index;\n\t\tthis._network.positions[nodeIndex*3+0] = newPosition[0];\n\t\tthis._network.positions[nodeIndex*3+1] = newPosition[1];\n\t\tthis._network.positions[nodeIndex*3+2] = newPosition[2];\n\t}\n\tget position(){\n\t\tlet nodeIndex = this.index;\n\t\treturn [this._network.positions[nodeIndex*3+0],this._network.positions[nodeIndex*3+1],this._network.positions[nodeIndex*3+2]];\n\t}\n}\n\n\n\n\nexport class Network{\n\tconstructor(nodes,edges,properties){\n\t\tthis.ID2index = new Object();\n\t\tthis.index2Node = [];\n\t\tfor (const [nodeID, node] of Object.entries(nodes)) {\n\t\t\tif(!this.ID2index.hasOwnProperty(nodeID)){\n\t\t\t\tlet nodeIndex = this.index2Node.length;\n\t\t\t\tthis.ID2index[nodeID] = nodeIndex;\n\t\t\t\tnode.index = nodeIndex;\n\t\t\t\tnode.ID = nodeID;\n\t\t\t\tthis.index2Node.push(node);\n\t\t\t\tnode.neighbors = [];\n\t\t\t\tnode.edges = [];\n\t\t\t}\n\t\t}\n\n\t\tthis.indexedEdges = new Int32Array(edges.length*2);\n\t\tfor (let edgeIndex = 0; edgeIndex < edges.length; edgeIndex++) {\n\t\t\tconst edge = edges[edgeIndex];\n\t\t\t// console.log(this.index2Node)\n\t\t\tlet fromIndex =this.ID2index[edge.source];\n\t\t\tlet toIndex = this.ID2index[edge.target];\n\t\t\t// let fromNode = this.index2Node[fromIndex];\n\t\t\t// let toNode = this.index2Node[toIndex];\n\t\t\tthis.indexedEdges[edgeIndex*2] = fromIndex;\n\t\t\tthis.indexedEdges[edgeIndex*2+1] = toIndex;\n\t\t}\n\t\t\n\t\tthis.positions = new Float32Array(3*this.index2Node.length);\n\t\tthis.colors = new Float32Array(4*this.index2Node.length);\n\t\tthis.sizes = new Float32Array(this.index2Node.length);\n\t\tthis.outlineColors = new Float32Array(4*this.index2Node.length);\n\t\t//set intensities to 1.0\n\t\tfor (let nodeIndex=0; nodeIndex<this.index2Node.length;nodeIndex++){\n\t\t\tthis.colors[nodeIndex*4+3] = 1.0;\n\t\t\tthis.outlineColors[nodeIndex*4+3] = 1.0;\n\t\t}\n\n\t\tthis.outlineWidths = new Float32Array(this.index2Node.length);\n\t\t\n\t\tthis.edgePositions = null; //new Float32Array(3*this.indexedEdges.length);\n\t\tthis.edgeColors = null; //new Float32Array(3*this.indexedEdges.length);\n\t\tthis.edgeSizes = null; //new Float32Array(this.indexedEdges.length);\n\t\t// this.intensities = new Float32Array(this.indexedEdges.length);\n\t\t// this.outlineColors = new Float32Array(3*this.indexedEdges.length);\n\t\t// this.outlineWidths = new Float32Array(this.indexedEdges.length);\n\n\t\t// for (let index = 0; index < this.positions.length; index++) {\n\t\t//   this.positions[index] = (Math.random()-0.5)*2*200;\n\t\t//   this.colors[index] = Math.random()*0.8+0.2;\n\t\t// }\n\n\t\tthis.nodes = {}\n\t\t\n\t\tlet colorScale = linearScale([0, this.index2Node.length], [0, 1]);\n\t\tlet colorMap = createColorMap(inferno, colorScale);\n\t\tfor (let index = 0; index < this.index2Node.length; index++) {\n\t\t\tlet node = this.index2Node[index];\n\t\t\tif(node.hasOwnProperty(\"Position\")){\n\t\t\t\tthis.positions[index*3]   = node[\"Position\"][0];\n\t\t\t\tthis.positions[index*3+1] = node[\"Position\"][1];\n\t\t\t\tthis.positions[index*3+2] = node[\"Position\"][2];\n\t\t\t}else{\n\t\t\t\tif(node.hasOwnProperty(\"posx\") && node.hasOwnProperty(\"posy\")){\n\t\t\t\t\tthis.positions[index*3]   = node[\"posx\"];\n\t\t\t\t\tthis.positions[index*3+1] = node[\"posy\"];\n\t\t\t\t\tif(node.hasOwnProperty(\"posz\")){\n\t\t\t\t\t\tthis.positions[index*3+2] = node[\"posz\"];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.positions[index*3+2] = 0;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.positions[index*3+0] = (Math.random()-0.5)*2*200;\n\t\t\t\t\tthis.positions[index*3+1] = (Math.random()-0.5)*2*200;\n\t\t\t\t\tthis.positions[index*3+2] = (Math.random()-0.5)*2*200;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(node.hasOwnProperty(\"Color\")){\n\t\t\t\tif(index==0){\n\t\t\t\t\tconsole.log(\"NODE COLOR:\",node[\"Color\"])\n\t\t\t\t}\n\t\t\t\tthis.colors[index*4+0] = node[\"Color\"][0];\n\t\t\t\tthis.colors[index*4+1] = node[\"Color\"][1];\n\t\t\t\tthis.colors[index*4+2] = node[\"Color\"][2];\n\t\t\t\tif(node[\"Color\"].length > 3){\n\t\t\t\t\tthis.colors[index*4+3] = node[\"Color\"][3];\n\t\t\t\t}else{\n\t\t\t\t\tthis.colors[index*4+3]=1.0;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tlet color = colorMap(index);\n\t\t\t\tthis.colors[index*4+0] = color[0];\n\t\t\t\tthis.colors[index*4+1] = color[1];\n\t\t\t\tthis.colors[index*4+2] = color[2];\n\t\t\t\tif(color.length > 3){\n\t\t\t\t\tthis.colors[index*4+3] = color[3];\n\t\t\t\t}else{\n\t\t\t\t\tthis.colors[index*4+3]=1.0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(node.hasOwnProperty(\"Size\")){\n\t\t\t\tthis.sizes[index] = node[\"Size\"];\n\t\t\t}else{\n\t\t\t\tthis.sizes[index] = 1.0;\n\t\t\t}\n\n\t\t\tif(node.hasOwnProperty(\"OutlineColor\")){\n\t\t\t\tthis.outlineColors[index*4+0] = node[\"OutlineColor\"][0];\n\t\t\t\tthis.outlineColors[index*4+1] = node[\"OutlineColor\"][1];\n\t\t\t\tthis.outlineColors[index*4+2] = node[\"OutlineColor\"][2];\n\t\t\t\tif(node[\"OutlineColor\"].length > 3){\n\t\t\t\t\tthis.outlineColors[index*4+3] = node[\"OutlineColor\"][3];\n\t\t\t\t}else{\n\t\t\t\t\tthis.outlineColors[index*4+3]=1.0;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.outlineColors[index*4+0] = 1.0;\n\t\t\t\tthis.outlineColors[index*4+1] = 1.0;\n\t\t\t\tthis.outlineColors[index*4+2] = 1.0;\n\t\t\t\tthis.outlineColors[index*4+3] = 1.0;\n\t\t\t}\n\n\t\t\tif(node.hasOwnProperty(\"OutlineWidth\")){\n\t\t\t\tthis.outlineWidths[index] = node[\"OutlineWidth\"];\n\t\t\t}else{\n\t\t\t\tthis.outlineWidths[index] = 0.0;\n\t\t\t}\n\n\t\t\tlet newNode = new Node(node,node.ID,index,this);\n\t\t\tthis.index2Node[index] = newNode;\n\t\t\tthis.nodes[node.ID] = newNode;\n\t\t}\n\t\tfor (let edgeIndex = 0; edgeIndex < edges.length; edgeIndex++) {\n\t\t\tconst edge = edges[edgeIndex];\n\t\t\t// console.log(this.index2Node)\n\t\t\tlet fromIndex =this.ID2index[edge.source];\n\t\t\tlet toIndex = this.ID2index[edge.target];\n\t\t\tlet fromNode = this.index2Node[fromIndex];\n\t\t\tlet toNode = this.index2Node[toIndex];\n\t\t\tfromNode.neighbors.push(toNode);\n\t\t\ttoNode.neighbors.push(fromNode);\n\t\t\tfromNode.edges.push(edgeIndex);\n\t\t\ttoNode.edges.push(edgeIndex);\n\t\t}\n\t}\n\n\tget nodeCount(){\n\t\treturn this.index2Node.length;\n\t}\n\n\tupdateEdgePositions() {\n\t\tif (this.edgePositions == null) {\n\t\t\tthis.edgePositions = new Float32Array(3 * this.indexedEdges.length);\n\t\t}\n\t\n\t\tconst edgesLength = this.indexedEdges.length;\n\t\tconst nodePositions = this.positions;\n\t\tconst edgePositions = this.edgePositions;\n\t\tconst indexedEdges = this.indexedEdges;\n\t\tfor (let edgeIndex = 0; edgeIndex < edgesLength / 2; edgeIndex++) {\n\t\t\tconst fromIndex = indexedEdges[edgeIndex * 2] * 3;\n\t\t\tconst toIndex = indexedEdges[edgeIndex * 2 + 1] * 3;\n\t\t\tconst edgeFromPositionIndex = edgeIndex * 6;\n\t\t\tconst edgeToPositionIndex = edgeFromPositionIndex + 3;\n\t\n\t\t\tedgePositions[edgeFromPositionIndex] = nodePositions[fromIndex];\n\t\t\tedgePositions[edgeFromPositionIndex + 1] = nodePositions[fromIndex + 1];\n\t\t\tedgePositions[edgeFromPositionIndex + 2] = nodePositions[fromIndex + 2];\n\t\n\t\t\tedgePositions[edgeToPositionIndex] = nodePositions[toIndex];\n\t\t\tedgePositions[edgeToPositionIndex + 1] = nodePositions[toIndex + 1];\n\t\t\tedgePositions[edgeToPositionIndex + 2] = nodePositions[toIndex + 2];\n\t\t}\n\t}\n\t\n\tupdateEdgeColors(updateOpacity = true) {\n\t\tif (this.edgeColors == null) {\n\t\t\tthis.edgeColors = new Float32Array(4 * this.indexedEdges.length);\n\t\t}\n\t\n\t\tconst edgesLength = this.indexedEdges.length;\n\t\tconst edgeColors = this.edgeColors;\n\t\tconst nodeColors = this.colors;\n\t\tconst indexedEdges = this.indexedEdges;\n\t\tfor (let edgeIndex = 0; edgeIndex < edgesLength / 2; edgeIndex++) {\n\t\t\tconst fromIndex = indexedEdges [edgeIndex * 2] * 4;\n\t\t\tconst toIndex = indexedEdges [edgeIndex * 2 + 1] * 4;\n\t\t\tconst edgeFromColorIndex = edgeIndex * 8;\n\t\t\tconst edgeToColorIndex = edgeFromColorIndex + 4;\n\t\n\t\t\tedgeColors[edgeFromColorIndex]     = nodeColors[fromIndex];\n\t\t\tedgeColors[edgeFromColorIndex + 1] = nodeColors[fromIndex + 1];\n\t\t\tedgeColors[edgeFromColorIndex + 2] = nodeColors[fromIndex + 2];\n\t\n\t\t\tedgeColors[edgeToColorIndex]     = nodeColors[toIndex];\n\t\t\tedgeColors[edgeToColorIndex + 1] = nodeColors[toIndex + 1];\n\t\t\tedgeColors[edgeToColorIndex + 2] = nodeColors [toIndex + 2];\n\t\n\t\t\tif (updateOpacity) {\n\t\t\t\tedgeColors[edgeFromColorIndex + 3] = nodeColors[fromIndex + 3];\n\t\t\t\tedgeColors[edgeToColorIndex + 3] = nodeColors[toIndex + 3];\n\t\t\t}\n\t\t}\n\t}\n\t\n\tupdateEdgeSizes() {\n\t\tif (this.edgeSizes == null) {\n\t\t\tthis.edgeSizes = new Float32Array(this.indexedEdges.length);\n\t\t}\n\t\n\t\tconst edgesLength = this.indexedEdges.length;\n\t\tconst edgeSizes  = this.edgeSizes;\n\t\tconst nodeSizes = this.sizes;\n\t\tconst indexedEdges = this.indexedEdges;\n\t\tfor (let edgeIndex = 0; edgeIndex < edgesLength / 2; edgeIndex++) {\n\t\t\tconst fromIndex = indexedEdges[edgeIndex * 2];\n\t\t\tconst toIndex = indexedEdges[edgeIndex * 2 + 1];\n\t\t\tedgeSizes[edgeIndex * 2] = nodeSizes[fromIndex];\n\t\t\tedgeSizes[edgeIndex * 2 + 1] = nodeSizes[toIndex];\n\t\t}\n\t}\n\t\n\n\n\tupdateEdgeOpacity(updateOpacity) {\n\t\tif (this.edgeColors == null) {\n\t\t\tthis.edgeColors = new Float32Array(4 * this.indexedEdges.length);\n\t\t}\n\t\n\t\tconst edgesLength = this.indexedEdges.length;\n\t\tconst edgeColors = this.edgeColors;\n\t\tconst nodeColors = this.colors;\n\t\tconst indexedEdges = this.indexedEdges;\n\t\tfor (let edgeIndex = 0; edgeIndex < edgesLength / 2; edgeIndex++) {\n\t\t\tconst fromIndex = indexedEdges[edgeIndex * 2] * 4;\n\t\t\tconst toIndex = indexedEdges[edgeIndex * 2 + 1] * 4;\n\t\t\tedgeColors[edgeIndex * 8 + 3] = nodeColors[fromIndex + 3];\n\t\t\tedgeColors[edgeIndex * 8 + 7] = nodeColors[toIndex + 3];\n\t\t}\n\t}\n\t\n}\n","\n\n// //dictionary\nexport class HeliosScheduler {\n\tconstructor(helios, { FPS = 60, throttle = true, maxQueueLength = 10 }) {\n\t\t// TODO: Check if Weakref is needed\n\t\tthis.helios = helios;\n\t\tthis.needsRender = false;\n\t\tthis.needsUpdateNodesGeometry = false;\n\t\tthis.needsUpdateEdgesGeometry = false;\n\t\tthis._FPS = FPS;\n\t\tthis._throttle = throttle; // will throttle to the requested FPS\n\t\tthis._maxQueueLength = maxQueueLength;\n\t\tthis._started = false;\n\t\tthis._paused = true;\n\t\tthis._lastFPS = 0;\n\t\tthis._averageFPS = 0;\n\t\tthis._tasks = {};\n\t\tthis._executionCount = 0,\n\t\tthis._lastTimestamp = null,\n\t\tthis._currentTimestamp = null,\n\t\tthis._lastExecutionTimestamp = null,\n\t\tthis._lastRequestFrameID = 0;\n\t\tthis._timeout = null;\n\t\tthis._times = [];\n\t\tthis._lastRepeatInterval = 0;\n\t\tthis._shouldCleanup = false;\n\t}\n\n\tFPS(value) {\n\t\tif (value === undefined) {\n\t\t\treturn this.FPS;\n\t\t}\n\t\tthis.FPS = value;\n\t\treturn this;\n\t}\n\n\tschedule({\n\t\tname = \"default\",\n\t\tcallback = null,\n\t\tdelay = 0,\n\t\trepeat = false,\n\t\tmaxRepeatCount = Infinity,\n\t\tmaxRepeatTime = Infinity,\n\t\trepeatInterval = 0,\n\t\tsynchronized = true,\n\t\timmediateUpdates = false,\n\t\tupdateNodesGeometry = false,\n\t\tupdateEdgesGeometry = false,\n\t\tafterRedraw = false,\n\t\tredraw = true,\n\t\treplace = true\n\t}) {\n\n\t\tlet newTask = {\n\t\t\tname,\n\t\t\tcallback,\n\t\t\tdelay,\n\t\t\trepeat,\n\t\t\tmaxRepeatCount,\n\t\t\tmaxRepeatTime,\n\t\t\trepeatInterval,\n\t\t\tsynchronized,\n\t\t\timmediateUpdates,\n\t\t\tupdateNodesGeometry,\n\t\t\tupdateEdgesGeometry,\n\t\t\tafterRedraw,\n\t\t\tredraw,\n\t\t\treplace,\n\t\t\texecutionCount: 0,\n\t\t\tlastTimestamp: window.performance.now(),\n\t\t\tlastExecutionTime: 0,\n\t\t\tshouldBeRemoved: false,\n\t\t\tcancel: function () {\n\t\t\t\tthis.shouldBeRemoved = true;\n\t\t\t\tif (!this.synchronized) {\n\t\t\t\t\tclearTimeout(this._timeout)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!(name in this._tasks)) {\n\t\t\tthis._tasks[name] = [];\n\t\t}\n\n\t\tif (replace) {\n\t\t\tthis._clearTask(name);\n\t\t}\n\n\t\tif (!synchronized) {\n\t\t\tthis.runAsyncTask(newTask, newTask.delay);\n\t\t}\n\n\t\tthis._addTaskToQueue(newTask, name);\n\n\t\tif (this._paused && this._started) {\n\t\t\tthis._updateTimeout();\n\t\t}\n\t\treturn this;\n\t}\n\n\trunAsyncTask(newTask, delay = 0) {\n\t\tthis._executionCount+=1;\n\t\tnewTask.timeout = setTimeout(() => {\n\t\t\tif (newTask.shouldBeRemoved) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet currentTimestamp = window.performance.now();\n\t\t\tlet elapsedTime = currentTimestamp - newTask.lastTimestamp;\n\t\t\tnewTask.callback?.(elapsedTime, newTask);\n\t\t\tnewTask.executionCount += 1;\n\t\t\tif (newTask.immediateUpdates) {\n\t\t\t\tthis._updateHelios(newTask.needsRender, newTask.needsUpdateNodesGeometry, newTask.needsUpdateEdgesGeometry);\n\t\t\t} else {\n\t\t\t\tif (newTask.redraw) {\n\t\t\t\t\tthis.needsRender = true;\n\t\t\t\t}\n\t\t\t\tif (newTask.updateNodesGeometry) {\n\t\t\t\t\tthis.needsUpdateNodesGeometry = true;\n\t\t\t\t}\n\t\t\t\tif (newTask.updateEdgesGeometry) {\n\t\t\t\t\tthis.needsUpdateEdgesGeometry = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (newTask.repeat) {\n\t\t\t\tlet newCurrentTimestamp = window.performance.now();\n\t\t\t\tnewTask.lastExecutionTime = newCurrentTimestamp - currentTimestamp;\n\t\t\t\tnewTask.lastTimestamp = currentTimestamp;\n\t\t\t\tlet repeatInterval = newTask.repeatInterval - (newCurrentTimestamp - currentTimestamp)\n\t\t\t\tif (repeatInterval < 0) {\n\t\t\t\t\trepeatInterval = 0;\n\t\t\t\t}\n\t\t\t\tif (newTask.executionCount >= newTask.maxRepeatCount) {\n\t\t\t\t\tnewTask.shouldBeRemoved = true;\n\t\t\t\t}else{\n\t\t\t\t\tthis.runAsyncTask(newTask, repeatInterval);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewTask.shouldBeRemoved = true;\n\t\t\t}\n\t\t\tif(this._started && this._paused){\n\t\t\t\tthis._updateTimeout();\n\t\t\t}\n\t\t}, delay);\n\t}\n\n\t_executeTask(task,elapsedTime,currentTimestamp){\n\t\t// console.log(\"Executing \"+task.name+\" task at iteration \"+task.executionCount+\"\")\n\t\ttask.callback?.(elapsedTime, task);\n\t\tif(task === undefined){\n\t\t\treturn false;\n\t\t}\n\t\ttask.executionCount += 1;\n\t\tif (task.repeat && task.executionCount < task.maxRepeatCount) {\n\t\t\tlet newCurrentTimestamp = window.performance.now();\n\t\t\ttask.lastExecutionTime = newCurrentTimestamp - currentTimestamp;\n\t\t\ttask.lastTimestamp = currentTimestamp;\n\t\t} else {\n\t\t\ttask.shouldBeRemoved = true;\n\t\t}\n\t\treturn true;\n\t}\n\n\trunSyncTasks() {\n\t\tif(this._shouldCleanup){\n\t\t\treturn;\n\t\t}\n\t\tthis._executionCount+=1;\n\t\tlet afterRedrawTasks = [];\n\t\tlet allTasksCurrentTimestamp = window.performance.now();\n\t\tfor (let taskName of Object.keys(this._tasks).sort()) {\n\t\t\tlet task = this._tasks[taskName];\n\t\t\tfor (let i = 0; i < task.length; i++) {\n\t\t\t\tif(task[i].synchronized || !task[i].immediateUpdates){\n\t\t\t\t\tif(task[i].redraw){\n\t\t\t\t\t\tthis.needsRender = true;\n\t\t\t\t\t}\n\t\t\t\t\tif(task[i].updateNodesGeometry){\n\t\t\t\t\t\tthis.needsUpdateNodesGeometry = true;\n\t\t\t\t\t}\n\t\t\t\t\tif(task[i].updateEdgesGeometry){\n\t\t\t\t\t\tthis.needsUpdateEdgesGeometry = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!task[i]?.shouldBeRemoved) {\n\t\t\t\t\tlet currentTimestamp = window.performance.now();\n\t\t\t\t\tlet elapsedTime = currentTimestamp - task[i].lastTimestamp + task[i].lastExecutionTime;\n\t\t\t\t\tif (elapsedTime < 0) {\n\t\t\t\t\t\telapsedTime = 0;\n\t\t\t\t\t}\n\t\t\t\t\tlet willExecute = false\n\t\t\t\t\tif (task[i].executionCount == 0) {\n\t\t\t\t\t\tif (elapsedTime >= task[i].delay) {\n\t\t\t\t\t\t\twillExecute = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (elapsedTime >= task[i].repeatInterval) {\n\t\t\t\t\t\t\twillExecute = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (willExecute) {\n\t\t\t\t\t\tif(task[i].afterRedraw){\n\t\t\t\t\t\t\tafterRedrawTasks.push({\n\t\t\t\t\t\t\t\ttask:task[i],\n\t\t\t\t\t\t\t\telapsedTime,\n\t\t\t\t\t\t\t\tcurrentTimestamp,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(!this._executeTask(task[i],elapsedTime,currentTimestamp)){\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (task[i]?.shouldBeRemoved) {\n\t\t\t\t\ttask.splice(i, 1);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (task.length == 0) {\n\t\t\t\tdelete this._tasks[taskName];\n\t\t\t}\n\t\t}\n\t\tthis._updateHelios(this.needsRender, this.needsUpdateNodesGeometry, this.needsUpdateEdgesGeometry, true, afterRedrawTasks);\n\t\tthis._lastTimestamp = allTasksCurrentTimestamp;\n\t}\n\n\n\t_updateHelios(needsRender, needsUpdateNodesGeometry, needsUpdateEdgesGeometry, updateTimeoutAfterRender,afterRedrawTasks) {\n\t\tif (needsRender === undefined) {\n\t\t\tneedsRender = this.needsRender;\n\t\t}\n\t\tif (needsUpdateNodesGeometry === undefined) {\n\t\t\tneedsUpdateNodesGeometry = this.needsUpdateNodesGeometry;\n\t\t}\n\t\tif (needsUpdateEdgesGeometry === undefined) {\n\t\t\tneedsUpdateEdgesGeometry = this.needsUpdateEdgesGeometry;\n\t\t}\n\n\t\tif (needsUpdateNodesGeometry) {\n\t\t\tthis.helios.updateNodesGeometry();\n\t\t\tthis.needsUpdateNodesGeometry = false;\n\t\t}\n\n\t\tif (needsUpdateEdgesGeometry) {\n\t\t\tthis.helios.updateEdgesGeometry();\n\t\t\tthis.needsUpdateEdgesGeometry = false;\n\t\t}\n\n\t\tcancelAnimationFrame(this.lastRequestFrameID);\n\t\tthis.lastRequestFrameID = requestAnimationFrame(() => {\n\t\t\t// console.log(\"Executed: \"+this.lastRequestFrameID);\n\t\t\tif(this._shouldCleanup){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst now = window.performance.now();\n\t\t\twhile (this._times.length > 0 && this._times[0] <= now - 1000) {\n\t\t\t\tthis._times.shift();\n\t\t\t}\n\t\t\tthis._times.push(now);\n\t\t\tthis._averageFPS = this._times.length;\n\t\t\t// console.log(this._averageFPS);\n\n\t\t\t// if (needsUpdateNodesGeometry) {\n\t\t\t// \tthis.helios.updateNodesGeometry();\n\t\t\t// \tthis.needsUpdateNodesGeometry = false;\n\t\t\t// }\n\n\t\t\t// if (needsUpdateEdgesGeometry) {\n\t\t\t// \tthis.helios.updateEdgesGeometry();\n\t\t\t// \tthis.needsUpdateEdgesGeometry = false;\n\t\t\t// }\n\n\t\t\tif (needsRender) {\n\t\t\t\tthis.helios.redraw();\n\t\t\t\tthis.needsRender = false;\n\t\t\t}\n\t\t\tif((afterRedrawTasks?.length ||0) > 0){\n\t\t\t\tafterRedrawTasks.forEach((task) => {\n\t\t\t\t\ttask.task._timeout = setTimeout(() => {\n\t\t\t\t\t\tthis._executeTask(task.task,task.elapsedTime,task.currentTimestamp);\n\t\t\t\t\t}, 0);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (updateTimeoutAfterRender) {\n\t\t\t\tthis._lastExecutionTimestamp = window.performance.now();\n\t\t\t\tthis._updateTimeout();\n\t\t\t}\n\t\t});\n\t\t// console.log(\"Requested: \"+this.lastRequestFrameID);\n\t}\n\n\t_addTaskToQueue(task, name) {\n\t\tlet taskQueue = this._tasks[name];\n\t\ttaskQueue.push(task);\n\t\tif (taskQueue.length > this._maxQueueLength) {\n\t\t\tif (taskQueue[0].timeout) {\n\t\t\t\ttaskQueue[0].shouldBeRemoved = true;\n\t\t\t\tclearTimeout(task.taskQueue[0]);\n\t\t\t}\n\t\t\ttaskQueue.shift();\n\t\t\tconsole.warn(`One task was discarded because of too many tasks in the ${name} queue. (maxQueueLength = ${this._maxQueueLength})`);\n\t\t}\n\t}\n\n\t_clearTask(name) {\n\t\tif (name in this._tasks) {\n\t\t\tlet taskQueue = this._tasks[name];\n\t\t\tfor (let taskIndex = 0; taskIndex < taskQueue.length; taskIndex++) {\n\t\t\t\tlet task = taskQueue[taskIndex];\n\t\t\t\tif (task.timeout) {\n\t\t\t\t\ttask.shouldBeRemoved = true;\n\t\t\t\t\tclearTimeout(task.timeout);\n\t\t\t\t}\n\t\t\t}\n\t\t\ttaskQueue.length = 0;\n\t\t}\n\t}\n\n\tunschedule(name) {\n\t\t\n\t\tif (name in this._tasks) {\n\t\t\tthis._clearTask(name);\n\t\t\tdelete this._tasks[name];\n\t\t}\n\t\tthis._updateTimeout();\n\t\treturn this;\n\t}\n\n\thasTask(name) {\n\t\treturn name in this._tasks;\n\t}\n\n\n\tstart() {\n\t\tthis._started = true;\n\t\tthis._updateTimeout();\n\t\treturn this;\n\t}\n\n\n\n\tstop() {\n\t\tthis._shouldCleanup = true;\n\t\tclearTimeout(this._timeout);\n\t\tthis.paused = false;\n\t\tthis.started = false;\n\t\tthis._lastTimestamp = null;\n\t\tthis._lastExecutionTime = 0;\n\t\treturn this;\n\t}\n\n\t_updateTimeout() {\n\t\tclearTimeout(this._timeout);\n\t\tif (this._started) {\n\t\t\tif (Object.keys(this._tasks).length === 0) {\n\t\t\t\tthis.paused = true;\n\t\t\t} else {\n\t\t\t\tthis.paused = false;\n\t\t\t\tlet repeatInterval = 0\n\t\t\t\tlet currentTimestamp = window.performance.now();\n\t\t\t\tif (this._lastTimestamp != null && this._throttle) {\n\t\t\t\t\tlet fpsRepeatInterval = 1000 / this._FPS;\n\t\t\t\t\trepeatInterval = fpsRepeatInterval - (currentTimestamp-this._lastTimestamp)\n\t\t\t\t\tif (repeatInterval < 0) {\n\t\t\t\t\t\trepeatInterval = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis._lastFPS = 1000 / ((currentTimestamp-this._lastTimestamp));\n\t\t\t\t// this._lastTimestamp = this._currentTimestamp;\n\t\t\t\t\n\t\t\t\tthis._timeout = setTimeout(() => {\n\t\t\t\t\tthis.runSyncTasks();\n\t\t\t\t}, repeatInterval);\n\t\t\t}\n\t\t}\n\t}\n\n}","/*!\n\npica\nhttps://github.com/nodeca/pica\n\n*/\n\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.pica = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(_dereq_,module,exports){\n// Collection of math functions\n//\n// 1. Combine components together\n// 2. Has async init to load wasm modules\n//\n'use strict';\n\nvar Multimath = _dereq_('multimath');\n\nvar mm_unsharp_mask = _dereq_('./mm_unsharp_mask');\n\nvar mm_resize = _dereq_('./mm_resize');\n\nfunction MathLib(requested_features) {\n  var __requested_features = requested_features || [];\n\n  var features = {\n    js: __requested_features.indexOf('js') >= 0,\n    wasm: __requested_features.indexOf('wasm') >= 0\n  };\n  Multimath.call(this, features);\n  this.features = {\n    js: features.js,\n    wasm: features.wasm && this.has_wasm()\n  };\n  this.use(mm_unsharp_mask);\n  this.use(mm_resize);\n}\n\nMathLib.prototype = Object.create(Multimath.prototype);\nMathLib.prototype.constructor = MathLib;\n\nMathLib.prototype.resizeAndUnsharp = function resizeAndUnsharp(options, cache) {\n  var result = this.resize(options, cache);\n\n  if (options.unsharpAmount) {\n    this.unsharp_mask(result, options.toWidth, options.toHeight, options.unsharpAmount, options.unsharpRadius, options.unsharpThreshold);\n  }\n\n  return result;\n};\n\nmodule.exports = MathLib;\n\n},{\"./mm_resize\":4,\"./mm_unsharp_mask\":9,\"multimath\":19}],2:[function(_dereq_,module,exports){\n// Resize convolvers, pure JS implementation\n//\n'use strict'; // Precision of fixed FP values\n//var FIXED_FRAC_BITS = 14;\n\nfunction clampTo8(i) {\n  return i < 0 ? 0 : i > 255 ? 255 : i;\n}\n\nfunction clampNegative(i) {\n  return i >= 0 ? i : 0;\n} // Convolve image data in horizontal direction. Can be used for:\n//\n// 1. bitmap with premultiplied alpha\n// 2. bitmap without alpha (all values 255)\n//\n// Notes:\n//\n// - output is transposed\n// - output resolution is ~15 bits per channel(for better precision).\n//\n\n\nfunction convolveHor(src, dest, srcW, srcH, destW, filters) {\n  var r, g, b, a;\n  var filterPtr, filterShift, filterSize;\n  var srcPtr, srcY, destX, filterVal;\n  var srcOffset = 0,\n      destOffset = 0; // For each row\n\n  for (srcY = 0; srcY < srcH; srcY++) {\n    filterPtr = 0; // Apply precomputed filters to each destination row point\n\n    for (destX = 0; destX < destW; destX++) {\n      // Get the filter that determines the current output pixel.\n      filterShift = filters[filterPtr++];\n      filterSize = filters[filterPtr++];\n      srcPtr = srcOffset + filterShift * 4 | 0;\n      r = g = b = a = 0; // Apply the filter to the row to get the destination pixel r, g, b, a\n\n      for (; filterSize > 0; filterSize--) {\n        filterVal = filters[filterPtr++]; // Use reverse order to workaround deopts in old v8 (node v.10)\n        // Big thanks to @mraleph (Vyacheslav Egorov) for the tip.\n\n        a = a + filterVal * src[srcPtr + 3] | 0;\n        b = b + filterVal * src[srcPtr + 2] | 0;\n        g = g + filterVal * src[srcPtr + 1] | 0;\n        r = r + filterVal * src[srcPtr] | 0;\n        srcPtr = srcPtr + 4 | 0;\n      } // Store 15 bits between passes for better precision\n      // Instead of shift to 14 (FIXED_FRAC_BITS), shift to 7 only\n      //\n\n\n      dest[destOffset + 3] = clampNegative(a >> 7);\n      dest[destOffset + 2] = clampNegative(b >> 7);\n      dest[destOffset + 1] = clampNegative(g >> 7);\n      dest[destOffset] = clampNegative(r >> 7);\n      destOffset = destOffset + srcH * 4 | 0;\n    }\n\n    destOffset = (srcY + 1) * 4 | 0;\n    srcOffset = (srcY + 1) * srcW * 4 | 0;\n  }\n} // Supplementary method for `convolveHor()`\n//\n\n\nfunction convolveVert(src, dest, srcW, srcH, destW, filters) {\n  var r, g, b, a;\n  var filterPtr, filterShift, filterSize;\n  var srcPtr, srcY, destX, filterVal;\n  var srcOffset = 0,\n      destOffset = 0; // For each row\n\n  for (srcY = 0; srcY < srcH; srcY++) {\n    filterPtr = 0; // Apply precomputed filters to each destination row point\n\n    for (destX = 0; destX < destW; destX++) {\n      // Get the filter that determines the current output pixel.\n      filterShift = filters[filterPtr++];\n      filterSize = filters[filterPtr++];\n      srcPtr = srcOffset + filterShift * 4 | 0;\n      r = g = b = a = 0; // Apply the filter to the row to get the destination pixel r, g, b, a\n\n      for (; filterSize > 0; filterSize--) {\n        filterVal = filters[filterPtr++]; // Use reverse order to workaround deopts in old v8 (node v.10)\n        // Big thanks to @mraleph (Vyacheslav Egorov) for the tip.\n\n        a = a + filterVal * src[srcPtr + 3] | 0;\n        b = b + filterVal * src[srcPtr + 2] | 0;\n        g = g + filterVal * src[srcPtr + 1] | 0;\n        r = r + filterVal * src[srcPtr] | 0;\n        srcPtr = srcPtr + 4 | 0;\n      } // Sync with premultiplied version for exact result match\n\n\n      r >>= 7;\n      g >>= 7;\n      b >>= 7;\n      a >>= 7; // Bring this value back in range + round result.\n      //\n\n      dest[destOffset + 3] = clampTo8(a + (1 << 13) >> 14);\n      dest[destOffset + 2] = clampTo8(b + (1 << 13) >> 14);\n      dest[destOffset + 1] = clampTo8(g + (1 << 13) >> 14);\n      dest[destOffset] = clampTo8(r + (1 << 13) >> 14);\n      destOffset = destOffset + srcH * 4 | 0;\n    }\n\n    destOffset = (srcY + 1) * 4 | 0;\n    srcOffset = (srcY + 1) * srcW * 4 | 0;\n  }\n} // Premultiply & convolve image data in horizontal direction. Can be used for:\n//\n// - Any bitmap data, extracted with `.getImageData()` method (with\n//   non-premultiplied alpha)\n//\n// For images without alpha channel this method is slower than `convolveHor()`\n//\n\n\nfunction convolveHorWithPre(src, dest, srcW, srcH, destW, filters) {\n  var r, g, b, a, alpha;\n  var filterPtr, filterShift, filterSize;\n  var srcPtr, srcY, destX, filterVal;\n  var srcOffset = 0,\n      destOffset = 0; // For each row\n\n  for (srcY = 0; srcY < srcH; srcY++) {\n    filterPtr = 0; // Apply precomputed filters to each destination row point\n\n    for (destX = 0; destX < destW; destX++) {\n      // Get the filter that determines the current output pixel.\n      filterShift = filters[filterPtr++];\n      filterSize = filters[filterPtr++];\n      srcPtr = srcOffset + filterShift * 4 | 0;\n      r = g = b = a = 0; // Apply the filter to the row to get the destination pixel r, g, b, a\n\n      for (; filterSize > 0; filterSize--) {\n        filterVal = filters[filterPtr++]; // Use reverse order to workaround deopts in old v8 (node v.10)\n        // Big thanks to @mraleph (Vyacheslav Egorov) for the tip.\n\n        alpha = src[srcPtr + 3];\n        a = a + filterVal * alpha | 0;\n        b = b + filterVal * src[srcPtr + 2] * alpha | 0;\n        g = g + filterVal * src[srcPtr + 1] * alpha | 0;\n        r = r + filterVal * src[srcPtr] * alpha | 0;\n        srcPtr = srcPtr + 4 | 0;\n      } // Premultiply is (* alpha / 255).\n      // Postpone division for better performance\n\n\n      b = b / 255 | 0;\n      g = g / 255 | 0;\n      r = r / 255 | 0; // Store 15 bits between passes for better precision\n      // Instead of shift to 14 (FIXED_FRAC_BITS), shift to 7 only\n      //\n\n      dest[destOffset + 3] = clampNegative(a >> 7);\n      dest[destOffset + 2] = clampNegative(b >> 7);\n      dest[destOffset + 1] = clampNegative(g >> 7);\n      dest[destOffset] = clampNegative(r >> 7);\n      destOffset = destOffset + srcH * 4 | 0;\n    }\n\n    destOffset = (srcY + 1) * 4 | 0;\n    srcOffset = (srcY + 1) * srcW * 4 | 0;\n  }\n} // Supplementary method for `convolveHorWithPre()`\n//\n\n\nfunction convolveVertWithPre(src, dest, srcW, srcH, destW, filters) {\n  var r, g, b, a;\n  var filterPtr, filterShift, filterSize;\n  var srcPtr, srcY, destX, filterVal;\n  var srcOffset = 0,\n      destOffset = 0; // For each row\n\n  for (srcY = 0; srcY < srcH; srcY++) {\n    filterPtr = 0; // Apply precomputed filters to each destination row point\n\n    for (destX = 0; destX < destW; destX++) {\n      // Get the filter that determines the current output pixel.\n      filterShift = filters[filterPtr++];\n      filterSize = filters[filterPtr++];\n      srcPtr = srcOffset + filterShift * 4 | 0;\n      r = g = b = a = 0; // Apply the filter to the row to get the destination pixel r, g, b, a\n\n      for (; filterSize > 0; filterSize--) {\n        filterVal = filters[filterPtr++]; // Use reverse order to workaround deopts in old v8 (node v.10)\n        // Big thanks to @mraleph (Vyacheslav Egorov) for the tip.\n\n        a = a + filterVal * src[srcPtr + 3] | 0;\n        b = b + filterVal * src[srcPtr + 2] | 0;\n        g = g + filterVal * src[srcPtr + 1] | 0;\n        r = r + filterVal * src[srcPtr] | 0;\n        srcPtr = srcPtr + 4 | 0;\n      } // Downscale to leave room for un-premultiply\n\n\n      r >>= 7;\n      g >>= 7;\n      b >>= 7;\n      a >>= 7; // Un-premultiply\n\n      a = clampTo8(a + (1 << 13) >> 14);\n\n      if (a > 0) {\n        r = r * 255 / a | 0;\n        g = g * 255 / a | 0;\n        b = b * 255 / a | 0;\n      } // Bring this value back in range + round result.\n      // Shift value = FIXED_FRAC_BITS + 7\n      //\n\n\n      dest[destOffset + 3] = a;\n      dest[destOffset + 2] = clampTo8(b + (1 << 13) >> 14);\n      dest[destOffset + 1] = clampTo8(g + (1 << 13) >> 14);\n      dest[destOffset] = clampTo8(r + (1 << 13) >> 14);\n      destOffset = destOffset + srcH * 4 | 0;\n    }\n\n    destOffset = (srcY + 1) * 4 | 0;\n    srcOffset = (srcY + 1) * srcW * 4 | 0;\n  }\n}\n\nmodule.exports = {\n  convolveHor: convolveHor,\n  convolveVert: convolveVert,\n  convolveHorWithPre: convolveHorWithPre,\n  convolveVertWithPre: convolveVertWithPre\n};\n\n},{}],3:[function(_dereq_,module,exports){\n// This is autogenerated file from math.wasm, don't edit.\n//\n'use strict';\n/* eslint-disable max-len */\n\nmodule.exports = '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';\n\n},{}],4:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = {\n  name: 'resize',\n  fn: _dereq_('./resize'),\n  wasm_fn: _dereq_('./resize_wasm'),\n  wasm_src: _dereq_('./convolve_wasm_base64')\n};\n\n},{\"./convolve_wasm_base64\":3,\"./resize\":5,\"./resize_wasm\":8}],5:[function(_dereq_,module,exports){\n'use strict';\n\nvar createFilters = _dereq_('./resize_filter_gen');\n\nvar _require = _dereq_('./convolve'),\n    convolveHor = _require.convolveHor,\n    convolveVert = _require.convolveVert,\n    convolveHorWithPre = _require.convolveHorWithPre,\n    convolveVertWithPre = _require.convolveVertWithPre;\n\nfunction hasAlpha(src, width, height) {\n  var ptr = 3,\n      len = width * height * 4 | 0;\n\n  while (ptr < len) {\n    if (src[ptr] !== 255) return true;\n    ptr = ptr + 4 | 0;\n  }\n\n  return false;\n}\n\nfunction resetAlpha(dst, width, height) {\n  var ptr = 3,\n      len = width * height * 4 | 0;\n\n  while (ptr < len) {\n    dst[ptr] = 0xFF;\n    ptr = ptr + 4 | 0;\n  }\n}\n\nmodule.exports = function resize(options) {\n  var src = options.src;\n  var srcW = options.width;\n  var srcH = options.height;\n  var destW = options.toWidth;\n  var destH = options.toHeight;\n  var scaleX = options.scaleX || options.toWidth / options.width;\n  var scaleY = options.scaleY || options.toHeight / options.height;\n  var offsetX = options.offsetX || 0;\n  var offsetY = options.offsetY || 0;\n  var dest = options.dest || new Uint8Array(destW * destH * 4);\n  var filter = typeof options.filter === 'undefined' ? 'mks2013' : options.filter;\n  var filtersX = createFilters(filter, srcW, destW, scaleX, offsetX),\n      filtersY = createFilters(filter, srcH, destH, scaleY, offsetY);\n  var tmp = new Uint16Array(destW * srcH * 4); // Autodetect if alpha channel exists, and use appropriate method\n\n  if (hasAlpha(src, srcW, srcH)) {\n    convolveHorWithPre(src, tmp, srcW, srcH, destW, filtersX);\n    convolveVertWithPre(tmp, dest, srcH, destW, destH, filtersY);\n  } else {\n    convolveHor(src, tmp, srcW, srcH, destW, filtersX);\n    convolveVert(tmp, dest, srcH, destW, destH, filtersY);\n    resetAlpha(dest, destW, destH);\n  }\n\n  return dest;\n};\n\n},{\"./convolve\":2,\"./resize_filter_gen\":6}],6:[function(_dereq_,module,exports){\n// Calculate convolution filters for each destination point,\n// and pack data to Int16Array:\n//\n// [ shift, length, data..., shift2, length2, data..., ... ]\n//\n// - shift - offset in src image\n// - length - filter length (in src points)\n// - data - filter values sequence\n//\n'use strict';\n\nvar FILTER_INFO = _dereq_('./resize_filter_info'); // Precision of fixed FP values\n\n\nvar FIXED_FRAC_BITS = 14;\n\nfunction toFixedPoint(num) {\n  return Math.round(num * ((1 << FIXED_FRAC_BITS) - 1));\n}\n\nmodule.exports = function resizeFilterGen(filter, srcSize, destSize, scale, offset) {\n  var filterFunction = FILTER_INFO.filter[filter].fn;\n  var scaleInverted = 1.0 / scale;\n  var scaleClamped = Math.min(1.0, scale); // For upscale\n  // Filter window (averaging interval), scaled to src image\n\n  var srcWindow = FILTER_INFO.filter[filter].win / scaleClamped;\n  var destPixel, srcPixel, srcFirst, srcLast, filterElementSize, floatFilter, fxpFilter, total, pxl, idx, floatVal, filterTotal, filterVal;\n  var leftNotEmpty, rightNotEmpty, filterShift, filterSize;\n  var maxFilterElementSize = Math.floor((srcWindow + 1) * 2);\n  var packedFilter = new Int16Array((maxFilterElementSize + 2) * destSize);\n  var packedFilterPtr = 0;\n  var slowCopy = !packedFilter.subarray || !packedFilter.set; // For each destination pixel calculate source range and built filter values\n\n  for (destPixel = 0; destPixel < destSize; destPixel++) {\n    // Scaling should be done relative to central pixel point\n    srcPixel = (destPixel + 0.5) * scaleInverted + offset;\n    srcFirst = Math.max(0, Math.floor(srcPixel - srcWindow));\n    srcLast = Math.min(srcSize - 1, Math.ceil(srcPixel + srcWindow));\n    filterElementSize = srcLast - srcFirst + 1;\n    floatFilter = new Float32Array(filterElementSize);\n    fxpFilter = new Int16Array(filterElementSize);\n    total = 0.0; // Fill filter values for calculated range\n\n    for (pxl = srcFirst, idx = 0; pxl <= srcLast; pxl++, idx++) {\n      floatVal = filterFunction((pxl + 0.5 - srcPixel) * scaleClamped);\n      total += floatVal;\n      floatFilter[idx] = floatVal;\n    } // Normalize filter, convert to fixed point and accumulate conversion error\n\n\n    filterTotal = 0;\n\n    for (idx = 0; idx < floatFilter.length; idx++) {\n      filterVal = floatFilter[idx] / total;\n      filterTotal += filterVal;\n      fxpFilter[idx] = toFixedPoint(filterVal);\n    } // Compensate normalization error, to minimize brightness drift\n\n\n    fxpFilter[destSize >> 1] += toFixedPoint(1.0 - filterTotal); //\n    // Now pack filter to useable form\n    //\n    // 1. Trim heading and tailing zero values, and compensate shitf/length\n    // 2. Put all to single array in this format:\n    //\n    //    [ pos shift, data length, value1, value2, value3, ... ]\n    //\n\n    leftNotEmpty = 0;\n\n    while (leftNotEmpty < fxpFilter.length && fxpFilter[leftNotEmpty] === 0) {\n      leftNotEmpty++;\n    }\n\n    if (leftNotEmpty < fxpFilter.length) {\n      rightNotEmpty = fxpFilter.length - 1;\n\n      while (rightNotEmpty > 0 && fxpFilter[rightNotEmpty] === 0) {\n        rightNotEmpty--;\n      }\n\n      filterShift = srcFirst + leftNotEmpty;\n      filterSize = rightNotEmpty - leftNotEmpty + 1;\n      packedFilter[packedFilterPtr++] = filterShift; // shift\n\n      packedFilter[packedFilterPtr++] = filterSize; // size\n\n      if (!slowCopy) {\n        packedFilter.set(fxpFilter.subarray(leftNotEmpty, rightNotEmpty + 1), packedFilterPtr);\n        packedFilterPtr += filterSize;\n      } else {\n        // fallback for old IE < 11, without subarray/set methods\n        for (idx = leftNotEmpty; idx <= rightNotEmpty; idx++) {\n          packedFilter[packedFilterPtr++] = fxpFilter[idx];\n        }\n      }\n    } else {\n      // zero data, write header only\n      packedFilter[packedFilterPtr++] = 0; // shift\n\n      packedFilter[packedFilterPtr++] = 0; // size\n    }\n  }\n\n  return packedFilter;\n};\n\n},{\"./resize_filter_info\":7}],7:[function(_dereq_,module,exports){\n// Filter definitions to build tables for\n// resizing convolvers.\n//\n// Presets for quality 0..3. Filter functions + window size\n//\n'use strict';\n\nvar filter = {\n  // Nearest neibor\n  box: {\n    win: 0.5,\n    fn: function fn(x) {\n      if (x < 0) x = -x;\n      return x < 0.5 ? 1.0 : 0.0;\n    }\n  },\n  // // Hamming\n  hamming: {\n    win: 1.0,\n    fn: function fn(x) {\n      if (x < 0) x = -x;\n\n      if (x >= 1.0) {\n        return 0.0;\n      }\n\n      if (x < 1.19209290E-07) {\n        return 1.0;\n      }\n\n      var xpi = x * Math.PI;\n      return Math.sin(xpi) / xpi * (0.54 + 0.46 * Math.cos(xpi / 1.0));\n    }\n  },\n  // Lanczos, win = 2\n  lanczos2: {\n    win: 2.0,\n    fn: function fn(x) {\n      if (x < 0) x = -x;\n\n      if (x >= 2.0) {\n        return 0.0;\n      }\n\n      if (x < 1.19209290E-07) {\n        return 1.0;\n      }\n\n      var xpi = x * Math.PI;\n      return Math.sin(xpi) / xpi * Math.sin(xpi / 2.0) / (xpi / 2.0);\n    }\n  },\n  // Lanczos, win = 3\n  lanczos3: {\n    win: 3.0,\n    fn: function fn(x) {\n      if (x < 0) x = -x;\n\n      if (x >= 3.0) {\n        return 0.0;\n      }\n\n      if (x < 1.19209290E-07) {\n        return 1.0;\n      }\n\n      var xpi = x * Math.PI;\n      return Math.sin(xpi) / xpi * Math.sin(xpi / 3.0) / (xpi / 3.0);\n    }\n  },\n  // Magic Kernel Sharp 2013, win = 2.5\n  // http://johncostella.com/magic/\n  mks2013: {\n    win: 2.5,\n    fn: function fn(x) {\n      if (x < 0) x = -x;\n\n      if (x >= 2.5) {\n        return 0.0;\n      }\n\n      if (x >= 1.5) {\n        return -0.125 * (x - 2.5) * (x - 2.5);\n      }\n\n      if (x >= 0.5) {\n        return 0.25 * (4 * x * x - 11 * x + 7);\n      }\n\n      return 1.0625 - 1.75 * x * x;\n    }\n  }\n};\nmodule.exports = {\n  filter: filter,\n  // Legacy mapping\n  f2q: {\n    box: 0,\n    hamming: 1,\n    lanczos2: 2,\n    lanczos3: 3\n  },\n  q2f: ['box', 'hamming', 'lanczos2', 'lanczos3']\n};\n\n},{}],8:[function(_dereq_,module,exports){\n'use strict';\n\nvar createFilters = _dereq_('./resize_filter_gen');\n\nfunction hasAlpha(src, width, height) {\n  var ptr = 3,\n      len = width * height * 4 | 0;\n\n  while (ptr < len) {\n    if (src[ptr] !== 255) return true;\n    ptr = ptr + 4 | 0;\n  }\n\n  return false;\n}\n\nfunction resetAlpha(dst, width, height) {\n  var ptr = 3,\n      len = width * height * 4 | 0;\n\n  while (ptr < len) {\n    dst[ptr] = 0xFF;\n    ptr = ptr + 4 | 0;\n  }\n}\n\nfunction asUint8Array(src) {\n  return new Uint8Array(src.buffer, 0, src.byteLength);\n}\n\nvar IS_LE = true; // should not crash everything on module load in old browsers\n\ntry {\n  IS_LE = new Uint32Array(new Uint8Array([1, 0, 0, 0]).buffer)[0] === 1;\n} catch (__) {}\n\nfunction copyInt16asLE(src, target, target_offset) {\n  if (IS_LE) {\n    target.set(asUint8Array(src), target_offset);\n    return;\n  }\n\n  for (var ptr = target_offset, i = 0; i < src.length; i++) {\n    var data = src[i];\n    target[ptr++] = data & 0xFF;\n    target[ptr++] = data >> 8 & 0xFF;\n  }\n}\n\nmodule.exports = function resize_wasm(options) {\n  var src = options.src;\n  var srcW = options.width;\n  var srcH = options.height;\n  var destW = options.toWidth;\n  var destH = options.toHeight;\n  var scaleX = options.scaleX || options.toWidth / options.width;\n  var scaleY = options.scaleY || options.toHeight / options.height;\n  var offsetX = options.offsetX || 0.0;\n  var offsetY = options.offsetY || 0.0;\n  var dest = options.dest || new Uint8Array(destW * destH * 4);\n  var filter = typeof options.filter === 'undefined' ? 'mks2013' : options.filter;\n  var filtersX = createFilters(filter, srcW, destW, scaleX, offsetX),\n      filtersY = createFilters(filter, srcH, destH, scaleY, offsetY); // destination is 0 too.\n\n  var src_offset = 0;\n  var src_size = Math.max(src.byteLength, dest.byteLength); // buffer between convolve passes\n\n  var tmp_offset = this.__align(src_offset + src_size);\n\n  var tmp_size = srcH * destW * 4 * 2; // 2 bytes per channel\n\n  var filtersX_offset = this.__align(tmp_offset + tmp_size);\n\n  var filtersY_offset = this.__align(filtersX_offset + filtersX.byteLength);\n\n  var alloc_bytes = filtersY_offset + filtersY.byteLength;\n\n  var instance = this.__instance('resize', alloc_bytes); //\n  // Fill memory block with data to process\n  //\n\n\n  var mem = new Uint8Array(this.__memory.buffer);\n  var mem32 = new Uint32Array(this.__memory.buffer); // 32-bit copy is much faster in chrome\n\n  var src32 = new Uint32Array(src.buffer);\n  mem32.set(src32); // We should guarantee LE bytes order. Filters are not big, so\n  // speed difference is not significant vs direct .set()\n\n  copyInt16asLE(filtersX, mem, filtersX_offset);\n  copyInt16asLE(filtersY, mem, filtersY_offset); // Now call webassembly method\n  // emsdk does method names with '_'\n\n  var fn = instance.exports.convolveHV || instance.exports._convolveHV;\n\n  if (hasAlpha(src, srcW, srcH)) {\n    fn(filtersX_offset, filtersY_offset, tmp_offset, srcW, srcH, destW, destH, 1);\n  } else {\n    fn(filtersX_offset, filtersY_offset, tmp_offset, srcW, srcH, destW, destH, 0);\n    resetAlpha(dest, destW, destH);\n  } //\n  // Copy data back to typed array\n  //\n  // 32-bit copy is much faster in chrome\n\n\n  var dest32 = new Uint32Array(dest.buffer);\n  dest32.set(new Uint32Array(this.__memory.buffer, 0, destH * destW));\n  return dest;\n};\n\n},{\"./resize_filter_gen\":6}],9:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = {\n  name: 'unsharp_mask',\n  fn: _dereq_('./unsharp_mask'),\n  wasm_fn: _dereq_('./unsharp_mask_wasm'),\n  wasm_src: _dereq_('./unsharp_mask_wasm_base64')\n};\n\n},{\"./unsharp_mask\":10,\"./unsharp_mask_wasm\":11,\"./unsharp_mask_wasm_base64\":12}],10:[function(_dereq_,module,exports){\n// Unsharp mask filter\n//\n// http://stackoverflow.com/a/23322820/1031804\n// USM(O) = O + (2 * (Amount / 100) * (O - GB))\n// GB - gaussian blur.\n//\n// Image is converted from RGB to HSV, unsharp mask is applied to the\n// brightness channel and then image is converted back to RGB.\n//\n'use strict';\n\nvar glur_mono16 = _dereq_('glur/mono16');\n\nfunction hsv_v16(img, width, height) {\n  var size = width * height;\n  var out = new Uint16Array(size);\n  var r, g, b, max;\n\n  for (var i = 0; i < size; i++) {\n    r = img[4 * i];\n    g = img[4 * i + 1];\n    b = img[4 * i + 2];\n    max = r >= g && r >= b ? r : g >= b && g >= r ? g : b;\n    out[i] = max << 8;\n  }\n\n  return out;\n}\n\nmodule.exports = function unsharp(img, width, height, amount, radius, threshold) {\n  var v1, v2, vmul;\n  var diff, iTimes4;\n\n  if (amount === 0 || radius < 0.5) {\n    return;\n  }\n\n  if (radius > 2.0) {\n    radius = 2.0;\n  }\n\n  var brightness = hsv_v16(img, width, height);\n  var blured = new Uint16Array(brightness); // copy, because blur modify src\n\n  glur_mono16(blured, width, height, radius);\n  var amountFp = amount / 100 * 0x1000 + 0.5 | 0;\n  var thresholdFp = threshold << 8;\n  var size = width * height;\n  /* eslint-disable indent */\n\n  for (var i = 0; i < size; i++) {\n    v1 = brightness[i];\n    diff = v1 - blured[i];\n\n    if (Math.abs(diff) >= thresholdFp) {\n      // add unsharp mask to the brightness channel\n      v2 = v1 + (amountFp * diff + 0x800 >> 12); // Both v1 and v2 are within [0.0 .. 255.0] (0000-FF00) range, never going into\n      // [255.003 .. 255.996] (FF01-FFFF). This allows to round this value as (x+.5)|0\n      // later without overflowing.\n\n      v2 = v2 > 0xff00 ? 0xff00 : v2;\n      v2 = v2 < 0x0000 ? 0x0000 : v2; // Avoid division by 0. V=0 means rgb(0,0,0), unsharp with unsharpAmount>0 cannot\n      // change this value (because diff between colors gets inflated), so no need to verify correctness.\n\n      v1 = v1 !== 0 ? v1 : 1; // Multiplying V in HSV model by a constant is equivalent to multiplying each component\n      // in RGB by the same constant (same for HSL), see also:\n      // https://beesbuzz.biz/code/16-hsv-color-transforms\n\n      vmul = (v2 << 12) / v1 | 0; // Result will be in [0..255] range because:\n      //  - all numbers are positive\n      //  - r,g,b <= (v1/256)\n      //  - r,g,b,(v1/256),(v2/256) <= 255\n      // So highest this number can get is X*255/X+0.5=255.5 which is < 256 and rounds down.\n\n      iTimes4 = i * 4;\n      img[iTimes4] = img[iTimes4] * vmul + 0x800 >> 12; // R\n\n      img[iTimes4 + 1] = img[iTimes4 + 1] * vmul + 0x800 >> 12; // G\n\n      img[iTimes4 + 2] = img[iTimes4 + 2] * vmul + 0x800 >> 12; // B\n    }\n  }\n};\n\n},{\"glur/mono16\":18}],11:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = function unsharp(img, width, height, amount, radius, threshold) {\n  if (amount === 0 || radius < 0.5) {\n    return;\n  }\n\n  if (radius > 2.0) {\n    radius = 2.0;\n  }\n\n  var pixels = width * height;\n  var img_bytes_cnt = pixels * 4;\n  var hsv_bytes_cnt = pixels * 2;\n  var blur_bytes_cnt = pixels * 2;\n  var blur_line_byte_cnt = Math.max(width, height) * 4; // float32 array\n\n  var blur_coeffs_byte_cnt = 8 * 4; // float32 array\n\n  var img_offset = 0;\n  var hsv_offset = img_bytes_cnt;\n  var blur_offset = hsv_offset + hsv_bytes_cnt;\n  var blur_tmp_offset = blur_offset + blur_bytes_cnt;\n  var blur_line_offset = blur_tmp_offset + blur_bytes_cnt;\n  var blur_coeffs_offset = blur_line_offset + blur_line_byte_cnt;\n\n  var instance = this.__instance('unsharp_mask', img_bytes_cnt + hsv_bytes_cnt + blur_bytes_cnt * 2 + blur_line_byte_cnt + blur_coeffs_byte_cnt, {\n    exp: Math.exp\n  }); // 32-bit copy is much faster in chrome\n\n\n  var img32 = new Uint32Array(img.buffer);\n  var mem32 = new Uint32Array(this.__memory.buffer);\n  mem32.set(img32); // HSL\n\n  var fn = instance.exports.hsv_v16 || instance.exports._hsv_v16;\n  fn(img_offset, hsv_offset, width, height); // BLUR\n\n  fn = instance.exports.blurMono16 || instance.exports._blurMono16;\n  fn(hsv_offset, blur_offset, blur_tmp_offset, blur_line_offset, blur_coeffs_offset, width, height, radius); // UNSHARP\n\n  fn = instance.exports.unsharp || instance.exports._unsharp;\n  fn(img_offset, img_offset, hsv_offset, blur_offset, width, height, amount, threshold); // 32-bit copy is much faster in chrome\n\n  img32.set(new Uint32Array(this.__memory.buffer, 0, pixels));\n};\n\n},{}],12:[function(_dereq_,module,exports){\n// This is autogenerated file from math.wasm, don't edit.\n//\n'use strict';\n/* eslint-disable max-len */\n\nmodule.exports = 'AGFzbQEAAAAADAZkeWxpbmsAAAAAAAE0B2AAAGAEf39/fwBgBn9/f39/fwBgCH9/f39/f39/AGAIf39/f39/f30AYAJ9fwBgAXwBfAIZAgNlbnYDZXhwAAYDZW52Bm1lbW9yeQIAAAMHBgAFAgQBAwYGAX8AQQALB4oBCBFfX3dhc21fY2FsbF9jdG9ycwABFl9fYnVpbGRfZ2F1c3NpYW5fY29lZnMAAg5fX2dhdXNzMTZfbGluZQADCmJsdXJNb25vMTYABAdoc3ZfdjE2AAUHdW5zaGFycAAGDF9fZHNvX2hhbmRsZQMAGF9fd2FzbV9hcHBseV9kYXRhX3JlbG9jcwABCsUMBgMAAQvWAQEHfCABRNuGukOCGvs/IAC7oyICRAAAAAAAAADAohAAIgW2jDgCFCABIAKaEAAiAyADoCIGtjgCECABRAAAAAAAAPA/IAOhIgQgBKIgAyACIAKgokQAAAAAAADwP6AgBaGjIgS2OAIAIAEgBSAEmqIiB7Y4AgwgASADIAJEAAAAAAAA8D+gIASioiIItjgCCCABIAMgAkQAAAAAAADwv6AgBKKiIgK2OAIEIAEgByAIoCAFRAAAAAAAAPA/IAahoCIDo7Y4AhwgASAEIAKgIAOjtjgCGAuGBQMGfwl8An0gAyoCDCEVIAMqAgghFiADKgIUuyERIAMqAhC7IRACQCAEQQFrIghBAEgiCQRAIAIhByAAIQYMAQsgAiAALwEAuCIPIAMqAhi7oiIMIBGiIg0gDCAQoiAPIAMqAgS7IhOiIhQgAyoCALsiEiAPoqCgoCIOtjgCACACQQRqIQcgAEECaiEGIAhFDQAgCEEBIAhBAUgbIgpBf3MhCwJ/IAQgCmtBAXFFBEAgDiENIAgMAQsgAiANIA4gEKIgFCASIAAvAQK4Ig+ioKCgIg22OAIEIAJBCGohByAAQQRqIQYgDiEMIARBAmsLIQIgC0EAIARrRg0AA0AgByAMIBGiIA0gEKIgDyAToiASIAYvAQC4Ig6ioKCgIgy2OAIAIAcgDSARoiAMIBCiIA4gE6IgEiAGLwECuCIPoqCgoCINtjgCBCAHQQhqIQcgBkEEaiEGIAJBAkohACACQQJrIQIgAA0ACwsCQCAJDQAgASAFIAhsQQF0aiIAAn8gBkECay8BACICuCINIBW7IhKiIA0gFrsiE6KgIA0gAyoCHLuiIgwgEKKgIAwgEaKgIg8gB0EEayIHKgIAu6AiDkQAAAAAAADwQWMgDkQAAAAAAAAAAGZxBEAgDqsMAQtBAAs7AQAgCEUNACAGQQRrIQZBACAFa0EBdCEBA0ACfyANIBKiIAJB//8DcbgiDSAToqAgDyIOIBCioCAMIBGioCIPIAdBBGsiByoCALugIgxEAAAAAAAA8EFjIAxEAAAAAAAAAABmcQRAIAyrDAELQQALIQMgBi8BACECIAAgAWoiACADOwEAIAZBAmshBiAIQQFKIQMgDiEMIAhBAWshCCADDQALCwvRAgIBfwd8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIglEAAAAAAAAAMCiEAAiDLaMOAIUIAQgCZoQACIKIAqgIg22OAIQIAREAAAAAAAA8D8gCqEiCyALoiAKIAkgCaCiRAAAAAAAAPA/oCAMoaMiC7Y4AgAgBCAMIAuaoiIOtjgCDCAEIAogCUQAAAAAAADwP6AgC6KiIg+2OAIIIAQgCiAJRAAAAAAAAPC/oCALoqIiCbY4AgQgBCAOIA+gIAxEAAAAAAAA8D8gDaGgIgqjtjgCHCAEIAsgCaAgCqO2OAIYIAYEQANAIAAgBSAIbEEBdGogAiAIQQF0aiADIAQgBSAGEAMgCEEBaiIIIAZHDQALCyAFRQ0AQQAhCANAIAIgBiAIbEEBdGogASAIQQF0aiADIAQgBiAFEAMgCEEBaiIIIAVHDQALCwtxAQN/IAIgA2wiBQRAA0AgASAAKAIAIgRBEHZB/wFxIgIgAiAEQQh2Qf8BcSIDIAMgBEH/AXEiBEkbIAIgA0sbIgYgBiAEIAIgBEsbIAMgBEsbQQh0OwEAIAFBAmohASAAQQRqIQAgBUEBayIFDQALCwuZAgIDfwF8IAQgBWwhBAJ/IAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6AiC5lEAAAAAAAA4EFjBEAgC6oMAQtBgICAgHgLIQUgBARAIAdBCHQhCUEAIQYDQCAJIAIgBkEBdCIHai8BACIBIAMgB2ovAQBrIgcgB0EfdSIIaiAIc00EQCAAIAZBAnQiCGoiCiAFIAdsQYAQakEMdSABaiIHQYD+AyAHQYD+A0gbIgdBACAHQQBKG0EMdCABQQEgARtuIgEgCi0AAGxBgBBqQQx2OgAAIAAgCEEBcmoiByABIActAABsQYAQakEMdjoAACAAIAhBAnJqIgcgASAHLQAAbEGAEGpBDHY6AAALIAZBAWoiBiAERw0ACwsL';\n\n},{}],13:[function(_dereq_,module,exports){\n'use strict';\n\nvar GC_INTERVAL = 100;\n\nfunction Pool(create, idle) {\n  this.create = create;\n  this.available = [];\n  this.acquired = {};\n  this.lastId = 1;\n  this.timeoutId = 0;\n  this.idle = idle || 2000;\n}\n\nPool.prototype.acquire = function () {\n  var _this = this;\n\n  var resource;\n\n  if (this.available.length !== 0) {\n    resource = this.available.pop();\n  } else {\n    resource = this.create();\n    resource.id = this.lastId++;\n\n    resource.release = function () {\n      return _this.release(resource);\n    };\n  }\n\n  this.acquired[resource.id] = resource;\n  return resource;\n};\n\nPool.prototype.release = function (resource) {\n  var _this2 = this;\n\n  delete this.acquired[resource.id];\n  resource.lastUsed = Date.now();\n  this.available.push(resource);\n\n  if (this.timeoutId === 0) {\n    this.timeoutId = setTimeout(function () {\n      return _this2.gc();\n    }, GC_INTERVAL);\n  }\n};\n\nPool.prototype.gc = function () {\n  var _this3 = this;\n\n  var now = Date.now();\n  this.available = this.available.filter(function (resource) {\n    if (now - resource.lastUsed > _this3.idle) {\n      resource.destroy();\n      return false;\n    }\n\n    return true;\n  });\n\n  if (this.available.length !== 0) {\n    this.timeoutId = setTimeout(function () {\n      return _this3.gc();\n    }, GC_INTERVAL);\n  } else {\n    this.timeoutId = 0;\n  }\n};\n\nmodule.exports = Pool;\n\n},{}],14:[function(_dereq_,module,exports){\n// Add intermediate resizing steps when scaling down by a very large factor.\n//\n// For example, when resizing 10000x10000 down to 10x10, it'll resize it to\n// 300x300 first.\n//\n// It's needed because tiler has issues when the entire tile is scaled down\n// to a few pixels (1024px source tile with border size 3 should result in\n// at least 3+3+2 = 8px target tile, so max scale factor is 128 here).\n//\n// Also, adding intermediate steps can speed up processing if we use lower\n// quality algorithms for first stages.\n//\n'use strict'; // min size = 0 results in infinite loop,\n// min size = 1 can consume large amount of memory\n\nvar MIN_INNER_TILE_SIZE = 2;\n\nmodule.exports = function createStages(fromWidth, fromHeight, toWidth, toHeight, srcTileSize, destTileBorder) {\n  var scaleX = toWidth / fromWidth;\n  var scaleY = toHeight / fromHeight; // derived from createRegions equation:\n  // innerTileWidth = pixelFloor(srcTileSize * scaleX) - 2 * destTileBorder;\n\n  var minScale = (2 * destTileBorder + MIN_INNER_TILE_SIZE + 1) / srcTileSize; // refuse to scale image multiple times by less than twice each time,\n  // it could only happen because of invalid options\n\n  if (minScale > 0.5) return [[toWidth, toHeight]];\n  var stageCount = Math.ceil(Math.log(Math.min(scaleX, scaleY)) / Math.log(minScale)); // no additional resizes are necessary,\n  // stageCount can be zero or be negative when enlarging the image\n\n  if (stageCount <= 1) return [[toWidth, toHeight]];\n  var result = [];\n\n  for (var i = 0; i < stageCount; i++) {\n    var width = Math.round(Math.pow(Math.pow(fromWidth, stageCount - i - 1) * Math.pow(toWidth, i + 1), 1 / stageCount));\n    var height = Math.round(Math.pow(Math.pow(fromHeight, stageCount - i - 1) * Math.pow(toHeight, i + 1), 1 / stageCount));\n    result.push([width, height]);\n  }\n\n  return result;\n};\n\n},{}],15:[function(_dereq_,module,exports){\n// Split original image into multiple 1024x1024 chunks to reduce memory usage\n// (images have to be unpacked into typed arrays for resizing) and allow\n// parallel processing of multiple tiles at a time.\n//\n'use strict';\n/*\n * pixelFloor and pixelCeil are modified versions of Math.floor and Math.ceil\n * functions which take into account floating point arithmetic errors.\n * Those errors can cause undesired increments/decrements of sizes and offsets:\n * Math.ceil(36 / (36 / 500)) = 501\n * pixelCeil(36 / (36 / 500)) = 500\n */\n\nvar PIXEL_EPSILON = 1e-5;\n\nfunction pixelFloor(x) {\n  var nearest = Math.round(x);\n\n  if (Math.abs(x - nearest) < PIXEL_EPSILON) {\n    return nearest;\n  }\n\n  return Math.floor(x);\n}\n\nfunction pixelCeil(x) {\n  var nearest = Math.round(x);\n\n  if (Math.abs(x - nearest) < PIXEL_EPSILON) {\n    return nearest;\n  }\n\n  return Math.ceil(x);\n}\n\nmodule.exports = function createRegions(options) {\n  var scaleX = options.toWidth / options.width;\n  var scaleY = options.toHeight / options.height;\n  var innerTileWidth = pixelFloor(options.srcTileSize * scaleX) - 2 * options.destTileBorder;\n  var innerTileHeight = pixelFloor(options.srcTileSize * scaleY) - 2 * options.destTileBorder; // prevent infinite loop, this should never happen\n\n  if (innerTileWidth < 1 || innerTileHeight < 1) {\n    throw new Error('Internal error in pica: target tile width/height is too small.');\n  }\n\n  var x, y;\n  var innerX, innerY, toTileWidth, toTileHeight;\n  var tiles = [];\n  var tile; // we go top-to-down instead of left-to-right to make image displayed from top to\n  // doesn in the browser\n\n  for (innerY = 0; innerY < options.toHeight; innerY += innerTileHeight) {\n    for (innerX = 0; innerX < options.toWidth; innerX += innerTileWidth) {\n      x = innerX - options.destTileBorder;\n\n      if (x < 0) {\n        x = 0;\n      }\n\n      toTileWidth = innerX + innerTileWidth + options.destTileBorder - x;\n\n      if (x + toTileWidth >= options.toWidth) {\n        toTileWidth = options.toWidth - x;\n      }\n\n      y = innerY - options.destTileBorder;\n\n      if (y < 0) {\n        y = 0;\n      }\n\n      toTileHeight = innerY + innerTileHeight + options.destTileBorder - y;\n\n      if (y + toTileHeight >= options.toHeight) {\n        toTileHeight = options.toHeight - y;\n      }\n\n      tile = {\n        toX: x,\n        toY: y,\n        toWidth: toTileWidth,\n        toHeight: toTileHeight,\n        toInnerX: innerX,\n        toInnerY: innerY,\n        toInnerWidth: innerTileWidth,\n        toInnerHeight: innerTileHeight,\n        offsetX: x / scaleX - pixelFloor(x / scaleX),\n        offsetY: y / scaleY - pixelFloor(y / scaleY),\n        scaleX: scaleX,\n        scaleY: scaleY,\n        x: pixelFloor(x / scaleX),\n        y: pixelFloor(y / scaleY),\n        width: pixelCeil(toTileWidth / scaleX),\n        height: pixelCeil(toTileHeight / scaleY)\n      };\n      tiles.push(tile);\n    }\n  }\n\n  return tiles;\n};\n\n},{}],16:[function(_dereq_,module,exports){\n'use strict';\n\nfunction objClass(obj) {\n  return Object.prototype.toString.call(obj);\n}\n\nmodule.exports.isCanvas = function isCanvas(element) {\n  var cname = objClass(element);\n  return cname === '[object HTMLCanvasElement]'\n  /* browser */\n  || cname === '[object OffscreenCanvas]' || cname === '[object Canvas]'\n  /* node-canvas */\n  ;\n};\n\nmodule.exports.isImage = function isImage(element) {\n  return objClass(element) === '[object HTMLImageElement]';\n};\n\nmodule.exports.isImageBitmap = function isImageBitmap(element) {\n  return objClass(element) === '[object ImageBitmap]';\n};\n\nmodule.exports.limiter = function limiter(concurrency) {\n  var active = 0,\n      queue = [];\n\n  function roll() {\n    if (active < concurrency && queue.length) {\n      active++;\n      queue.shift()();\n    }\n  }\n\n  return function limit(fn) {\n    return new Promise(function (resolve, reject) {\n      queue.push(function () {\n        fn().then(function (result) {\n          resolve(result);\n          active--;\n          roll();\n        }, function (err) {\n          reject(err);\n          active--;\n          roll();\n        });\n      });\n      roll();\n    });\n  };\n};\n\nmodule.exports.cib_quality_name = function cib_quality_name(num) {\n  switch (num) {\n    case 0:\n      return 'pixelated';\n\n    case 1:\n      return 'low';\n\n    case 2:\n      return 'medium';\n  }\n\n  return 'high';\n};\n\nmodule.exports.cib_support = function cib_support(createCanvas) {\n  return Promise.resolve().then(function () {\n    if (typeof createImageBitmap === 'undefined') {\n      return false;\n    }\n\n    var c = createCanvas(100, 100);\n    return createImageBitmap(c, 0, 0, 100, 100, {\n      resizeWidth: 10,\n      resizeHeight: 10,\n      resizeQuality: 'high'\n    }).then(function (bitmap) {\n      var status = bitmap.width === 10; // Branch below is filtered on upper level. We do not call resize\n      // detection for basic ImageBitmap.\n      //\n      // https://developer.mozilla.org/en-US/docs/Web/API/ImageBitmap\n      // old Crome 51 has ImageBitmap without .close(). Then this code\n      // will throw and return 'false' as expected.\n      //\n\n      bitmap.close();\n      c = null;\n      return status;\n    });\n  })[\"catch\"](function () {\n    return false;\n  });\n};\n\nmodule.exports.worker_offscreen_canvas_support = function worker_offscreen_canvas_support() {\n  return new Promise(function (resolve, reject) {\n    if (typeof OffscreenCanvas === 'undefined') {\n      // if OffscreenCanvas is present, we assume browser supports Worker and built-in Promise as well\n      resolve(false);\n      return;\n    }\n\n    function workerPayload(self) {\n      if (typeof createImageBitmap === 'undefined') {\n        self.postMessage(false);\n        return;\n      }\n\n      Promise.resolve().then(function () {\n        var canvas = new OffscreenCanvas(10, 10); // test that 2d context can be used in worker\n\n        var ctx = canvas.getContext('2d');\n        ctx.rect(0, 0, 1, 1); // test that cib can be used to return image bitmap from worker\n\n        return createImageBitmap(canvas, 0, 0, 1, 1);\n      }).then(function () {\n        return self.postMessage(true);\n      }, function () {\n        return self.postMessage(false);\n      });\n    }\n\n    var code = btoa(\"(\".concat(workerPayload.toString(), \")(self);\"));\n    var w = new Worker(\"data:text/javascript;base64,\".concat(code));\n\n    w.onmessage = function (ev) {\n      return resolve(ev.data);\n    };\n\n    w.onerror = reject;\n  }).then(function (result) {\n    return result;\n  }, function () {\n    return false;\n  });\n}; // Check if canvas.getContext('2d').getImageData can be used,\n// FireFox randomizes the output of that function in `privacy.resistFingerprinting` mode\n\n\nmodule.exports.can_use_canvas = function can_use_canvas(createCanvas) {\n  var usable = false;\n\n  try {\n    var canvas = createCanvas(2, 1);\n    var ctx = canvas.getContext('2d');\n    var d = ctx.createImageData(2, 1);\n    d.data[0] = 12;\n    d.data[1] = 23;\n    d.data[2] = 34;\n    d.data[3] = 255;\n    d.data[4] = 45;\n    d.data[5] = 56;\n    d.data[6] = 67;\n    d.data[7] = 255;\n    ctx.putImageData(d, 0, 0);\n    d = null;\n    d = ctx.getImageData(0, 0, 2, 1);\n\n    if (d.data[0] === 12 && d.data[1] === 23 && d.data[2] === 34 && d.data[3] === 255 && d.data[4] === 45 && d.data[5] === 56 && d.data[6] === 67 && d.data[7] === 255) {\n      usable = true;\n    }\n  } catch (err) {}\n\n  return usable;\n}; // Check if createImageBitmap(img, sx, sy, sw, sh) signature works correctly\n// with JPEG images oriented with Exif;\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1220671\n// TODO: remove after it's fixed in chrome for at least 2 releases\n\n\nmodule.exports.cib_can_use_region = function cib_can_use_region() {\n  return new Promise(function (resolve) {\n    // `Image` check required for use in `ServiceWorker`\n    if (typeof Image === 'undefined' || typeof createImageBitmap === 'undefined') {\n      resolve(false);\n      return;\n    }\n\n    var image = new Image();\n    image.src = 'data:image/jpeg;base64,' + '/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAA' + 'AABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9' + 'sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRc' + 'ZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoa' + 'GhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRA' + 'f/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAA' + 'IQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAA' + 'AAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIB' + 'AT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAA' + 'AAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAA' + 'AAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQ' + 'QAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z';\n\n    image.onload = function () {\n      createImageBitmap(image, 0, 0, image.width, image.height).then(function (bitmap) {\n        if (bitmap.width === image.width && bitmap.height === image.height) {\n          resolve(true);\n        } else {\n          resolve(false);\n        }\n      }, function () {\n        return resolve(false);\n      });\n    };\n\n    image.onerror = function () {\n      return resolve(false);\n    };\n  });\n};\n\n},{}],17:[function(_dereq_,module,exports){\n// Web Worker wrapper for image resize function\n'use strict';\n\nmodule.exports = function () {\n  var MathLib = _dereq_('./mathlib');\n\n  var mathLib;\n  /* eslint-disable no-undef */\n\n  onmessage = function onmessage(ev) {\n    var tileOpts = ev.data.opts;\n    var returnBitmap = false;\n\n    if (!tileOpts.src && tileOpts.srcBitmap) {\n      var canvas = new OffscreenCanvas(tileOpts.width, tileOpts.height);\n      var ctx = canvas.getContext('2d');\n      ctx.drawImage(tileOpts.srcBitmap, 0, 0);\n      tileOpts.src = ctx.getImageData(0, 0, tileOpts.width, tileOpts.height).data;\n      canvas.width = canvas.height = 0;\n      canvas = null;\n      tileOpts.srcBitmap.close();\n      tileOpts.srcBitmap = null; // Temporary force out data to typed array, because Chrome have artefacts\n      // https://github.com/nodeca/pica/issues/223\n      // returnBitmap = true;\n    }\n\n    if (!mathLib) mathLib = new MathLib(ev.data.features); // Use multimath's sync auto-init. Avoid Promise use in old browsers,\n    // because polyfills are not propagated to webworker.\n\n    var data = mathLib.resizeAndUnsharp(tileOpts);\n\n    if (returnBitmap) {\n      var toImageData = new ImageData(new Uint8ClampedArray(data), tileOpts.toWidth, tileOpts.toHeight);\n\n      var _canvas = new OffscreenCanvas(tileOpts.toWidth, tileOpts.toHeight);\n\n      var _ctx = _canvas.getContext('2d');\n\n      _ctx.putImageData(toImageData, 0, 0);\n\n      createImageBitmap(_canvas).then(function (bitmap) {\n        postMessage({\n          bitmap: bitmap\n        }, [bitmap]);\n      });\n    } else {\n      postMessage({\n        data: data\n      }, [data.buffer]);\n    }\n  };\n};\n\n},{\"./mathlib\":1}],18:[function(_dereq_,module,exports){\n// Calculate Gaussian blur of an image using IIR filter\n// The method is taken from Intel's white paper and code example attached to it:\n// https://software.intel.com/en-us/articles/iir-gaussian-blur-filter\n// -implementation-using-intel-advanced-vector-extensions\n\nvar a0, a1, a2, a3, b1, b2, left_corner, right_corner;\n\nfunction gaussCoef(sigma) {\n  if (sigma < 0.5) {\n    sigma = 0.5;\n  }\n\n  var a = Math.exp(0.726 * 0.726) / sigma,\n      g1 = Math.exp(-a),\n      g2 = Math.exp(-2 * a),\n      k = (1 - g1) * (1 - g1) / (1 + 2 * a * g1 - g2);\n\n  a0 = k;\n  a1 = k * (a - 1) * g1;\n  a2 = k * (a + 1) * g1;\n  a3 = -k * g2;\n  b1 = 2 * g1;\n  b2 = -g2;\n  left_corner = (a0 + a1) / (1 - b1 - b2);\n  right_corner = (a2 + a3) / (1 - b1 - b2);\n\n  // Attempt to force type to FP32.\n  return new Float32Array([ a0, a1, a2, a3, b1, b2, left_corner, right_corner ]);\n}\n\nfunction convolveMono16(src, out, line, coeff, width, height) {\n  // takes src image and writes the blurred and transposed result into out\n\n  var prev_src, curr_src, curr_out, prev_out, prev_prev_out;\n  var src_index, out_index, line_index;\n  var i, j;\n  var coeff_a0, coeff_a1, coeff_b1, coeff_b2;\n\n  for (i = 0; i < height; i++) {\n    src_index = i * width;\n    out_index = i;\n    line_index = 0;\n\n    // left to right\n    prev_src = src[src_index];\n    prev_prev_out = prev_src * coeff[6];\n    prev_out = prev_prev_out;\n\n    coeff_a0 = coeff[0];\n    coeff_a1 = coeff[1];\n    coeff_b1 = coeff[4];\n    coeff_b2 = coeff[5];\n\n    for (j = 0; j < width; j++) {\n      curr_src = src[src_index];\n\n      curr_out = curr_src * coeff_a0 +\n                 prev_src * coeff_a1 +\n                 prev_out * coeff_b1 +\n                 prev_prev_out * coeff_b2;\n\n      prev_prev_out = prev_out;\n      prev_out = curr_out;\n      prev_src = curr_src;\n\n      line[line_index] = prev_out;\n      line_index++;\n      src_index++;\n    }\n\n    src_index--;\n    line_index--;\n    out_index += height * (width - 1);\n\n    // right to left\n    prev_src = src[src_index];\n    prev_prev_out = prev_src * coeff[7];\n    prev_out = prev_prev_out;\n    curr_src = prev_src;\n\n    coeff_a0 = coeff[2];\n    coeff_a1 = coeff[3];\n\n    for (j = width - 1; j >= 0; j--) {\n      curr_out = curr_src * coeff_a0 +\n                 prev_src * coeff_a1 +\n                 prev_out * coeff_b1 +\n                 prev_prev_out * coeff_b2;\n\n      prev_prev_out = prev_out;\n      prev_out = curr_out;\n\n      prev_src = curr_src;\n      curr_src = src[src_index];\n\n      out[out_index] = line[line_index] + prev_out;\n\n      src_index--;\n      line_index--;\n      out_index -= height;\n    }\n  }\n}\n\n\nfunction blurMono16(src, width, height, radius) {\n  // Quick exit on zero radius\n  if (!radius) { return; }\n\n  var out      = new Uint16Array(src.length),\n      tmp_line = new Float32Array(Math.max(width, height));\n\n  var coeff = gaussCoef(radius);\n\n  convolveMono16(src, out, tmp_line, coeff, width, height, radius);\n  convolveMono16(out, src, tmp_line, coeff, height, width, radius);\n}\n\nmodule.exports = blurMono16;\n\n},{}],19:[function(_dereq_,module,exports){\n'use strict';\n\n\nvar assign         = _dereq_('object-assign');\nvar base64decode   = _dereq_('./lib/base64decode');\nvar hasWebAssembly = _dereq_('./lib/wa_detect');\n\n\nvar DEFAULT_OPTIONS = {\n  js: true,\n  wasm: true\n};\n\n\nfunction MultiMath(options) {\n  if (!(this instanceof MultiMath)) return new MultiMath(options);\n\n  var opts = assign({}, DEFAULT_OPTIONS, options || {});\n\n  this.options         = opts;\n\n  this.__cache         = {};\n\n  this.__init_promise  = null;\n  this.__modules       = opts.modules || {};\n  this.__memory        = null;\n  this.__wasm          = {};\n\n  this.__isLE = ((new Uint32Array((new Uint8Array([ 1, 0, 0, 0 ])).buffer))[0] === 1);\n\n  if (!this.options.js && !this.options.wasm) {\n    throw new Error('mathlib: at least \"js\" or \"wasm\" should be enabled');\n  }\n}\n\n\nMultiMath.prototype.has_wasm = hasWebAssembly;\n\n\nMultiMath.prototype.use = function (module) {\n  this.__modules[module.name] = module;\n\n  // Pin the best possible implementation\n  if (this.options.wasm && this.has_wasm() && module.wasm_fn) {\n    this[module.name] = module.wasm_fn;\n  } else {\n    this[module.name] = module.fn;\n  }\n\n  return this;\n};\n\n\nMultiMath.prototype.init = function () {\n  if (this.__init_promise) return this.__init_promise;\n\n  if (!this.options.js && this.options.wasm && !this.has_wasm()) {\n    return Promise.reject(new Error('mathlib: only \"wasm\" was enabled, but it\\'s not supported'));\n  }\n\n  var self = this;\n\n  this.__init_promise = Promise.all(Object.keys(self.__modules).map(function (name) {\n    var module = self.__modules[name];\n\n    if (!self.options.wasm || !self.has_wasm() || !module.wasm_fn) return null;\n\n    // If already compiled - exit\n    if (self.__wasm[name]) return null;\n\n    // Compile wasm source\n    return WebAssembly.compile(self.__base64decode(module.wasm_src))\n      .then(function (m) { self.__wasm[name] = m; });\n  }))\n    .then(function () { return self; });\n\n  return this.__init_promise;\n};\n\n\n////////////////////////////////////////////////////////////////////////////////\n// Methods below are for internal use from plugins\n\n\n// Simple decode base64 to typed array. Useful to load embedded webassembly\n// code. You probably don't need to call this method directly.\n//\nMultiMath.prototype.__base64decode = base64decode;\n\n\n// Increase current memory to include specified number of bytes. Do nothing if\n// size is already ok. You probably don't need to call this method directly,\n// because it will be invoked from `.__instance()`.\n//\nMultiMath.prototype.__reallocate = function mem_grow_to(bytes) {\n  if (!this.__memory) {\n    this.__memory = new WebAssembly.Memory({\n      initial: Math.ceil(bytes / (64 * 1024))\n    });\n    return this.__memory;\n  }\n\n  var mem_size = this.__memory.buffer.byteLength;\n\n  if (mem_size < bytes) {\n    this.__memory.grow(Math.ceil((bytes - mem_size) / (64 * 1024)));\n  }\n\n  return this.__memory;\n};\n\n\n// Returns instantinated webassembly item by name, with specified memory size\n// and environment.\n// - use cache if available\n// - do sync module init, if async init was not called earlier\n// - allocate memory if not enougth\n// - can export functions to webassembly via \"env_extra\",\n//   for example, { exp: Math.exp }\n//\nMultiMath.prototype.__instance = function instance(name, memsize, env_extra) {\n  if (memsize) this.__reallocate(memsize);\n\n  // If .init() was not called, do sync compile\n  if (!this.__wasm[name]) {\n    var module = this.__modules[name];\n    this.__wasm[name] = new WebAssembly.Module(this.__base64decode(module.wasm_src));\n  }\n\n  if (!this.__cache[name]) {\n    var env_base = {\n      memoryBase: 0,\n      memory: this.__memory,\n      tableBase: 0,\n      table: new WebAssembly.Table({ initial: 0, element: 'anyfunc' })\n    };\n\n    this.__cache[name] = new WebAssembly.Instance(this.__wasm[name], {\n      env: assign(env_base, env_extra || {})\n    });\n  }\n\n  return this.__cache[name];\n};\n\n\n// Helper to calculate memory aligh for pointers. Webassembly does not require\n// this, but you may wish to experiment. Default base = 8;\n//\nMultiMath.prototype.__align = function align(number, base) {\n  base = base || 8;\n  var reminder = number % base;\n  return number + (reminder ? base - reminder : 0);\n};\n\n\nmodule.exports = MultiMath;\n\n},{\"./lib/base64decode\":20,\"./lib/wa_detect\":21,\"object-assign\":22}],20:[function(_dereq_,module,exports){\n// base64 decode str -> Uint8Array, to load WA modules\n//\n'use strict';\n\n\nvar BASE64_MAP = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n\nmodule.exports = function base64decode(str) {\n  var input = str.replace(/[\\r\\n=]/g, ''), // remove CR/LF & padding to simplify scan\n      max   = input.length;\n\n  var out = new Uint8Array((max * 3) >> 2);\n\n  // Collect by 6*4 bits (3 bytes)\n\n  var bits = 0;\n  var ptr  = 0;\n\n  for (var idx = 0; idx < max; idx++) {\n    if ((idx % 4 === 0) && idx) {\n      out[ptr++] = (bits >> 16) & 0xFF;\n      out[ptr++] = (bits >> 8) & 0xFF;\n      out[ptr++] = bits & 0xFF;\n    }\n\n    bits = (bits << 6) | BASE64_MAP.indexOf(input.charAt(idx));\n  }\n\n  // Dump tail\n\n  var tailbits = (max % 4) * 6;\n\n  if (tailbits === 0) {\n    out[ptr++] = (bits >> 16) & 0xFF;\n    out[ptr++] = (bits >> 8) & 0xFF;\n    out[ptr++] = bits & 0xFF;\n  } else if (tailbits === 18) {\n    out[ptr++] = (bits >> 10) & 0xFF;\n    out[ptr++] = (bits >> 2) & 0xFF;\n  } else if (tailbits === 12) {\n    out[ptr++] = (bits >> 4) & 0xFF;\n  }\n\n  return out;\n};\n\n},{}],21:[function(_dereq_,module,exports){\n// Detect WebAssembly support.\n// - Check global WebAssembly object\n// - Try to load simple module (can be disabled via CSP)\n//\n'use strict';\n\n\nvar wa;\n\n\nmodule.exports = function hasWebAssembly() {\n  // use cache if called before;\n  if (typeof wa !== 'undefined') return wa;\n\n  wa = false;\n\n  if (typeof WebAssembly === 'undefined') return wa;\n\n  // If WebAssenbly is disabled, code can throw on compile\n  try {\n    // https://github.com/brion/min-wasm-fail/blob/master/min-wasm-fail.in.js\n    // Additional check that WA internals are correct\n\n    /* eslint-disable comma-spacing, max-len */\n    var bin      = new Uint8Array([ 0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11 ]);\n    var module   = new WebAssembly.Module(bin);\n    var instance = new WebAssembly.Instance(module, {});\n\n    // test storing to and loading from a non-zero location via a parameter.\n    // Safari on iOS 11.2.5 returns 0 unexpectedly at non-zero locations\n    if (instance.exports.test(4) !== 0) wa = true;\n\n    return wa;\n  } catch (__) {}\n\n  return wa;\n};\n\n},{}],22:[function(_dereq_,module,exports){\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n},{}],23:[function(_dereq_,module,exports){\nvar bundleFn = arguments[3];\nvar sources = arguments[4];\nvar cache = arguments[5];\n\nvar stringify = JSON.stringify;\n\nmodule.exports = function (fn, options) {\n    var wkey;\n    var cacheKeys = Object.keys(cache);\n\n    for (var i = 0, l = cacheKeys.length; i < l; i++) {\n        var key = cacheKeys[i];\n        var exp = cache[key].exports;\n        // Using babel as a transpiler to use esmodule, the export will always\n        // be an object with the default export as a property of it. To ensure\n        // the existing api and babel esmodule exports are both supported we\n        // check for both\n        if (exp === fn || exp && exp.default === fn) {\n            wkey = key;\n            break;\n        }\n    }\n\n    if (!wkey) {\n        wkey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n        var wcache = {};\n        for (var i = 0, l = cacheKeys.length; i < l; i++) {\n            var key = cacheKeys[i];\n            wcache[key] = key;\n        }\n        sources[wkey] = [\n            'function(require,module,exports){' + fn + '(self); }',\n            wcache\n        ];\n    }\n    var skey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n\n    var scache = {}; scache[wkey] = wkey;\n    sources[skey] = [\n        'function(require,module,exports){' +\n            // try to call default if defined to also support babel esmodule exports\n            'var f = require(' + stringify(wkey) + ');' +\n            '(f.default ? f.default : f)(self);' +\n        '}',\n        scache\n    ];\n\n    var workerSources = {};\n    resolveSources(skey);\n\n    function resolveSources(key) {\n        workerSources[key] = true;\n\n        for (var depPath in sources[key][1]) {\n            var depKey = sources[key][1][depPath];\n            if (!workerSources[depKey]) {\n                resolveSources(depKey);\n            }\n        }\n    }\n\n    var src = '(' + bundleFn + ')({'\n        + Object.keys(workerSources).map(function (key) {\n            return stringify(key) + ':['\n                + sources[key][0]\n                + ',' + stringify(sources[key][1]) + ']'\n            ;\n        }).join(',')\n        + '},{},[' + stringify(skey) + '])'\n    ;\n\n    var URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\n    var blob = new Blob([src], { type: 'text/javascript' });\n    if (options && options.bare) { return blob; }\n    var workerUrl = URL.createObjectURL(blob);\n    var worker = new Worker(workerUrl);\n    worker.objectURL = workerUrl;\n    return worker;\n};\n\n},{}],\"/index.js\":[function(_dereq_,module,exports){\n'use strict';\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar assign = _dereq_('object-assign');\n\nvar webworkify = _dereq_('webworkify');\n\nvar MathLib = _dereq_('./lib/mathlib');\n\nvar Pool = _dereq_('./lib/pool');\n\nvar utils = _dereq_('./lib/utils');\n\nvar worker = _dereq_('./lib/worker');\n\nvar createStages = _dereq_('./lib/stepper');\n\nvar createRegions = _dereq_('./lib/tiler');\n\nvar filter_info = _dereq_('./lib/mm_resize/resize_filter_info'); // Deduplicate pools & limiters with the same configs\n// when user creates multiple pica instances.\n\n\nvar singletones = {};\nvar NEED_SAFARI_FIX = false;\n\ntry {\n  if (typeof navigator !== 'undefined' && navigator.userAgent) {\n    NEED_SAFARI_FIX = navigator.userAgent.indexOf('Safari') >= 0;\n  }\n} catch (e) {}\n\nvar concurrency = 1;\n\nif (typeof navigator !== 'undefined') {\n  concurrency = Math.min(navigator.hardwareConcurrency || 1, 4);\n}\n\nvar DEFAULT_PICA_OPTS = {\n  tile: 1024,\n  concurrency: concurrency,\n  features: ['js', 'wasm', 'ww'],\n  idle: 2000,\n  createCanvas: function createCanvas(width, height) {\n    var tmpCanvas = document.createElement('canvas');\n    tmpCanvas.width = width;\n    tmpCanvas.height = height;\n    return tmpCanvas;\n  }\n};\nvar DEFAULT_RESIZE_OPTS = {\n  filter: 'mks2013',\n  unsharpAmount: 0,\n  unsharpRadius: 0.0,\n  unsharpThreshold: 0\n};\nvar CAN_NEW_IMAGE_DATA = false;\nvar CAN_CREATE_IMAGE_BITMAP = false;\nvar CAN_USE_CANVAS_GET_IMAGE_DATA = false;\nvar CAN_USE_OFFSCREEN_CANVAS = false;\nvar CAN_USE_CIB_REGION_FOR_IMAGE = false;\n\nfunction workerFabric() {\n  return {\n    value: webworkify(worker),\n    destroy: function destroy() {\n      this.value.terminate();\n\n      if (typeof window !== 'undefined') {\n        var url = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\n        if (url && url.revokeObjectURL && this.value.objectURL) {\n          url.revokeObjectURL(this.value.objectURL);\n        }\n      }\n    }\n  };\n} ////////////////////////////////////////////////////////////////////////////////\n// API methods\n\n\nfunction Pica(options) {\n  if (!(this instanceof Pica)) return new Pica(options);\n  this.options = assign({}, DEFAULT_PICA_OPTS, options || {});\n  var limiter_key = \"lk_\".concat(this.options.concurrency); // Share limiters to avoid multiple parallel workers when user creates\n  // multiple pica instances.\n\n  this.__limit = singletones[limiter_key] || utils.limiter(this.options.concurrency);\n  if (!singletones[limiter_key]) singletones[limiter_key] = this.__limit; // List of supported features, according to options & browser/node.js\n\n  this.features = {\n    js: false,\n    // pure JS implementation, can be disabled for testing\n    wasm: false,\n    // webassembly implementation for heavy functions\n    cib: false,\n    // resize via createImageBitmap (only FF at this moment)\n    ww: false // webworkers\n\n  };\n  this.__workersPool = null; // Store requested features for webworkers\n\n  this.__requested_features = [];\n  this.__mathlib = null;\n}\n\nPica.prototype.init = function () {\n  var _this = this;\n\n  if (this.__initPromise) return this.__initPromise; // Test if we can create ImageData without canvas and memory copy\n\n  if (typeof ImageData !== 'undefined' && typeof Uint8ClampedArray !== 'undefined') {\n    try {\n      /* eslint-disable no-new */\n      new ImageData(new Uint8ClampedArray(400), 10, 10);\n      CAN_NEW_IMAGE_DATA = true;\n    } catch (__) {}\n  } // ImageBitmap can be effective in 2 places:\n  //\n  // 1. Threaded jpeg unpack (basic)\n  // 2. Built-in resize (blocked due problem in chrome, see issue #89)\n  //\n  // For basic use we also need ImageBitmap wo support .close() method,\n  // see https://developer.mozilla.org/ru/docs/Web/API/ImageBitmap\n\n\n  if (typeof ImageBitmap !== 'undefined') {\n    if (ImageBitmap.prototype && ImageBitmap.prototype.close) {\n      CAN_CREATE_IMAGE_BITMAP = true;\n    } else {\n      this.debug('ImageBitmap does not support .close(), disabled');\n    }\n  }\n\n  var features = this.options.features.slice();\n\n  if (features.indexOf('all') >= 0) {\n    features = ['cib', 'wasm', 'js', 'ww'];\n  }\n\n  this.__requested_features = features;\n  this.__mathlib = new MathLib(features); // Check WebWorker support if requested\n\n  if (features.indexOf('ww') >= 0) {\n    if (typeof window !== 'undefined' && 'Worker' in window) {\n      // IE <= 11 don't allow to create webworkers from string. We should check it.\n      // https://connect.microsoft.com/IE/feedback/details/801810/web-workers-from-blob-urls-in-ie-10-and-11\n      try {\n        var wkr = _dereq_('webworkify')(function () {});\n\n        wkr.terminate();\n        this.features.ww = true; // pool uniqueness depends on pool config + webworker config\n\n        var wpool_key = \"wp_\".concat(JSON.stringify(this.options));\n\n        if (singletones[wpool_key]) {\n          this.__workersPool = singletones[wpool_key];\n        } else {\n          this.__workersPool = new Pool(workerFabric, this.options.idle);\n          singletones[wpool_key] = this.__workersPool;\n        }\n      } catch (__) {}\n    }\n  }\n\n  var initMath = this.__mathlib.init().then(function (mathlib) {\n    // Copy detected features\n    assign(_this.features, mathlib.features);\n  });\n\n  var checkCibResize;\n\n  if (!CAN_CREATE_IMAGE_BITMAP) {\n    checkCibResize = Promise.resolve(false);\n  } else {\n    checkCibResize = utils.cib_support(this.options.createCanvas).then(function (status) {\n      if (_this.features.cib && features.indexOf('cib') < 0) {\n        _this.debug('createImageBitmap() resize supported, but disabled by config');\n\n        return;\n      }\n\n      if (features.indexOf('cib') >= 0) _this.features.cib = status;\n    });\n  }\n\n  CAN_USE_CANVAS_GET_IMAGE_DATA = utils.can_use_canvas(this.options.createCanvas);\n  var checkOffscreenCanvas;\n\n  if (CAN_CREATE_IMAGE_BITMAP && CAN_NEW_IMAGE_DATA && features.indexOf('ww') !== -1) {\n    checkOffscreenCanvas = utils.worker_offscreen_canvas_support();\n  } else {\n    checkOffscreenCanvas = Promise.resolve(false);\n  }\n\n  checkOffscreenCanvas = checkOffscreenCanvas.then(function (result) {\n    CAN_USE_OFFSCREEN_CANVAS = result;\n  }); // we use createImageBitmap to crop image data and pass it to workers,\n  // so need to check whether function works correctly;\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=1220671\n\n  var checkCibRegion = utils.cib_can_use_region().then(function (result) {\n    CAN_USE_CIB_REGION_FOR_IMAGE = result;\n  }); // Init math lib. That's async because can load some\n\n  this.__initPromise = Promise.all([initMath, checkCibResize, checkOffscreenCanvas, checkCibRegion]).then(function () {\n    return _this;\n  });\n  return this.__initPromise;\n}; // Call resizer in webworker or locally, depending on config\n\n\nPica.prototype.__invokeResize = function (tileOpts, opts) {\n  var _this2 = this;\n\n  // Share cache between calls:\n  //\n  // - wasm instance\n  // - wasm memory object\n  //\n  opts.__mathCache = opts.__mathCache || {};\n  return Promise.resolve().then(function () {\n    if (!_this2.features.ww) {\n      // not possible to have ImageBitmap here if user disabled WW\n      return {\n        data: _this2.__mathlib.resizeAndUnsharp(tileOpts, opts.__mathCache)\n      };\n    }\n\n    return new Promise(function (resolve, reject) {\n      var w = _this2.__workersPool.acquire();\n\n      if (opts.cancelToken) opts.cancelToken[\"catch\"](function (err) {\n        return reject(err);\n      });\n\n      w.value.onmessage = function (ev) {\n        w.release();\n        if (ev.data.err) reject(ev.data.err);else resolve(ev.data);\n      };\n\n      var transfer = [];\n      if (tileOpts.src) transfer.push(tileOpts.src.buffer);\n      if (tileOpts.srcBitmap) transfer.push(tileOpts.srcBitmap);\n      w.value.postMessage({\n        opts: tileOpts,\n        features: _this2.__requested_features,\n        preload: {\n          wasm_nodule: _this2.__mathlib.__\n        }\n      }, transfer);\n    });\n  });\n}; // this function can return promise if createImageBitmap is used\n\n\nPica.prototype.__extractTileData = function (tile, from, opts, stageEnv, extractTo) {\n  if (this.features.ww && CAN_USE_OFFSCREEN_CANVAS && ( // createImageBitmap doesn't work for images (Image, ImageBitmap) with Exif orientation in Chrome,\n  // can use canvas because canvas doesn't have orientation;\n  // see https://bugs.chromium.org/p/chromium/issues/detail?id=1220671\n  utils.isCanvas(from) || CAN_USE_CIB_REGION_FOR_IMAGE)) {\n    this.debug('Create tile for OffscreenCanvas');\n    return createImageBitmap(stageEnv.srcImageBitmap || from, tile.x, tile.y, tile.width, tile.height).then(function (bitmap) {\n      extractTo.srcBitmap = bitmap;\n      return extractTo;\n    });\n  } // Extract tile RGBA buffer, depending on input type\n\n\n  if (utils.isCanvas(from)) {\n    if (!stageEnv.srcCtx) stageEnv.srcCtx = from.getContext('2d'); // If input is Canvas - extract region data directly\n\n    this.debug('Get tile pixel data');\n    extractTo.src = stageEnv.srcCtx.getImageData(tile.x, tile.y, tile.width, tile.height).data;\n    return extractTo;\n  } // If input is Image or decoded to ImageBitmap,\n  // draw region to temporary canvas and extract data from it\n  //\n  // Note! Attempt to reuse this canvas causes significant slowdown in chrome\n  //\n\n\n  this.debug('Draw tile imageBitmap/image to temporary canvas');\n  var tmpCanvas = this.options.createCanvas(tile.width, tile.height);\n  var tmpCtx = tmpCanvas.getContext('2d');\n  tmpCtx.globalCompositeOperation = 'copy';\n  tmpCtx.drawImage(stageEnv.srcImageBitmap || from, tile.x, tile.y, tile.width, tile.height, 0, 0, tile.width, tile.height);\n  this.debug('Get tile pixel data');\n  extractTo.src = tmpCtx.getImageData(0, 0, tile.width, tile.height).data; // Safari 12 workaround\n  // https://github.com/nodeca/pica/issues/199\n\n  tmpCanvas.width = tmpCanvas.height = 0;\n  return extractTo;\n};\n\nPica.prototype.__landTileData = function (tile, result, stageEnv) {\n  var toImageData;\n  this.debug('Convert raw rgba tile result to ImageData');\n\n  if (result.bitmap) {\n    stageEnv.toCtx.drawImage(result.bitmap, tile.toX, tile.toY);\n    return null;\n  }\n\n  if (CAN_NEW_IMAGE_DATA) {\n    // this branch is for modern browsers\n    // If `new ImageData()` & Uint8ClampedArray suported\n    toImageData = new ImageData(new Uint8ClampedArray(result.data), tile.toWidth, tile.toHeight);\n  } else {\n    // fallback for `node-canvas` and old browsers\n    // (IE11 has ImageData but does not support `new ImageData()`)\n    toImageData = stageEnv.toCtx.createImageData(tile.toWidth, tile.toHeight);\n\n    if (toImageData.data.set) {\n      toImageData.data.set(result.data);\n    } else {\n      // IE9 don't have `.set()`\n      for (var i = toImageData.data.length - 1; i >= 0; i--) {\n        toImageData.data[i] = result.data[i];\n      }\n    }\n  }\n\n  this.debug('Draw tile');\n\n  if (NEED_SAFARI_FIX) {\n    // Safari draws thin white stripes between tiles without this fix\n    stageEnv.toCtx.putImageData(toImageData, tile.toX, tile.toY, tile.toInnerX - tile.toX, tile.toInnerY - tile.toY, tile.toInnerWidth + 1e-5, tile.toInnerHeight + 1e-5);\n  } else {\n    stageEnv.toCtx.putImageData(toImageData, tile.toX, tile.toY, tile.toInnerX - tile.toX, tile.toInnerY - tile.toY, tile.toInnerWidth, tile.toInnerHeight);\n  }\n\n  return null;\n};\n\nPica.prototype.__tileAndResize = function (from, to, opts) {\n  var _this3 = this;\n\n  var stageEnv = {\n    srcCtx: null,\n    srcImageBitmap: null,\n    isImageBitmapReused: false,\n    toCtx: null\n  };\n\n  var processTile = function processTile(tile) {\n    return _this3.__limit(function () {\n      if (opts.canceled) return opts.cancelToken;\n      var tileOpts = {\n        width: tile.width,\n        height: tile.height,\n        toWidth: tile.toWidth,\n        toHeight: tile.toHeight,\n        scaleX: tile.scaleX,\n        scaleY: tile.scaleY,\n        offsetX: tile.offsetX,\n        offsetY: tile.offsetY,\n        filter: opts.filter,\n        unsharpAmount: opts.unsharpAmount,\n        unsharpRadius: opts.unsharpRadius,\n        unsharpThreshold: opts.unsharpThreshold\n      };\n\n      _this3.debug('Invoke resize math');\n\n      return Promise.resolve(tileOpts).then(function (tileOpts) {\n        return _this3.__extractTileData(tile, from, opts, stageEnv, tileOpts);\n      }).then(function (tileOpts) {\n        _this3.debug('Invoke resize math');\n\n        return _this3.__invokeResize(tileOpts, opts);\n      }).then(function (result) {\n        if (opts.canceled) return opts.cancelToken;\n        stageEnv.srcImageData = null;\n        return _this3.__landTileData(tile, result, stageEnv);\n      });\n    });\n  }; // Need to normalize data source first. It can be canvas or image.\n  // If image - try to decode in background if possible\n\n\n  return Promise.resolve().then(function () {\n    stageEnv.toCtx = to.getContext('2d');\n    if (utils.isCanvas(from)) return null;\n\n    if (utils.isImageBitmap(from)) {\n      stageEnv.srcImageBitmap = from;\n      stageEnv.isImageBitmapReused = true;\n      return null;\n    }\n\n    if (utils.isImage(from)) {\n      // try do decode image in background for faster next operations;\n      // if we're using offscreen canvas, cib is called per tile, so not needed here\n      if (!CAN_CREATE_IMAGE_BITMAP) return null;\n\n      _this3.debug('Decode image via createImageBitmap');\n\n      return createImageBitmap(from).then(function (imageBitmap) {\n        stageEnv.srcImageBitmap = imageBitmap;\n      }) // Suppress error to use fallback, if method fails\n      // https://github.com/nodeca/pica/issues/190\n\n      /* eslint-disable no-unused-vars */\n      [\"catch\"](function (e) {\n        return null;\n      });\n    }\n\n    throw new Error('Pica: \".from\" should be Image, Canvas or ImageBitmap');\n  }).then(function () {\n    if (opts.canceled) return opts.cancelToken;\n\n    _this3.debug('Calculate tiles'); //\n    // Here we are with \"normalized\" source,\n    // follow to tiling\n    //\n\n\n    var regions = createRegions({\n      width: opts.width,\n      height: opts.height,\n      srcTileSize: _this3.options.tile,\n      toWidth: opts.toWidth,\n      toHeight: opts.toHeight,\n      destTileBorder: opts.__destTileBorder\n    });\n    var jobs = regions.map(function (tile) {\n      return processTile(tile);\n    });\n\n    function cleanup(stageEnv) {\n      if (stageEnv.srcImageBitmap) {\n        if (!stageEnv.isImageBitmapReused) stageEnv.srcImageBitmap.close();\n        stageEnv.srcImageBitmap = null;\n      }\n    }\n\n    _this3.debug('Process tiles');\n\n    return Promise.all(jobs).then(function () {\n      _this3.debug('Finished!');\n\n      cleanup(stageEnv);\n      return to;\n    }, function (err) {\n      cleanup(stageEnv);\n      throw err;\n    });\n  });\n};\n\nPica.prototype.__processStages = function (stages, from, to, opts) {\n  var _this4 = this;\n\n  if (opts.canceled) return opts.cancelToken;\n\n  var _stages$shift = stages.shift(),\n      _stages$shift2 = _slicedToArray(_stages$shift, 2),\n      toWidth = _stages$shift2[0],\n      toHeight = _stages$shift2[1];\n\n  var isLastStage = stages.length === 0; // Optimization for legacy filters -\n  // only use user-defined quality for the last stage,\n  // use simpler (Hamming) filter for the first stages where\n  // scale factor is large enough (more than 2-3)\n  //\n  // For advanced filters (mks2013 and custom) - skip optimization,\n  // because need to apply sharpening every time\n\n  var filter;\n  if (isLastStage || filter_info.q2f.indexOf(opts.filter) < 0) filter = opts.filter;else if (opts.filter === 'box') filter = 'box';else filter = 'hamming';\n  opts = assign({}, opts, {\n    toWidth: toWidth,\n    toHeight: toHeight,\n    filter: filter\n  });\n  var tmpCanvas;\n\n  if (!isLastStage) {\n    // create temporary canvas\n    tmpCanvas = this.options.createCanvas(toWidth, toHeight);\n  }\n\n  return this.__tileAndResize(from, isLastStage ? to : tmpCanvas, opts).then(function () {\n    if (isLastStage) return to;\n    opts.width = toWidth;\n    opts.height = toHeight;\n    return _this4.__processStages(stages, tmpCanvas, to, opts);\n  }).then(function (res) {\n    if (tmpCanvas) {\n      // Safari 12 workaround\n      // https://github.com/nodeca/pica/issues/199\n      tmpCanvas.width = tmpCanvas.height = 0;\n    }\n\n    return res;\n  });\n};\n\nPica.prototype.__resizeViaCreateImageBitmap = function (from, to, opts) {\n  var _this5 = this;\n\n  var toCtx = to.getContext('2d');\n  this.debug('Resize via createImageBitmap()');\n  return createImageBitmap(from, {\n    resizeWidth: opts.toWidth,\n    resizeHeight: opts.toHeight,\n    resizeQuality: utils.cib_quality_name(filter_info.f2q[opts.filter])\n  }).then(function (imageBitmap) {\n    if (opts.canceled) return opts.cancelToken; // if no unsharp - draw directly to output canvas\n\n    if (!opts.unsharpAmount) {\n      toCtx.drawImage(imageBitmap, 0, 0);\n      imageBitmap.close();\n      toCtx = null;\n\n      _this5.debug('Finished!');\n\n      return to;\n    }\n\n    _this5.debug('Unsharp result');\n\n    var tmpCanvas = _this5.options.createCanvas(opts.toWidth, opts.toHeight);\n\n    var tmpCtx = tmpCanvas.getContext('2d');\n    tmpCtx.drawImage(imageBitmap, 0, 0);\n    imageBitmap.close();\n    var iData = tmpCtx.getImageData(0, 0, opts.toWidth, opts.toHeight);\n\n    _this5.__mathlib.unsharp_mask(iData.data, opts.toWidth, opts.toHeight, opts.unsharpAmount, opts.unsharpRadius, opts.unsharpThreshold);\n\n    toCtx.putImageData(iData, 0, 0); // Safari 12 workaround\n    // https://github.com/nodeca/pica/issues/199\n\n    tmpCanvas.width = tmpCanvas.height = 0;\n    iData = tmpCtx = tmpCanvas = toCtx = null;\n\n    _this5.debug('Finished!');\n\n    return to;\n  });\n};\n\nPica.prototype.resize = function (from, to, options) {\n  var _this6 = this;\n\n  this.debug('Start resize...');\n  var opts = assign({}, DEFAULT_RESIZE_OPTS);\n\n  if (!isNaN(options)) {\n    opts = assign(opts, {\n      quality: options\n    });\n  } else if (options) {\n    opts = assign(opts, options);\n  }\n\n  opts.toWidth = to.width;\n  opts.toHeight = to.height;\n  opts.width = from.naturalWidth || from.width;\n  opts.height = from.naturalHeight || from.height; // Legacy `.quality` option\n\n  if (Object.prototype.hasOwnProperty.call(opts, 'quality')) {\n    if (opts.quality < 0 || opts.quality > 3) {\n      throw new Error(\"Pica: .quality should be [0..3], got \".concat(opts.quality));\n    }\n\n    opts.filter = filter_info.q2f[opts.quality];\n  } // Prevent stepper from infinite loop\n\n\n  if (to.width === 0 || to.height === 0) {\n    return Promise.reject(new Error(\"Invalid output size: \".concat(to.width, \"x\").concat(to.height)));\n  }\n\n  if (opts.unsharpRadius > 2) opts.unsharpRadius = 2;\n  opts.canceled = false;\n\n  if (opts.cancelToken) {\n    // Wrap cancelToken to avoid successive resolve & set flag\n    opts.cancelToken = opts.cancelToken.then(function (data) {\n      opts.canceled = true;\n      throw data;\n    }, function (err) {\n      opts.canceled = true;\n      throw err;\n    });\n  }\n\n  var DEST_TILE_BORDER = 3; // Max possible filter window size\n\n  opts.__destTileBorder = Math.ceil(Math.max(DEST_TILE_BORDER, 2.5 * opts.unsharpRadius | 0));\n  return this.init().then(function () {\n    if (opts.canceled) return opts.cancelToken; // if createImageBitmap supports resize, just do it and return\n\n    if (_this6.features.cib) {\n      if (filter_info.q2f.indexOf(opts.filter) >= 0) {\n        return _this6.__resizeViaCreateImageBitmap(from, to, opts);\n      }\n\n      _this6.debug('cib is enabled, but not supports provided filter, fallback to manual math');\n    }\n\n    if (!CAN_USE_CANVAS_GET_IMAGE_DATA) {\n      var err = new Error('Pica: cannot use getImageData on canvas, ' + \"make sure fingerprinting protection isn't enabled\");\n      err.code = 'ERR_GET_IMAGE_DATA';\n      throw err;\n    } //\n    // No easy way, let's resize manually via arrays\n    //\n\n\n    var stages = createStages(opts.width, opts.height, opts.toWidth, opts.toHeight, _this6.options.tile, opts.__destTileBorder);\n    return _this6.__processStages(stages, from, to, opts);\n  });\n}; // RGBA buffer resize\n//\n\n\nPica.prototype.resizeBuffer = function (options) {\n  var _this7 = this;\n\n  var opts = assign({}, DEFAULT_RESIZE_OPTS, options); // Legacy `.quality` option\n\n  if (Object.prototype.hasOwnProperty.call(opts, 'quality')) {\n    if (opts.quality < 0 || opts.quality > 3) {\n      throw new Error(\"Pica: .quality should be [0..3], got \".concat(opts.quality));\n    }\n\n    opts.filter = filter_info.q2f[opts.quality];\n  }\n\n  return this.init().then(function () {\n    return _this7.__mathlib.resizeAndUnsharp(opts);\n  });\n};\n\nPica.prototype.toBlob = function (canvas, mimeType, quality) {\n  mimeType = mimeType || 'image/png';\n  return new Promise(function (resolve) {\n    if (canvas.toBlob) {\n      canvas.toBlob(function (blob) {\n        return resolve(blob);\n      }, mimeType, quality);\n      return;\n    }\n\n    if (canvas.convertToBlob) {\n      resolve(canvas.convertToBlob({\n        type: mimeType,\n        quality: quality\n      }));\n      return;\n    } // Fallback for old browsers\n\n\n    var asString = atob(canvas.toDataURL(mimeType, quality).split(',')[1]);\n    var len = asString.length;\n    var asBuffer = new Uint8Array(len);\n\n    for (var i = 0; i < len; i++) {\n      asBuffer[i] = asString.charCodeAt(i);\n    }\n\n    resolve(new Blob([asBuffer], {\n      type: mimeType\n    }));\n  });\n};\n\nPica.prototype.debug = function () {};\n\nmodule.exports = Pica;\n\n},{\"./lib/mathlib\":1,\"./lib/mm_resize/resize_filter_info\":7,\"./lib/pool\":13,\"./lib/stepper\":14,\"./lib/tiler\":15,\"./lib/utils\":16,\"./lib/worker\":17,\"object-assign\":22,\"webworkify\":23}]},{},[])(\"/index.js\")\n});\n","\r\n// Temporary fix for\r\n// https://github.com/evanw/esbuild/issues/312\r\n\r\nlet workerFunction = (function (){\r\n\t//dummy require\r\n\tvar require = function(moduleName){};\r\n\t// // // https://d3js.org/d3-dispatch/ v3.0.1 Copyright 2010-2021 Mike Bostock\r\n\t!function(n,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?e(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],e):e((n=\"undefined\"!=typeof globalThis?globalThis:n||self).d3=n.d3||{})}(this,(function(n){\"use strict\";var e={value:()=>{}};function t(){for(var n,e=0,t=arguments.length,o={};e<t;++e){if(!(n=arguments[e]+\"\")||n in o||/[\\s.]/.test(n))throw new Error(\"illegal type: \"+n);o[n]=[]}return new r(o)}function r(n){this._=n}function o(n,e){return n.trim().split(/^|\\s+/).map((function(n){var t=\"\",r=n.indexOf(\".\");if(r>=0&&(t=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error(\"unknown type: \"+n);return{type:n,name:t}}))}function i(n,e){for(var t,r=0,o=n.length;r<o;++r)if((t=n[r]).name===e)return t.value}function f(n,t,r){for(var o=0,i=n.length;o<i;++o)if(n[o].name===t){n[o]=e,n=n.slice(0,o).concat(n.slice(o+1));break}return null!=r&&n.push({name:t,value:r}),n}r.prototype=t.prototype={constructor:r,on:function(n,e){var t,r=this._,l=o(n+\"\",r),a=-1,u=l.length;if(!(arguments.length<2)){if(null!=e&&\"function\"!=typeof e)throw new Error(\"invalid callback: \"+e);for(;++a<u;)if(t=(n=l[a]).type)r[t]=f(r[t],n.name,e);else if(null==e)for(t in r)r[t]=f(r[t],n.name,null);return this}for(;++a<u;)if((t=(n=l[a]).type)&&(t=i(r[t],n.name)))return t},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new r(n)},call:function(n,e){if((t=arguments.length-2)>0)for(var t,r,o=new Array(t),i=0;i<t;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error(\"unknown type: \"+n);for(i=0,t=(r=this._[n]).length;i<t;++i)r[i].value.apply(e,o)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error(\"unknown type: \"+n);for(var r=this._[n],o=0,i=r.length;o<i;++o)r[o].value.apply(e,t)}},n.dispatch=t,Object.defineProperty(n,\"__esModule\",{value:!0})}));\r\n\t// // // https://d3js.org/d3-quadtree/ v3.0.1 Copyright 2010-2021 Mike Bostock\r\n\t!function(t,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?i(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],i):i((t=\"undefined\"!=typeof globalThis?globalThis:t||self).d3=t.d3||{})}(this,(function(t){\"use strict\";function i(t,i,e,n){if(isNaN(i)||isNaN(e))return t;var r,s,h,o,a,u,l,_,f,c=t._root,x={data:n},y=t._x0,d=t._y0,p=t._x1,v=t._y1;if(!c)return t._root=x,t;for(;c.length;)if((u=i>=(s=(y+p)/2))?y=s:p=s,(l=e>=(h=(d+v)/2))?d=h:v=h,r=c,!(c=c[_=l<<1|u]))return r[_]=x,t;if(o=+t._x.call(null,c.data),a=+t._y.call(null,c.data),i===o&&e===a)return x.next=c,r?r[_]=x:t._root=x,t;do{r=r?r[_]=new Array(4):t._root=new Array(4),(u=i>=(s=(y+p)/2))?y=s:p=s,(l=e>=(h=(d+v)/2))?d=h:v=h}while((_=l<<1|u)==(f=(a>=h)<<1|o>=s));return r[f]=c,r[_]=x,t}function e(t,i,e,n,r){this.node=t,this.x0=i,this.y0=e,this.x1=n,this.y1=r}function n(t){return t[0]}function r(t){return t[1]}function s(t,i,e){var s=new h(null==i?n:i,null==e?r:e,NaN,NaN,NaN,NaN);return null==t?s:s.addAll(t)}function h(t,i,e,n,r,s){this._x=t,this._y=i,this._x0=e,this._y0=n,this._x1=r,this._y1=s,this._root=void 0}function o(t){for(var i={data:t.data},e=i;t=t.next;)e=e.next={data:t.data};return i}var a=s.prototype=h.prototype;a.copy=function(){var t,i,e=new h(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return e;if(!n.length)return e._root=o(n),e;for(t=[{source:n,target:e._root=new Array(4)}];n=t.pop();)for(var r=0;r<4;++r)(i=n.source[r])&&(i.length?t.push({source:i,target:n.target[r]=new Array(4)}):n.target[r]=o(i));return e},a.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return i(this.cover(e,n),e,n,t)},a.addAll=function(t){var e,n,r,s,h=t.length,o=new Array(h),a=new Array(h),u=1/0,l=1/0,_=-1/0,f=-1/0;for(n=0;n<h;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(o[n]=r,a[n]=s,r<u&&(u=r),r>_&&(_=r),s<l&&(l=s),s>f&&(f=s));if(u>_||l>f)return this;for(this.cover(u,l).cover(_,f),n=0;n<h;++n)i(this,o[n],a[n],t[n]);return this},a.cover=function(t,i){if(isNaN(t=+t)||isNaN(i=+i))return this;var e=this._x0,n=this._y0,r=this._x1,s=this._y1;if(isNaN(e))r=(e=Math.floor(t))+1,s=(n=Math.floor(i))+1;else{for(var h,o,a=r-e||1,u=this._root;e>t||t>=r||n>i||i>=s;)switch(o=(i<n)<<1|t<e,(h=new Array(4))[o]=u,u=h,a*=2,o){case 0:r=e+a,s=n+a;break;case 1:e=r-a,s=n+a;break;case 2:r=e+a,n=s-a;break;case 3:e=r-a,n=s-a}this._root&&this._root.length&&(this._root=u)}return this._x0=e,this._y0=n,this._x1=r,this._y1=s,this},a.data=function(){var t=[];return this.visit((function(i){if(!i.length)do{t.push(i.data)}while(i=i.next)})),t},a.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},a.find=function(t,i,n){var r,s,h,o,a,u,l,_=this._x0,f=this._y0,c=this._x1,x=this._y1,y=[],d=this._root;for(d&&y.push(new e(d,_,f,c,x)),null==n?n=1/0:(_=t-n,f=i-n,c=t+n,x=i+n,n*=n);u=y.pop();)if(!(!(d=u.node)||(s=u.x0)>c||(h=u.y0)>x||(o=u.x1)<_||(a=u.y1)<f))if(d.length){var p=(s+o)/2,v=(h+a)/2;y.push(new e(d[3],p,v,o,a),new e(d[2],s,v,p,a),new e(d[1],p,h,o,v),new e(d[0],s,h,p,v)),(l=(i>=v)<<1|t>=p)&&(u=y[y.length-1],y[y.length-1]=y[y.length-1-l],y[y.length-1-l]=u)}else{var w=t-+this._x.call(null,d.data),N=i-+this._y.call(null,d.data),g=w*w+N*N;if(g<n){var A=Math.sqrt(n=g);_=t-A,f=i-A,c=t+A,x=i+A,r=d.data}}return r},a.remove=function(t){if(isNaN(s=+this._x.call(null,t))||isNaN(h=+this._y.call(null,t)))return this;var i,e,n,r,s,h,o,a,u,l,_,f,c=this._root,x=this._x0,y=this._y0,d=this._x1,p=this._y1;if(!c)return this;if(c.length)for(;;){if((u=s>=(o=(x+d)/2))?x=o:d=o,(l=h>=(a=(y+p)/2))?y=a:p=a,i=c,!(c=c[_=l<<1|u]))return this;if(!c.length)break;(i[_+1&3]||i[_+2&3]||i[_+3&3])&&(e=i,f=_)}for(;c.data!==t;)if(n=c,!(c=c.next))return this;return(r=c.next)&&delete c.next,n?(r?n.next=r:delete n.next,this):i?(r?i[_]=r:delete i[_],(c=i[0]||i[1]||i[2]||i[3])&&c===(i[3]||i[2]||i[1]||i[0])&&!c.length&&(e?e[f]=c:this._root=c),this):(this._root=r,this)},a.removeAll=function(t){for(var i=0,e=t.length;i<e;++i)this.remove(t[i]);return this},a.root=function(){return this._root},a.size=function(){var t=0;return this.visit((function(i){if(!i.length)do{++t}while(i=i.next)})),t},a.visit=function(t){var i,n,r,s,h,o,a=[],u=this._root;for(u&&a.push(new e(u,this._x0,this._y0,this._x1,this._y1));i=a.pop();)if(!t(u=i.node,r=i.x0,s=i.y0,h=i.x1,o=i.y1)&&u.length){var l=(r+h)/2,_=(s+o)/2;(n=u[3])&&a.push(new e(n,l,_,h,o)),(n=u[2])&&a.push(new e(n,r,_,l,o)),(n=u[1])&&a.push(new e(n,l,s,h,_)),(n=u[0])&&a.push(new e(n,r,s,l,_))}return this},a.visitAfter=function(t){var i,n=[],r=[];for(this._root&&n.push(new e(this._root,this._x0,this._y0,this._x1,this._y1));i=n.pop();){var s=i.node;if(s.length){var h,o=i.x0,a=i.y0,u=i.x1,l=i.y1,_=(o+u)/2,f=(a+l)/2;(h=s[0])&&n.push(new e(h,o,a,_,f)),(h=s[1])&&n.push(new e(h,_,a,u,f)),(h=s[2])&&n.push(new e(h,o,f,_,l)),(h=s[3])&&n.push(new e(h,_,f,u,l))}r.push(i)}for(;i=r.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this},a.x=function(t){return arguments.length?(this._x=t,this):this._x},a.y=function(t){return arguments.length?(this._y=t,this):this._y},t.quadtree=s,Object.defineProperty(t,\"__esModule\",{value:!0})}));\r\n\t// // // https://d3js.org/d3-timer/ v3.0.1 Copyright 2010-2021 Mike Bostock\r\n\t!function(t,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?n(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],n):n((t=\"undefined\"!=typeof globalThis?globalThis:t||self).d3=t.d3||{})}(this,(function(t){\"use strict\";var n,e,o=0,i=0,r=0,l=0,u=0,a=0,s=\"object\"==typeof performance&&performance.now?performance:Date,c=\"object\"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function f(){return u||(c(_),u=s.now()+a)}function _(){u=0}function m(){this._call=this._time=this._next=null}function p(t,n,e){var o=new m;return o.restart(t,n,e),o}function w(){f(),++o;for(var t,e=n;e;)(t=u-e._time)>=0&&e._call.call(void 0,t),e=e._next;--o}function d(){u=(l=s.now())+a,o=i=0;try{w()}finally{o=0,function(){var t,o,i=n,r=1/0;for(;i;)i._call?(r>i._time&&(r=i._time),t=i,i=i._next):(o=i._next,i._next=null,i=t?t._next=o:n=o);e=t,y(r)}(),u=0}}function h(){var t=s.now(),n=t-l;n>1e3&&(a-=n,l=t)}function y(t){o||(i&&(i=clearTimeout(i)),t-u>24?(t<1/0&&(i=setTimeout(d,t-s.now()-a)),r&&(r=clearInterval(r))):(r||(l=s.now(),r=setInterval(h,1e3)),o=1,c(d)))}m.prototype=p.prototype={constructor:m,restart:function(t,o,i){if(\"function\"!=typeof t)throw new TypeError(\"callback is not a function\");i=(null==i?f():+i)+(null==o?0:+o),this._next||e===this||(e?e._next=this:n=this,e=this),this._call=t,this._time=i,y()},stop:function(){this._call&&(this._call=null,this._time=1/0,y())}},t.interval=function(t,n,e){var o=new m,i=n;return null==n?(o.restart(t,n,e),o):(o._restart=o.restart,o.restart=function(t,n,e){n=+n,e=null==e?f():+e,o._restart((function r(l){l+=i,o._restart(r,i+=n,e),t(l)}),n,e)},o.restart(t,n,e),o)},t.now=f,t.timeout=function(t,n,e){var o=new m;return n=null==n?0:+n,o.restart((e=>{o.stop(),t(e+n)}),n,e),o},t.timer=p,t.timerFlush=w,Object.defineProperty(t,\"__esModule\",{value:!0})}));\r\n\t// // // https://d3js.org/d3-force/ v3.0.0 Copyright 2010-2021 Mike Bostock\r\n\t!function(n,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?t(exports,require(\"d3-quadtree\"),require(\"d3-dispatch\"),require(\"d3-timer\")):\"function\"==typeof define&&define.amd?define([\"exports\",\"d3-quadtree\",\"d3-dispatch\",\"d3-timer\"],t):t((n=\"undefined\"!=typeof globalThis?globalThis:n||self).d3=n.d3||{},n.d3,n.d3,n.d3)}(this,(function(n,t,e,r){\"use strict\";function i(n){return function(){return n}}function u(n){return 1e-6*(n()-.5)}function o(n){return n.x+n.vx}function f(n){return n.y+n.vy}function a(n){return n.index}function c(n,t){var e=n.get(t);if(!e)throw new Error(\"node not found: \"+t);return e}const l=4294967296;function h(n){return n.x}function v(n){return n.y}var y=Math.PI*(3-Math.sqrt(5));n.forceCenter=function(n,t){var e,r=1;function i(){var i,u,o=e.length,f=0,a=0;for(i=0;i<o;++i)f+=(u=e[i]).x,a+=u.y;for(f=(f/o-n)*r,a=(a/o-t)*r,i=0;i<o;++i)(u=e[i]).x-=f,u.y-=a}return null==n&&(n=0),null==t&&(t=0),i.initialize=function(n){e=n},i.x=function(t){return arguments.length?(n=+t,i):n},i.y=function(n){return arguments.length?(t=+n,i):t},i.strength=function(n){return arguments.length?(r=+n,i):r},i},n.forceCollide=function(n){var e,r,a,c=1,l=1;function h(){for(var n,i,h,y,d,g,x,s=e.length,p=0;p<l;++p)for(i=t.quadtree(e,o,f).visitAfter(v),n=0;n<s;++n)h=e[n],g=r[h.index],x=g*g,y=h.x+h.vx,d=h.y+h.vy,i.visit(M);function M(n,t,e,r,i){var o=n.data,f=n.r,l=g+f;if(!o)return t>y+l||r<y-l||e>d+l||i<d-l;if(o.index>h.index){var v=y-o.x-o.vx,s=d-o.y-o.vy,p=v*v+s*s;p<l*l&&(0===v&&(p+=(v=u(a))*v),0===s&&(p+=(s=u(a))*s),p=(l-(p=Math.sqrt(p)))/p*c,h.vx+=(v*=p)*(l=(f*=f)/(x+f)),h.vy+=(s*=p)*l,o.vx-=v*(l=1-l),o.vy-=s*l)}}}function v(n){if(n.data)return n.r=r[n.data.index];for(var t=n.r=0;t<4;++t)n[t]&&n[t].r>n.r&&(n.r=n[t].r)}function y(){if(e){var t,i,u=e.length;for(r=new Array(u),t=0;t<u;++t)i=e[t],r[i.index]=+n(i,t,e)}}return\"function\"!=typeof n&&(n=i(null==n?1:+n)),h.initialize=function(n,t){e=n,a=t,y()},h.iterations=function(n){return arguments.length?(l=+n,h):l},h.strength=function(n){return arguments.length?(c=+n,h):c},h.radius=function(t){return arguments.length?(n=\"function\"==typeof t?t:i(+t),y(),h):n},h},n.forceLink=function(n){var t,e,r,o,f,l,h=a,v=function(n){return 1/Math.min(o[n.source.index],o[n.target.index])},y=i(30),d=1;function g(r){for(var i=0,o=n.length;i<d;++i)for(var a,c,h,v,y,g,x,s=0;s<o;++s)c=(a=n[s]).source,v=(h=a.target).x+h.vx-c.x-c.vx||u(l),y=h.y+h.vy-c.y-c.vy||u(l),v*=g=((g=Math.sqrt(v*v+y*y))-e[s])/g*r*t[s],y*=g,h.vx-=v*(x=f[s]),h.vy-=y*x,c.vx+=v*(x=1-x),c.vy+=y*x}function x(){if(r){var i,u,a=r.length,l=n.length,v=new Map(r.map(((n,t)=>[h(n,t,r),n])));for(i=0,o=new Array(a);i<l;++i)(u=n[i]).index=i,\"object\"!=typeof u.source&&(u.source=c(v,u.source)),\"object\"!=typeof u.target&&(u.target=c(v,u.target)),o[u.source.index]=(o[u.source.index]||0)+1,o[u.target.index]=(o[u.target.index]||0)+1;for(i=0,f=new Array(l);i<l;++i)u=n[i],f[i]=o[u.source.index]/(o[u.source.index]+o[u.target.index]);t=new Array(l),s(),e=new Array(l),p()}}function s(){if(r)for(var e=0,i=n.length;e<i;++e)t[e]=+v(n[e],e,n)}function p(){if(r)for(var t=0,i=n.length;t<i;++t)e[t]=+y(n[t],t,n)}return null==n&&(n=[]),g.initialize=function(n,t){r=n,l=t,x()},g.links=function(t){return arguments.length?(n=t,x(),g):n},g.id=function(n){return arguments.length?(h=n,g):h},g.iterations=function(n){return arguments.length?(d=+n,g):d},g.strength=function(n){return arguments.length?(v=\"function\"==typeof n?n:i(+n),s(),g):v},g.distance=function(n){return arguments.length?(y=\"function\"==typeof n?n:i(+n),p(),g):y},g},n.forceManyBody=function(){var n,e,r,o,f,a=i(-30),c=1,l=1/0,y=.81;function d(r){var i,u=n.length,f=t.quadtree(n,h,v).visitAfter(x);for(o=r,i=0;i<u;++i)e=n[i],f.visit(s)}function g(){if(n){var t,e,r=n.length;for(f=new Array(r),t=0;t<r;++t)e=n[t],f[e.index]=+a(e,t,n)}}function x(n){var t,e,r,i,u,o=0,a=0;if(n.length){for(r=i=u=0;u<4;++u)(t=n[u])&&(e=Math.abs(t.value))&&(o+=t.value,a+=e,r+=e*t.x,i+=e*t.y);n.x=r/a,n.y=i/a}else{(t=n).x=t.data.x,t.y=t.data.y;do{o+=f[t.data.index]}while(t=t.next)}n.value=o}function s(n,t,i,a){if(!n.value)return!0;var h=n.x-e.x,v=n.y-e.y,d=a-t,g=h*h+v*v;if(d*d/y<g)return g<l&&(0===h&&(g+=(h=u(r))*h),0===v&&(g+=(v=u(r))*v),g<c&&(g=Math.sqrt(c*g)),e.vx+=h*n.value*o/g,e.vy+=v*n.value*o/g),!0;if(!(n.length||g>=l)){(n.data!==e||n.next)&&(0===h&&(g+=(h=u(r))*h),0===v&&(g+=(v=u(r))*v),g<c&&(g=Math.sqrt(c*g)));do{n.data!==e&&(d=f[n.data.index]*o/g,e.vx+=h*d,e.vy+=v*d)}while(n=n.next)}}return d.initialize=function(t,e){n=t,r=e,g()},d.strength=function(n){return arguments.length?(a=\"function\"==typeof n?n:i(+n),g(),d):a},d.distanceMin=function(n){return arguments.length?(c=n*n,d):Math.sqrt(c)},d.distanceMax=function(n){return arguments.length?(l=n*n,d):Math.sqrt(l)},d.theta=function(n){return arguments.length?(y=n*n,d):Math.sqrt(y)},d},n.forceRadial=function(n,t,e){var r,u,o,f=i(.1);function a(n){for(var i=0,f=r.length;i<f;++i){var a=r[i],c=a.x-t||1e-6,l=a.y-e||1e-6,h=Math.sqrt(c*c+l*l),v=(o[i]-h)*u[i]*n/h;a.vx+=c*v,a.vy+=l*v}}function c(){if(r){var t,e=r.length;for(u=new Array(e),o=new Array(e),t=0;t<e;++t)o[t]=+n(r[t],t,r),u[t]=isNaN(o[t])?0:+f(r[t],t,r)}}return\"function\"!=typeof n&&(n=i(+n)),null==t&&(t=0),null==e&&(e=0),a.initialize=function(n){r=n,c()},a.strength=function(n){return arguments.length?(f=\"function\"==typeof n?n:i(+n),c(),a):f},a.radius=function(t){return arguments.length?(n=\"function\"==typeof t?t:i(+t),c(),a):n},a.x=function(n){return arguments.length?(t=+n,a):t},a.y=function(n){return arguments.length?(e=+n,a):e},a},n.forceSimulation=function(n){var t,i=1,u=.001,o=1-Math.pow(u,1/300),f=0,a=.6,c=new Map,h=r.timer(g),v=e.dispatch(\"tick\",\"end\"),d=function(){let n=1;return()=>(n=(1664525*n+1013904223)%l)/l}();function g(){x(),v.call(\"tick\",t),i<u&&(h.stop(),v.call(\"end\",t))}function x(e){var r,u,l=n.length;void 0===e&&(e=1);for(var h=0;h<e;++h)for(i+=(f-i)*o,c.forEach((function(n){n(i)})),r=0;r<l;++r)null==(u=n[r]).fx?u.x+=u.vx*=a:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=a:(u.y=u.fy,u.vy=0);return t}function s(){for(var t,e=0,r=n.length;e<r;++e){if((t=n[e]).index=e,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=10*Math.sqrt(.5+e),u=e*y;t.x=i*Math.cos(u),t.y=i*Math.sin(u)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(n,d),t}return null==n&&(n=[]),s(),t={tick:x,restart:function(){return h.restart(g),t},stop:function(){return h.stop(),t},nodes:function(e){return arguments.length?(n=e,s(),c.forEach(p),t):n},alpha:function(n){return arguments.length?(i=+n,t):i},alphaMin:function(n){return arguments.length?(u=+n,t):u},alphaDecay:function(n){return arguments.length?(o=+n,t):+o},alphaTarget:function(n){return arguments.length?(f=+n,t):f},velocityDecay:function(n){return arguments.length?(a=1-n,t):1-a},randomSource:function(n){return arguments.length?(d=n,c.forEach(p),t):d},force:function(n,e){return arguments.length>1?(null==e?c.delete(n):c.set(n,p(e)),t):c.get(n)},find:function(t,e,r){var i,u,o,f,a,c=0,l=n.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)(o=(i=t-(f=n[c]).x)*i+(u=e-f.y)*u)<r&&(a=f,r=o);return a},on:function(n,e){return arguments.length>1?(v.on(n,e),t):v.on(n)}}},n.forceX=function(n){var t,e,r,u=i(.1);function o(n){for(var i,u=0,o=t.length;u<o;++u)(i=t[u]).vx+=(r[u]-i.x)*e[u]*n}function f(){if(t){var i,o=t.length;for(e=new Array(o),r=new Array(o),i=0;i<o;++i)e[i]=isNaN(r[i]=+n(t[i],i,t))?0:+u(t[i],i,t)}}return\"function\"!=typeof n&&(n=i(null==n?0:+n)),o.initialize=function(n){t=n,f()},o.strength=function(n){return arguments.length?(u=\"function\"==typeof n?n:i(+n),f(),o):u},o.x=function(t){return arguments.length?(n=\"function\"==typeof t?t:i(+t),f(),o):n},o},n.forceY=function(n){var t,e,r,u=i(.1);function o(n){for(var i,u=0,o=t.length;u<o;++u)(i=t[u]).vy+=(r[u]-i.y)*e[u]*n}function f(){if(t){var i,o=t.length;for(e=new Array(o),r=new Array(o),i=0;i<o;++i)e[i]=isNaN(r[i]=+n(t[i],i,t))?0:+u(t[i],i,t)}}return\"function\"!=typeof n&&(n=i(null==n?0:+n)),o.initialize=function(n){t=n,f()},o.strength=function(n){return arguments.length?(u=\"function\"==typeof n?n:i(+n),f(),o):u},o.y=function(t){return arguments.length?(n=\"function\"==typeof t?t:i(+t),f(),o):n},o},Object.defineProperty(n,\"__esModule\",{value:!0})}));\r\n\t// // // https://github.com/vasturiano/d3-binarytree v0.2.0 Copyright 2021 Vasco Asturiano\r\n\t!function(t,r){\"object\"==typeof exports&&\"undefined\"!=typeof module?r(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],r):r((t=\"undefined\"!=typeof globalThis?globalThis:t||self).d3=t.d3||{})}(this,(function(t){\"use strict\";function r(t,r,e){if(isNaN(r))return t;var n,i,o,s,h,u,a=t._root,f={data:e},l=t._x0,x=t._x1;if(!a)return t._root=f,t;for(;a.length;)if((s=r>=(i=(l+x)/2))?l=i:x=i,n=a,!(a=a[h=+s]))return n[h]=f,t;if(r===(o=+t._x.call(null,a.data)))return f.next=a,n?n[h]=f:t._root=f,t;do{n=n?n[h]=new Array(2):t._root=new Array(2),(s=r>=(i=(l+x)/2))?l=i:x=i}while((h=+s)==(u=+(o>=i)));return n[u]=a,n[h]=f,t}function e(t,r,e){this.node=t,this.x0=r,this.x1=e}function n(t){return t[0]}function i(t,r){var e=new o(null==r?n:r,NaN,NaN);return null==t?e:e.addAll(t)}function o(t,r,e){this._x=t,this._x0=r,this._x1=e,this._root=void 0}function s(t){for(var r={data:t.data},e=r;t=t.next;)e=e.next={data:t.data};return r}var h=i.prototype=o.prototype;h.copy=function(){var t,r,e=new o(this._x,this._x0,this._x1),n=this._root;if(!n)return e;if(!n.length)return e._root=s(n),e;for(t=[{source:n,target:e._root=new Array(2)}];n=t.pop();)for(var i=0;i<2;++i)(r=n.source[i])&&(r.length?t.push({source:r,target:n.target[i]=new Array(2)}):n.target[i]=s(r));return e},h.add=function(t){var e=+this._x.call(null,t);return r(this.cover(e),e,t)},h.addAll=function(t){var e,n,i=t.length,o=new Array(i),s=1/0,h=-1/0;for(e=0;e<i;++e)isNaN(n=+this._x.call(null,t[e]))||(o[e]=n,n<s&&(s=n),n>h&&(h=n));if(s>h)return this;for(this.cover(s).cover(h),e=0;e<i;++e)r(this,o[e],t[e]);return this},h.cover=function(t){if(isNaN(t=+t))return this;var r=this._x0,e=this._x1;if(isNaN(r))e=(r=Math.floor(t))+1;else{for(var n,i,o=e-r||1,s=this._root;r>t||t>=e;)switch(i=+(t<r),(n=new Array(2))[i]=s,s=n,o*=2,i){case 0:e=r+o;break;case 1:r=e-o}this._root&&this._root.length&&(this._root=s)}return this._x0=r,this._x1=e,this},h.data=function(){var t=[];return this.visit((function(r){if(!r.length)do{t.push(r.data)}while(r=r.next)})),t},h.extent=function(t){return arguments.length?this.cover(+t[0][0]).cover(+t[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},h.find=function(t,r){var n,i,o,s,h,u=this._x0,a=this._x1,f=[],l=this._root;for(l&&f.push(new e(l,u,a)),null==r?r=1/0:(u=t-r,a=t+r);s=f.pop();)if(!(!(l=s.node)||(i=s.x0)>a||(o=s.x1)<u))if(l.length){var x=(i+o)/2;f.push(new e(l[1],x,o),new e(l[0],i,x)),(h=+(t>=x))&&(s=f[f.length-1],f[f.length-1]=f[f.length-1-h],f[f.length-1-h]=s)}else{var _=Math.abs(t-+this._x.call(null,l.data));_<r&&(r=_,u=t-_,a=t+_,n=l.data)}return n},h.remove=function(t){if(isNaN(o=+this._x.call(null,t)))return this;var r,e,n,i,o,s,h,u,a,f=this._root,l=this._x0,x=this._x1;if(!f)return this;if(f.length)for(;;){if((h=o>=(s=(l+x)/2))?l=s:x=s,r=f,!(f=f[u=+h]))return this;if(!f.length)break;r[u+1&1]&&(e=r,a=u)}for(;f.data!==t;)if(n=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,n?(i?n.next=i:delete n.next,this):r?(i?r[u]=i:delete r[u],(f=r[0]||r[1])&&f===(r[1]||r[0])&&!f.length&&(e?e[a]=f:this._root=f),this):(this._root=i,this)},h.removeAll=function(t){for(var r=0,e=t.length;r<e;++r)this.remove(t[r]);return this},h.root=function(){return this._root},h.size=function(){var t=0;return this.visit((function(r){if(!r.length)do{++t}while(r=r.next)})),t},h.visit=function(t){var r,n,i,o,s=[],h=this._root;for(h&&s.push(new e(h,this._x0,this._x1));r=s.pop();)if(!t(h=r.node,i=r.x0,o=r.x1)&&h.length){var u=(i+o)/2;(n=h[1])&&s.push(new e(n,u,o)),(n=h[0])&&s.push(new e(n,i,u))}return this},h.visitAfter=function(t){var r,n=[],i=[];for(this._root&&n.push(new e(this._root,this._x0,this._x1));r=n.pop();){var o=r.node;if(o.length){var s,h=r.x0,u=r.x1,a=(h+u)/2;(s=o[0])&&n.push(new e(s,h,a)),(s=o[1])&&n.push(new e(s,a,u))}i.push(r)}for(;r=i.pop();)t(r.node,r.x0,r.x1);return this},h.x=function(t){return arguments.length?(this._x=t,this):this._x},t.binarytree=i,Object.defineProperty(t,\"__esModule\",{value:!0})}));\r\n\t// // // https://github.com/vasturiano/d3-octree v0.2.0 Copyright 2021 Vasco Asturiano\r\n\t!function(t,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?i(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],i):i((t=\"undefined\"!=typeof globalThis?globalThis:t||self).d3=t.d3||{})}(this,(function(t){\"use strict\";function i(t,i,n,e,s){if(isNaN(i)||isNaN(n)||isNaN(e))return t;var h,r,o,a,l,u,_,f,c,y,x,d,p=t._root,w={data:s},z=t._x0,N=t._y0,v=t._z0,g=t._x1,b=t._y1,A=t._z1;if(!p)return t._root=w,t;for(;p.length;)if((f=i>=(r=(z+g)/2))?z=r:g=r,(c=n>=(o=(N+b)/2))?N=o:b=o,(y=e>=(a=(v+A)/2))?v=a:A=a,h=p,!(p=p[x=y<<2|c<<1|f]))return h[x]=w,t;if(l=+t._x.call(null,p.data),u=+t._y.call(null,p.data),_=+t._z.call(null,p.data),i===l&&n===u&&e===_)return w.next=p,h?h[x]=w:t._root=w,t;do{h=h?h[x]=new Array(8):t._root=new Array(8),(f=i>=(r=(z+g)/2))?z=r:g=r,(c=n>=(o=(N+b)/2))?N=o:b=o,(y=e>=(a=(v+A)/2))?v=a:A=a}while((x=y<<2|c<<1|f)==(d=(_>=a)<<2|(u>=o)<<1|l>=r));return h[d]=p,h[x]=w,t}function n(t,i,n,e,s,h,r){this.node=t,this.x0=i,this.y0=n,this.z0=e,this.x1=s,this.y1=h,this.z1=r}function e(t){return t[0]}function s(t){return t[1]}function h(t){return t[2]}function r(t,i,n,r){var a=new o(null==i?e:i,null==n?s:n,null==r?h:r,NaN,NaN,NaN,NaN,NaN,NaN);return null==t?a:a.addAll(t)}function o(t,i,n,e,s,h,r,o,a){this._x=t,this._y=i,this._z=n,this._x0=e,this._y0=s,this._z0=h,this._x1=r,this._y1=o,this._z1=a,this._root=void 0}function a(t){for(var i={data:t.data},n=i;t=t.next;)n=n.next={data:t.data};return i}var l=r.prototype=o.prototype;l.copy=function(){var t,i,n=new o(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root;if(!e)return n;if(!e.length)return n._root=a(e),n;for(t=[{source:e,target:n._root=new Array(8)}];e=t.pop();)for(var s=0;s<8;++s)(i=e.source[s])&&(i.length?t.push({source:i,target:e.target[s]=new Array(8)}):e.target[s]=a(i));return n},l.add=function(t){var n=+this._x.call(null,t),e=+this._y.call(null,t),s=+this._z.call(null,t);return i(this.cover(n,e,s),n,e,s,t)},l.addAll=function(t){var n,e,s,h,r,o=t.length,a=new Array(o),l=new Array(o),u=new Array(o),_=1/0,f=1/0,c=1/0,y=-1/0,x=-1/0,d=-1/0;for(e=0;e<o;++e)isNaN(s=+this._x.call(null,n=t[e]))||isNaN(h=+this._y.call(null,n))||isNaN(r=+this._z.call(null,n))||(a[e]=s,l[e]=h,u[e]=r,s<_&&(_=s),s>y&&(y=s),h<f&&(f=h),h>x&&(x=h),r<c&&(c=r),r>d&&(d=r));if(_>y||f>x||c>d)return this;for(this.cover(_,f,c).cover(y,x,d),e=0;e<o;++e)i(this,a[e],l[e],u[e],t[e]);return this},l.cover=function(t,i,n){if(isNaN(t=+t)||isNaN(i=+i)||isNaN(n=+n))return this;var e=this._x0,s=this._y0,h=this._z0,r=this._x1,o=this._y1,a=this._z1;if(isNaN(e))r=(e=Math.floor(t))+1,o=(s=Math.floor(i))+1,a=(h=Math.floor(n))+1;else{for(var l,u,_=r-e||1,f=this._root;e>t||t>=r||s>i||i>=o||h>n||n>=a;)switch(u=(n<h)<<2|(i<s)<<1|t<e,(l=new Array(8))[u]=f,f=l,_*=2,u){case 0:r=e+_,o=s+_,a=h+_;break;case 1:e=r-_,o=s+_,a=h+_;break;case 2:r=e+_,s=o-_,a=h+_;break;case 3:e=r-_,s=o-_,a=h+_;break;case 4:r=e+_,o=s+_,h=a-_;break;case 5:e=r-_,o=s+_,h=a-_;break;case 6:r=e+_,s=o-_,h=a-_;break;case 7:e=r-_,s=o-_,h=a-_}this._root&&this._root.length&&(this._root=f)}return this._x0=e,this._y0=s,this._z0=h,this._x1=r,this._y1=o,this._z1=a,this},l.data=function(){var t=[];return this.visit((function(i){if(!i.length)do{t.push(i.data)}while(i=i.next)})),t},l.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},l.find=function(t,i,e,s){var h,r,o,a,l,u,_,f,c,y=this._x0,x=this._y0,d=this._z0,p=this._x1,w=this._y1,z=this._z1,N=[],v=this._root;for(v&&N.push(new n(v,y,x,d,p,w,z)),null==s?s=1/0:(y=t-s,x=i-s,d=e-s,p=t+s,w=i+s,z=e+s,s*=s);f=N.pop();)if(!(!(v=f.node)||(r=f.x0)>p||(o=f.y0)>w||(a=f.z0)>z||(l=f.x1)<y||(u=f.y1)<x||(_=f.z1)<d))if(v.length){var g=(r+l)/2,b=(o+u)/2,A=(a+_)/2;N.push(new n(v[7],g,b,A,l,u,_),new n(v[6],r,b,A,g,u,_),new n(v[5],g,o,A,l,b,_),new n(v[4],r,o,A,g,b,_),new n(v[3],g,b,a,l,u,A),new n(v[2],r,b,a,g,u,A),new n(v[1],g,o,a,l,b,A),new n(v[0],r,o,a,g,b,A)),(c=(e>=A)<<2|(i>=b)<<1|t>=g)&&(f=N[N.length-1],N[N.length-1]=N[N.length-1-c],N[N.length-1-c]=f)}else{var k=t-+this._x.call(null,v.data),m=i-+this._y.call(null,v.data),M=e-+this._z.call(null,v.data),j=k*k+m*m+M*M;if(j<s){var T=Math.sqrt(s=j);y=t-T,x=i-T,d=e-T,p=t+T,w=i+T,z=e+T,h=v.data}}return h},l.remove=function(t){if(isNaN(h=+this._x.call(null,t))||isNaN(r=+this._y.call(null,t))||isNaN(o=+this._z.call(null,t)))return this;var i,n,e,s,h,r,o,a,l,u,_,f,c,y,x,d=this._root,p=this._x0,w=this._y0,z=this._z0,N=this._x1,v=this._y1,g=this._z1;if(!d)return this;if(d.length)for(;;){if((_=h>=(a=(p+N)/2))?p=a:N=a,(f=r>=(l=(w+v)/2))?w=l:v=l,(c=o>=(u=(z+g)/2))?z=u:g=u,i=d,!(d=d[y=c<<2|f<<1|_]))return this;if(!d.length)break;(i[y+1&7]||i[y+2&7]||i[y+3&7]||i[y+4&7]||i[y+5&7]||i[y+6&7]||i[y+7&7])&&(n=i,x=y)}for(;d.data!==t;)if(e=d,!(d=d.next))return this;return(s=d.next)&&delete d.next,e?(s?e.next=s:delete e.next,this):i?(s?i[y]=s:delete i[y],(d=i[0]||i[1]||i[2]||i[3]||i[4]||i[5]||i[6]||i[7])&&d===(i[7]||i[6]||i[5]||i[4]||i[3]||i[2]||i[1]||i[0])&&!d.length&&(n?n[x]=d:this._root=d),this):(this._root=s,this)},l.removeAll=function(t){for(var i=0,n=t.length;i<n;++i)this.remove(t[i]);return this},l.root=function(){return this._root},l.size=function(){var t=0;return this.visit((function(i){if(!i.length)do{++t}while(i=i.next)})),t},l.visit=function(t){var i,e,s,h,r,o,a,l,u=[],_=this._root;for(_&&u.push(new n(_,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=u.pop();)if(!t(_=i.node,s=i.x0,h=i.y0,r=i.z0,o=i.x1,a=i.y1,l=i.z1)&&_.length){var f=(s+o)/2,c=(h+a)/2,y=(r+l)/2;(e=_[7])&&u.push(new n(e,f,c,y,o,a,l)),(e=_[6])&&u.push(new n(e,s,c,y,f,a,l)),(e=_[5])&&u.push(new n(e,f,h,y,o,c,l)),(e=_[4])&&u.push(new n(e,s,h,y,f,c,l)),(e=_[3])&&u.push(new n(e,f,c,r,o,a,y)),(e=_[2])&&u.push(new n(e,s,c,r,f,a,y)),(e=_[1])&&u.push(new n(e,f,h,r,o,c,y)),(e=_[0])&&u.push(new n(e,s,h,r,f,c,y))}return this},l.visitAfter=function(t){var i,e=[],s=[];for(this._root&&e.push(new n(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var h=i.node;if(h.length){var r,o=i.x0,a=i.y0,l=i.z0,u=i.x1,_=i.y1,f=i.z1,c=(o+u)/2,y=(a+_)/2,x=(l+f)/2;(r=h[0])&&e.push(new n(r,o,a,l,c,y,x)),(r=h[1])&&e.push(new n(r,c,a,l,u,y,x)),(r=h[2])&&e.push(new n(r,o,y,l,c,_,x)),(r=h[3])&&e.push(new n(r,c,y,l,u,_,x)),(r=h[4])&&e.push(new n(r,o,a,x,c,y,f)),(r=h[5])&&e.push(new n(r,c,a,x,u,y,f)),(r=h[6])&&e.push(new n(r,o,y,x,c,_,f)),(r=h[7])&&e.push(new n(r,c,y,x,u,_,f))}s.push(i)}for(;i=s.pop();)t(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this},l.x=function(t){return arguments.length?(this._x=t,this):this._x},l.y=function(t){return arguments.length?(this._y=t,this):this._y},l.z=function(t){return arguments.length?(this._z=t,this):this._z},t.octree=r,Object.defineProperty(t,\"__esModule\",{value:!0})}));\r\n\t// // // https://github.com/vasturiano/d3-force-3d v3.0.2 Copyright 2021 Vasco Asturiano\r\n\t!function(n,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?t(exports,require(\"d3-binarytree\"),require(\"d3-quadtree\"),require(\"d3-octree\"),require(\"d3-dispatch\"),require(\"d3-timer\")):\"function\"==typeof define&&define.amd?define([\"exports\",\"d3-binarytree\",\"d3-quadtree\",\"d3-octree\",\"d3-dispatch\",\"d3-timer\"],t):t((n=\"undefined\"!=typeof globalThis?globalThis:n||self).d3=n.d3||{},n.d3,n.d3,n.d3,n.d3,n.d3)}(this,(function(n,t,e,r,i,u){\"use strict\";function o(n){return function(){return n}}function f(n){return 1e-6*(n()-.5)}function a(n){return n.x+n.vx}function c(n){return n.y+n.vy}function l(n){return n.z+n.vz}function h(n){return n.index}function v(n,t){var e=n.get(t);if(!e)throw new Error(\"node not found: \"+t);return e}const d=4294967296;function y(n){return n.x}function s(n){return n.y}function g(n){return n.z}var x=Math.PI*(3-Math.sqrt(5)),z=20*Math.PI/(9+Math.sqrt(221));n.forceCenter=function(n,t,e){var r,i=1;function u(){var u,o,f=r.length,a=0,c=0,l=0;for(u=0;u<f;++u)a+=(o=r[u]).x||0,c+=o.y||0,l+=o.z||0;for(a=(a/f-n)*i,c=(c/f-t)*i,l=(l/f-e)*i,u=0;u<f;++u)o=r[u],a&&(o.x-=a),c&&(o.y-=c),l&&(o.z-=l)}return null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),u.initialize=function(n){r=n},u.x=function(t){return arguments.length?(n=+t,u):n},u.y=function(n){return arguments.length?(t=+n,u):t},u.z=function(n){return arguments.length?(e=+n,u):e},u.strength=function(n){return arguments.length?(i=+n,u):i},u},n.forceCollide=function(n){var i,u,h,v,d=1,y=1;function s(){for(var n,o,s,x,z,p,M,w,q=i.length,N=0;N<y;++N)for(o=(1===u?t.binarytree(i,a):2===u?e.quadtree(i,a,c):3===u?r.octree(i,a,c,l):null).visitAfter(g),n=0;n<q;++n)s=i[n],M=h[s.index],w=M*M,x=s.x+s.vx,u>1&&(z=s.y+s.vy),u>2&&(p=s.z+s.vz),o.visit(m);function m(n,t,e,r,i,o,a){var c=[t,e,r,i,o,a],l=c[0],h=c[1],y=c[2],g=c[u],q=c[u+1],N=c[u+2],m=n.data,A=n.r,b=M+A;if(!m)return l>x+b||g<x-b||u>1&&(h>z+b||q<z-b)||u>2&&(y>p+b||N<p-b);if(m.index>s.index){var k=x-m.x-m.vx,E=u>1?z-m.y-m.vy:0,j=u>2?p-m.z-m.vz:0,D=k*k+E*E+j*j;D<b*b&&(0===k&&(D+=(k=f(v))*k),u>1&&0===E&&(D+=(E=f(v))*E),u>2&&0===j&&(D+=(j=f(v))*j),D=(b-(D=Math.sqrt(D)))/D*d,s.vx+=(k*=D)*(b=(A*=A)/(w+A)),u>1&&(s.vy+=(E*=D)*b),u>2&&(s.vz+=(j*=D)*b),m.vx-=k*(b=1-b),u>1&&(m.vy-=E*b),u>2&&(m.vz-=j*b))}}}function g(n){if(n.data)return n.r=h[n.data.index];for(var t=n.r=0;t<Math.pow(2,u);++t)n[t]&&n[t].r>n.r&&(n.r=n[t].r)}function x(){if(i){var t,e,r=i.length;for(h=new Array(r),t=0;t<r;++t)e=i[t],h[e.index]=+n(e,t,i)}}return\"function\"!=typeof n&&(n=o(null==n?1:+n)),s.initialize=function(n,...t){i=n,v=t.find((n=>\"function\"==typeof n))||Math.random,u=t.find((n=>[1,2,3].includes(n)))||2,x()},s.iterations=function(n){return arguments.length?(y=+n,s):y},s.strength=function(n){return arguments.length?(d=+n,s):d},s.radius=function(t){return arguments.length?(n=\"function\"==typeof t?t:o(+t),x(),s):n},s},n.forceLink=function(n){var t,e,r,i,u,a,c,l=h,d=function(n){return 1/Math.min(u[n.source.index],u[n.target.index])},y=o(30),s=1;function g(r){for(var u=0,o=n.length;u<s;++u)for(var l,h,v,d,y,g=0,x=0,z=0,p=0;g<o;++g)h=(l=n[g]).source,x=(v=l.target).x+v.vx-h.x-h.vx||f(c),i>1&&(z=v.y+v.vy-h.y-h.vy||f(c)),i>2&&(p=v.z+v.vz-h.z-h.vz||f(c)),x*=d=((d=Math.sqrt(x*x+z*z+p*p))-e[g])/d*r*t[g],z*=d,p*=d,v.vx-=x*(y=a[g]),i>1&&(v.vy-=z*y),i>2&&(v.vz-=p*y),h.vx+=x*(y=1-y),i>1&&(h.vy+=z*y),i>2&&(h.vz+=p*y)}function x(){if(r){var i,o,f=r.length,c=n.length,h=new Map(r.map(((n,t)=>[l(n,t,r),n])));for(i=0,u=new Array(f);i<c;++i)(o=n[i]).index=i,\"object\"!=typeof o.source&&(o.source=v(h,o.source)),\"object\"!=typeof o.target&&(o.target=v(h,o.target)),u[o.source.index]=(u[o.source.index]||0)+1,u[o.target.index]=(u[o.target.index]||0)+1;for(i=0,a=new Array(c);i<c;++i)o=n[i],a[i]=u[o.source.index]/(u[o.source.index]+u[o.target.index]);t=new Array(c),z(),e=new Array(c),p()}}function z(){if(r)for(var e=0,i=n.length;e<i;++e)t[e]=+d(n[e],e,n)}function p(){if(r)for(var t=0,i=n.length;t<i;++t)e[t]=+y(n[t],t,n)}return null==n&&(n=[]),g.initialize=function(n,...t){r=n,c=t.find((n=>\"function\"==typeof n))||Math.random,i=t.find((n=>[1,2,3].includes(n)))||2,x()},g.links=function(t){return arguments.length?(n=t,x(),g):n},g.id=function(n){return arguments.length?(l=n,g):l},g.iterations=function(n){return arguments.length?(s=+n,g):s},g.strength=function(n){return arguments.length?(d=\"function\"==typeof n?n:o(+n),z(),g):d},g.distance=function(n){return arguments.length?(y=\"function\"==typeof n?n:o(+n),p(),g):y},g},n.forceManyBody=function(){var n,i,u,a,c,l,h=o(-30),v=1,d=1/0,x=.81;function z(o){var f,a=n.length,l=(1===i?t.binarytree(n,y):2===i?e.quadtree(n,y,s):3===i?r.octree(n,y,s,g):null).visitAfter(M);for(c=o,f=0;f<a;++f)u=n[f],l.visit(w)}function p(){if(n){var t,e,r=n.length;for(l=new Array(r),t=0;t<r;++t)e=n[t],l[e.index]=+h(e,t,n)}}function M(n){var t,e,r,u,o,f,a=0,c=0,h=n.length;if(h){for(r=u=o=f=0;f<h;++f)(t=n[f])&&(e=Math.abs(t.value))&&(a+=t.value,c+=e,r+=e*(t.x||0),u+=e*(t.y||0),o+=e*(t.z||0));a*=Math.sqrt(4/h),n.x=r/c,i>1&&(n.y=u/c),i>2&&(n.z=o/c)}else{(t=n).x=t.data.x,i>1&&(t.y=t.data.y),i>2&&(t.z=t.data.z);do{a+=l[t.data.index]}while(t=t.next)}n.value=a}function w(n,t,e,r,o){if(!n.value)return!0;var h=[e,r,o][i-1],y=n.x-u.x,s=i>1?n.y-u.y:0,g=i>2?n.z-u.z:0,z=h-t,p=y*y+s*s+g*g;if(z*z/x<p)return p<d&&(0===y&&(p+=(y=f(a))*y),i>1&&0===s&&(p+=(s=f(a))*s),i>2&&0===g&&(p+=(g=f(a))*g),p<v&&(p=Math.sqrt(v*p)),u.vx+=y*n.value*c/p,i>1&&(u.vy+=s*n.value*c/p),i>2&&(u.vz+=g*n.value*c/p)),!0;if(!(n.length||p>=d)){(n.data!==u||n.next)&&(0===y&&(p+=(y=f(a))*y),i>1&&0===s&&(p+=(s=f(a))*s),i>2&&0===g&&(p+=(g=f(a))*g),p<v&&(p=Math.sqrt(v*p)));do{n.data!==u&&(z=l[n.data.index]*c/p,u.vx+=y*z,i>1&&(u.vy+=s*z),i>2&&(u.vz+=g*z))}while(n=n.next)}}return z.initialize=function(t,...e){n=t,a=e.find((n=>\"function\"==typeof n))||Math.random,i=e.find((n=>[1,2,3].includes(n)))||2,p()},z.strength=function(n){return arguments.length?(h=\"function\"==typeof n?n:o(+n),p(),z):h},z.distanceMin=function(n){return arguments.length?(v=n*n,z):Math.sqrt(v)},z.distanceMax=function(n){return arguments.length?(d=n*n,z):Math.sqrt(d)},z.theta=function(n){return arguments.length?(x=n*n,z):Math.sqrt(x)},z},n.forceRadial=function(n,t,e,r){var i,u,f,a,c=o(.1);function l(n){for(var o=0,c=i.length;o<c;++o){var l=i[o],h=l.x-t||1e-6,v=(l.y||0)-e||1e-6,d=(l.z||0)-r||1e-6,y=Math.sqrt(h*h+v*v+d*d),s=(a[o]-y)*f[o]*n/y;l.vx+=h*s,u>1&&(l.vy+=v*s),u>2&&(l.vz+=d*s)}}function h(){if(i){var t,e=i.length;for(f=new Array(e),a=new Array(e),t=0;t<e;++t)a[t]=+n(i[t],t,i),f[t]=isNaN(a[t])?0:+c(i[t],t,i)}}return\"function\"!=typeof n&&(n=o(+n)),null==t&&(t=0),null==e&&(e=0),null==r&&(r=0),l.initialize=function(n,...t){i=n,u=t.find((n=>[1,2,3].includes(n)))||2,h()},l.strength=function(n){return arguments.length?(c=\"function\"==typeof n?n:o(+n),h(),l):c},l.radius=function(t){return arguments.length?(n=\"function\"==typeof t?t:o(+t),h(),l):n},l.x=function(n){return arguments.length?(t=+n,l):t},l.y=function(n){return arguments.length?(e=+n,l):e},l.z=function(n){return arguments.length?(r=+n,l):r},l},n.forceSimulation=function(n,t){t=t||2;var e,r=Math.min(3,Math.max(1,Math.round(t))),o=1,f=.001,a=1-Math.pow(f,1/300),c=0,l=.6,h=new Map,v=u.timer(g),y=i.dispatch(\"tick\",\"end\"),s=function(){let n=1;return()=>(n=(1664525*n+1013904223)%d)/d}();function g(){p(),y.call(\"tick\",e),o<f&&(v.stop(),y.call(\"end\",e))}function p(t){var i,u,f=n.length;void 0===t&&(t=1);for(var v=0;v<t;++v)for(o+=(c-o)*a,h.forEach((function(n){n(o)})),i=0;i<f;++i)null==(u=n[i]).fx?u.x+=u.vx*=l:(u.x=u.fx,u.vx=0),r>1&&(null==u.fy?u.y+=u.vy*=l:(u.y=u.fy,u.vy=0)),r>2&&(null==u.fz?u.z+=u.vz*=l:(u.z=u.fz,u.vz=0));return e}function M(){for(var t,e=0,i=n.length;e<i;++e){if((t=n[e]).index=e,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),null!=t.fz&&(t.z=t.fz),isNaN(t.x)||r>1&&isNaN(t.y)||r>2&&isNaN(t.z)){var u=10*(r>2?Math.cbrt(.5+e):r>1?Math.sqrt(.5+e):e),o=e*x,f=e*z;1===r?t.x=u:2===r?(t.x=u*Math.cos(o),t.y=u*Math.sin(o)):(t.x=u*Math.sin(o)*Math.cos(f),t.y=u*Math.cos(o),t.z=u*Math.sin(o)*Math.sin(f))}(isNaN(t.vx)||r>1&&isNaN(t.vy)||r>2&&isNaN(t.vz))&&(t.vx=0,r>1&&(t.vy=0),r>2&&(t.vz=0))}}function w(t){return t.initialize&&t.initialize(n,s,r),t}return null==n&&(n=[]),M(),e={tick:p,restart:function(){return v.restart(g),e},stop:function(){return v.stop(),e},numDimensions:function(n){return arguments.length?(r=Math.min(3,Math.max(1,Math.round(n))),h.forEach(w),e):r},nodes:function(t){return arguments.length?(n=t,M(),h.forEach(w),e):n},alpha:function(n){return arguments.length?(o=+n,e):o},alphaMin:function(n){return arguments.length?(f=+n,e):f},alphaDecay:function(n){return arguments.length?(a=+n,e):+a},alphaTarget:function(n){return arguments.length?(c=+n,e):c},velocityDecay:function(n){return arguments.length?(l=1-n,e):1-l},randomSource:function(n){return arguments.length?(s=n,h.forEach(w),e):s},force:function(n,t){return arguments.length>1?(null==t?h.delete(n):h.set(n,w(t)),e):h.get(n)},find:function(){var t,e,i,u,o,f,a=Array.prototype.slice.call(arguments),c=a.shift()||0,l=(r>1?a.shift():null)||0,h=(r>2?a.shift():null)||0,v=a.shift()||1/0,d=0,y=n.length;for(v*=v,d=0;d<y;++d)(u=(t=c-(o=n[d]).x)*t+(e=l-(o.y||0))*e+(i=h-(o.z||0))*i)<v&&(f=o,v=u);return f},on:function(n,t){return arguments.length>1?(y.on(n,t),e):y.on(n)}}},n.forceX=function(n){var t,e,r,i=o(.1);function u(n){for(var i,u=0,o=t.length;u<o;++u)(i=t[u]).vx+=(r[u]-i.x)*e[u]*n}function f(){if(t){var u,o=t.length;for(e=new Array(o),r=new Array(o),u=0;u<o;++u)e[u]=isNaN(r[u]=+n(t[u],u,t))?0:+i(t[u],u,t)}}return\"function\"!=typeof n&&(n=o(null==n?0:+n)),u.initialize=function(n){t=n,f()},u.strength=function(n){return arguments.length?(i=\"function\"==typeof n?n:o(+n),f(),u):i},u.x=function(t){return arguments.length?(n=\"function\"==typeof t?t:o(+t),f(),u):n},u},n.forceY=function(n){var t,e,r,i=o(.1);function u(n){for(var i,u=0,o=t.length;u<o;++u)(i=t[u]).vy+=(r[u]-i.y)*e[u]*n}function f(){if(t){var u,o=t.length;for(e=new Array(o),r=new Array(o),u=0;u<o;++u)e[u]=isNaN(r[u]=+n(t[u],u,t))?0:+i(t[u],u,t)}}return\"function\"!=typeof n&&(n=o(null==n?0:+n)),u.initialize=function(n){t=n,f()},u.strength=function(n){return arguments.length?(i=\"function\"==typeof n?n:o(+n),f(),u):i},u.y=function(t){return arguments.length?(n=\"function\"==typeof t?t:o(+t),f(),u):n},u},n.forceZ=function(n){var t,e,r,i=o(.1);function u(n){for(var i,u=0,o=t.length;u<o;++u)(i=t[u]).vz+=(r[u]-i.z)*e[u]*n}function f(){if(t){var u,o=t.length;for(e=new Array(o),r=new Array(o),u=0;u<o;++u)e[u]=isNaN(r[u]=+n(t[u],u,t))?0:+i(t[u],u,t)}}return\"function\"!=typeof n&&(n=o(null==n?0:+n)),u.initialize=function(n){t=n,f()},u.strength=function(n){return arguments.length?(i=\"function\"==typeof n?n:o(+n),f(),u):i},u.z=function(t){return arguments.length?(n=\"function\"==typeof t?t:o(+t),f(),u):n},u},Object.defineProperty(n,\"__esModule\",{value:!0})}));\r\n\t// importScripts(\"https://cdn.jsdelivr.net/npm/d3-dispatch@3\");\r\n\t// importScripts(\"https://cdn.jsdelivr.net/npm/d3-quadtree@3\");\r\n\t// importScripts(\"https://cdn.jsdelivr.net/npm/d3-timer@3\");\r\n\t// importScripts(\"https://cdn.jsdelivr.net/npm/d3-force@3\");\r\n\t// importScripts(\"https://unpkg.com/d3-binarytree\");\r\n\t// importScripts(\"https://unpkg.com/d3-octree\");\r\n\t// importScripts(\"https://unpkg.com/d3-force-3d\");\r\n\r\n\t\"use strict\"\r\n\r\n\tthis._handleSetAttribute = (attributeName,value)=>{\r\n\t\t// example attributeName = \"simulation.alpha\"\r\n\t\t// example this.simulation.attributeName?.(value);\r\n\t\tlet attributeNames = attributeName.split(\".\");\r\n\t\tlet attribute = this;\r\n\t\tfor(let i=0;i<attributeNames.length;i++){\r\n\t\t\tattribute = attribute?.[attributeNames[i]];\r\n\t\t}\r\n\t\tattribute?.(value);\r\n\t}\r\n\r\n\tself.onmessage = function (msg) {\r\n\t\t// console.log(\"RECEIVED:\", msg.data.type);\r\n\t\tlet use2D = false;\r\n\t\tif (msg.data.type == \"pause\") {\r\n\t\t\t// console.log(\"PAUSING!!!!\")\r\n\t\t\tthis.simulation.stop();\r\n\t\t} else if (msg.data.type == \"resume\") {\r\n\t\t\tthis.simulation.restart();\r\n\t\t} else if (msg.data.type == \"setAttribute\") {\r\n\t\t\tthis._handleSetAttribute(msg.data.attributeName,msg.data.value);\r\n\t\t} else if (msg.data.type == \"start\") {\r\n\t\t\t// let inputNodes = msg.data.nodes;\r\n\t\t\tlet inputNodesPositions = msg.data.positions;\r\n\t\t\tlet inputEdges = msg.data.edges;\r\n\t\t\t// let inputEdgeWeights = msg.data.weights;\r\n\t\t\t\r\n\t\t\tif(msg.data.use2D) {\r\n\t\t\t\tuse2D = true;\r\n\t\t\t}\r\n\r\n\t\t\tlet nodes = [];\r\n\t\t\tlet links = [];\r\n\t\t\tfor (let nodeIndex = 0; nodeIndex < inputNodesPositions.length/3; nodeIndex++) {\r\n\t\t\t\t\r\n\t\t\t\t// console.log(entry);\r\n\t\t\t\t\r\n\r\n\t\t\t\t// node.x = 400 * (Math.random() * 1.0 - 0.5);\r\n\t\t\t\t// node.y = 400 * (Math.random() * 1.0 - 0.5);\r\n\t\t\t\t// node.z = 400 * (Math.random() * 1.0 - 0.5);\r\n\t\t\t\t// node.vz = 0;\r\n\t\t\t\t\r\n\t\t\t\tlet x = inputNodesPositions[nodeIndex*3+0]*10;//400 * (Math.random() * 1.0 - 0.5);\r\n\t\t\t\tlet y = inputNodesPositions[nodeIndex*3+1]*10;//400 * (Math.random() * 1.0 - 0.5);\r\n\t\t\t\tlet z = inputNodesPositions[nodeIndex*3+2]*10;//400 * (Math.random() * 1.0 - 0.5);\r\n\t\t\t\tlet vz = 0;\r\n\t\t\t\t\r\n\r\n\t\t\t\t// node.index = network.ID2index[key];\r\n\t\t\t\tnodes.push({x,y,z,vz,ID:nodeIndex});\r\n\t\t\t}\r\n\r\n\t\t\tfor (let index = 0; index < inputEdges.length / 2; index++) {\r\n\t\t\t\tlet edgeFrom = (inputEdges[index * 2]);\r\n\t\t\t\tlet edgeTo = (inputEdges[index * 2 + 1]);\r\n\t\t\t\tlet edgeObject = {\r\n\t\t\t\t\tsource: edgeFrom,\r\n\t\t\t\t\ttarget: edgeTo,\r\n\t\t\t\t}\r\n\t\t\t\tlinks.push(edgeObject);\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\tfunction d3gravityForce() {\r\n\t\t\t// var nodes, strength = 0.20, softening = 0.05;\r\n\t\t\tvar nodes, strength = 0.10, softening = 0.05;\r\n\t\t\tfunction force(alpha){\r\n\t\t\t\tconst totalStrength = Math.sqrt(nodes.length)*alpha * strength;\r\n\t\t\t\tfor (let i = 0, n = nodes.length, node; i < n; ++i) {\r\n\t\t\t\t\tnode = nodes[i];\r\n\t\t\t\t\tlet distance = Math.sqrt(node.x * node.x + node.y * node.y + node.z * node.z + softening);\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet kinvdistance3 = totalStrength/(distance);\r\n\t\t\t\t\tnode.vx -= node.x * kinvdistance3;\r\n\t\t\t\t\tnode.vy -= node.y * kinvdistance3;\r\n\t\t\t\t\tnode.vz -= node.z * kinvdistance3;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tforce.initialize = function(_) {\r\n\t\t\t\tnodes = _;\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tforce.strength = function(_) {\r\n\t\t\t\treturn arguments.length ? (strength = +_, force) : strength;\r\n\t\t\t};\r\n\r\n\t\t\tforce.softening = function(_) {\r\n\t\t\t\treturn arguments.length ? (softening = +_, force) : softening;\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\treturn force;\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\t\t\tthis.repulsiveforce = d3.forceManyBody();\r\n\t\t\tthis.attractiveforce = d3.forceLink(links);\r\n\t\t\tthis.centralForce = d3.forceCenter();\r\n\t\t\t// this.gravityForce = d3gravityForce();\r\n\t\t\tthis.simulation = d3.forceSimulation(nodes)\r\n\t\t\t\t.numDimensions(use2D?2:3)\r\n\t\t\t\t.force(\"charge\", this.repulsiveforce)\r\n\t\t\t\t.force(\"link\", this.attractiveforce)\r\n\t\t\t\t.force(\"center\", centralForce)\r\n\t\t\t\t.force(\"gravity\", this.gravityForce)\r\n\t\t\t\t// .force(\"collide\", d3.forceCollide(d => d.size*4))\r\n\t\t\t\t.velocityDecay(0.05)\r\n\t\t\t\t.on(\"tick\", async () => {\r\n\t\t\t\t\tfor (let vertexIndex = 0; vertexIndex < nodes.length; vertexIndex++) {\r\n\t\t\t\t\t\tconst node = nodes[vertexIndex];\r\n\t\t\t\t\t\tinputNodesPositions[vertexIndex * 3 + 0] = node.x/10;\r\n\t\t\t\t\t\tinputNodesPositions[vertexIndex * 3 + 1] = node.y/10;\r\n\t\t\t\t\t\tif(!use2D) {\r\n\t\t\t\t\t\t\tinputNodesPositions[vertexIndex * 3 + 2] = node.z/10;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tinputNodesPositions[vertexIndex * 3 + 2] = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.postMessage({ type: \"update\", positions: inputNodesPositions });\r\n\t\t\t\t}).on(\"end\", () => {\r\n\t\t\t\t\tself.postMessage({ type: \"stop\" });\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n})\r\n\r\nlet workerFunctionString = workerFunction.toString();\r\nlet workerURL = URL.createObjectURL(new Blob([`(${workerFunctionString})()`], {type:'text/javascript'}));\r\n\r\n\r\nclass d3ForceLayoutWorker {\r\n\tconstructor({\r\n\t\tnetwork=null,\r\n\t\tonUpdate=null,\r\n\t\tonStop=null,\r\n\t\tonStart=null,\r\n\t\tuse2D=false\r\n\t}) {\r\n\t\tthis._network = network;\r\n\t\tthis._onUpdate = onUpdate;\r\n\t\tthis._onStop = onStop;\r\n\t\tthis._onStart = onStart;\r\n\t\tthis._use2D = use2D;\r\n\t\tthis._attributes = {\r\n\t\t\t\"charge\": 0.1,\r\n\t\t};\r\n\t\tthis._layoutWorker = null;\r\n\t}\r\n\r\n\tstart(){\r\n\t\tif(!this._layoutWorker){\r\n\t\t\tthis._layoutWorker = new Worker(workerURL);\r\n\t\t\tthis._layoutWorker.onmessage = (msg) => {\r\n\t\t\t\tif (msg.data.type == \"update\") {\r\n\t\t\t\t\tthis._onUpdate?.(msg.data);\r\n\t\t\t\t}else if (msg.data.type == \"stop\") {\r\n\t\t\t\t\tthis._onStop?.(msg.data);\r\n\t\t\t\t\tthis._layoutRunning = false;\r\n\t\t\t\t}else if (msg.data.type == \"getAttribute\") {\r\n\t\t\t\t\tthis._handleReturnAttribute(msg.data);\r\n\t\t\t\t}else {\r\n\t\t\t\t\tconsole.log(\"Layout received Unknown msg: \", msg);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis._layoutRunning = true;\r\n\t\t\tthis._onStart?.();\r\n\t\t\tthis._layoutWorker.postMessage({\r\n\t\t\t\t type: \"start\",\r\n\t\t\t\t// network: this.network,\r\n\t\t\t\t// nodes:this._network.nodes,\r\n\t\t\t\tpositions:this._network.positions,\r\n\t\t\t\tedges:this._network.indexedEdges, \r\n\t\t\t\tuse2D: this._use2D\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\trestart(){\r\n\t\tthis.stop();\r\n\t\tthis.start();\r\n\t\treturn this;\r\n\t}\r\n\r\n\tstop(){\r\n\t\tif(this._layoutRunning){\r\n\t\t\tthis._onStop?.();\r\n\t\t}\r\n\t\tthis._layoutWorker?.terminate();\r\n\t\tthis._layoutRunning = false;\r\n\t\tdelete this._layoutWorker;\r\n\t\tthis._layoutWorker = null;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tresume() {\r\n\t\tthis.start();\r\n\t\tif(!this._layoutRunning){\r\n\t\t\tthis._onStart?.();\r\n\t\t}\r\n\t\tthis._layoutWorker.postMessage({ type: \"resume\" });\r\n\t\tthis._layoutRunning=true;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpause(){\r\n\t\tthis._layoutWorker.postMessage({ type: \"pause\"});\r\n\t\tthis._layoutRunning=false;\r\n\t\tthis._onStop?.();\r\n\t\treturn this;\r\n\t}\r\n\r\n\tonUpdate(callback) {\r\n\t\tthis._onUpdate = callback;\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tonStop(callback) {\r\n\t\tthis._onStop = callback;\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tonStart(callback) {\r\n\t\tthis._onStart = callback;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tisRunning() {\r\n\t\treturn this._layoutRunning;\r\n\t}\r\n\t\r\n\tcleanup() {\r\n\t\tthis.stop();\r\n\t}\r\n\r\n\t_handleGetAttribute(){\r\n\t\t//Not implemented yet\r\n\t}\r\n\r\n\tsetAttribute(attributeName,value){\r\n\t\tthis._layoutWorker.postMessage({\r\n\t\t\ttype: \"setAttribute\",\r\n\t\t\tattributeName: attributeName,\r\n\t\t\tvalue: value\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\tgroups(groups) {\r\n\t\treturn this.setAttribute(\"groups\", groups);\r\n\t}\r\n\r\n\talpha(alphaValue){\r\n\t\treturn this.setAttribute(\"alpha\", alphaValue);\r\n\t}\r\n\r\n\talphaDecay(alphaValue){\r\n\t\treturn this.setAttribute(\"alphaDecay\", alphaValue);\r\n\t}\r\n\r\n\talphaTarget(alphaValue){\r\n\t\treturn this.setAttribute(\"alphaTarget\", alphaValue);\r\n\t}\r\n\r\n\tvelocityDecay(velocityDecayValue){\r\n\t\treturn this.setAttribute(\"velocityDecay\", velocityDecayValue);\r\n\t}\r\n}\r\n\r\nexport {d3ForceLayoutWorker as layoutWorker};","\n\n\n\n//\n// EDGES VERTEX SHADER\n//\n\nlet vertexShader = /*glsl*/`\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\n \nuniform float globalSizeScale;\nuniform float globalSizeBase;\nuniform float globalWidthScale;\nuniform float globalWidthBase;\n\nuniform float globalOpacityScale;\nuniform float globalOpacityBase;\n\nattribute vec3 fromVertex;\nattribute vec3 toVertex;\nattribute vec2 vertexType;\n// 0,1:  0.0, 1.0, // source, top\n// 0,0:  0.0, 0.0, // source, bottom\n// 1,1:  1.0, 1.0, // target, top\n// 1,0:  1.0, 0.0, // target, bottom\n\nattribute vec4 fromColor;\nattribute vec4 toColor;\nattribute float fromSize;\nattribute float toSize;\nattribute vec4 encodedIndex;\n\nvarying vec4 vColor;\nvarying vec3 vOffset;\nvarying vec4 vEncodedIndex;\n\n\n//varying float vZComponent;\n\nvoid main(void){\n\tvColor = (fromColor)*vertexType.x + (toColor)*(1.0-vertexType.x);\n\tvColor.w = clamp(globalOpacityBase+globalOpacityScale*vColor.w,0.0,1.0);\n\tfloat updatedFromSize = globalSizeScale*fromSize+globalSizeBase;\n\tfloat updatedToSize = globalSizeScale*toSize+globalSizeBase;\n\n\tfloat width = globalWidthBase+globalWidthScale*((updatedFromSize)*vertexType.x + (updatedToSize)*(1.0-vertexType.x));\n\tvEncodedIndex = encodedIndex;\n\t//vZComponent = viewVertex.z;\n\n\n\tvec3 vertexCenter = fromVertex.xyz*vertexType.x + toVertex.xyz*(1.0-vertexType.x);\n\tvec3 destinationVertexCenter = fromVertex.xyz*(1.0-vertexType.x) + toVertex.xyz*vertexType.x;\n\t\n\tvec3 displacement = (viewMatrix*vec4((destinationVertexCenter-vertexCenter),0.0)).xyz;\n\tvec3 perpendicularVector = normalize(vec3(-displacement.y, displacement.x, 0.0));\n\tvec3 offset = width*(vertexType.x-0.5)*(vertexType.y-0.5)*4.0*1.5*perpendicularVector;\n\t\n\tvec4 viewVertex = viewMatrix * vec4(vertexCenter.xyz,1.0)+vec4(offset,0.0);\n\tfloat displacementLength = length(displacement);\n\tvOffset = vec3(vertexType.x,updatedToSize/displacementLength*1.5,updatedFromSize/displacementLength*1.5);\n\t\n\n\tvec4 temp_pos = projectionMatrix*viewVertex;\n\t// vec4 eye_vec = vec4(0.0,0.0,0.0,0);\n\t// float dist = length(eye_vec);\n\t// vec4 lookat = eye_vec - temp_pos;\n\t// vec4 dir = temp_pos - eye_vec;\n\t// vec4 center = normalize(-eye_vec);\n\t// vec4 proj = dot(temp_pos, normalize(-lookat)) * normalize(-lookat);\n\t// vec4 c = temp_pos - proj;\n\t// float magnitude = 1.0-acos(dot(normalize(-eye_vec), normalize(temp_pos)));\n\n\t// c = length(c) * magnitude * normalize(c);\n\t// vec4 dir2 = normalize(c-lookat);\n\t// temp_pos.xy = (dir2).xy;\n\t// temp_pos.z = 0.0;\n\t// temp_pos.w = 1.0;\n\n\n\tgl_Position = temp_pos;\n\t\n}\n`;\n\n\n\n\n\n//\n// EDGES VERTEX SHADER HYPERBOLIC\n//\n\nlet vertexHyperbolicShader = /*glsl*/`\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\n \nuniform float globalSizeScale;\nuniform float globalSizeBase;\nuniform float globalWidthScale;\nuniform float globalWidthBase;\n\nuniform float globalOpacityScale;\nuniform float globalOpacityBase;\n\nattribute vec3 fromVertex;\nattribute vec3 toVertex;\nattribute vec2 vertexType;\n// 0,1:  0.0, 1.0, // source, top\n// 0,0:  0.0, 0.0, // source, bottom\n// 1,1:  1.0, 1.0, // target, top\n// 1,0:  1.0, 0.0, // target, bottom\n\nattribute vec4 fromColor;\nattribute vec4 toColor;\nattribute float fromSize;\nattribute float toSize;\nattribute vec4 encodedIndex;\n\nvarying vec4 vColor;\nvarying vec3 vOffset;\nvarying vec4 vEncodedIndex;\n\n\nvec2 hyperbolicNormFactor(vec2 vertex, float scaling){\n\tvec2 pos = vertex.xy;\n\tfloat r = length(pos.xy);\n\t// //polar\n\t// vec2 normFactor = (r+scaling)*vec2(1.0,1.0);\n\t// catersian\n\tvec2 normFactor = sqrt(vertex.xy*vertex.xy+scaling*scaling);\n\treturn normFactor;\n}\n\n//varying float vZComponent;\n\nvoid main(void){\n\tvColor = (fromColor)*vertexType.x + (toColor)*(1.0-vertexType.x);\n\tvColor.w = clamp(globalOpacityBase+globalOpacityScale*vColor.w,0.0,1.0);\n\tfloat updatedFromSize = globalSizeScale*fromSize+globalSizeBase;\n\tfloat updatedToSize = globalSizeScale*toSize+globalSizeBase;\n\n\tfloat width = globalWidthBase+globalWidthScale*((updatedFromSize)*vertexType.x + (updatedToSize)*(1.0-vertexType.x));\n\tvEncodedIndex = encodedIndex;\n\t//vZComponent = viewVertex.z;\n\n\tfloat scaling = -viewMatrix[3][2];\n\t\n\tvec4 fromVertexView = viewMatrix * vec4(fromVertex.xyz,1.0);\n\tvec4 toVertexView = viewMatrix * vec4(toVertex.xyz,1.0);\n\n\tvec2 normFactorFrom = hyperbolicNormFactor(fromVertexView.xy, scaling);\n\tvec2 normFactorTo = hyperbolicNormFactor(toVertexView.xy, scaling);\n\t\n\tvec3 vertexCenter = fromVertexView.xyz*vertexType.x + toVertexView.xyz*(1.0-vertexType.x);\n\tvec3 destinationVertexCenter = fromVertexView.xyz*(1.0-vertexType.x) + toVertexView.xyz*vertexType.x;\n\n\tvec2 normFactorCenter = hyperbolicNormFactor(vertexCenter.xy, scaling);\n\tvec2 normFactorDestinationCenter = hyperbolicNormFactor(destinationVertexCenter.xy, scaling);\n\n\tfromVertexView.xy = fromVertexView.xy/normFactorFrom/vec2(projectionMatrix[0][0],projectionMatrix[1][1]);\n\ttoVertexView.xy = toVertexView.xy/normFactorTo/vec2(projectionMatrix[0][0],projectionMatrix[1][1]);\n\tvertexCenter.xy = vertexCenter.xy/normFactorCenter/vec2(projectionMatrix[0][0],projectionMatrix[1][1]);\n\tdestinationVertexCenter.xy = destinationVertexCenter.xy/normFactorDestinationCenter/vec2(projectionMatrix[0][0],projectionMatrix[1][1]);\n\n\tvec3 displacement = vec4((destinationVertexCenter-vertexCenter),0.0).xyz;\n\tvec3 perpendicularVector = normalize(vec3(-displacement.y, displacement.x, 0.0));\n\tvec3 offset = width*(vertexType.x-0.5)*(vertexType.y-0.5)*4.0*1.0*perpendicularVector/length(normFactorCenter)*scaling;\n\t\n\tvec4 viewVertex = vec4(vertexCenter.xyz,1.0)+vec4(offset,0.0);\n\tfloat displacementLength = length(displacement);\n\t// vOffset = vec3(vertexType.x,updatedToSize/displacementLength*1.0,updatedFromSize/displacementLength*1.0);\n\tvOffset = vec3(0.0,0.0,0.0);\n\tviewVertex.zw = vec2(0.0,1.0);\n\tvec4 temp_pos = projectionMatrix*viewVertex;\n\tgl_Position = temp_pos;\n}\n`;\n\n\n//\n// EDGES FRAGMENT SHADER\n//\n\nlet fragmentShader = /*glsl*/`\n#ifdef GL_ES\n\tprecision highp float;\n#endif\n//uniform vec2 nearFar;\nvarying vec4 vEncodedIndex;\nvarying vec4 vColor;\nvarying vec3 vOffset;\n//varying float vZComponent;\n//gl_DepthRange.near)/gl_DepthRange.diff\nvoid main(){\n\t//float w = (-vZComponent-nearFar[0])/(nearFar[1]-nearFar[0]);\n\tif(vOffset.x<vOffset.y || vOffset.x>(1.0-vOffset.z)){\n\t\tdiscard;\n\t}\n\n\t// gl_FragColor = vec4(vOffset.x,vOffset.x,0,1.0);//vec4(vColor.xyz,globalOpacity*vColor.w);\n\tgl_FragColor = vColor;\n}\n`;\n\n\n\n//\n// EDGES PICKING FRAGMENT SHADER\n//\n\nlet pickingShader = /*glsl*/`\n#ifdef GL_ES\n\tprecision highp float;\n#endif\n//uniform vec2 nearFar;\nvarying vec4 vEncodedIndex;\nvarying vec4 vColor;\nvarying vec3 vOffset;\n//varying float vZComponent;\n//gl_DepthRange.near)/gl_DepthRange.diff\nvoid main(){\n\n\tif(vOffset.x<vOffset.y*1.1 || vOffset.x>(1.0-vOffset.z*1.1) || (vEncodedIndex.x+vEncodedIndex.y+vEncodedIndex.z+vEncodedIndex.w)<=0.0){\n\t\tdiscard;\n\t}\n\t//float w = (-vZComponent-nearFar[0])/(nearFar[1]-nearFar[0]);\n\tgl_FragColor = vEncodedIndex;\n\t\n}\n`;\n\n\n//\n// EDGES FAST VERTEX SHADER\n//\n\nlet fastVertexShader = /*glsl*/`\nuniform mat4 projectionViewMatrix;\nuniform float globalOpacityScale;\nuniform float globalOpacityBase;\n\nattribute vec3 vertex;\nattribute vec4 color;\n\n\nvarying vec4 vColor;\nvarying vec4 vEncodedIndex;\n\n//varying float vZComponent;\n\nvoid main(void){\n\tvColor = color;\n\tvColor.w = clamp(globalOpacityBase+globalOpacityScale*vColor.w,0.0,1.0);\n\t//vZComponent = viewVertex.z;\n\tgl_Position =   projectionViewMatrix * vec4(vertex,1.0);\n}\n`;\n\n\n//\n// EDGES FAST VERTEX SHADER HYPERBOLIC\n//\n\nlet fastVertexHyperbolicShader = /*glsl*/`\nuniform mat4 projectionViewMatrix;\nuniform float globalOpacityScale;\nuniform float globalOpacityBase;\n\nattribute vec3 vertex;\nattribute vec4 color;\n\n\nvarying vec4 vColor;\nvarying vec4 vEncodedIndex;\n\n//varying float vZComponent;\n\nvoid main(void){\n\tvColor = color;\n\tvColor.w = clamp(globalOpacityBase+globalOpacityScale*vColor.w,0.0,1.0);\n\t//vZComponent = viewVertex.z;\n\n\tvec4 temp_pos = projectionViewMatrix * vec4(vertex,1.0);\n\tvec4 eye_vec = vec4(0.0,0.0,1.0,0);\n\tfloat dist = length(eye_vec);\n\tvec4 lookat = eye_vec - temp_pos;\n\tvec4 dir = temp_pos - eye_vec;\n\tvec4 center = normalize(-eye_vec);\n\tvec4 proj = dot(temp_pos, normalize(-lookat)) * normalize(-lookat);\n\tvec4 c = temp_pos - proj;\n\tfloat magnitude = 1.0-acos(dot(normalize(-eye_vec), normalize(temp_pos)));\n\n\tc = length(c) * magnitude * normalize(c);\n\tvec4 dir2 = normalize(c-lookat);\n\ttemp_pos.xy = (dir2).xy;\n\ttemp_pos.z = 0.0;\n\ttemp_pos.w = 1.0;\n\tgl_Position = temp_pos;\n}\n`;\n\n//\n// EDGES FAST FRAGMENT SHADER\n//\n\nlet fastFragmentShader = /*glsl*/`\n#ifdef GL_ES\n\tprecision highp float;\n#endif\n//uniform vec2 nearFar;\nvarying vec4 vColor;\n//varying float vZComponent;\n//gl_DepthRange.near)/gl_DepthRange.diff\nvoid main(){\n\t//float w = (-vZComponent-nearFar[0])/(nearFar[1]-nearFar[0]);\n\tgl_FragColor = vColor;\n\t// gl_FragColor = vec4(vEncodedIndex.x/10,0,0,1.0);\n}\n\n`;\n\n\n\n\n\nexport {fragmentShader,vertexShader,\n\tpickingShader,fastFragmentShader,\n\tfastVertexShader,fastVertexHyperbolicShader,\n\tvertexHyperbolicShader};\n","\n\n//\n// NODES VERTEX SHADER\n//\n\nlet vertexShader = /*glsl*/`\n// uniform mat4 projectionMatrix;\n// uniform mat4 viewMatrix;\n// uniform mat3 normalMatrix;\n\n\n// attribute vec4 vertex;\n// attribute vec3 normal;\n// attribute vec3 position;\n// attribute vec3 color;\n// attribute float size;\n// attribute float Opacity;\n\n// varying vec3 vNormal;\n// varying vec3 vEye;\n\n// varying vec3 vColor;\n// varying float vSize;\n// varying float vOpacity;\n\n// void main(void){\n// \tvec4 viewVertex = viewMatrix * (vertex*vec4(vec3(size),1.0) + vec4(position,0.0));\n// \tvNormal = normalMatrix * normal;\n// \tvEye = -vec3(viewVertex);\n// \tvOpacity = Opacity;\n// \tvColor = color;\n// \tgl_Position =   projectionMatrix * viewVertex;\n// }\n\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\n\nuniform float globalOpacityScale;\nuniform float globalSizeScale;\nuniform float globalOutlineWidthScale;\n\nuniform float globalOpacityBase;\nuniform float globalSizeBase;\nuniform float globalOutlineWidthBase;\n\nattribute vec2 vertex;\n// attribute vec3 normal;\nattribute vec3 position;\nattribute vec4 color;\nattribute float size;\nattribute float outlineWidth;\nattribute vec4 outlineColor;\nattribute vec4 encodedIndex;\n\nvarying vec3 vNormal;\nvarying vec3 vEye;\nvarying vec4 vColor;\nvarying vec2 vOffset;\nvarying float vSize;\nvarying vec4 vEncodedIndex;\nvarying float vOutlineThreshold;\nvarying vec4 vOutlineColor;\nvarying vec4 vPosition;\n\nvoid main(void){\n\tfloat BoxCorrection = 1.5;\n\tvec2 offset = vertex;\n\tfloat updatedSize = globalSizeScale*size+globalSizeBase;\n\tfloat updatedOutlineWidth = globalOutlineWidthScale*outlineWidth+globalOutlineWidthBase;\n\tfloat fullSize = updatedSize + updatedOutlineWidth;\n\t// vec4 viewCenters = viewMatrix*vec4(position,1);\n\t// vec3 viewCenters = position;\n\t// fragCenter = viewCenters\n\t// float scalingFactor = 1.0 / abs(centers.x)*0.001;\n\t// offset*=scalingFactor;\n\tvec3 cameraRight = normalize(vec3(viewMatrix[0][0], viewMatrix[1][0], viewMatrix[2][0]));\n\tvec3 cameraUp = normalize(vec3(viewMatrix[0][1], viewMatrix[1][1], viewMatrix[2][1]));\n\n\t// viewCenters.xy += offset*updatedSize*CameraRight_worldspace;\n\t\n\tvec4 viewCenters = viewMatrix*vec4(position+BoxCorrection*fullSize*(cameraRight*offset.x + cameraUp*offset.y),1.0);\n\tvNormal = vec3(0.0,0.0,1.0); //normalMatrix * normal;\n\tvEye = -vec3(offset,0.0);\n\tvEncodedIndex = encodedIndex;\n\tvColor = color;\n\tvColor.w = clamp(globalOpacityBase+globalOpacityScale*vColor.w,0.0,1.0);\n\tvOutlineColor.w = clamp(globalOpacityBase+globalOpacityScale*vOutlineColor.w,0.0,1.0);\n\tvOffset = vertex;\n\tvSize = updatedSize;\n\tvOutlineThreshold = updatedOutlineWidth/fullSize;\n\n\tvOutlineColor = outlineColor;\n\tvPosition = projectionMatrix * viewCenters;\n\n\t// vec4 temp_pos = vPosition;\n\t// vec4 eye_vec = vec4(0.0,0.0,0.0,0);\n\t// float dist = length(eye_vec);\n\t// vec4 lookat = eye_vec - temp_pos;\n\t// vec4 dir = temp_pos - eye_vec;\n\t// vec4 center = normalize(-eye_vec);\n\t// vec4 proj = dot(temp_pos, normalize(-lookat)) * normalize(-lookat);\n\t// vec4 c = temp_pos - proj;\n\t// float magnitude = 1.0-acos(dot(normalize(-eye_vec), normalize(temp_pos)));\n\n\t// c = length(c) * magnitude * normalize(c);\n\t// vec4 dir2 = normalize(c-lookat);\n\t// vPosition.xy = (dir2).xy;\n\t// vPosition.z = 0.0;\n\t// vPosition.w = 1.0;\n\tgl_Position = vPosition;\n}\n`;\n\n\n//\n// NODES VERTEX SHADER HYPERBOLIC\n//\n\nlet vertexHyperbolicShader = /*glsl*/`\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\n\nuniform float globalOpacityScale;\nuniform float globalSizeScale;\nuniform float globalOutlineWidthScale;\n\nuniform float globalOpacityBase;\nuniform float globalSizeBase;\nuniform float globalOutlineWidthBase;\n\nattribute vec2 vertex;\n// attribute vec3 normal;\nattribute vec3 position;\nattribute vec4 color;\nattribute float size;\nattribute float outlineWidth;\nattribute vec4 outlineColor;\nattribute vec4 encodedIndex;\n\nvarying vec3 vNormal;\nvarying vec3 vEye;\nvarying vec4 vColor;\nvarying vec2 vOffset;\nvarying float vSize;\nvarying vec4 vEncodedIndex;\nvarying float vOutlineThreshold;\nvarying vec4 vOutlineColor;\nvarying vec4 vPosition;\n\nvec2 hyperbolicNormFactor(vec2 vertex, float scaling){\n\tvec2 pos = vertex.xy;\n\tfloat r = length(pos.xy);\n\t// //polar\n\t// vec2 normFactor = (r+scaling)*vec2(1.0,1.0);\n\t// catersian\n\tvec2 normFactor = sqrt(vertex.xy*vertex.xy+scaling*scaling);\n\treturn normFactor;\n}\n\nvoid main(void){\n\tfloat BoxCorrection = 1.5;\n\tvec2 offset = vertex;\n\tfloat updatedSize = globalSizeScale*size+globalSizeBase;\n\tfloat updatedOutlineWidth = globalOutlineWidthScale*outlineWidth+globalOutlineWidthBase;\n\tfloat fullSize = updatedSize + updatedOutlineWidth;\n\t// vec4 viewCenters = viewMatrix*vec4(position,1);\n\t// vec3 viewCenters = position;\n\t// fragCenter = viewCenters\n\t// float scalingFactor = 1.0 / abs(centers.x)*0.001;\n\t// offset*=scalingFactor;\n\tvec3 cameraRight = normalize(vec3(viewMatrix[0][0], viewMatrix[1][0], viewMatrix[2][0]));\n\tvec3 cameraUp = normalize(vec3(viewMatrix[0][1], viewMatrix[1][1], viewMatrix[2][1]));\n\n\t// viewCenters.xy += offset*updatedSize*CameraRight_worldspace;\n\t\n\n\n\t// temp_pos.z = 0.0;\n\t// temp_pos.w = 1.0;\n\n\n\n\tvec4 viewCenters = viewMatrix*vec4(position.xyz,1.0);\n\tfloat scaling = -viewMatrix[3][2];\n\tvec4 temp_pos = viewCenters;\n\t\n\tvec2 normFactor = hyperbolicNormFactor(viewCenters.xy, scaling);\n\t// catersian\n\t// vec2 normFactor = sqrt(temp_pos.xy*temp_pos.xy+scaling*scaling);\n\ttemp_pos.xy = temp_pos.xy/normFactor;\n\n\tviewCenters.xy = temp_pos.xy/vec2(projectionMatrix[0][0],projectionMatrix[1][1]);\n\tviewCenters.xy+=BoxCorrection*fullSize*offset.xy/length(normFactor)*scaling;\n\t\n\n\tvNormal = vec3(0.0,0.0,1.0); //normalMatrix * normal;\n\tvEye = -vec3(offset,0.0);\n\tvEncodedIndex = encodedIndex;\n\tvColor = color;\n\tvColor.w = clamp(globalOpacityBase+globalOpacityScale*vColor.w,0.0,1.0);\n\tvOutlineColor.w = clamp(globalOpacityBase+globalOpacityScale*vOutlineColor.w,0.0,1.0);\n\tvOffset = vertex;\n\tvSize = updatedSize;\n\tvOutlineThreshold = updatedOutlineWidth/fullSize;\n\n\tvOutlineColor = outlineColor;\n\tvPosition = projectionMatrix * viewCenters;\n\n\tgl_Position = vPosition;\n}\n`;\n\n\n\n\n//\n// NODES FRAGMENT SHADER (SHADED)\n//\n\nlet fragmentShader = /*glsl*/`// #ifdef GL_ES\n// \tprecision highp float;\n// #endif\n\nprecision mediump float;\nvarying vec4 vColor;\nvarying vec4 vEncodedIndex;\nvarying vec3 vNormal;\nvarying vec3 vEye;\nvarying float vSize;\nvarying vec2 vOffset;\nvarying float vOutlineThreshold;\nvarying vec4 vOutlineColor;\nvarying vec4 vPosition;\n\n\n\nvoid main(){\n\t// const vec3 lightDirection = vec3(0.577350269,0.577350269,0.577350269);\n\t// const float ambientFactor = 0.6;\n\t\n\t// vec3 normal = normalize(vNormal);\n\t// vec3 eye = normalize(vEye);\n\t\n\t// //Ambient+Diffuse\n\t// float cosTheta = max(dot(lightDirection,normal),0.0);\n\t// vec3 newColor = vColor*(ambientFactor+cosTheta);\n\t\n\t// //Specular\n\t// vec3 reflection = reflect(-lightDirection, normal);\n\t// float eyeDotReflection = max(dot(eye, reflection), 0.0);\n\t// newColor +=  vec3(0.5)* pow(eyeDotReflection, 60.0);\n\t\n\t// gl_FragColor = vec4(newColor,vOpacity);\n\t// gl_FragColor = vec4(eye,Opacity);\n\t//gl_FragData[0] = vec4(newColor,Opacity);\n\n// Renaming variables passed from the Vertex Shader\n\n\t// vec3 cameraPos;\n\t// vec3 cameraNormal;\n\n\t// float lensqr = dot(vOffset, vOffset);\n\n\t// if(lensqr > 1.0)\n\t// \t\tdiscard;\n\t\t\n\t// cameraNormal = vec3(vOffset, sqrt(1.0 - lensqr));\n\t// cameraPos = (cameraNormal * size) + cameraSpherePos;\n\n\t// float len = length(point);\n\t// // VTK Fake Spheres\n\t// float radius = 1.;\n\t// if(len > radius)\n\t// \t\tdiscard;\n\t// vec3 normalizedPoint = normalize(vec3(point.xy, sqrt(1. - len)));\n\t// vec3 direction = normalize(vec3(1., 1., 1.));\n\t// float df2 = max(0, dot(direction, normalizedPoint));\n\t// float sf2 = pow(df2, 90);\n\t// fragOutput0 = vec4(max((df2+0.3) * color, sf2 * vec3(1)), 1);\n\n\t// fragOutput1 = vec4(vertexVC.xyz, 1.0);\n\t// fragOutput2 = vec4(normalVCVSOutput, 1.0);\n\t\n\tfloat lensqr = dot(vOffset, vOffset);\n\n\tif(lensqr > 1.0)\n\t\tdiscard;\n\t\n\n\tvec3 normalizedPoint = normalize(vec3(vOffset.xy, sqrt(1. - lensqr)));\n\tconst vec3 lightDirection = vec3(0.577350269,0.577350269,0.577350269);\n\tconst float ambientFactor = 0.6;\n\t\n\tvec3 normal = normalizedPoint;\n\tvec3 eye = normalize(vEye);\n\t\n\t//Ambient+Diffuse\n\tfloat cosTheta = max(dot(lightDirection,normal),0.0);\n\tvec3 newColor = vColor.xyz*(ambientFactor+cosTheta);\n\t\n\t//Specular\n\tvec3 reflection = reflect(-lightDirection, normal);\n\tfloat eyeDotReflection = max(dot(eye, reflection), 0.0);\n\tnewColor +=  vec3(0.5)* pow(eyeDotReflection, 60.0);\n\t\n\t\n\t\n\tif(lensqr < 1.0-vOutlineThreshold){\n\t\t// gl_FragColor = vec4(vColor,vOpacity)\n\t\tgl_FragColor = vec4(newColor,vColor.w);;\n\t}else{\n\t\tgl_FragColor = vec4(vOutlineColor.xyz,vOutlineColor.w);\n\t}\n\t// gl_FragDepthEXT = 0.5; \n}\n`;\n\n\n//\n// NODES PICKING SHADER\n//\n\nlet pickingShader = /*glsl*/`\n// #ifdef GL_ES\n// \tprecision highp float;\n// #endif\n\nprecision mediump float;\nvarying vec4 vColor;\nvarying vec4 vEncodedIndex;\nvarying vec3 vNormal;\nvarying vec3 vEye;\nvarying float vSize;\nvarying vec2 vOffset;\nvarying float vOutlineThreshold;\nvarying vec4 vOutlineColor;\n\nvoid main(){\n\tfloat lensqr = dot(vOffset, vOffset);\n\n\tif(lensqr > 1.0)\n\t\t\tdiscard;\n\t\n\tgl_FragColor = vEncodedIndex;\n}\n`;\n\n\n//\n// NODES FAST FRAGMENT SHADER\n//\n\n\nlet fastFragmentShader = /*glsl*/`\n// #ifdef GL_ES\n// \tprecision highp float;\n// #endif\n\nprecision mediump float;\nvarying vec4 vColor;\nvarying vec4 vEncodedIndex;\nvarying vec3 vNormal;\nvarying vec3 vEye;\nvarying float vSize;\nvarying vec2 vOffset;\nvarying float vOutlineThreshold;\nvarying vec4 vOutlineColor;\nvarying vec4 vPosition;\n\n\n\nvoid main(){\n\t\n\tfloat lensqr = dot(vOffset, vOffset);\n\n\tif(lensqr > 1.0)\n\t\t\tdiscard;\n\t\n\tif(lensqr < 1.0-vOutlineThreshold){\n\t\t// gl_FragColor = vec4(vColor,vOpacity)\n\t\tgl_FragColor = vColor;\n\t}else{\n\t\tgl_FragColor = vOutlineColor;\n\t}\n\t// gl_FragDepthEXT = 0.5; \n}\n`;\n\nlet fastVertexShader = vertexShader;\n\nexport {fragmentShader, vertexShader,\n\t\tpickingShader,fastFragmentShader,\n\t\tfastVertexShader, vertexHyperbolicShader};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar LinkedList = exports.LinkedList = function () {\n    function LinkedList() {\n        _classCallCheck(this, LinkedList);\n\n        this.length = 0;\n        this.first = null;\n        this.last = null;\n    }\n\n    _createClass(LinkedList, [{\n        key: \"forEach\",\n        value: function forEach(fn, context) {\n            var node = this.first,\n                n = this.length;\n            for (var i = 0; i < n; i++) {\n                fn.call(context, node, i);\n                node = node.next;\n            }\n        }\n    }, {\n        key: \"at\",\n        value: function at(i) {\n            if (!(i >= 0 && i < this.length)) {\n                return null;\n            }\n            var node = this.first;\n            while (i--) {\n                node = node.next;\n            }\n            return node;\n        }\n    }, {\n        key: \"randomNode\",\n        value: function randomNode() {\n            var n = Math.floor(Math.random() * this.length);\n            return this.at(n);\n        }\n    }, {\n        key: \"toArray\",\n        value: function toArray() {\n            var arr = [],\n                node = this.first,\n                n = this.length;\n            while (n--) {\n                arr.push(node.data || node);\n                node = node.next;\n            }\n            return arr;\n        }\n    }]);\n\n    return LinkedList;\n}();\n\nLinkedList.prototype.each = LinkedList.prototype.forEach;\n//# sourceMappingURL=LinkedList.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.CircularLinkedList = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _LinkedList2 = require(\"./LinkedList\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CircularLinkedList = exports.CircularLinkedList = function (_LinkedList) {\n    _inherits(CircularLinkedList, _LinkedList);\n\n    function CircularLinkedList() {\n        _classCallCheck(this, CircularLinkedList);\n\n        return _possibleConstructorReturn(this, Object.getPrototypeOf(CircularLinkedList).apply(this, arguments));\n    }\n\n    _createClass(CircularLinkedList, [{\n        key: \"append\",\n        value: function append(node) {\n            if (this.first === null) {\n                node.prev = node;\n                node.next = node;\n                this.first = node;\n                this.last = node;\n            } else {\n                node.prev = this.last;\n                node.next = this.first;\n                this.first.prev = node;\n                this.last.next = node;\n                this.last = node;\n            }\n            this.length++;\n        }\n    }, {\n        key: \"prepend\",\n        value: function prepend(node) {\n            if (this.first === null) {\n                this.append(node);\n                return;\n            } else {\n                node.prev = this.last;\n                node.next = this.first;\n                this.first.prev = node;\n                this.last.next = node;\n                this.first = node;\n            }\n            this.length++;\n        }\n    }, {\n        key: \"insertAfter\",\n        value: function insertAfter(node, newNode) {\n            newNode.prev = node;\n            newNode.next = node.next;\n            node.next.prev = newNode;\n            node.next = newNode;\n            if (newNode.prev === this.last) {\n                this.last = newNode;\n            }\n            this.length++;\n        }\n    }, {\n        key: \"insertBefore\",\n        value: function insertBefore(node, newNode) {\n            newNode.prev = node.prev;\n            newNode.next = node;\n            node.prev.next = newNode;\n            node.prev = newNode;\n            if (newNode.next === this.first) {\n                this.first = newNode;\n            }\n            this.length++;\n        }\n    }, {\n        key: \"remove\",\n        value: function remove(node) {\n            if (this.length > 1) {\n                node.prev.next = node.next;\n                node.next.prev = node.prev;\n                if (node === this.first) {\n                    this.first = node.next;\n                }\n                if (node === this.last) {\n                    this.last = node.prev;\n                }\n            } else {\n                this.first = null;\n                this.last = null;\n            }\n            node.prev = null;\n            node.next = null;\n            this.length--;\n        }\n    }, {\n        key: \"withData\",\n        value: function withData(data) {\n            var nodeFromStart = this.first,\n                nodeFromEnd = this.last,\n                n = Math.ceil(this.length / 2);\n            while (n--) {\n                if (nodeFromStart.data === data) {\n                    return nodeFromStart;\n                }\n                if (nodeFromEnd.data === data) {\n                    return nodeFromEnd;\n                }\n                nodeFromStart = nodeFromStart.next;\n                nodeFromEnd = nodeFromEnd.prev;\n            }\n            return null;\n        }\n    }]);\n\n    return CircularLinkedList;\n}(_LinkedList2.LinkedList);\n\n;\n\nCircularLinkedList.fromArray = function (list, useNodes) {\n    var linked = new CircularLinkedList();\n    var n = list.length;\n    while (n--) {\n        linked.prepend(useNodes ? new _LinkedList2.LinkedList.Node(list[n]) : list[n]);\n    }\n    return linked;\n};\n//# sourceMappingURL=CircularLinkedList.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar PRECISION = exports.PRECISION = 1e-6;\n//# sourceMappingURL=PRECISION.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Matrix = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _PRECISION = require(\"./PRECISION\");\n\nvar _Vector = require(\"./Vector\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Matrix = exports.Matrix = function () {\n    function Matrix(elements) {\n        _classCallCheck(this, Matrix);\n\n        this.setElements(elements);\n    }\n\n    _createClass(Matrix, [{\n        key: \"e\",\n        value: function e(i, j) {\n            if (i < 1 || i > this.elements.length || j < 1 || j > this.elements[0].length) {\n                return null;\n            }\n            return this.elements[i - 1][j - 1];\n        }\n    }, {\n        key: \"row\",\n        value: function row(i) {\n            if (i > this.elements.length) {\n                return null;\n            }\n            return new _Vector.Vector(this.elements[i - 1]);\n        }\n    }, {\n        key: \"col\",\n        value: function col(j) {\n            if (this.elements.length === 0) {\n                return null;\n            }\n            if (j > this.elements[0].length) {\n                return null;\n            }\n            var col = [],\n                n = this.elements.length;\n            for (var i = 0; i < n; i++) {\n                col.push(this.elements[i][j - 1]);\n            }\n            return new _Vector.Vector(col);\n        }\n    }, {\n        key: \"dimensions\",\n        value: function dimensions() {\n            var cols = this.elements.length === 0 ? 0 : this.elements[0].length;\n            return { rows: this.elements.length, cols: cols };\n        }\n    }, {\n        key: \"rows\",\n        value: function rows() {\n            return this.elements.length;\n        }\n    }, {\n        key: \"cols\",\n        value: function cols() {\n            if (this.elements.length === 0) {\n                return 0;\n            }\n            return this.elements[0].length;\n        }\n    }, {\n        key: \"eql\",\n        value: function eql(matrix) {\n            var M = matrix.elements || matrix;\n            if (!M[0] || typeof M[0][0] === 'undefined') {\n                M = new Matrix(M).elements;\n            }\n            if (this.elements.length === 0 || M.length === 0) {\n                return this.elements.length === M.length;\n            }\n            if (this.elements.length !== M.length) {\n                return false;\n            }\n            if (this.elements[0].length !== M[0].length) {\n                return false;\n            }\n            var i = this.elements.length,\n                nj = this.elements[0].length,\n                j;\n            while (i--) {\n                j = nj;\n                while (j--) {\n                    if (Math.abs(this.elements[i][j] - M[i][j]) > _PRECISION.PRECISION) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        }\n    }, {\n        key: \"dup\",\n        value: function dup() {\n            return new Matrix(this.elements);\n        }\n    }, {\n        key: \"map\",\n        value: function map(fn, context) {\n            if (this.elements.length === 0) {\n                return new Matrix([]);\n            }\n            var els = [],\n                i = this.elements.length,\n                nj = this.elements[0].length,\n                j;\n            while (i--) {\n                j = nj;\n                els[i] = [];\n                while (j--) {\n                    els[i][j] = fn.call(context, this.elements[i][j], i + 1, j + 1);\n                }\n            }\n            return new Matrix(els);\n        }\n    }, {\n        key: \"isSameSizeAs\",\n        value: function isSameSizeAs(matrix) {\n            var M = matrix.elements || matrix;\n            if (typeof M[0][0] === 'undefined') {\n                M = new Matrix(M).elements;\n            }\n            if (this.elements.length === 0) {\n                return M.length === 0;\n            }\n            return this.elements.length === M.length && this.elements[0].length === M[0].length;\n        }\n    }, {\n        key: \"add\",\n        value: function add(matrix) {\n            if (this.elements.length === 0) {\n                return this.map(function (x) {\n                    return x;\n                });\n            }\n            var M = matrix.elements || matrix;\n            if (typeof M[0][0] === 'undefined') {\n                M = new Matrix(M).elements;\n            }\n            if (!this.isSameSizeAs(M)) {\n                return null;\n            }\n            return this.map(function (x, i, j) {\n                return x + M[i - 1][j - 1];\n            });\n        }\n    }, {\n        key: \"subtract\",\n        value: function subtract(matrix) {\n            if (this.elements.length === 0) {\n                return this.map(function (x) {\n                    return x;\n                });\n            }\n            var M = matrix.elements || matrix;\n            if (typeof M[0][0] === 'undefined') {\n                M = new Matrix(M).elements;\n            }\n            if (!this.isSameSizeAs(M)) {\n                return null;\n            }\n            return this.map(function (x, i, j) {\n                return x - M[i - 1][j - 1];\n            });\n        }\n    }, {\n        key: \"canMultiplyFromLeft\",\n        value: function canMultiplyFromLeft(matrix) {\n            if (this.elements.length === 0) {\n                return false;\n            }\n            var M = matrix.elements || matrix;\n            if (typeof M[0][0] === 'undefined') {\n                M = new Matrix(M).elements;\n            }\n            // this.columns should equal matrix.rows\n            return this.elements[0].length === M.length;\n        }\n    }, {\n        key: \"multiply\",\n        value: function multiply(matrix) {\n            if (this.elements.length === 0) {\n                return null;\n            }\n            if (!matrix.elements) {\n                return this.map(function (x) {\n                    return x * matrix;\n                });\n            }\n            var returnVector = matrix.modulus ? true : false;\n            var M = matrix.elements || matrix;\n            if (typeof M[0][0] === 'undefined') {\n                M = new Matrix(M).elements;\n            }\n            if (!this.canMultiplyFromLeft(M)) {\n                return null;\n            }\n            var i = this.elements.length,\n                nj = M[0].length,\n                j;\n            var cols = this.elements[0].length,\n                c,\n                elements = [],\n                sum;\n            while (i--) {\n                j = nj;\n                elements[i] = [];\n                while (j--) {\n                    c = cols;\n                    sum = 0;\n                    while (c--) {\n                        sum += this.elements[i][c] * M[c][j];\n                    }\n                    elements[i][j] = sum;\n                }\n            }\n            var M = new Matrix(elements);\n            return returnVector ? M.col(1) : M;\n        }\n    }, {\n        key: \"minor\",\n        value: function minor(a, b, c, d) {\n            if (this.elements.length === 0) {\n                return null;\n            }\n            var elements = [],\n                ni = c,\n                i,\n                nj,\n                j;\n            var rows = this.elements.length,\n                cols = this.elements[0].length;\n            while (ni--) {\n                i = c - ni - 1;\n                elements[i] = [];\n                nj = d;\n                while (nj--) {\n                    j = d - nj - 1;\n                    elements[i][j] = this.elements[(a + i - 1) % rows][(b + j - 1) % cols];\n                }\n            }\n            return new Matrix(elements);\n        }\n    }, {\n        key: \"transpose\",\n        value: function transpose() {\n            if (this.elements.length === 0) {\n                return new Matrix([]);\n            }\n            var rows = this.elements.length,\n                i,\n                cols = this.elements[0].length,\n                j;\n            var elements = [],\n                i = cols;\n            while (i--) {\n                j = rows;\n                elements[i] = [];\n                while (j--) {\n                    elements[i][j] = this.elements[j][i];\n                }\n            }\n            return new Matrix(elements);\n        }\n    }, {\n        key: \"isSquare\",\n        value: function isSquare() {\n            var cols = this.elements.length === 0 ? 0 : this.elements[0].length;\n            return this.elements.length === cols;\n        }\n    }, {\n        key: \"max\",\n        value: function max() {\n            if (this.elements.length === 0) {\n                return null;\n            }\n            var m = 0,\n                i = this.elements.length,\n                nj = this.elements[0].length,\n                j;\n            while (i--) {\n                j = nj;\n                while (j--) {\n                    if (Math.abs(this.elements[i][j]) > Math.abs(m)) {\n                        m = this.elements[i][j];\n                    }\n                }\n            }\n            return m;\n        }\n    }, {\n        key: \"indexOf\",\n        value: function indexOf(x) {\n            if (this.elements.length === 0) {\n                return null;\n            }\n            var index = null,\n                ni = this.elements.length,\n                i,\n                nj = this.elements[0].length,\n                j;\n            for (i = 0; i < ni; i++) {\n                for (j = 0; j < nj; j++) {\n                    if (this.elements[i][j] === x) {\n                        return {\n                            i: i + 1,\n                            j: j + 1\n                        };\n                    }\n                }\n            }\n            return null;\n        }\n    }, {\n        key: \"diagonal\",\n        value: function diagonal() {\n            if (!this.isSquare) {\n                return null;\n            }\n            var els = [],\n                n = this.elements.length;\n            for (var i = 0; i < n; i++) {\n                els.push(this.elements[i][i]);\n            }\n            return new _Vector.Vector(els);\n        }\n    }, {\n        key: \"toRightTriangular\",\n        value: function toRightTriangular() {\n            if (this.elements.length === 0) {\n                return new Matrix([]);\n            }\n            var M = this.dup(),\n                els;\n            var n = this.elements.length,\n                i,\n                j,\n                np = this.elements[0].length,\n                p;\n            for (i = 0; i < n; i++) {\n                if (M.elements[i][i] === 0) {\n                    for (j = i + 1; j < n; j++) {\n                        if (M.elements[j][i] !== 0) {\n                            els = [];\n                            for (p = 0; p < np; p++) {\n                                els.push(M.elements[i][p] + M.elements[j][p]);\n                            }\n                            M.elements[i] = els;\n                            break;\n                        }\n                    }\n                }\n                if (M.elements[i][i] !== 0) {\n                    for (j = i + 1; j < n; j++) {\n                        var multiplier = M.elements[j][i] / M.elements[i][i];\n                        els = [];\n                        for (p = 0; p < np; p++) {\n                            // Elements with column numbers up to an including the number of the\n                            // row that we're subtracting can safely be set straight to zero,\n                            // since that's the point of this routine and it avoids having to\n                            // loop over and correct rounding errors later\n                            els.push(p <= i ? 0 : M.elements[j][p] - M.elements[i][p] * multiplier);\n                        }\n                        M.elements[j] = els;\n                    }\n                }\n            }\n            return M;\n        }\n    }, {\n        key: \"determinant\",\n        value: function determinant() {\n            if (this.elements.length === 0) {\n                return 1;\n            }\n            if (!this.isSquare()) {\n                return null;\n            }\n            var M = this.toRightTriangular();\n            var det = M.elements[0][0],\n                n = M.elements.length;\n            for (var i = 1; i < n; i++) {\n                det = det * M.elements[i][i];\n            }\n            return det;\n        }\n    }, {\n        key: \"isSingular\",\n        value: function isSingular() {\n            return this.isSquare() && this.determinant() === 0;\n        }\n    }, {\n        key: \"trace\",\n        value: function trace() {\n            if (this.elements.length === 0) {\n                return 0;\n            }\n            if (!this.isSquare()) {\n                return null;\n            }\n            var tr = this.elements[0][0],\n                n = this.elements.length;\n            for (var i = 1; i < n; i++) {\n                tr += this.elements[i][i];\n            }\n            return tr;\n        }\n    }, {\n        key: \"rank\",\n        value: function rank() {\n            if (this.elements.length === 0) {\n                return 0;\n            }\n            var M = this.toRightTriangular(),\n                rank = 0;\n            var i = this.elements.length,\n                nj = this.elements[0].length,\n                j;\n            while (i--) {\n                j = nj;\n                while (j--) {\n                    if (Math.abs(M.elements[i][j]) > _PRECISION.PRECISION) {\n                        rank++;\n                        break;\n                    }\n                }\n            }\n            return rank;\n        }\n    }, {\n        key: \"augment\",\n        value: function augment(matrix) {\n            if (this.elements.length === 0) {\n                return this.dup();\n            }\n            var M = matrix.elements || matrix;\n            if (typeof M[0][0] === 'undefined') {\n                M = new Matrix(M).elements;\n            }\n            var T = this.dup(),\n                cols = T.elements[0].length;\n            var i = T.elements.length,\n                nj = M[0].length,\n                j;\n            if (i !== M.length) {\n                return null;\n            }\n            while (i--) {\n                j = nj;\n                while (j--) {\n                    T.elements[i][cols + j] = M[i][j];\n                }\n            }\n            return T;\n        }\n    }, {\n        key: \"inverse\",\n        value: function inverse() {\n            if (this.elements.length === 0) {\n                return null;\n            }\n            if (!this.isSquare() || this.isSingular()) {\n                return null;\n            }\n            var n = this.elements.length,\n                i = n,\n                j;\n            var M = this.augment(Matrix.I(n)).toRightTriangular();\n            var np = M.elements[0].length,\n                p,\n                els,\n                divisor;\n            var inverse_elements = [],\n                new_element;\n            // Matrix is non-singular so there will be no zeros on the\n            // diagonal. Cycle through rows from last to first.\n            while (i--) {\n                // First, normalise diagonal elements to 1\n                els = [];\n                inverse_elements[i] = [];\n                divisor = M.elements[i][i];\n                for (p = 0; p < np; p++) {\n                    new_element = M.elements[i][p] / divisor;\n                    els.push(new_element);\n                    // Shuffle off the current row of the right hand side into the results\n                    // array as it will not be modified by later runs through this loop\n                    if (p >= n) {\n                        inverse_elements[i].push(new_element);\n                    }\n                }\n                M.elements[i] = els;\n                // Then, subtract this row from those above it to give the identity matrix\n                // on the left hand side\n                j = i;\n                while (j--) {\n                    els = [];\n                    for (p = 0; p < np; p++) {\n                        els.push(M.elements[j][p] - M.elements[i][p] * M.elements[j][i]);\n                    }\n                    M.elements[j] = els;\n                }\n            }\n            return new Matrix(inverse_elements);\n        }\n    }, {\n        key: \"round\",\n        value: function round() {\n            return this.map(function (x) {\n                return Math.round(x);\n            });\n        }\n    }, {\n        key: \"snapTo\",\n        value: function snapTo(x) {\n            return this.map(function (p) {\n                return Math.abs(p - x) <= _PRECISION.PRECISION ? x : p;\n            });\n        }\n    }, {\n        key: \"inspect\",\n        value: function inspect() {\n            var matrix_rows = [];\n            var n = this.elements.length;\n            if (n === 0) return '[]';\n            for (var i = 0; i < n; i++) {\n                matrix_rows.push(new _Vector.Vector(this.elements[i]).inspect());\n            }\n            return matrix_rows.join('\\n');\n        }\n    }, {\n        key: \"setElements\",\n        value: function setElements(els) {\n            var i,\n                j,\n                elements = els.elements || els;\n            if (elements[0] && typeof elements[0][0] !== 'undefined') {\n                i = elements.length;\n                this.elements = [];\n                while (i--) {\n                    j = elements[i].length;\n                    this.elements[i] = [];\n                    while (j--) {\n                        this.elements[i][j] = elements[i][j];\n                    }\n                }\n                return this;\n            }\n            var n = elements.length;\n            this.elements = [];\n            for (i = 0; i < n; i++) {\n                this.elements.push([elements[i]]);\n            }\n            return this;\n        }\n\n        //From glUtils.js\n\n    }, {\n        key: \"flatten\",\n        value: function flatten() {\n            var result = [];\n            if (this.elements.length == 0) {\n                return [];\n            }\n\n            for (var j = 0; j < this.elements[0].length; j++) {\n                for (var i = 0; i < this.elements.length; i++) {\n                    result.push(this.elements[i][j]);\n                }\n            }\n            return result;\n        }\n\n        //From glUtils.js\n\n    }, {\n        key: \"ensure4x4\",\n        value: function ensure4x4() {\n            if (this.elements.length == 4 && this.elements[0].length == 4) {\n                return this;\n            }\n\n            if (this.elements.length > 4 || this.elements[0].length > 4) {\n                return null;\n            }\n\n            for (var i = 0; i < this.elements.length; i++) {\n                for (var j = this.elements[i].length; j < 4; j++) {\n                    if (i == j) {\n                        this.elements[i].push(1);\n                    } else {\n                        this.elements[i].push(0);\n                    }\n                }\n            }\n\n            for (var i = this.elements.length; i < 4; i++) {\n                if (i == 0) {\n                    this.elements.push([1, 0, 0, 0]);\n                } else if (i == 1) {\n                    this.elements.push([0, 1, 0, 0]);\n                } else if (i == 2) {\n                    this.elements.push([0, 0, 1, 0]);\n                } else if (i == 3) {\n                    this.elements.push([0, 0, 0, 1]);\n                }\n            }\n\n            return this;\n        }\n\n        //From glUtils.js\n\n    }, {\n        key: \"make3x3\",\n        value: function make3x3() {\n            if (this.elements.length != 4 || this.elements[0].length != 4) {\n                return null;\n            }\n\n            return new Matrix([[this.elements[0][0], this.elements[0][1], this.elements[0][2]], [this.elements[1][0], this.elements[1][1], this.elements[1][2]], [this.elements[2][0], this.elements[2][1], this.elements[2][2]]]);\n        }\n    }]);\n\n    return Matrix;\n}();\n\nMatrix.I = function (n) {\n    var els = [],\n        i = n,\n        j;\n    while (i--) {\n        j = n;\n        els[i] = [];\n        while (j--) {\n            els[i][j] = i === j ? 1 : 0;\n        }\n    }\n    return new Matrix(els);\n};\n\nMatrix.Diagonal = function (elements) {\n    var i = elements.length;\n    var M = Matrix.I(i);\n    while (i--) {\n        M.elements[i][i] = elements[i];\n    }\n    return M;\n};\n\nMatrix.Rotation = function (theta, a) {\n    if (!a) {\n        return new Matrix([[Math.cos(theta), -Math.sin(theta)], [Math.sin(theta), Math.cos(theta)]]);\n    }\n    var axis = a.dup();\n    if (axis.elements.length !== 3) {\n        return null;\n    }\n    var mod = axis.modulus();\n    var x = axis.elements[0] / mod,\n        y = axis.elements[1] / mod,\n        z = axis.elements[2] / mod;\n    var s = Math.sin(theta),\n        c = Math.cos(theta),\n        t = 1 - c;\n    // Formula derived here: http://www.gamedev.net/reference/articles/article1199.asp\n    // That proof rotates the co-ordinate system so theta becomes -theta and sin\n    // becomes -sin here.\n    return new Matrix([[t * x * x + c, t * x * y - s * z, t * x * z + s * y], [t * x * y + s * z, t * y * y + c, t * y * z - s * x], [t * x * z - s * y, t * y * z + s * x, t * z * z + c]]);\n};\n\nMatrix.RotationX = function (t) {\n    var c = Math.cos(t),\n        s = Math.sin(t);\n    return new Matrix([[1, 0, 0], [0, c, -s], [0, s, c]]);\n};\nMatrix.RotationY = function (t) {\n    var c = Math.cos(t),\n        s = Math.sin(t);\n    return new Matrix([[c, 0, s], [0, 1, 0], [-s, 0, c]]);\n};\nMatrix.RotationZ = function (t) {\n    var c = Math.cos(t),\n        s = Math.sin(t);\n    return new Matrix([[c, -s, 0], [s, c, 0], [0, 0, 1]]);\n};\n\nMatrix.Random = function (n, m) {\n    return Matrix.Zero(n, m).map(function () {\n        return Math.random();\n    });\n};\n\n//From glUtils.js\nMatrix.Translation = function (v) {\n    if (v.elements.length == 2) {\n        var r = Matrix.I(3);\n        r.elements[2][0] = v.elements[0];\n        r.elements[2][1] = v.elements[1];\n        return r;\n    }\n\n    if (v.elements.length == 3) {\n        var r = Matrix.I(4);\n        r.elements[0][3] = v.elements[0];\n        r.elements[1][3] = v.elements[1];\n        r.elements[2][3] = v.elements[2];\n        return r;\n    }\n\n    throw \"Invalid length for Translation\";\n};\n\nMatrix.Zero = function (n, m) {\n    var els = [],\n        i = n,\n        j;\n    while (i--) {\n        j = m;\n        els[i] = [];\n        while (j--) {\n            els[i][j] = 0;\n        }\n    }\n    return new Matrix(els);\n};\n\nMatrix.prototype.toUpperTriangular = Matrix.prototype.toRightTriangular;\nMatrix.prototype.det = Matrix.prototype.determinant;\nMatrix.prototype.tr = Matrix.prototype.trace;\nMatrix.prototype.rk = Matrix.prototype.rank;\nMatrix.prototype.inv = Matrix.prototype.inverse;\nMatrix.prototype.x = Matrix.prototype.multiply;\n//# sourceMappingURL=Matrix.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Vector = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Matrix = require(\"./Matrix\");\n\nvar _PRECISION = require(\"./PRECISION\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Vector = exports.Vector = function () {\n    function Vector(elements) {\n        _classCallCheck(this, Vector);\n\n        this.setElements(elements);\n    }\n\n    _createClass(Vector, [{\n        key: \"e\",\n        value: function e(i) {\n            return i < 1 || i > this.elements.length ? null : this.elements[i - 1];\n        }\n    }, {\n        key: \"dimensions\",\n        value: function dimensions() {\n            return this.elements.length;\n        }\n    }, {\n        key: \"modulus\",\n        value: function modulus() {\n            return Math.sqrt(this.dot(this));\n        }\n    }, {\n        key: \"eql\",\n        value: function eql(vector) {\n            var n = this.elements.length;\n            var V = vector.elements || vector;\n            if (n !== V.length) {\n                return false;\n            }\n            while (n--) {\n                if (Math.abs(this.elements[n] - V[n]) > _PRECISION.PRECISION) {\n                    return false;\n                }\n            }\n            return true;\n        }\n    }, {\n        key: \"dup\",\n        value: function dup() {\n            return new Vector(this.elements);\n        }\n    }, {\n        key: \"map\",\n        value: function map(fn, context) {\n            var elements = [];\n            this.each(function (x, i) {\n                elements.push(fn.call(context, x, i));\n            });\n            return new Vector(elements);\n        }\n    }, {\n        key: \"forEach\",\n        value: function forEach(fn, context) {\n            var n = this.elements.length;\n            for (var i = 0; i < n; i++) {\n                fn.call(context, this.elements[i], i + 1);\n            }\n        }\n    }, {\n        key: \"toUnitVector\",\n        value: function toUnitVector() {\n            var r = this.modulus();\n            if (r === 0) {\n                return this.dup();\n            }\n            return this.map(function (x) {\n                return x / r;\n            });\n        }\n    }, {\n        key: \"angleFrom\",\n        value: function angleFrom(vector) {\n            var V = vector.elements || vector;\n            var n = this.elements.length,\n                k = n,\n                i;\n            if (n !== V.length) {\n                return null;\n            }\n            var dot = 0,\n                mod1 = 0,\n                mod2 = 0;\n            // Work things out in parallel to save time\n            this.each(function (x, i) {\n                dot += x * V[i - 1];\n                mod1 += x * x;\n                mod2 += V[i - 1] * V[i - 1];\n            });\n            mod1 = Math.sqrt(mod1);mod2 = Math.sqrt(mod2);\n            if (mod1 * mod2 === 0) {\n                return null;\n            }\n            var theta = dot / (mod1 * mod2);\n            if (theta < -1) {\n                theta = -1;\n            }\n            if (theta > 1) {\n                theta = 1;\n            }\n            return Math.acos(theta);\n        }\n    }, {\n        key: \"isParallelTo\",\n        value: function isParallelTo(vector) {\n            var angle = this.angleFrom(vector);\n            return angle === null ? null : angle <= _PRECISION.PRECISION;\n        }\n    }, {\n        key: \"isAntiparallelTo\",\n        value: function isAntiparallelTo(vector) {\n            var angle = this.angleFrom(vector);\n            return angle === null ? null : Math.abs(angle - Math.PI) <= _PRECISION.PRECISION;\n        }\n    }, {\n        key: \"isPerpendicularTo\",\n        value: function isPerpendicularTo(vector) {\n            var dot = this.dot(vector);\n            return dot === null ? null : Math.abs(dot) <= _PRECISION.PRECISION;\n        }\n    }, {\n        key: \"add\",\n        value: function add(vector) {\n            var V = vector.elements || vector;\n            if (this.elements.length !== V.length) {\n                return null;\n            }\n            return this.map(function (x, i) {\n                return x + V[i - 1];\n            });\n        }\n    }, {\n        key: \"subtract\",\n        value: function subtract(vector) {\n            var V = vector.elements || vector;\n            if (this.elements.length !== V.length) {\n                return null;\n            }\n            return this.map(function (x, i) {\n                return x - V[i - 1];\n            });\n        }\n    }, {\n        key: \"multiply\",\n        value: function multiply(k) {\n            return this.map(function (x) {\n                return x * k;\n            });\n        }\n    }, {\n        key: \"dot\",\n        value: function dot(vector) {\n            var V = vector.elements || vector;\n            var i,\n                product = 0,\n                n = this.elements.length;\n            if (n !== V.length) {\n                return null;\n            }\n            while (n--) {\n                product += this.elements[n] * V[n];\n            }\n            return product;\n        }\n    }, {\n        key: \"cross\",\n        value: function cross(vector) {\n            var B = vector.elements || vector;\n            if (this.elements.length !== 3 || B.length !== 3) {\n                return null;\n            }\n            var A = this.elements;\n            return new Vector([A[1] * B[2] - A[2] * B[1], A[2] * B[0] - A[0] * B[2], A[0] * B[1] - A[1] * B[0]]);\n        }\n    }, {\n        key: \"max\",\n        value: function max() {\n            var m = 0,\n                i = this.elements.length;\n            while (i--) {\n                if (Math.abs(this.elements[i]) > Math.abs(m)) {\n                    m = this.elements[i];\n                }\n            }\n            return m;\n        }\n    }, {\n        key: \"indexOf\",\n        value: function indexOf(x) {\n            var index = null,\n                n = this.elements.length;\n            for (var i = 0; i < n; i++) {\n                if (index === null && this.elements[i] === x) {\n                    index = i + 1;\n                }\n            }\n            return index;\n        }\n    }, {\n        key: \"toDiagonalMatrix\",\n        value: function toDiagonalMatrix() {\n            return _Matrix.Matrix.Diagonal(this.elements);\n        }\n    }, {\n        key: \"round\",\n        value: function round() {\n            return this.map(function (x) {\n                return Math.round(x);\n            });\n        }\n    }, {\n        key: \"snapTo\",\n        value: function snapTo(x) {\n            return this.map(function (y) {\n                return Math.abs(y - x) <= _PRECISION.PRECISION ? x : y;\n            });\n        }\n    }, {\n        key: \"distanceFrom\",\n        value: function distanceFrom(obj) {\n            if (obj.anchor || obj.start && obj.end) {\n                return obj.distanceFrom(this);\n            }\n            var V = obj.elements || obj;\n            if (V.length !== this.elements.length) {\n                return null;\n            }\n            var sum = 0,\n                part;\n            this.each(function (x, i) {\n                part = x - V[i - 1];\n                sum += part * part;\n            });\n            return Math.sqrt(sum);\n        }\n    }, {\n        key: \"liesOn\",\n        value: function liesOn(line) {\n            return line.contains(this);\n        }\n    }, {\n        key: \"liesIn\",\n        value: function liesIn(plane) {\n            return plane.contains(this);\n        }\n    }, {\n        key: \"rotate\",\n        value: function rotate(t, obj) {\n            var V,\n                R = null,\n                x,\n                y,\n                z;\n            if (t.determinant) {\n                R = t.elements;\n            }\n            switch (this.elements.length) {\n                case 2:\n                    {\n                        V = obj.elements || obj;\n                        if (V.length !== 2) {\n                            return null;\n                        }\n                        if (!R) {\n                            R = _Matrix.Matrix.Rotation(t).elements;\n                        }\n                        x = this.elements[0] - V[0];\n                        y = this.elements[1] - V[1];\n                        return new Vector([V[0] + R[0][0] * x + R[0][1] * y, V[1] + R[1][0] * x + R[1][1] * y]);\n                        break;\n                    }\n                case 3:\n                    {\n                        if (!obj.direction) {\n                            return null;\n                        }\n                        var C = obj.pointClosestTo(this).elements;\n                        if (!R) {\n                            R = _Matrix.Matrix.Rotation(t, obj.direction).elements;\n                        }\n                        x = this.elements[0] - C[0];\n                        y = this.elements[1] - C[1];\n                        z = this.elements[2] - C[2];\n                        return new Vector([C[0] + R[0][0] * x + R[0][1] * y + R[0][2] * z, C[1] + R[1][0] * x + R[1][1] * y + R[1][2] * z, C[2] + R[2][0] * x + R[2][1] * y + R[2][2] * z]);\n                        break;\n                    }\n                default:\n                    {\n                        return null;\n                    }\n            }\n        }\n    }, {\n        key: \"reflectionIn\",\n        value: function reflectionIn(obj) {\n            if (obj.anchor) {\n                // obj is a plane or line\n                var P = this.elements.slice();\n                var C = obj.pointClosestTo(P).elements;\n                return new Vector([C[0] + (C[0] - P[0]), C[1] + (C[1] - P[1]), C[2] + (C[2] - (P[2] || 0))]);\n            } else {\n                // obj is a point\n                var Q = obj.elements || obj;\n                if (this.elements.length !== Q.length) {\n                    return null;\n                }\n                return this.map(function (x, i) {\n                    return Q[i - 1] + (Q[i - 1] - x);\n                });\n            }\n        }\n    }, {\n        key: \"to3D\",\n        value: function to3D() {\n            var V = this.dup();\n            switch (V.elements.length) {\n                case 3:\n                    {\n                        break;\n                    }\n                case 2:\n                    {\n                        V.elements.push(0);\n                        break;\n                    }\n                default:\n                    {\n                        return null;\n                    }\n            }\n            return V;\n        }\n    }, {\n        key: \"inspect\",\n        value: function inspect() {\n            return '[' + this.elements.join(', ') + ']';\n        }\n    }, {\n        key: \"setElements\",\n        value: function setElements(els) {\n            this.elements = (els.elements || els).slice();\n            return this;\n        }\n\n        //From glUtils.js\n\n    }, {\n        key: \"flatten\",\n        value: function flatten() {\n            return this.elements;\n        }\n    }]);\n\n    return Vector;\n}();\n\nVector.Random = function (n) {\n    var elements = [];\n    while (n--) {\n        elements.push(Math.random());\n    }\n    return new Vector(elements);\n};\n\nVector.Zero = function (n) {\n    var elements = [];\n    while (n--) {\n        elements.push(0);\n    }\n    return new Vector(elements);\n};\n\nVector.prototype.x = Vector.prototype.multiply;\nVector.prototype.each = Vector.prototype.forEach;\n\nVector.i = new Vector([1, 0, 0]);\nVector.j = new Vector([0, 1, 0]);\nVector.k = new Vector([0, 0, 1]);\n//# sourceMappingURL=Vector.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Plane = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _PRECISION = require(\"./PRECISION\");\n\nvar _Matrix = require(\"./Matrix\");\n\nvar _Vector = require(\"./Vector\");\n\nvar _Line = require(\"./Line\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Plane = exports.Plane = function () {\n    function Plane(anchor, v1, v2) {\n        _classCallCheck(this, Plane);\n\n        this.setVectors(anchor, v1, v2);\n    }\n\n    _createClass(Plane, [{\n        key: \"eql\",\n        value: function eql(plane) {\n            return this.contains(plane.anchor) && this.isParallelTo(plane);\n        }\n    }, {\n        key: \"dup\",\n        value: function dup() {\n            return new Plane(this.anchor, this.normal);\n        }\n    }, {\n        key: \"translate\",\n        value: function translate(vector) {\n            var V = vector.elements || vector;\n            return new Plane([this.anchor.elements[0] + V[0], this.anchor.elements[1] + V[1], this.anchor.elements[2] + (V[2] || 0)], this.normal);\n        }\n    }, {\n        key: \"isParallelTo\",\n        value: function isParallelTo(obj) {\n            var theta;\n            if (obj.normal) {\n                // obj is a plane\n                theta = this.normal.angleFrom(obj.normal);\n                return Math.abs(theta) <= _PRECISION.PRECISION || Math.abs(Math.PI - theta) <= _PRECISION.PRECISION;\n            } else if (obj.direction) {\n                // obj is a line\n                return this.normal.isPerpendicularTo(obj.direction);\n            }\n            return null;\n        }\n    }, {\n        key: \"isPerpendicularTo\",\n        value: function isPerpendicularTo(plane) {\n            var theta = this.normal.angleFrom(plane.normal);\n            return Math.abs(Math.PI / 2 - theta) <= _PRECISION.PRECISION;\n        }\n    }, {\n        key: \"distanceFrom\",\n        value: function distanceFrom(obj) {\n            if (this.intersects(obj) || this.contains(obj)) {\n                return 0;\n            }\n            if (obj.anchor) {\n                // obj is a plane or line\n                var A = this.anchor.elements,\n                    B = obj.anchor.elements,\n                    N = this.normal.elements;\n                return Math.abs((A[0] - B[0]) * N[0] + (A[1] - B[1]) * N[1] + (A[2] - B[2]) * N[2]);\n            } else {\n                // obj is a point\n                var P = obj.elements || obj;\n                var A = this.anchor.elements,\n                    N = this.normal.elements;\n                return Math.abs((A[0] - P[0]) * N[0] + (A[1] - P[1]) * N[1] + (A[2] - (P[2] || 0)) * N[2]);\n            }\n        }\n    }, {\n        key: \"contains\",\n        value: function contains(obj) {\n            if (obj.normal) {\n                return null;\n            }\n            if (obj.direction) {\n                return this.contains(obj.anchor) && this.contains(obj.anchor.add(obj.direction));\n            } else {\n                var P = obj.elements || obj;\n                var A = this.anchor.elements,\n                    N = this.normal.elements;\n                var diff = Math.abs(N[0] * (A[0] - P[0]) + N[1] * (A[1] - P[1]) + N[2] * (A[2] - (P[2] || 0)));\n                return diff <= _PRECISION.PRECISION;\n            }\n        }\n    }, {\n        key: \"intersects\",\n        value: function intersects(obj) {\n            if (typeof obj.direction === 'undefined' && typeof obj.normal === 'undefined') {\n                return null;\n            }\n            return !this.isParallelTo(obj);\n        }\n    }, {\n        key: \"intersectionWith\",\n        value: function intersectionWith(obj) {\n            if (!this.intersects(obj)) {\n                return null;\n            }\n            if (obj.direction) {\n                // obj is a line\n                var A = obj.anchor.elements,\n                    D = obj.direction.elements,\n                    P = this.anchor.elements,\n                    N = this.normal.elements;\n                var multiplier = (N[0] * (P[0] - A[0]) + N[1] * (P[1] - A[1]) + N[2] * (P[2] - A[2])) / (N[0] * D[0] + N[1] * D[1] + N[2] * D[2]);\n                return new _Vector.Vector([A[0] + D[0] * multiplier, A[1] + D[1] * multiplier, A[2] + D[2] * multiplier]);\n            } else if (obj.normal) {\n                // obj is a plane\n                var direction = this.normal.cross(obj.normal).toUnitVector();\n                // To find an anchor point, we find one co-ordinate that has a value of\n                // zero somewhere on the intersection, and remember which one we picked\n                var N = this.normal.elements,\n                    A = this.anchor.elements,\n                    O = obj.normal.elements,\n                    B = obj.anchor.elements;\n                var solver = _Matrix.Matrix.Zero(2, 2),\n                    i = 0;\n                while (solver.isSingular()) {\n                    i++;\n                    solver = new _Matrix.Matrix([[N[i % 3], N[(i + 1) % 3]], [O[i % 3], O[(i + 1) % 3]]]);\n                }\n                // Then we solve the simultaneous equations in the remaining dimensions\n                var inverse = solver.inverse().elements;\n                var x = N[0] * A[0] + N[1] * A[1] + N[2] * A[2];\n                var y = O[0] * B[0] + O[1] * B[1] + O[2] * B[2];\n                var intersection = [inverse[0][0] * x + inverse[0][1] * y, inverse[1][0] * x + inverse[1][1] * y];\n                var anchor = [];\n                for (var j = 1; j <= 3; j++) {\n                    // This formula picks the right element from intersection by cycling\n                    // depending on which element we set to zero above\n                    anchor.push(i === j ? 0 : intersection[(j + (5 - i) % 3) % 3]);\n                }\n                return new _Line.Line(anchor, direction);\n            }\n        }\n    }, {\n        key: \"pointClosestTo\",\n        value: function pointClosestTo(point) {\n            var P = point.elements || point;\n            var A = this.anchor.elements,\n                N = this.normal.elements;\n            var dot = (A[0] - P[0]) * N[0] + (A[1] - P[1]) * N[1] + (A[2] - (P[2] || 0)) * N[2];\n            return new _Vector.Vector([P[0] + N[0] * dot, P[1] + N[1] * dot, (P[2] || 0) + N[2] * dot]);\n        }\n    }, {\n        key: \"rotate\",\n        value: function rotate(t, line) {\n            var R = t.determinant ? t.elements : _Matrix.Matrix.Rotation(t, line.direction).elements;\n            var C = line.pointClosestTo(this.anchor).elements;\n            var A = this.anchor.elements,\n                N = this.normal.elements;\n            var C1 = C[0],\n                C2 = C[1],\n                C3 = C[2],\n                A1 = A[0],\n                A2 = A[1],\n                A3 = A[2];\n            var x = A1 - C1,\n                y = A2 - C2,\n                z = A3 - C3;\n            return new Plane([C1 + R[0][0] * x + R[0][1] * y + R[0][2] * z, C2 + R[1][0] * x + R[1][1] * y + R[1][2] * z, C3 + R[2][0] * x + R[2][1] * y + R[2][2] * z], [R[0][0] * N[0] + R[0][1] * N[1] + R[0][2] * N[2], R[1][0] * N[0] + R[1][1] * N[1] + R[1][2] * N[2], R[2][0] * N[0] + R[2][1] * N[1] + R[2][2] * N[2]]);\n        }\n    }, {\n        key: \"reflectionIn\",\n        value: function reflectionIn(obj) {\n            if (obj.normal) {\n                // obj is a plane\n                var A = this.anchor.elements,\n                    N = this.normal.elements;\n                var A1 = A[0],\n                    A2 = A[1],\n                    A3 = A[2],\n                    N1 = N[0],\n                    N2 = N[1],\n                    N3 = N[2];\n                var newA = this.anchor.reflectionIn(obj).elements;\n                // Add the plane's normal to its anchor, then mirror that in the other plane\n                var AN1 = A1 + N1,\n                    AN2 = A2 + N2,\n                    AN3 = A3 + N3;\n                var Q = obj.pointClosestTo([AN1, AN2, AN3]).elements;\n                var newN = [Q[0] + (Q[0] - AN1) - newA[0], Q[1] + (Q[1] - AN2) - newA[1], Q[2] + (Q[2] - AN3) - newA[2]];\n                return new Plane(newA, newN);\n            } else if (obj.direction) {\n                // obj is a line\n                return this.rotate(Math.PI, obj);\n            } else {\n                // obj is a point\n                var P = obj.elements || obj;\n                return new Plane(this.anchor.reflectionIn([P[0], P[1], P[2] || 0]), this.normal);\n            }\n        }\n    }, {\n        key: \"setVectors\",\n        value: function setVectors(anchor, v1, v2) {\n            anchor = new _Vector.Vector(anchor);\n            anchor = anchor.to3D();if (anchor === null) {\n                return null;\n            }\n            v1 = new _Vector.Vector(v1);\n            v1 = v1.to3D();if (v1 === null) {\n                return null;\n            }\n            if (typeof v2 === 'undefined') {\n                v2 = null;\n            } else {\n                v2 = new _Vector.Vector(v2);\n                v2 = v2.to3D();\n                if (v2 === null) {\n                    return null;\n                }\n            }\n            var A1 = anchor.elements[0],\n                A2 = anchor.elements[1],\n                A3 = anchor.elements[2];\n            var v11 = v1.elements[0],\n                v12 = v1.elements[1],\n                v13 = v1.elements[2];\n            var normal, mod;\n            if (v2 !== null) {\n                var v21 = v2.elements[0],\n                    v22 = v2.elements[1],\n                    v23 = v2.elements[2];\n                normal = new _Vector.Vector([(v12 - A2) * (v23 - A3) - (v13 - A3) * (v22 - A2), (v13 - A3) * (v21 - A1) - (v11 - A1) * (v23 - A3), (v11 - A1) * (v22 - A2) - (v12 - A2) * (v21 - A1)]);\n                mod = normal.modulus();\n                if (mod === 0) {\n                    return null;\n                }\n                normal = new _Vector.Vector([normal.elements[0] / mod, normal.elements[1] / mod, normal.elements[2] / mod]);\n            } else {\n                mod = Math.sqrt(v11 * v11 + v12 * v12 + v13 * v13);\n                if (mod === 0) {\n                    return null;\n                }\n                normal = new _Vector.Vector([v1.elements[0] / mod, v1.elements[1] / mod, v1.elements[2] / mod]);\n            }\n            this.anchor = anchor;\n            this.normal = normal;\n            return this;\n        }\n    }]);\n\n    return Plane;\n}();\n\nPlane.XY = new Plane(_Vector.Vector.Zero(3), _Vector.Vector.k);\nPlane.YZ = new Plane(_Vector.Vector.Zero(3), _Vector.Vector.i);\nPlane.ZX = new Plane(_Vector.Vector.Zero(3), _Vector.Vector.j);\nPlane.YX = Plane.XY;Plane.ZY = Plane.YZ;Plane.XZ = Plane.ZX;\n\nPlane.fromPoints = function (points) {\n    var np = points.length,\n        list = [],\n        i,\n        P,\n        n,\n        N,\n        A,\n        B,\n        C,\n        D,\n        theta,\n        prevN,\n        totalN = _Vector.Vector.Zero(3);\n    for (i = 0; i < np; i++) {\n        P = new _Vector.Vector(points[i]).to3D();\n        if (P === null) {\n            return null;\n        }\n        list.push(P);\n        n = list.length;\n        if (n > 2) {\n            // Compute plane normal for the latest three points\n            A = list[n - 1].elements;B = list[n - 2].elements;C = list[n - 3].elements;\n            N = new _Vector.Vector([(A[1] - B[1]) * (C[2] - B[2]) - (A[2] - B[2]) * (C[1] - B[1]), (A[2] - B[2]) * (C[0] - B[0]) - (A[0] - B[0]) * (C[2] - B[2]), (A[0] - B[0]) * (C[1] - B[1]) - (A[1] - B[1]) * (C[0] - B[0])]).toUnitVector();\n            if (n > 3) {\n                // If the latest normal is not (anti)parallel to the previous one, we've\n                // strayed off the plane. This might be a slightly long-winded way of\n                // doing things, but we need the sum of all the normals to find which\n                // way the plane normal should point so that the points form an\n                // anticlockwise list.\n                theta = N.angleFrom(prevN);\n                if (theta !== null) {\n                    if (!(Math.abs(theta) <= _PRECISION.PRECISION || Math.abs(theta - Math.PI) <= _PRECISION.PRECISION)) {\n                        return null;\n                    }\n                }\n            }\n            totalN = totalN.add(N);\n            prevN = N;\n        }\n    }\n    // We need to add in the normals at the start and end points, which the above\n    // misses out\n    A = list[1].elements;B = list[0].elements;C = list[n - 1].elements;D = list[n - 2].elements;\n    totalN = totalN.add(new _Vector.Vector([(A[1] - B[1]) * (C[2] - B[2]) - (A[2] - B[2]) * (C[1] - B[1]), (A[2] - B[2]) * (C[0] - B[0]) - (A[0] - B[0]) * (C[2] - B[2]), (A[0] - B[0]) * (C[1] - B[1]) - (A[1] - B[1]) * (C[0] - B[0])]).toUnitVector()).add(new _Vector.Vector([(B[1] - C[1]) * (D[2] - C[2]) - (B[2] - C[2]) * (D[1] - C[1]), (B[2] - C[2]) * (D[0] - C[0]) - (B[0] - C[0]) * (D[2] - C[2]), (B[0] - C[0]) * (D[1] - C[1]) - (B[1] - C[1]) * (D[0] - C[0])]).toUnitVector());\n    return new Plane(list[0], totalN);\n};\n//# sourceMappingURL=Plane.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Line = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _PRECISION = require(\"./PRECISION\");\n\nvar _Vector = require(\"./Vector\");\n\nvar _Matrix = require(\"./Matrix\");\n\nvar _Plane = require(\"./Plane\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Line = exports.Line = function () {\n    function Line(anchor, direction) {\n        _classCallCheck(this, Line);\n\n        this.setVectors(anchor, direction);\n    }\n\n    _createClass(Line, [{\n        key: \"eql\",\n        value: function eql(line) {\n            return this.isParallelTo(line) && this.contains(line.anchor);\n        }\n    }, {\n        key: \"dup\",\n        value: function dup() {\n            return new Line(this.anchor, this.direction);\n        }\n    }, {\n        key: \"translate\",\n        value: function translate(vector) {\n            var V = vector.elements || vector;\n            return new Line([this.anchor.elements[0] + V[0], this.anchor.elements[1] + V[1], this.anchor.elements[2] + (V[2] || 0)], this.direction);\n        }\n    }, {\n        key: \"isParallelTo\",\n        value: function isParallelTo(obj) {\n            if (obj.normal || obj.start && obj.end) {\n                return obj.isParallelTo(this);\n            }\n            var theta = this.direction.angleFrom(obj.direction);\n            return Math.abs(theta) <= _PRECISION.PRECISION || Math.abs(theta - Math.PI) <= _PRECISION.PRECISION;\n        }\n    }, {\n        key: \"distanceFrom\",\n        value: function distanceFrom(obj) {\n            if (obj.normal || obj.start && obj.end) {\n                return obj.distanceFrom(this);\n            }\n            if (obj.direction) {\n                // obj is a line\n                if (this.isParallelTo(obj)) {\n                    return this.distanceFrom(obj.anchor);\n                }\n                var N = this.direction.cross(obj.direction).toUnitVector().elements;\n                var A = this.anchor.elements,\n                    B = obj.anchor.elements;\n                return Math.abs((A[0] - B[0]) * N[0] + (A[1] - B[1]) * N[1] + (A[2] - B[2]) * N[2]);\n            } else {\n                // obj is a point\n                var P = obj.elements || obj;\n                var A = this.anchor.elements,\n                    D = this.direction.elements;\n                var PA1 = P[0] - A[0],\n                    PA2 = P[1] - A[1],\n                    PA3 = (P[2] || 0) - A[2];\n                var modPA = Math.sqrt(PA1 * PA1 + PA2 * PA2 + PA3 * PA3);\n                if (modPA === 0) {\n                    return 0;\n                }\n                // Assumes direction vector is normalized\n                var cosTheta = (PA1 * D[0] + PA2 * D[1] + PA3 * D[2]) / modPA;\n                var sin2 = 1 - cosTheta * cosTheta;\n                return Math.abs(modPA * Math.sqrt(sin2 < 0 ? 0 : sin2));\n            }\n        }\n    }, {\n        key: \"contains\",\n        value: function contains(obj) {\n            if (obj.start && obj.end) {\n                return this.contains(obj.start) && this.contains(obj.end);\n            }\n            var dist = this.distanceFrom(obj);\n            return dist !== null && dist <= _PRECISION.PRECISION;\n        }\n    }, {\n        key: \"positionOf\",\n        value: function positionOf(point) {\n            if (!this.contains(point)) {\n                return null;\n            }\n            var P = point.elements || point;\n            var A = this.anchor.elements,\n                D = this.direction.elements;\n            return (P[0] - A[0]) * D[0] + (P[1] - A[1]) * D[1] + ((P[2] || 0) - A[2]) * D[2];\n        }\n    }, {\n        key: \"liesIn\",\n        value: function liesIn(plane) {\n            return plane.contains(this);\n        }\n    }, {\n        key: \"intersects\",\n        value: function intersects(obj) {\n            if (obj.normal) {\n                return obj.intersects(this);\n            }\n            return !this.isParallelTo(obj) && this.distanceFrom(obj) <= _PRECISION.PRECISION;\n        }\n    }, {\n        key: \"intersectionWith\",\n        value: function intersectionWith(obj) {\n            if (obj.normal || obj.start && obj.end) {\n                return obj.intersectionWith(this);\n            }\n            if (!this.intersects(obj)) {\n                return null;\n            }\n            var P = this.anchor.elements,\n                X = this.direction.elements,\n                Q = obj.anchor.elements,\n                Y = obj.direction.elements;\n            var X1 = X[0],\n                X2 = X[1],\n                X3 = X[2],\n                Y1 = Y[0],\n                Y2 = Y[1],\n                Y3 = Y[2];\n            var PsubQ1 = P[0] - Q[0],\n                PsubQ2 = P[1] - Q[1],\n                PsubQ3 = P[2] - Q[2];\n            var XdotQsubP = -X1 * PsubQ1 - X2 * PsubQ2 - X3 * PsubQ3;\n            var YdotPsubQ = Y1 * PsubQ1 + Y2 * PsubQ2 + Y3 * PsubQ3;\n            var XdotX = X1 * X1 + X2 * X2 + X3 * X3;\n            var YdotY = Y1 * Y1 + Y2 * Y2 + Y3 * Y3;\n            var XdotY = X1 * Y1 + X2 * Y2 + X3 * Y3;\n            var k = (XdotQsubP * YdotY / XdotX + XdotY * YdotPsubQ) / (YdotY - XdotY * XdotY);\n            return new _Vector.Vector([P[0] + k * X1, P[1] + k * X2, P[2] + k * X3]);\n        }\n    }, {\n        key: \"pointClosestTo\",\n        value: function pointClosestTo(obj) {\n            if (obj.start && obj.end) {\n                // obj is a line segment\n                var P = obj.pointClosestTo(this);\n                return P === null ? null : this.pointClosestTo(P);\n            } else if (obj.direction) {\n                // obj is a line\n                if (this.intersects(obj)) {\n                    return this.intersectionWith(obj);\n                }\n                if (this.isParallelTo(obj)) {\n                    return null;\n                }\n                var D = this.direction.elements,\n                    E = obj.direction.elements;\n                var D1 = D[0],\n                    D2 = D[1],\n                    D3 = D[2],\n                    E1 = E[0],\n                    E2 = E[1],\n                    E3 = E[2];\n                // Create plane containing obj and the shared normal and intersect this\n                // with it Thank you:\n                // http://www.cgafaq.info/wiki/Line-line_distance\n                var x = D3 * E1 - D1 * E3,\n                    y = D1 * E2 - D2 * E1,\n                    z = D2 * E3 - D3 * E2;\n                var N = [x * E3 - y * E2, y * E1 - z * E3, z * E2 - x * E1];\n                var P = new _Plane.Plane(obj.anchor, N);\n                return P.intersectionWith(this);\n            } else {\n                // obj is a point\n                var P = obj.elements || obj;\n                if (this.contains(P)) {\n                    return new _Vector.Vector(P);\n                }\n                var A = this.anchor.elements,\n                    D = this.direction.elements;\n                var D1 = D[0],\n                    D2 = D[1],\n                    D3 = D[2],\n                    A1 = A[0],\n                    A2 = A[1],\n                    A3 = A[2];\n                var x = D1 * (P[1] - A2) - D2 * (P[0] - A1),\n                    y = D2 * ((P[2] || 0) - A3) - D3 * (P[1] - A2),\n                    z = D3 * (P[0] - A1) - D1 * ((P[2] || 0) - A3);\n                var V = new _Vector.Vector([D2 * x - D3 * z, D3 * y - D1 * x, D1 * z - D2 * y]);\n                var k = this.distanceFrom(P) / V.modulus();\n                return new _Vector.Vector([P[0] + V.elements[0] * k, P[1] + V.elements[1] * k, (P[2] || 0) + V.elements[2] * k]);\n            }\n        }\n\n        // Returns a copy of the line rotated by t radians about the given line. Works\n        // by finding the argument's closest point to this line's anchor point (call\n        // this C) and rotating the anchor about C. Also rotates the line's direction\n        // about the argument's. Be careful with this - the rotation axis' direction\n        // affects the outcome!\n\n    }, {\n        key: \"rotate\",\n        value: function rotate(t, line) {\n            // If we're working in 2D\n            if (typeof line.direction === 'undefined') {\n                line = new Line(line.to3D(), _Vector.Vector.k);\n            }\n            var R = _Matrix.Matrix.Rotation(t, line.direction).elements;\n            var C = line.pointClosestTo(this.anchor).elements;\n            var A = this.anchor.elements,\n                D = this.direction.elements;\n            var C1 = C[0],\n                C2 = C[1],\n                C3 = C[2],\n                A1 = A[0],\n                A2 = A[1],\n                A3 = A[2];\n            var x = A1 - C1,\n                y = A2 - C2,\n                z = A3 - C3;\n            return new Line([C1 + R[0][0] * x + R[0][1] * y + R[0][2] * z, C2 + R[1][0] * x + R[1][1] * y + R[1][2] * z, C3 + R[2][0] * x + R[2][1] * y + R[2][2] * z], [R[0][0] * D[0] + R[0][1] * D[1] + R[0][2] * D[2], R[1][0] * D[0] + R[1][1] * D[1] + R[1][2] * D[2], R[2][0] * D[0] + R[2][1] * D[1] + R[2][2] * D[2]]);\n        }\n    }, {\n        key: \"reverse\",\n        value: function reverse() {\n            return new Line(this.anchor, this.direction.x(-1));\n        }\n    }, {\n        key: \"reflectionIn\",\n        value: function reflectionIn(obj) {\n            if (obj.normal) {\n                // obj is a plane\n                var A = this.anchor.elements,\n                    D = this.direction.elements;\n                var A1 = A[0],\n                    A2 = A[1],\n                    A3 = A[2],\n                    D1 = D[0],\n                    D2 = D[1],\n                    D3 = D[2];\n                var newA = this.anchor.reflectionIn(obj).elements;\n                // Add the line's direction vector to its anchor, then mirror that in the plane\n                var AD1 = A1 + D1,\n                    AD2 = A2 + D2,\n                    AD3 = A3 + D3;\n                var Q = obj.pointClosestTo([AD1, AD2, AD3]).elements;\n                var newD = [Q[0] + (Q[0] - AD1) - newA[0], Q[1] + (Q[1] - AD2) - newA[1], Q[2] + (Q[2] - AD3) - newA[2]];\n                return new Line(newA, newD);\n            } else if (obj.direction) {\n                // obj is a line - reflection obtained by rotating PI radians about obj\n                return this.rotate(Math.PI, obj);\n            } else {\n                // obj is a point - just reflect the line's anchor in it\n                var P = obj.elements || obj;\n                return new Line(this.anchor.reflectionIn([P[0], P[1], P[2] || 0]), this.direction);\n            }\n        }\n    }, {\n        key: \"setVectors\",\n        value: function setVectors(anchor, direction) {\n            // Need to do this so that line's properties are not references to the\n            // arguments passed in\n            anchor = new _Vector.Vector(anchor);\n            direction = new _Vector.Vector(direction);\n            if (anchor.elements.length === 2) {\n                anchor.elements.push(0);\n            }\n            if (direction.elements.length === 2) {\n                direction.elements.push(0);\n            }\n            if (anchor.elements.length > 3 || direction.elements.length > 3) {\n                return null;\n            }\n            var mod = direction.modulus();\n            if (mod === 0) {\n                return null;\n            }\n            this.anchor = anchor;\n            this.direction = new _Vector.Vector([direction.elements[0] / mod, direction.elements[1] / mod, direction.elements[2] / mod]);\n            return this;\n        }\n    }]);\n\n    return Line;\n}();\n\nLine.X = new Line(_Vector.Vector.Zero(3), _Vector.Vector.i);\nLine.Y = new Line(_Vector.Vector.Zero(3), _Vector.Vector.j);\nLine.Z = new Line(_Vector.Vector.Zero(3), _Vector.Vector.k);\n//# sourceMappingURL=Line.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.LineSegment = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Vector = require(\"./Vector\");\n\nvar _Plane = require(\"./Plane\");\n\nvar _Line = require(\"./Line\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar LineSegment = exports.LineSegment = function () {\n    function LineSegment(v1, v2) {\n        _classCallCheck(this, LineSegment);\n\n        this.setPoints(v1, v2);\n    }\n\n    _createClass(LineSegment, [{\n        key: \"eql\",\n        value: function eql(segment) {\n            return this.start.eql(segment.start) && this.end.eql(segment.end) || this.start.eql(segment.end) && this.end.eql(segment.start);\n        }\n    }, {\n        key: \"dup\",\n        value: function dup() {\n            return new LineSegment(this.start, this.end);\n        }\n    }, {\n        key: \"length\",\n        value: function length() {\n            var A = this.start.elements,\n                B = this.end.elements;\n            var C1 = B[0] - A[0],\n                C2 = B[1] - A[1],\n                C3 = B[2] - A[2];\n            return Math.sqrt(C1 * C1 + C2 * C2 + C3 * C3);\n        }\n    }, {\n        key: \"toVector\",\n        value: function toVector() {\n            var A = this.start.elements,\n                B = this.end.elements;\n            return new _Vector.Vector([B[0] - A[0], B[1] - A[1], B[2] - A[2]]);\n        }\n    }, {\n        key: \"midpoint\",\n        value: function midpoint() {\n            var A = this.start.elements,\n                B = this.end.elements;\n            return new _Vector.Vector([(B[0] + A[0]) / 2, (B[1] + A[1]) / 2, (B[2] + A[2]) / 2]);\n        }\n    }, {\n        key: \"bisectingPlane\",\n        value: function bisectingPlane() {\n            return new _Plane.Plane(this.midpoint(), this.toVector());\n        }\n    }, {\n        key: \"translate\",\n        value: function translate(vector) {\n            var V = vector.elements || vector;\n            var S = this.start.elements,\n                E = this.end.elements;\n            return new LineSegment([S[0] + V[0], S[1] + V[1], S[2] + (V[2] || 0)], [E[0] + V[0], E[1] + V[1], E[2] + (V[2] || 0)]);\n        }\n    }, {\n        key: \"isParallelTo\",\n        value: function isParallelTo(obj) {\n            return this.line.isParallelTo(obj);\n        }\n    }, {\n        key: \"distanceFrom\",\n        value: function distanceFrom(obj) {\n            var P = this.pointClosestTo(obj);\n            return P === null ? null : P.distanceFrom(obj);\n        }\n    }, {\n        key: \"contains\",\n        value: function contains(obj) {\n            if (obj.start && obj.end) {\n                return this.contains(obj.start) && this.contains(obj.end);\n            }\n            var P = (obj.elements || obj).slice();\n            if (P.length === 2) {\n                P.push(0);\n            }\n            if (this.start.eql(P)) {\n                return true;\n            }\n            var S = this.start.elements;\n            var V = new _Vector.Vector([S[0] - P[0], S[1] - P[1], S[2] - (P[2] || 0)]);\n            var vect = this.toVector();\n            return V.isAntiparallelTo(vect) && V.modulus() <= vect.modulus();\n        }\n    }, {\n        key: \"intersects\",\n        value: function intersects(obj) {\n            return this.intersectionWith(obj) !== null;\n        }\n    }, {\n        key: \"intersectionWith\",\n        value: function intersectionWith(obj) {\n            if (!this.line.intersects(obj)) {\n                return null;\n            }\n            var P = this.line.intersectionWith(obj);\n            return this.contains(P) ? P : null;\n        }\n    }, {\n        key: \"pointClosestTo\",\n        value: function pointClosestTo(obj) {\n            if (obj.normal) {\n                // obj is a plane\n                var V = this.line.intersectionWith(obj);\n                if (V === null) {\n                    return null;\n                }\n                return this.pointClosestTo(V);\n            } else {\n                // obj is a line (segment) or point\n                var P = this.line.pointClosestTo(obj);\n                if (P === null) {\n                    return null;\n                }\n                if (this.contains(P)) {\n                    return P;\n                }\n                return (this.line.positionOf(P) < 0 ? this.start : this.end).dup();\n            }\n        }\n    }, {\n        key: \"setPoints\",\n        value: function setPoints(startPoint, endPoint) {\n            startPoint = new _Vector.Vector(startPoint).to3D();\n            endPoint = new _Vector.Vector(endPoint).to3D();\n            if (startPoint === null || endPoint === null) {\n                return null;\n            }\n            this.line = new _Line.Line(startPoint, endPoint.subtract(startPoint));\n            this.start = startPoint;\n            this.end = endPoint;\n            return this;\n        }\n    }]);\n\n    return LineSegment;\n}();\n//# sourceMappingURL=LineSegment.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar LinkedListNode = exports.LinkedListNode = function LinkedListNode(data) {\n    _classCallCheck(this, LinkedListNode);\n\n    this.prev = null;\n    this.next = null;\n    this.data = data;\n};\n//# sourceMappingURL=LinkedListNode.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Polygon = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _LinkedList = require(\"./LinkedList\");\n\nvar _PRECISION = require(\"./PRECISION\");\n\nvar _Matrix = require(\"./Matrix\");\n\nvar _Vector = require(\"./Vector\");\n\nvar _Plane = require(\"./Plane\");\n\nvar _Line = require(\"./Line\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Polygon = exports.Polygon = function () {\n    function Polygon(points, plane) {\n        _classCallCheck(this, Polygon);\n\n        this.setVertices(points, plane);\n    }\n\n    _createClass(Polygon, [{\n        key: \"v\",\n        value: function v(i) {\n            return this.vertices.at(i - 1).data;\n        }\n    }, {\n        key: \"nodeFor\",\n        value: function nodeFor(vertex) {\n            return this.vertices.withData(vertex);\n        }\n    }, {\n        key: \"dup\",\n        value: function dup() {\n            return new Polygon(this.vertices, this.plane);\n        }\n    }, {\n        key: \"translate\",\n        value: function translate(vector) {\n            var P = vector.elements || vector;\n            this.vertices.each(function (node) {\n                var E = node.data.elements;\n                node.data.setElements([E[0] + P[0], E[1] + P[1], E[2] + (P[2] || 0)]);\n            });\n            this.plane = this.plane.translate(vector);\n            this.updateTrianglePlanes(function (plane) {\n                return plane.translate(vector);\n            });\n            return this;\n        }\n    }, {\n        key: \"rotate\",\n        value: function rotate(t, line) {\n            var R = _Matrix.Matrix.Rotation(t, line.direction);\n            this.vertices.each(function (node) {\n                node.data.setElements(node.data.rotate(R, line).elements);\n            });\n            this.plane = this.plane.rotate(R, line);\n            this.updateTrianglePlanes(function (plane) {\n                return plane.rotate(R, line);\n            });\n            return this;\n        }\n    }, {\n        key: \"scale\",\n        value: function scale(k, point) {\n            var P = point.elements || point;\n            this.vertices.each(function (node) {\n                var E = node.data.elements;\n                node.data.setElements([P[0] + k * (E[0] - P[0]), P[1] + k * (E[1] - P[1]), (P[2] || 0) + k * (E[2] - (P[2] || 0))]);\n            });\n            var anchor = this.vertices.first.data;\n            this.plane.anchor.setElements(anchor);\n            this.updateTrianglePlanes(function (plane) {\n                return new _Plane.Plane(anchor, plane.normal);\n            });\n            return this;\n        }\n\n        // Updates the plane properties of all the cached triangles belonging to the\n        // polygon according to the given function. For example, suppose you just\n        // rotated the polygon, you should call:\n        //\n        //   poly.updateTrianglePlanes(function(plane) { return plane.rotate(t, line); });\n        //\n        // This method is called automatically by Polygon.translate,\n        // Polygon.rotate and Polygon.scale transformation methods.\n\n    }, {\n        key: \"updateTrianglePlanes\",\n        value: function updateTrianglePlanes(fn) {\n            var i;\n            if (this.cached.triangles !== null) {\n                i = this.cached.triangles.length;\n                while (i--) {\n                    this.cached.triangles[i].plane = fn(this.cached.triangles[i].plane);\n                }\n            }\n            if (this.cached.surfaceIntegralElements !== null) {\n                i = this.cached.surfaceIntegralElements.length;\n                while (i--) {\n                    this.cached.surfaceIntegralElements[i].plane = fn(this.cached.surfaceIntegralElements[i].plane);\n                }\n            }\n        }\n    }, {\n        key: \"isTriangle\",\n        value: function isTriangle() {\n            return this.vertices.length === 3;\n        }\n\n        // Returns a collection of triangles used for calculating area and center of\n        // mass. Some of the triangles will not lie inside the polygon - this\n        // collection is essentially a series of itervals in a surface integral, so\n        // some are 'negative'. If you want the polygon broken into constituent\n        // triangles, use toTriangles(). This method is used because it's much faster\n        // than toTriangles().\n        //\n        // The triangles generated share vertices with the original polygon, so they\n        // transform with the polygon. They are cached after first calculation and\n        // should remain in sync with changes to the parent polygon.\n\n    }, {\n        key: \"trianglesForSurfaceIntegral\",\n        value: function trianglesForSurfaceIntegral() {\n            if (this.cached.surfaceIntegralElements !== null) {\n                return this.cached.surfaceIntegralElements;\n            }\n            var triangles = [];\n            var firstVertex = this.vertices.first.data;\n            var plane = this.plane;\n            this.vertices.each(function (node, i) {\n                if (i < 2) {\n                    return;\n                }\n                var points = [firstVertex, node.prev.data, node.data];\n                // If the vertices lie on a straigh line, give the polygon's own plane. If\n                // the element has no area, it doesn't matter which way its normal faces.\n                triangles.push(new Polygon(points, _Plane.Plane.fromPoints(points) || plane));\n            });\n            return this.setCache('surfaceIntegralElements', triangles);\n        }\n    }, {\n        key: \"area\",\n        value: function area() {\n            if (this.isTriangle()) {\n                // Area is half the modulus of the cross product of two sides\n                var A = this.vertices.first,\n                    B = A.next,\n                    C = B.next;\n                A = A.data.elements;B = B.data.elements;C = C.data.elements;\n                return 0.5 * new _Vector.Vector([(A[1] - B[1]) * (C[2] - B[2]) - (A[2] - B[2]) * (C[1] - B[1]), (A[2] - B[2]) * (C[0] - B[0]) - (A[0] - B[0]) * (C[2] - B[2]), (A[0] - B[0]) * (C[1] - B[1]) - (A[1] - B[1]) * (C[0] - B[0])]).modulus();\n            } else {\n                var trigs = this.trianglesForSurfaceIntegral(),\n                    area = 0;\n                var i = trigs.length;\n                while (i--) {\n                    area += trigs[i].area() * trigs[i].plane.normal.dot(this.plane.normal);\n                }\n                return area;\n            }\n        }\n    }, {\n        key: \"centroid\",\n        value: function centroid() {\n            if (this.isTriangle()) {\n                var A = this.v(1).elements,\n                    B = this.v(2).elements,\n                    C = this.v(3).elements;\n                return new _Vector.Vector([(A[0] + B[0] + C[0]) / 3, (A[1] + B[1] + C[1]) / 3, (A[2] + B[2] + C[2]) / 3]);\n            } else {\n                var A,\n                    M = 0,\n                    V = _Vector.Vector.Zero(3),\n                    P,\n                    C,\n                    trigs = this.trianglesForSurfaceIntegral();\n                var i = trigs.length;\n                while (i--) {\n                    A = trigs[i].area() * trigs[i].plane.normal.dot(this.plane.normal);\n                    M += A;\n                    P = V.elements;\n                    C = trigs[i].centroid().elements;\n                    V.setElements([P[0] + C[0] * A, P[1] + C[1] * A, P[2] + C[2] * A]);\n                }\n                return V.x(1 / M);\n            }\n        }\n    }, {\n        key: \"projectionOn\",\n        value: function projectionOn(plane) {\n            var points = [];\n            this.vertices.each(function (node) {\n                points.push(plane.pointClosestTo(node.data));\n            });\n            return new Polygon(points);\n        }\n    }, {\n        key: \"removeVertex\",\n        value: function removeVertex(vertex) {\n            if (this.isTriangle()) {\n                return;\n            }\n            var node = this.nodeFor(vertex);\n            if (node === null) {\n                return null;\n            }\n            this.clearCache();\n            // Previous and next entries in the main vertex list\n            var prev = node.prev,\n                next = node.next;\n            var prevWasConvex = prev.data.isConvex(this);\n            var nextWasConvex = next.data.isConvex(this);\n            if (node.data.isConvex(this)) {\n                this.convexVertices.remove(this.convexVertices.withData(node.data));\n            } else {\n                this.reflexVertices.remove(this.reflexVertices.withData(node.data));\n            }\n            this.vertices.remove(node);\n            // Deal with previous vertex's change of class\n            if (prevWasConvex !== prev.data.isConvex(this)) {\n                if (prevWasConvex) {\n                    this.convexVertices.remove(this.convexVertices.withData(prev.data));\n                    this.reflexVertices.append(new _LinkedList.LinkedList.Node(prev.data));\n                } else {\n                    this.reflexVertices.remove(this.reflexVertices.withData(prev.data));\n                    this.convexVertices.append(new _LinkedList.LinkedList.Node(prev.data));\n                }\n            }\n            // Deal with next vertex's change of class\n            if (nextWasConvex !== next.data.isConvex(this)) {\n                if (nextWasConvex) {\n                    this.convexVertices.remove(this.convexVertices.withData(next.data));\n                    this.reflexVertices.append(new _LinkedList.LinkedList.Node(next.data));\n                } else {\n                    this.reflexVertices.remove(this.reflexVertices.withData(next.data));\n                    this.convexVertices.append(new _LinkedList.LinkedList.Node(next.data));\n                }\n            }\n            return this;\n        }\n    }, {\n        key: \"contains\",\n        value: function contains(point) {\n            return this.containsByWindingNumber(point);\n        }\n    }, {\n        key: \"containsByWindingNumber\",\n        value: function containsByWindingNumber(point) {\n            var P = point.elements || point;\n            if (!this.plane.contains(P)) {\n                return false;\n            }\n            if (this.hasEdgeContaining(P)) {\n                return false;\n            }\n            var V,\n                W,\n                A,\n                B,\n                theta = 0,\n                dt,\n                loops = 0,\n                self = this;\n            this.vertices.each(function (node) {\n                V = node.data.elements;\n                W = node.next.data.elements;\n                A = new _Vector.Vector([V[0] - P[0], V[1] - P[1], V[2] - (P[2] || 0)]);\n                B = new _Vector.Vector([W[0] - P[0], W[1] - P[1], W[2] - (P[2] || 0)]);\n                dt = A.angleFrom(B);\n                if (dt === null || dt === 0) {\n                    return;\n                }\n                theta += (A.cross(B).isParallelTo(self.plane.normal) ? 1 : -1) * dt;\n                if (theta >= 2 * Math.PI - _PRECISION.PRECISION) {\n                    loops++;theta -= 2 * Math.PI;\n                }\n                if (theta <= -2 * Math.PI + _PRECISION.PRECISION) {\n                    loops--;theta += 2 * Math.PI;\n                }\n            });\n            return loops !== 0;\n        }\n    }, {\n        key: \"hasEdgeContaining\",\n        value: function hasEdgeContaining(point) {\n            var P = point.elements || point;\n            var success = false;\n            this.vertices.each(function (node) {\n                if (_Line.Line.Segment.create(node.data, node.next.data).contains(P)) {\n                    success = true;\n                }\n            });\n            return success;\n        }\n    }, {\n        key: \"toTriangles\",\n        value: function toTriangles() {\n            if (this.cached.triangles !== null) {\n                return this.cached.triangles;\n            }\n            return this.setCache('triangles', this.triangulateByEarClipping());\n        }\n\n        // Implementation of ear clipping algorithm\n        // Found in 'Triangulation by ear clipping', by David Eberly\n        // at http://www.geometrictools.com\n        // This will not deal with overlapping sections - contruct your polygons\n        // sensibly\n\n    }, {\n        key: \"triangulateByEarClipping\",\n        value: function triangulateByEarClipping() {\n            var poly = this.dup(),\n                triangles = [],\n                success,\n                convexNode,\n                mainNode,\n                trig;\n            while (!poly.isTriangle()) {\n                success = false;\n                while (!success) {\n                    success = true;\n                    // Ear tips must be convex vertices - let's pick one at random\n                    convexNode = poly.convexVertices.randomNode();\n                    mainNode = poly.vertices.withData(convexNode.data);\n                    // For convex vertices, this order will always be anticlockwise\n                    trig = new Polygon([mainNode.data, mainNode.next.data, mainNode.prev.data], this.plane);\n                    // Now test whether any reflex vertices lie within the ear\n                    poly.reflexVertices.each(function (node) {\n                        // Don't test points belonging to this triangle. node won't be equal\n                        // to convexNode as node is reflex and vertex is convex.\n                        if (node.data !== mainNode.prev.data && node.data !== mainNode.next.data) {\n                            if (trig.contains(node.data) || trig.hasEdgeContaining(node.data)) {\n                                success = false;\n                            }\n                        }\n                    });\n                }\n                triangles.push(trig);\n                poly.removeVertex(mainNode.data);\n            }\n            // Need to do this to renumber the remaining vertices\n            triangles.push(new Polygon(poly.vertices, this.plane));\n            return triangles;\n        }\n    }, {\n        key: \"setVertices\",\n        value: function setVertices(points, plane) {\n            var pointSet = points.toArray ? points.toArray() : points;\n            this.plane = plane && plane.normal ? plane.dup() : _Plane.Plane.fromPoints(pointSet);\n            if (this.plane === null) {\n                return null;\n            }\n            this.vertices = new _LinkedList.LinkedList.Circular();\n            // Construct linked list of vertices. If each point is already a polygon\n            // vertex, we reference it rather than creating a new vertex.\n            var i = pointSet.length,\n                newVertex;\n            while (i--) {\n                newVertex = pointSet[i].isConvex ? pointSet[i] : new Polygon.Vertex(pointSet[i]);\n                this.vertices.prepend(new _LinkedList.LinkedList.Node(newVertex));\n            }\n            this.clearCache();\n            this.populateVertexTypeLists();\n            return this;\n        }\n    }, {\n        key: \"populateVertexTypeLists\",\n        value: function populateVertexTypeLists() {\n            this.convexVertices = new _LinkedList.LinkedList.Circular();\n            this.reflexVertices = new _LinkedList.LinkedList.Circular();\n            var self = this;\n            this.vertices.each(function (node) {\n                // Split vertices into convex / reflex groups. The\n                // LinkedList.Node class wraps each vertex so it can belong to\n                // many linked lists.\n                self[node.data.type(self) + 'Vertices'].append(new _LinkedList.LinkedList.Node(node.data));\n            });\n        }\n    }, {\n        key: \"copyVertices\",\n        value: function copyVertices() {\n            this.clearCache();\n            this.vertices.each(function (node) {\n                node.data = new Polygon.Vertex(node.data);\n            });\n            this.populateVertexTypeLists();\n        }\n    }, {\n        key: \"clearCache\",\n        value: function clearCache() {\n            this.cached = {\n                triangles: null,\n                surfaceIntegralElements: null\n            };\n        }\n    }, {\n        key: \"setCache\",\n        value: function setCache(key, value) {\n            this.cached[key] = value;\n            return value;\n        }\n    }, {\n        key: \"inspect\",\n        value: function inspect() {\n            var points = [];\n            this.vertices.each(function (node) {\n                points.push(node.data.inspect());\n            });\n            return points.join(' -> ');\n        }\n    }]);\n\n    return Polygon;\n}();\n//# sourceMappingURL=Polygon.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Vertex = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Vector2 = require(\"./Vector\");\n\nvar _PRECISION = require(\"./PRECISION\");\n\nvar _Polygon = require(\"./Polygon\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Vertex = exports.Vertex = function (_Vector) {\n    _inherits(Vertex, _Vector);\n\n    function Vertex(point) {\n        _classCallCheck(this, Vertex);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Vertex).call(this, point));\n\n        _this.setElements(point);\n        if (_this.elements.length === 2) {\n            _this.elements.push(0);\n        }\n        if (_this.elements.length !== 3) {\n            var _ret;\n\n            return _ret = null, _possibleConstructorReturn(_this, _ret);\n        }\n        return _this;\n    }\n\n    // Returns true iff the vertex's internal angle is 0 <= x < 180\n    // in the context of the given polygon object. Returns null if the\n    // vertex does not exist in the polygon.\n\n\n    _createClass(Vertex, [{\n        key: \"isConvex\",\n        value: function isConvex(polygon) {\n            var node = polygon.nodeFor(this);\n            if (node === null) {\n                return null;\n            }\n            var prev = node.prev.data,\n                next = node.next.data;\n            var A = next.subtract(this);\n            var B = prev.subtract(this);\n            var theta = A.angleFrom(B);\n            if (theta <= _PRECISION.PRECISION) {\n                return true;\n            }\n            if (Math.abs(theta - Math.PI) <= _PRECISION.PRECISION) {\n                return false;\n            }\n            return A.cross(B).dot(polygon.plane.normal) > 0;\n        }\n\n        // Returns true iff the vertex's internal angle is 180 <= x < 360\n\n    }, {\n        key: \"isReflex\",\n        value: function isReflex(polygon) {\n            var result = this.isConvex(polygon);\n            return result === null ? null : !result;\n        }\n    }, {\n        key: \"type\",\n        value: function type(polygon) {\n            var result = this.isConvex(polygon);\n            return result === null ? null : result ? 'convex' : 'reflex';\n        }\n    }]);\n\n    return Vertex;\n}(_Vector2.Vector);\n\n// Method for converting a set of arrays/vectors/whatever to a set of Vertex objects\n\n\nVertex.convert = function (points) {\n    var pointSet = points.toArray ? points.toArray() : points;\n    var list = [],\n        n = pointSet.length;\n    for (var i = 0; i < n; i++) {\n        list.push(new Vertex(pointSet[i]));\n    }\n    return list;\n};\n//# sourceMappingURL=Vertex.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.mht = mht;\nexports.makeLookAt = makeLookAt;\nexports.makeOrtho = makeOrtho;\nexports.makePerspective = makePerspective;\nexports.makeFrustum = makeFrustum;\n\nvar _Vector = require(\"./Vector\");\n\nvar _Matrix = require(\"./Matrix\");\n\n//From glUtils.js\nfunction mht(m) {\n    var s = \"\";\n    if (m.length == 16) {\n        for (var i = 0; i < 4; i++) {\n            s += \"<span style='font-family: monospace'>[\" + m[i * 4 + 0].toFixed(4) + \",\" + m[i * 4 + 1].toFixed(4) + \",\" + m[i * 4 + 2].toFixed(4) + \",\" + m[i * 4 + 3].toFixed(4) + \"]</span><br>\";\n        }\n    } else if (m.length == 9) {\n        for (var i = 0; i < 3; i++) {\n            s += \"<span style='font-family: monospace'>[\" + m[i * 3 + 0].toFixed(4) + \",\" + m[i * 3 + 1].toFixed(4) + \",\" + m[i * 3 + 2].toFixed(4) + \"]</font><br>\";\n        }\n    } else {\n        return m.toString();\n    }\n    return s;\n}\n\n//From glUtils.js\n//\n// gluLookAt\n//\nfunction makeLookAt(ex, ey, ez, cx, cy, cz, ux, uy, uz) {\n    var eye = new _Vector.Vector([ex, ey, ez]);\n    var center = new _Vector.Vector([cx, cy, cz]);\n    var up = new _Vector.Vector([ux, uy, uz]);\n\n    var mag;\n\n    var z = eye.subtract(center).toUnitVector();\n    var x = up.cross(z).toUnitVector();\n    var y = z.cross(x).toUnitVector();\n\n    var m = new _Matrix.Matrix([[x.e(1), x.e(2), x.e(3), 0], [y.e(1), y.e(2), y.e(3), 0], [z.e(1), z.e(2), z.e(3), 0], [0, 0, 0, 1]]);\n\n    var t = new _Matrix.Matrix([[1, 0, 0, -ex], [0, 1, 0, -ey], [0, 0, 1, -ez], [0, 0, 0, 1]]);\n    return m.x(t);\n}\n\n//From glUtils.js\n//\n// glOrtho\n//\nfunction makeOrtho(left, right, bottom, top, znear, zfar) {\n    var tx = -(right + left) / (right - left);\n    var ty = -(top + bottom) / (top - bottom);\n    var tz = -(zfar + znear) / (zfar - znear);\n\n    return new _Matrix.Matrix([[2 / (right - left), 0, 0, tx], [0, 2 / (top - bottom), 0, ty], [0, 0, -2 / (zfar - znear), tz], [0, 0, 0, 1]]);\n}\n\n//From glUtils.js\n//\n// gluPerspective\n//\nfunction makePerspective(fovy, aspect, znear, zfar) {\n    var ymax = znear * Math.tan(fovy * Math.PI / 360.0);\n    var ymin = -ymax;\n    var xmin = ymin * aspect;\n    var xmax = ymax * aspect;\n\n    return makeFrustum(xmin, xmax, ymin, ymax, znear, zfar);\n}\n\n//From glUtils.js\n//\n// glFrustum\n//\nfunction makeFrustum(left, right, bottom, top, znear, zfar) {\n    var X = 2 * znear / (right - left);\n    var Y = 2 * znear / (top - bottom);\n    var A = (right + left) / (right - left);\n    var B = (top + bottom) / (top - bottom);\n    var C = -(zfar + znear) / (zfar - znear);\n    var D = -2 * zfar * znear / (zfar - znear);\n\n    return new _Matrix.Matrix([[X, 0, A, 0], [0, Y, B, 0], [0, 0, C, D], [0, 0, -1, 0]]);\n}\n","\"use strict\";\n\n//Classes\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _CircularLinkedList = require(\"./CircularLinkedList\");\n\nObject.defineProperty(exports, \"CircularLinkedList\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _CircularLinkedList.CircularLinkedList;\n\t}\n});\n\nvar _Line = require(\"./Line\");\n\nObject.defineProperty(exports, \"Line\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Line.Line;\n\t}\n});\n\nvar _LineSegment = require(\"./LineSegment\");\n\nObject.defineProperty(exports, \"LineSegment\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _LineSegment.LineSegment;\n\t}\n});\n\nvar _LinkedList = require(\"./LinkedList\");\n\nObject.defineProperty(exports, \"LinkedList\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _LinkedList.LinkedList;\n\t}\n});\n\nvar _LinkedListNode = require(\"./LinkedListNode\");\n\nObject.defineProperty(exports, \"LinkedListNode\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _LinkedListNode.LinkedListNode;\n\t}\n});\n\nvar _Matrix = require(\"./Matrix\");\n\nObject.defineProperty(exports, \"Matrix\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Matrix.Matrix;\n\t}\n});\n\nvar _Plane = require(\"./Plane\");\n\nObject.defineProperty(exports, \"Plane\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Plane.Plane;\n\t}\n});\n\nvar _Polygon = require(\"./Polygon\");\n\nObject.defineProperty(exports, \"Polygon\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Polygon.Polygon;\n\t}\n});\n\nvar _Vector = require(\"./Vector\");\n\nObject.defineProperty(exports, \"Vector\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Vector.Vector;\n\t}\n});\n\nvar _Vertex = require(\"./Vertex\");\n\nObject.defineProperty(exports, \"Vertex\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Vertex.Vertex;\n\t}\n});\n\nvar _Utils = require(\"./Utils\");\n\nObject.defineProperty(exports, \"mht\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Utils.mht;\n\t}\n});\nObject.defineProperty(exports, \"makeLookAt\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Utils.makeLookAt;\n\t}\n});\nObject.defineProperty(exports, \"makePerspective\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Utils.makePerspective;\n\t}\n});\nObject.defineProperty(exports, \"makeFrustum\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Utils.makeFrustum;\n\t}\n});\nObject.defineProperty(exports, \"makeOrtho\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _Utils.makeOrtho;\n\t}\n});\n\nvar _PRECISION = require(\"./PRECISION\");\n\nObject.defineProperty(exports, \"PRECISION\", {\n\tenumerable: true,\n\tget: function get() {\n\t\treturn _PRECISION.PRECISION;\n\t}\n});\n//# sourceMappingURL=Sylvester.js.map\n","export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n","import colors from \"../colors.js\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","\n//\n// TEXTURE SHADER FRAGMENT\n//\n\nlet textureFragmentShader = /*glsl*/`precision highp float; \n\nuniform sampler2D input_tex;\nuniform sampler2D lut_tex;  \nuniform float diverging;  \nvarying vec2 tex_coord;     \nvoid main(){\n\tfloat val = texture2D( input_tex, tex_coord ).r+0.5*diverging;\n\tvec4 color = texture2D( lut_tex, vec2(val, 0.5) );\n\tgl_FragColor = vec4(color.rgb,1.0);\n}\n`;\n\n\n//\n// TEXTURE SHADER VERTEX\n//\n\nlet textureVertexShader = /*glsl*/`\n\nattribute vec2 vertex;   \nattribute vec2 texCoord; \nuniform mat4 uMVMatrix;  \nuniform mat4 uPMatrix;   \nvarying vec2 tex_coord;  \nvoid main(){\n\ttex_coord = texCoord; \n\tgl_Position = uPMatrix * uMVMatrix * vec4( vertex, 0.0, 1.0 ); \n}\n\n`;\n\n//\n// FRAGMENT SHADER\n//\n\n\nlet fragmentShader = /*glsl*/`precision highp float;\n\nvarying vec2 quad_coord; \nvarying float v_kernel_weight; \nuniform float kernel_weightScale; \nvoid main(void) { \n\tfloat len = length( quad_coord ); \n\tfloat nrm = v_kernel_weight * kernel_weightScale * 0.3989422804014327 * exp( -0.5*25.0*len*len ); \n\t// gl_FragColor = vec4(1,1,1,1.0);//vec4(nrm,nrm,nrm, nrm );\t\n\tgl_FragColor = vec4(nrm,nrm,nrm, nrm );\n\t// gl_FragColor = vec4(1,1,1, 1.0 ); \n}\n\n`;\n\n//\n// VERTEX SHADER\n//\n\n\nlet vertexShader = /*glsl*/`\n\nattribute vec3 position;\nattribute float kernel_weight;\n\nattribute vec2 offset;\n// attribute vec3 normal;\n\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\n\nuniform mat4 uMVMatrix; \nuniform mat4 uPMatrix; \nuniform float bandwidthScale; \nuniform vec2 bandwidth; \nvarying vec2 quad_coord; \nvarying float v_kernel_weight; \n\nvoid main(void) { \n\t// vec4 viewCenters = viewMatrix*vec4(position,1.0);\n\t// vec2 pos = (viewCenters).xy; \n\t// quad_coord = offset.xy;  \n\t// pos += bandwidthScale * bandwidth * quad_coord; \n\t// gl_Position = uPMatrix * uMVMatrix * vec4( pos, 0.0, 1.0); \n\t\n\n\n\tfloat BoxCorrection = 1.5;\n\tfloat fullSize = bandwidthScale * 5.5;\n\tvec3 cameraRight = normalize(vec3(viewMatrix[0][0], viewMatrix[1][0], viewMatrix[2][0]));\n\tvec3 cameraUp = normalize(vec3(viewMatrix[0][1], viewMatrix[1][1], viewMatrix[2][1]));\n\t// vec4 viewCenters = viewMatrix*vec4(position+BoxCorrection*fullSize*(cameraRight*offset.x + cameraUp*offset.y),1.0);\n\tvec4 viewCenters = viewMatrix*vec4(position,1.0);\n\tviewCenters.xy += bandwidthScale * bandwidth * offset.xy;\n\tquad_coord = offset.xy; \n\tv_kernel_weight = kernel_weight;\n\tgl_Position = projectionMatrix * viewCenters;\n} \n`;\n\nexport { fragmentShader, vertexShader, textureFragmentShader, textureVertexShader };\n\n","\nimport * as glm from \"gl-matrix\"\nimport {makeOrtho, Matrix} from \"sylvester-es6\"\nimport * as d3Chromatic from \"d3-scale-chromatic\"\nimport { rgb as d3rgb } from \"d3-color\"\nimport { scaleOrdinal as d3ScaleOrdinal, scaleSequential as d3ScaleSequential } from \"d3-scale\"\nimport * as glUtils from \"../utilities/webgl.js\"\nimport * as densityShaders from \"../shaders/density.js\"\n\n\n\n\n\nfunction getShader(gl, code, type) {\n    let shader = gl.createShader(type);\n    gl.shaderSource(shader, code);\n    gl.compileShader(shader);\n\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        console.log(gl.getShaderInfoLog(shader));\n        return null;\n    }\n    return shader;\n}\n\n\nfunction createShader(gl) {\n    //let fragmentShader = getShader(gl, \"shader-fs\");\n    //let vertexShader =   getShader(gl,   \"shader-vs\");\n    let fragmentShader = getShader(gl, densityShaders.fragmentShader, gl.FRAGMENT_SHADER);\n    let vertexShader = getShader(gl, densityShaders.vertexShader, gl.VERTEX_SHADER);\n\n    let program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        alert(\"Could not initialise shaders\");\n    }\n    gl.useProgram(program);\n    program.vertexPositionAttribute = gl.getAttribLocation(program, \"position\");\n    program.vertexKernelWeightAttribute = gl.getAttribLocation(program, \"kernel_weight\");\n    program.vertexOffsetAttribute = gl.getAttribLocation(program, \"offset\");\n\n    program.pMatrixUniform = gl.getUniformLocation(program, \"uPMatrix\");\n    program.mvMatrixUniform = gl.getUniformLocation(program, \"uMVMatrix\");\n    program.projectionMatrixUniform = gl.getUniformLocation(program, \"projectionMatrix\");\n\tprogram.viewMatrixUniform = gl.getUniformLocation(program, \"viewMatrix\");\n\t\n    program.bandwidthUniform = gl.getUniformLocation(program, \"bandwidth\");\n    program.bandwidthScaleUniform = gl.getUniformLocation(program, \"bandwidthScale\");\n    program.kernel_weightScaleUniform = gl.getUniformLocation(program, \"kernel_weightScale\");\n\n    return program;\n}\n\nfunction createShader2Dlut(gl) {\n    //    let frags = getShader(gl, \"shader-tex-lut-frag\");\n    //    let verts = getShader(gl, \"shader-tex-lut-vert\");\n    let frags = getShader(gl, densityShaders.textureFragmentShader, gl.FRAGMENT_SHADER);\n    let verts = getShader(gl, densityShaders.textureVertexShader, gl.VERTEX_SHADER);\n\n    let program = gl.createProgram();\n    gl.attachShader(program, verts);\n    gl.attachShader(program, frags);\n    gl.linkProgram(program);\n\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        alert(\"Could not initialise shaders\");\n    }\n    gl.useProgram(program);\n    program.vertexAttribute = gl.getAttribLocation(program, \"vertex\");\n    program.texCoordAttribute = gl.getAttribLocation(program, \"texCoord\");\n    //gl.enableVertexAttribArray(program.vertexAttribute);\n    //gl.enableVertexAttribArray(program.texCoordAttribute);\n\n    program.pMatrixUniform = gl.getUniformLocation(program, \"uPMatrix\");\n    program.mvMatrixUniform = gl.getUniformLocation(program, \"uMVMatrix\");\n    program.input_texUniform = gl.getUniformLocation(program, \"input_tex\");\n    program.lut_texUniform = gl.getUniformLocation(program, \"lut_tex\");\n\tprogram.divergingUniform = gl.getUniformLocation(program, \"diverging\");\n    return program;\n}\n\n\nfunction log_it(what) {\n    console.log(what);\n}\n\n\nexport class DensityGL {\n\tconstructor(gl,width,height,qualityScale=0.10) {\n\t\tthis.gl = gl;\n\t\tthis.FBO;\n\t\tthis.lutShader;\n\t\tthis.shaderProgram;\n\t\tthis.mvMatrix;\n\t\tthis.pMatrix;\n\t\tthis.qualityScale=qualityScale;\n\t\tthis._divergingColormap = false;\n\n\n\t\tthis.bandwidth = [5.5, 5.5];\n\t\tthis.bandwidthScale = 5.0;\n\t\tthis.kernel_weightScale = 0.5;\n\n\t\tthis.triangleVertexPositionBuffer;\n\t\tthis.squareVertexPositionBuffer;\n\n\t\tthis.PANEL_TEX_COORDS = [0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0];\n\t\tthis.PANEL_TEX_POS = [0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0];\n\t\tthis.QUAD_POS_BUFFER;\n\t\tthis.QUAD_COORD_BUFFER;\n\t\tthis.LUT_TEX;\n\n\t\t// DATASET Related:\n\t\tthis.DATA = null;\n\t\tthis.kernel_weights = null;\n\n\t\tthis.resize(width,height)\n\n\t\tthis.shaderProgram = createShader(this.gl);\n\t\tthis.lutShader = createShader2Dlut(this.gl);\n\t\tthis.initBuffers();\n\n\t\t// this.gl.clearColor(0.0, 0.0, 0.0, 1.0);\n\t\t// this.gl.clearDepth(1.0)\n\t\t// this.gl.disable(this.gl.DEPTH_TEST);\n\n\t\tthis.setColormap();\n\t}\n\n\n\n\tloadIdentity() {\n\t\tthis.mvMatrix = Matrix.I(4);\n\t}\n\n\tmultMatrix(m) {\n\t\tthis.mvMatrix = this.mvMatrix.x(m);\n\t}\n\n\tmvScale(s) {\n\t\tthis.mvMatrix.elements[0][0] *= s[0];\n\t\tthis.mvMatrix.elements[0][1] *= s[0];\n\t\tthis.mvMatrix.elements[0][2] *= s[0];\n\t\tthis.mvMatrix.elements[0][3] *= s[0];\n\n\t\tthis.mvMatrix.elements[1][0] *= s[1];\n\t\tthis.mvMatrix.elements[1][1] *= s[1];\n\t\tthis.mvMatrix.elements[1][2] *= s[1];\n\t\tthis.mvMatrix.elements[1][3] *= s[1];\n\n\t\tthis.mvMatrix.elements[2][0] *= s[2];\n\t\tthis.mvMatrix.elements[2][1] *= s[2];\n\t\tthis.mvMatrix.elements[2][2] *= s[2];\n\t\tthis.mvMatrix.elements[2][3] *= s[2];\n\t}\n\n\tmvTranslate(v) {\n\t\tvar m = Matrix.Translation($V([v[0], v[1], v[2]])).ensure4x4();\n\t\tthis.multMatrix(m);\n\t}\n\n\tperspective(fovy, aspect, znear, zfar) {\n\t\tthis.pMatrix = makePerspective(fovy, aspect, znear, zfar);\n\t}\n\n\tortho(xmin, xmax, ymin, ymax) {\n\t\tthis.pMatrix = makeOrtho(xmin, xmax, ymin, ymax, -1, 1);\n\t}\n\n\tsetMatrixUniforms(program) {\n\t\tthis.gl.uniformMatrix4fv(program.pMatrixUniform, false, new Float32Array(this.pMatrix.flatten()));\n\t\tthis.gl.uniformMatrix4fv(program.mvMatrixUniform, false, new Float32Array(this.mvMatrix.flatten()));\n\t}\n\n\tinitBuffers() {\n\t\tlet gl = this.gl;\n\t\tthis.triangleVertexPositionBuffer = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.triangleVertexPositionBuffer);\n\t\tvar vertices = [\n\t\t\t0.0, 1.0, 0.0, -1.0, -1.0, 0.0,\n\t\t\t1.0, -1.0, 0.0\n\t\t];\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n\t\tthis.triangleVertexPositionBuffer.itemSize = 3;\n\t\tthis.triangleVertexPositionBuffer.numItems = 3;\n\n\t\tthis.squareVertexPositionBuffer = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.squareVertexPositionBuffer);\n\t\tvertices = [\n\t\t\t1.0, 1.0, 0.0, -1.0, 1.0, 0.0,\n\t\t\t1.0, -1.0, 0.0, -1.0, -1.0, 0.0\n\t\t];\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n\t\tthis.squareVertexPositionBuffer.itemSize = 3;\n\t\tthis.squareVertexPositionBuffer.numItems = 4;\n\n\t\tthis.QUAD_POS_BUFFER = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.QUAD_POS_BUFFER);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.PANEL_TEX_POS), gl.STATIC_DRAW);\n\t\tthis.QUAD_POS_BUFFER.itemSize = 2;\n\t\tthis.QUAD_POS_BUFFER.numItems = 6;\n\n\t\tthis.QUAD_COORD_BUFFER = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.QUAD_COORD_BUFFER);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.PANEL_TEX_COORDS), gl.STATIC_DRAW);\n\t\tthis.QUAD_COORD_BUFFER.itemSize = 2;\n\t\tthis.QUAD_COORD_BUFFER.numItems = 6;\n\n\t\tthis.nodesGeometry = glUtils.makePlane(gl, false, false);\n\t\t\n\t}\n\n\n\tdrawScene(projectionMatrix,viewMatrix) {\n\t\tlet w = this.width;\n\t\tlet h = this.height;\n\n\t\tlet gl = this.gl;\n\n\t\tlet ext = gl.getExtension(\"ANGLE_instanced_arrays\");\n\t\t//current framebuffer\n\t\tlet currentFBO = gl.getParameter(gl.FRAMEBUFFER_BINDING);\n\n\t\t//currentViewport\n\t\tlet currentViewport = gl.getParameter(gl.VIEWPORT);\n\n\t\tgl.viewport(0, 0, w*this.qualityScale, h*this.qualityScale);\n\t\tthis.ortho(0, w, h, 0);\n\t\tthis.loadIdentity();\n\n\t\tthis.projectionMatrix = projectionMatrix;\n\t\tthis.viewMatrix = viewMatrix;\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.FBO.id);\n\t\tgl.clearColor(0.0, 0.0, 0.0, 1.0);\n\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\t\tgl.enable(gl.BLEND);\n\t\tgl.blendFunc(gl.ONE, gl.ONE);\n\n\t\tgl.useProgram(this.shaderProgram);\n\t\tthis.setMatrixUniforms(this.shaderProgram);\n\t\t\n\t\t//gl.uniform2f(shaderProgram.bandwidthUniform, bandwidth );\n\t\tgl.uniform1f(this.shaderProgram.bandwidthScaleUniform, this.bandwidthScale);\n\t\t\n\t\t// console.log(this.projectionMatrix)\n\t\tgl.uniformMatrix4fv(this.shaderProgram.viewMatrixUniform,false, this.viewMatrix);\n\t\tgl.uniformMatrix4fv(this.shaderProgram.projectionMatrixUniform, false, this.projectionMatrix)\n\t\tgl.uniform2f(this.shaderProgram.bandwidthUniform, this.bandwidth[0], this.bandwidth[1]);\n\t\tgl.uniform1f(this.shaderProgram.kernel_weightScaleUniform, this.kernel_weightScale);\n\n\t\tgl.enableVertexAttribArray(this.shaderProgram.vertexPositionAttribute);\n\t\tgl.enableVertexAttribArray(this.shaderProgram.vertexKernelWeightAttribute);\n\t\tgl.enableVertexAttribArray(this.shaderProgram.vertexOffsetAttribute);\n\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesGeometry.vertexObject);\n\t\tgl.vertexAttribPointer(this.shaderProgram.vertexOffsetAttribute, 3, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(this.shaderProgram.vertexOffsetAttribute, 0);\n\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.kernelWeightsBuffer);\n\t\tgl.vertexAttribPointer(this.shaderProgram.vertexKernelWeightAttribute, 1, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(this.shaderProgram.vertexKernelWeightAttribute, 1);\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.positionsBuffer);\n\t\tgl.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute, this.positionsBuffer.itemSize, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(this.shaderProgram.vertexPositionAttribute, 1);\n\n\t\t// for (let i = 0; i < this.BUFFER_LIST.length; i += 1) {\n\t\t\t// let buffer = this.BUFFER_LIST[i];\n\n\n\t\t\t\n\t\t\t// gl.drawArrays(gl.TRIANGLES, 0, buffers[0].numItems);\n\t\t\t\n\t\t\t// gl.bindBuffer(gl.ARRAY_BUFFER, buffers[1]);\n\t\t\t// gl.vertexAttribPointer(this.shaderProgram.vertexOffsetAttribute, buffers[1].itemSize, gl.FLOAT, false, 0, 0);\n\t\t\t// gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\t\t\tif (this.nodesGeometry.indexObject) {\n\t\t\t\text.drawElementsInstancedANGLE(gl.TRIANGLES, this.nodesGeometry.numIndices, this.nodesGeometry.indexType, 0, this.positionsBuffer.numItems);\n\t\t\t} else {\n\t\t\t\text.drawArraysInstancedANGLE(gl.TRIANGLE_STRIP, 0, this.nodesGeometry.numIndices, this.positionsBuffer.numItems);\n\t\t\t}\n\t\t\text.vertexAttribDivisorANGLE(this.shaderProgram.vertexPositionAttribute, 0);\n\t\t\text.vertexAttribDivisorANGLE(this.shaderProgram.vertexKernelWeightAttribute, 0);\n\t\t\t\n\t\t// }\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, currentFBO);\n\t\tgl.disableVertexAttribArray(this.shaderProgram.vertexPositionAttribute);\n\t\tgl.disableVertexAttribArray(this.shaderProgram.vertexKernelWeightAttribute);\n\t\tgl.disableVertexAttribArray(this.shaderProgram.vertexOffsetAttribute);\n\t\tgl.disable(gl.BLEND);\n\t\t\n\t\tgl.viewport(currentViewport[0], currentViewport[1], currentViewport[2], currentViewport[3]);\n\t\t//*\n\t\tgl.activeTexture(gl.TEXTURE0);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.FBO.tex);\n\t\tgl.activeTexture(gl.TEXTURE1);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.LUT_TEX);\n\n\t\tgl.useProgram(this.lutShader);\n\t\tgl.enableVertexAttribArray(this.lutShader.vertexAttribute);\n\t\tgl.enableVertexAttribArray(this.lutShader.texCoordAttribute);\n\t\tgl.uniform1i(this.lutShader.input_texUniform, 0);\n\t\tgl.uniform1i(this.lutShader.lut_texUniform, 1);\n\t\tgl.uniform1f(this.lutShader.divergingUniform, +this._divergingColormap);\n\t\tthis.ortho(0, 1, 0, 1);\n\t\tthis.loadIdentity();\n\t\tthis.setMatrixUniforms(this.lutShader);\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.QUAD_POS_BUFFER);\n\t\tgl.vertexAttribPointer(this.lutShader.vertexAttribute, this.QUAD_POS_BUFFER.itemSize, gl.FLOAT, false, 0, 0);\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.QUAD_COORD_BUFFER);\n\t\tgl.vertexAttribPointer(this.lutShader.texCoordAttribute, this.QUAD_COORD_BUFFER.itemSize, gl.FLOAT, false, 0, 0);\n\t\t\n\t\tgl.drawArrays(gl.TRIANGLES, 0, this.QUAD_POS_BUFFER.numItems);\n\t\tgl.disableVertexAttribArray(this.lutShader.vertexAttribute);\n\t\tgl.disableVertexAttribArray(this.lutShader.texCoordAttribute);\n\t\t//*/\n\t}\n\n\tresize(width, height, force = false){\n\t\t// if properties are not the same, resize the canvas\n\t\tif (this.width !== width || this.height !== height || force) {\n\t\t\tif(width>0){\n\t\t\t\tthis.width = width;\n\t\t\t}\n\t\t\tif(height>0){\n\t\t\t\tthis.height = height;\n\t\t\t}\n\t\t\tthis.deleteFBO();\n\t\t\tthis.create_FBO();\n\t\t}\n\t}\n\n\tcreate_FBO() {\n\t\tlet fboWidth = this.width*this.qualityScale;\n\t\tlet fboHeight = this.height*this.qualityScale;\n\t\tlet gl = this.gl;\n\n\t\ttry {\n\t\t\tvar FloatingPointTextureExtensionSupported = gl.getExtension(\"OES_texture_float\");\n\t\t\tvar FloatingPointTextureExtensionSupportedLinear = gl.getExtension(\"OES_texture_float_linear\");\n\t\t} catch (err) {\n\t\t\tvar FloatingPointTextureExtensionSupported = false;\n\t\t\tvar FloatingPointTextureExtensionSupportedLinear = false;\n\t\t}\n\n\t\tlet FBO = {};\n\t\tFBO.id = gl.createFramebuffer();\n\t\tFBO.tex = gl.createTexture();\n\t\tgl.bindTexture(gl.TEXTURE_2D, FBO.tex);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n\t\t//FloatingPointTextureExtensionSupported = false;\n\t\tif (FloatingPointTextureExtensionSupported && FloatingPointTextureExtensionSupportedLinear) {\n\t\t\tlog_it(\"[ OK ] Floating point textures (OES_texture_float) is supported\");\n\t\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, fboWidth, fboHeight, 0, gl.RGBA, gl.FLOAT, null);\n\t\t} else {\n\t\t\tlog_it(\"[FAIL] Floating point textures (OES_texture_float) is <B>NOT</B> supported, falling back to 8 bit blending. OES_texture_float is supported in Chrome dev version.\");\n\t\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, fboWidth, fboHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\t\t}\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, FBO.id);\n\t\tgl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, FBO.tex, 0);\n\n\t\tlet res = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n\t\tif (res == gl.FRAMEBUFFER_COMPLETE)\n\t\t\tlog_it(\"[ OK ] Framebuffer Initialization\");\n\t\telse if (res == gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT)\n\t\t\tlog_it(\"[FAIL] Framebuffer Creation FAIL GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT <br/> \\\n              Not all framebuffer attachment points are framebuffer attachment complete.\");\n\t\telse if (res == gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS)\n\t\t\tlog_it(\"[FAIL] Framebuffer Creation FAIL GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS <br/> \\\n              Not all attached images have the same width and height. \");\n\t\telse if (res == gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT)\n\t\t\tlog_it(\"[FAIL] Framebuffer Creation FAIL GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT <br/> No images are attached to the framebuffer. \");\n\t\telse if (res == gl.FRAMEBUFFER_INCOMPLETE_UNSUPPORTED)\n\t\t\tlog_it(\"[FAIL] Framebuffer Creation FAIL GL_FRAMEBUFFER_INCOMPLETE_UNSUPPORTED <br/> The combination of internal formats of the attached images violates an implementation-dependent set of restrictions.\");\n\t\telse if (res == gl.FRAMEBUFFER_UNSUPPORTED)\n\t\t\tlog_it(\"[FAIL] Framebuffer Creation FAIL GL_FRAMEBUFFER_UNSUPPORTED <br/> \\\n            The combination of internal formats of the attached images violates an implementation-dependent set of restrictions.\");\n\t\telse log_it(\"[FAIL] Framebuffer Creation FAIL Unknown Error\");\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\tthis.FBO = FBO;\n\t}\n\n\tdeleteFBO() {\n\t\tif(this.FBO){\n\t\t\tlet gl = this.gl;\n\t\t\tgl.deleteFramebuffer(this.FBO.id);\n\t\t\tgl.deleteTexture(this.FBO.tex);\n\t\t}\n\t}\n\n\tsetBandwidth(value) {\n\t\tthis.bandwidthScale = value;\n\t}\n\n\tsetKernelWeightScale(value) {\n\t\tthis.kernel_weightScale = value;\n\t}\n\n\n\tsetColormap(interpolateFunction, colorCount = 0) {\n\t\tself = this;\n\t\tlet gl = this.gl;\n\t\tlet colormapTexture = gl.createTexture();\n\t\tgl.bindTexture(gl.TEXTURE_2D, colormapTexture);\n\t\tif (colorCount <= 0) {\n\t\t\tcolorCount = 1024;\n\t\t}\n\t\tif (!interpolateFunction) {\n\t\t\tinterpolateFunction = d3Chromatic.interpolateInferno;\n\t\t\t// interpolateFunction = d3Chromatic.interpolateCividis;\n\t\t\t// interpolateFunction = d3Chromatic.interpolateGreys;\n\t\t\t// interpolateFunction = d3Chromatic.interpolateGreens;\n\t\t\t\n\t\t}\n\t\tvar colormapValues = new Uint8Array(colorCount * 4);\n\t\tfor (let i = 0; i < colorCount; i++) {\n\t\t\tlet scale = i / (colorCount - 1);\n\t\t\tlet rgbColor = d3rgb(interpolateFunction(scale));\n\n\t\t\tcolormapValues[i * 4 + 0] = rgbColor.r;\n\t\t\tcolormapValues[i * 4 + 1] = rgbColor.g;\n\t\t\tcolormapValues[i * 4 + 2] = rgbColor.b;\n\t\t\tcolormapValues[i * 4 + 3] = 0.1;\n\t\t}\n\n\t\t//gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, colorCount, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, colormapValues);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t\tthis.LUT_TEX = colormapTexture;\n\t}\n\n\n\n\tsetData(newData) {\n\t\tthis.DATA = newData;\n\t\tthis.updateTheDatabuffer();\n\n\t}\n\n\tsetWeights(newWeights){\n\t\tthis.kernel_weights = newWeights;\n\t\tthis.updateTheKernelWeightsBuffer();\n\t\t// console.log(newWeights);\n\t}\n\n\n\tupdate_span() {\n\t\tlet xmin,ymin;\n\t\tlet xmax,ymax;\n\t\txmin = ymin = 9999999999999;\n\t\txmax = ymax = -9999999999999;\n\t\tfor (let i = 0; i < this.DATA.length; i += 1) {\n\t\t\tlet x = this.DATA[i][0];\n\t\t\tlet y = this.DATA[i][1];\n\t\t\txmin = Math.min(xmin, x);\n\t\t\txmax = Math.max(xmax, x);\n\t\t\tymin = Math.min(ymin, y);\n\t\t\tymax = Math.max(ymax, y);\n\t\t}\n\t\t//this.bandwidth[0] = (xmax - xmin) * 0.075;\n\t\t//this.bandwidth[1] = (ymax - ymin) * 0.075;\n\t\t// Please excuse this magic 100\n\t\t//this.kernel_weightScale = 100.0 / this.DATA.length;\n\t}\n\n\n\n\tupdateTheDatabuffer() {\n\t\tlet gl = this.gl;\n\n\t\t// var flat_array = [];\n\t\t// for (let i = 0; i < this.DATA.length; i += 1) {\n\t\t// \tlet offset = i * 3;\n\t\t// \tlet offset_offsets = i * 12;\n\t\t// \tflat_array[offset + 0] = this.DATA[i][0];\n\t\t// \tflat_array[offset + 1] = this.DATA[i][1];\n\t\t// \tflat_array[offset + 2] = 0.0;\n\t\t// }\n\n\t\tif(!this.positionsBuffer){\n\t\t\tthis.positionsBuffer = gl.createBuffer();\n\t\t\tthis.positionsBuffer.itemSize = 3;\n\t\t}\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.positionsBuffer);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, this.DATA, gl.DYNAMIC_DRAW);\n\t\tthis.positionsBuffer.numItems = this.DATA.length / 3;\n\n\t\t// this.BUFFER_LIST.pop();\n\t\t// this.BUFFER_LIST.push(scatter_vertices);\n\t\tthis.update_span();\n\t}\n\n\n\tupdateTheKernelWeightsBuffer() {\n\t\tlet gl = this.gl;\n\t\t\n\t\tif(!this.kernelWeightsBuffer){\n\t\t\tthis.kernelWeightsBuffer = gl.createBuffer();\n\t\t\tthis.kernelWeightsBuffer.itemSize = 1;\n\t\t}\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.kernelWeightsBuffer);\n\t\t// if\n\t\tgl.bufferData(gl.ARRAY_BUFFER, this.kernel_weights, gl.DYNAMIC_DRAW);\n\t\tthis.kernelWeightsBuffer.numItems = this.kernel_weights.length;\n\n\t\t// this.BUFFER_LIST.pop();\n\t\t// this.BUFFER_LIST.push(scatter_vertices);\n\t\t// this.update_span();\n\t}\n\t\n\tqualityScale(value) {\n\t\t// return quality scale if value is not provided otherwise set the quality scale\n\t\tif (value === undefined) {\n\t\t\treturn this.quality_scale;\n\t\t}\n\t\tif(this.quality_scale!=value){\n\t\t\tthis.quality_scale = value;\n\t\t\tthis.resize(0,0,true);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tdivergingColormap(value) {\n\t\t// return quality scale if value is not provided otherwise set the quality scale\n\t\tif (value === undefined) {\n\t\t\treturn this._divergingColormap;\n\t\t}\n\t\tif(this._divergingColormap!=value){\n\t\t\tthis._divergingColormap = value;\n\t\t\tconsole.log(\"DIVERGING COLORMAP\",value);\n\t\t}\n\t\treturn this;\n\t}\n\n\tcleanup() {\n\t\tlet gl = this.gl;\n\t\tgl.deleteBuffer(this.positionsBuffer);\n\t\tgl.deleteBuffer(this.kernelWeightsBuffer);\n\t\tgl.deleteTexture(this.LUT_TEX);\n\t\tgl.deleteProgram(this.program);\n\t\tgl.deleteFramebuffer(this.framebuffer);\n\t\tgl.deleteRenderbuffer(this.renderbuffer);\n\t\tgl.deleteTexture(this.texture);\n\t\t// gl.deleteVertexArray(this.vao);\n\n\t\tthis.positionsBuffer = null;\n\t\tthis.kernelWeightsBuffer = null;\n\t\tthis.LUT_TEX = null;\n\t\tthis.program = null;\n\t\tthis.framebuffer = null;\n\t\tthis.renderbuffer = null;\n\t\tthis.texture = null;\n\t\t// this.vao = null;\n\n\t\tthis.DATA = null;\n\t\tthis.kernel_weights = null;\n\t\tthis.BUFFER_LIST = null;\n\n\t\tthis.gl = null;\n\t}\n\n}","/**\n * Prints tree horizontally\n * @param  {Node}                       root\n * @param  {Function(node:Node):String} [printNode]\n * @return {String}\n */\nexport function print (root, printNode = (n) => n.key) {\n  var out = [];\n  row(root, '', true, (v) => out.push(v), printNode);\n  return out.join('');\n}\n\n/**\n * Prints level of the tree\n * @param  {Node}                        root\n * @param  {String}                      prefix\n * @param  {Boolean}                     isTail\n * @param  {Function(in:string):void}    out\n * @param  {Function(node:Node):String}  printNode\n */\nfunction row (root, prefix, isTail, out, printNode) {\n  if (root) {\n    out(`${ prefix }${ isTail ? '└── ' : '├── ' }${ printNode(root) }\\n`);\n    const indent = prefix + (isTail ? '    ' : '│   ');\n    if (root.left)  row(root.left,  indent, false, out, printNode);\n    if (root.right) row(root.right, indent, true,  out, printNode);\n  }\n}\n\n/**\n * Is the tree balanced (none of the subtrees differ in height by more than 1)\n * @param  {Node}    root\n * @return {Boolean}\n */\nexport function isBalanced(root) {\n  if (root === null) return true; // If node is empty then return true\n\n  // Get the height of left and right sub trees\n  var lh = height(root.left);\n  var rh = height(root.right);\n\n  if (Math.abs(lh - rh) <= 1 &&\n      isBalanced(root.left)  &&\n      isBalanced(root.right)) return true;\n\n  // If we reach here then tree is not height-balanced\n  return false;\n}\n\n/**\n * The function Compute the 'height' of a tree.\n * Height is the number of nodes along the longest path\n * from the root node down to the farthest leaf node.\n *\n * @param  {Node} node\n * @return {Number}\n */\nfunction height(node) {\n  return node ? (1 + Math.max(height(node.left), height(node.right))) : 0;\n}\n\nexport function loadRecursive (parent, keys, values, start, end) {\n  const size = end - start;\n  if (size > 0) {\n    const middle = start + Math.floor(size / 2);\n    const key    = keys[middle];\n    const data   = values[middle];\n    const node   = { key, data, parent };\n    node.left    = loadRecursive(node, keys, values, start, middle);\n    node.right   = loadRecursive(node, keys, values, middle + 1, end);\n    return node;\n  }\n  return null;\n}\n\nexport function markBalance(node) {\n  if (node === null) return 0;\n  const lh = markBalance(node.left);\n  const rh = markBalance(node.right);\n\n  node.balanceFactor = lh - rh;\n  return Math.max(lh, rh) + 1;\n}\n\nexport function sort(keys, values, left, right, compare) {\n  if (left >= right) return;\n\n  // eslint-disable-next-line no-bitwise\n  const pivot = keys[(left + right) >> 1];\n  let i = left - 1;\n  let j = right + 1;\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    do i++; while (compare(keys[i], pivot) < 0);\n    do j--; while (compare(keys[j], pivot) > 0);\n    if (i >= j) break;\n\n    let tmp = keys[i];\n    keys[i] = keys[j];\n    keys[j] = tmp;\n\n    tmp = values[i];\n    values[i] = values[j];\n    values[j] = tmp;\n  }\n\n  sort(keys, values,  left,     j, compare);\n  sort(keys, values, j + 1, right, compare);\n}\n","import { print, isBalanced, loadRecursive, markBalance, sort } from './utils';\n\n// function createNode (parent, left, right, height, key, data) {\n//   return { parent, left, right, balanceFactor: height, key, data };\n// }\n\n/**\n * @typedef {{\n *   parent:        ?Node,\n *   left:          ?Node,\n *   right:         ?Node,\n *   balanceFactor: number,\n *   key:           Key,\n *   data:          Value\n * }} Node\n */\n\n/**\n * @typedef {*} Key\n */\n\n/**\n * @typedef {*} Value\n */\n\n/**\n * Default comparison function\n * @param {Key} a\n * @param {Key} b\n * @returns {number}\n */\nfunction DEFAULT_COMPARE (a, b) { return a > b ? 1 : a < b ? -1 : 0; }\n\n/**\n * Single left rotation\n * @param  {Node} node\n * @return {Node}\n */\nfunction rotateLeft (node) {\n  var rightNode = node.right;\n  node.right    = rightNode.left;\n\n  if (rightNode.left) rightNode.left.parent = node;\n\n  rightNode.parent = node.parent;\n  if (rightNode.parent) {\n    if (rightNode.parent.left === node) {\n      rightNode.parent.left = rightNode;\n    } else {\n      rightNode.parent.right = rightNode;\n    }\n  }\n\n  node.parent    = rightNode;\n  rightNode.left = node;\n\n  node.balanceFactor += 1;\n  if (rightNode.balanceFactor < 0) {\n    node.balanceFactor -= rightNode.balanceFactor;\n  }\n\n  rightNode.balanceFactor += 1;\n  if (node.balanceFactor > 0) {\n    rightNode.balanceFactor += node.balanceFactor;\n  }\n  return rightNode;\n}\n\nfunction rotateRight (node) {\n  var leftNode = node.left;\n  node.left = leftNode.right;\n  if (node.left) node.left.parent = node;\n\n  leftNode.parent = node.parent;\n  if (leftNode.parent) {\n    if (leftNode.parent.left === node) {\n      leftNode.parent.left = leftNode;\n    } else {\n      leftNode.parent.right = leftNode;\n    }\n  }\n\n  node.parent    = leftNode;\n  leftNode.right = node;\n\n  node.balanceFactor -= 1;\n  if (leftNode.balanceFactor > 0) {\n    node.balanceFactor -= leftNode.balanceFactor;\n  }\n\n  leftNode.balanceFactor -= 1;\n  if (node.balanceFactor < 0) {\n    leftNode.balanceFactor += node.balanceFactor;\n  }\n\n  return leftNode;\n}\n\n// function leftBalance (node) {\n//   if (node.left.balanceFactor === -1) rotateLeft(node.left);\n//   return rotateRight(node);\n// }\n\n// function rightBalance (node) {\n//   if (node.right.balanceFactor === 1) rotateRight(node.right);\n//   return rotateLeft(node);\n// }\n\nexport default class AVLTree {\n  /**\n   * Callback for comparator\n   * @callback comparatorCallback\n   * @param {Key} a\n   * @param {Key} b\n   * @returns {number}\n   */\n\n  /**\n   * @class AVLTree\n   * @constructor\n   * @param  {comparatorCallback} [comparator]\n   * @param  {boolean}            [noDuplicates=false] Disallow duplicates\n   */\n  constructor (comparator, noDuplicates = false) {\n    this._comparator = comparator || DEFAULT_COMPARE;\n    this._root = null;\n    this._size = 0;\n    this._noDuplicates = !!noDuplicates;\n  }\n\n  /**\n   * Clear the tree\n   * @return {AVLTree}\n   */\n  destroy() {\n    return this.clear();\n  }\n\n  /**\n   * Clear the tree\n   * @return {AVLTree}\n   */\n  clear() {\n    this._root = null;\n    this._size = 0;\n    return this;\n  }\n\n  /**\n   * Number of nodes\n   * @return {number}\n   */\n  get size () {\n    return this._size;\n  }\n\n  /**\n   * Whether the tree contains a node with the given key\n   * @param  {Key} key\n   * @return {boolean} true/false\n   */\n  contains (key) {\n    if (this._root)  {\n      var node       = this._root;\n      var comparator = this._comparator;\n      while (node)  {\n        var cmp = comparator(key, node.key);\n        if      (cmp === 0) return true;\n        else if (cmp < 0)   node = node.left;\n        else                node = node.right;\n      }\n    }\n    return false;\n  }\n\n  /* eslint-disable class-methods-use-this */\n\n  /**\n   * Successor node\n   * @param  {Node} node\n   * @return {?Node}\n   */\n  next (node) {\n    var successor = node;\n    if (successor) {\n      if (successor.right) {\n        successor = successor.right;\n        while (successor.left) successor = successor.left;\n      } else {\n        successor = node.parent;\n        while (successor && successor.right === node) {\n          node = successor; successor = successor.parent;\n        }\n      }\n    }\n    return successor;\n  }\n\n  /**\n   * Predecessor node\n   * @param  {Node} node\n   * @return {?Node}\n   */\n  prev (node) {\n    var predecessor = node;\n    if (predecessor) {\n      if (predecessor.left) {\n        predecessor = predecessor.left;\n        while (predecessor.right) predecessor = predecessor.right;\n      } else {\n        predecessor = node.parent;\n        while (predecessor && predecessor.left === node) {\n          node = predecessor;\n          predecessor = predecessor.parent;\n        }\n      }\n    }\n    return predecessor;\n  }\n  /* eslint-enable class-methods-use-this */\n\n  /**\n   * Callback for forEach\n   * @callback forEachCallback\n   * @param {Node} node\n   * @param {number} index\n   */\n\n  /**\n   * @param  {forEachCallback} callback\n   * @return {AVLTree}\n   */\n  forEach(callback) {\n    var current = this._root;\n    var s = [], done = false, i = 0;\n\n    while (!done) {\n      // Reach the left most Node of the current Node\n      if (current) {\n        // Place pointer to a tree node on the stack\n        // before traversing the node's left subtree\n        s.push(current);\n        current = current.left;\n      } else {\n        // BackTrack from the empty subtree and visit the Node\n        // at the top of the stack; however, if the stack is\n        // empty you are done\n        if (s.length > 0) {\n          current = s.pop();\n          callback(current, i++);\n\n          // We have visited the node and its left\n          // subtree. Now, it's right subtree's turn\n          current = current.right;\n        } else done = true;\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Walk key range from `low` to `high`. Stops if `fn` returns a value.\n   * @param  {Key}      low\n   * @param  {Key}      high\n   * @param  {Function} fn\n   * @param  {*?}       ctx\n   * @return {SplayTree}\n   */\n  range(low, high, fn, ctx) {\n    const Q = [];\n    const compare = this._comparator;\n    let node = this._root, cmp;\n\n    while (Q.length !== 0 || node) {\n      if (node) {\n        Q.push(node);\n        node = node.left;\n      } else {\n        node = Q.pop();\n        cmp = compare(node.key, high);\n        if (cmp > 0) {\n          break;\n        } else if (compare(node.key, low) >= 0) {\n          if (fn.call(ctx, node)) return this; // stop if smth is returned\n        }\n        node = node.right;\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Returns all keys in order\n   * @return {Array<Key>}\n   */\n  keys () {\n    var current = this._root;\n    var s = [], r = [], done = false;\n\n    while (!done) {\n      if (current) {\n        s.push(current);\n        current = current.left;\n      } else {\n        if (s.length > 0) {\n          current = s.pop();\n          r.push(current.key);\n          current = current.right;\n        } else done = true;\n      }\n    }\n    return r;\n  }\n\n  /**\n   * Returns `data` fields of all nodes in order.\n   * @return {Array<Value>}\n   */\n  values () {\n    var current = this._root;\n    var s = [], r = [], done = false;\n\n    while (!done) {\n      if (current) {\n        s.push(current);\n        current = current.left;\n      } else {\n        if (s.length > 0) {\n          current = s.pop();\n          r.push(current.data);\n          current = current.right;\n        } else done = true;\n      }\n    }\n    return r;\n  }\n\n  /**\n   * Returns node at given index\n   * @param  {number} index\n   * @return {?Node}\n   */\n  at (index) {\n    // removed after a consideration, more misleading than useful\n    // index = index % this.size;\n    // if (index < 0) index = this.size - index;\n\n    var current = this._root;\n    var s = [], done = false, i = 0;\n\n    while (!done) {\n      if (current) {\n        s.push(current);\n        current = current.left;\n      } else {\n        if (s.length > 0) {\n          current = s.pop();\n          if (i === index) return current;\n          i++;\n          current = current.right;\n        } else done = true;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Returns node with the minimum key\n   * @return {?Node}\n   */\n  minNode () {\n    var node = this._root;\n    if (!node) return null;\n    while (node.left) node = node.left;\n    return node;\n  }\n\n  /**\n   * Returns node with the max key\n   * @return {?Node}\n   */\n  maxNode () {\n    var node = this._root;\n    if (!node) return null;\n    while (node.right) node = node.right;\n    return node;\n  }\n\n  /**\n   * Min key\n   * @return {?Key}\n   */\n  min () {\n    var node = this._root;\n    if (!node) return null;\n    while (node.left) node = node.left;\n    return node.key;\n  }\n\n  /**\n   * Max key\n   * @return {?Key}\n   */\n  max () {\n    var node = this._root;\n    if (!node) return null;\n    while (node.right) node = node.right;\n    return node.key;\n  }\n\n  /**\n   * @return {boolean} true/false\n   */\n  isEmpty() {\n    return !this._root;\n  }\n\n  /**\n   * Removes and returns the node with smallest key\n   * @return {?Node}\n   */\n  pop () {\n    var node = this._root, returnValue = null;\n    if (node) {\n      while (node.left) node = node.left;\n      returnValue = { key: node.key, data: node.data };\n      this.remove(node.key);\n    }\n    return returnValue;\n  }\n\n  /**\n   * Removes and returns the node with highest key\n   * @return {?Node}\n   */\n  popMax () {\n    var node = this._root, returnValue = null;\n    if (node) {\n      while (node.right) node = node.right;\n      returnValue = { key: node.key, data: node.data };\n      this.remove(node.key);\n    }\n    return returnValue;\n  }\n\n  /**\n   * Find node by key\n   * @param  {Key} key\n   * @return {?Node}\n   */\n  find (key) {\n    var root = this._root;\n    // if (root === null)    return null;\n    // if (key === root.key) return root;\n\n    var subtree = root, cmp;\n    var compare = this._comparator;\n    while (subtree) {\n      cmp = compare(key, subtree.key);\n      if      (cmp === 0) return subtree;\n      else if (cmp < 0)   subtree = subtree.left;\n      else                subtree = subtree.right;\n    }\n\n    return null;\n  }\n\n  /**\n   * Insert a node into the tree\n   * @param  {Key} key\n   * @param  {Value} [data]\n   * @return {?Node}\n   */\n  insert (key, data) {\n    if (!this._root) {\n      this._root = {\n        parent: null, left: null, right: null, balanceFactor: 0,\n        key, data\n      };\n      this._size++;\n      return this._root;\n    }\n\n    var compare = this._comparator;\n    var node    = this._root;\n    var parent  = null;\n    var cmp     = 0;\n\n    if (this._noDuplicates) {\n      while (node) {\n        cmp = compare(key, node.key);\n        parent = node;\n        if      (cmp === 0) return null;\n        else if (cmp < 0)   node = node.left;\n        else                node = node.right;\n      }\n    } else {\n      while (node) {\n        cmp = compare(key, node.key);\n        parent = node;\n        if      (cmp <= 0)  node = node.left; //return null;\n        else                node = node.right;\n      }\n    }\n\n    var newNode = {\n      left: null,\n      right: null,\n      balanceFactor: 0,\n      parent, key, data\n    };\n    var newRoot;\n    if (cmp <= 0) parent.left  = newNode;\n    else         parent.right = newNode;\n\n    while (parent) {\n      cmp = compare(parent.key, key);\n      if (cmp < 0) parent.balanceFactor -= 1;\n      else         parent.balanceFactor += 1;\n\n      if        (parent.balanceFactor === 0) break;\n      else if   (parent.balanceFactor < -1) {\n        // inlined\n        //var newRoot = rightBalance(parent);\n        if (parent.right.balanceFactor === 1) rotateRight(parent.right);\n        newRoot = rotateLeft(parent);\n\n        if (parent === this._root) this._root = newRoot;\n        break;\n      } else if (parent.balanceFactor > 1) {\n        // inlined\n        // var newRoot = leftBalance(parent);\n        if (parent.left.balanceFactor === -1) rotateLeft(parent.left);\n        newRoot = rotateRight(parent);\n\n        if (parent === this._root) this._root = newRoot;\n        break;\n      }\n      parent = parent.parent;\n    }\n\n    this._size++;\n    return newNode;\n  }\n\n  /**\n   * Removes the node from the tree. If not found, returns null.\n   * @param  {Key} key\n   * @return {?Node}\n   */\n  remove (key) {\n    if (!this._root) return null;\n\n    var node = this._root;\n    var compare = this._comparator;\n    var cmp = 0;\n\n    while (node) {\n      cmp = compare(key, node.key);\n      if      (cmp === 0) break;\n      else if (cmp < 0)   node = node.left;\n      else                node = node.right;\n    }\n    if (!node) return null;\n\n    var returnValue = node.key;\n    var max, min;\n\n    if (node.left) {\n      max = node.left;\n\n      while (max.left || max.right) {\n        while (max.right) max = max.right;\n\n        node.key = max.key;\n        node.data = max.data;\n        if (max.left) {\n          node = max;\n          max = max.left;\n        }\n      }\n\n      node.key  = max.key;\n      node.data = max.data;\n      node = max;\n    }\n\n    if (node.right) {\n      min = node.right;\n\n      while (min.left || min.right) {\n        while (min.left) min = min.left;\n\n        node.key  = min.key;\n        node.data = min.data;\n        if (min.right) {\n          node = min;\n          min = min.right;\n        }\n      }\n\n      node.key  = min.key;\n      node.data = min.data;\n      node = min;\n    }\n\n    var parent = node.parent;\n    var pp     = node;\n    var newRoot;\n\n    while (parent) {\n      if (parent.left === pp) parent.balanceFactor -= 1;\n      else                    parent.balanceFactor += 1;\n\n      if        (parent.balanceFactor < -1) {\n        // inlined\n        //var newRoot = rightBalance(parent);\n        if (parent.right.balanceFactor === 1) rotateRight(parent.right);\n        newRoot = rotateLeft(parent);\n\n        if (parent === this._root) this._root = newRoot;\n        parent = newRoot;\n      } else if (parent.balanceFactor > 1) {\n        // inlined\n        // var newRoot = leftBalance(parent);\n        if (parent.left.balanceFactor === -1) rotateLeft(parent.left);\n        newRoot = rotateRight(parent);\n\n        if (parent === this._root) this._root = newRoot;\n        parent = newRoot;\n      }\n\n      if (parent.balanceFactor === -1 || parent.balanceFactor === 1) break;\n\n      pp     = parent;\n      parent = parent.parent;\n    }\n\n    if (node.parent) {\n      if (node.parent.left === node) node.parent.left  = null;\n      else                           node.parent.right = null;\n    }\n\n    if (node === this._root) this._root = null;\n\n    this._size--;\n    return returnValue;\n  }\n\n  /**\n   * Bulk-load items\n   * @param  {Array<Key>}  keys\n   * @param  {Array<Value>}  [values]\n   * @return {AVLTree}\n   */\n  load(keys = [], values = [], presort) {\n    if (this._size !== 0) throw new Error('bulk-load: tree is not empty');\n    const size = keys.length;\n    if (presort) sort(keys, values, 0, size - 1, this._comparator);\n    this._root = loadRecursive(null, keys, values, 0, size);\n    markBalance(this._root);\n    this._size = size;\n    return this;\n  }\n\n  /**\n   * Returns true if the tree is balanced\n   * @return {boolean}\n   */\n  isBalanced() {\n    return isBalanced(this._root);\n  }\n\n  /**\n   * String representation of the tree - primitive horizontal print-out\n   * @param  {Function(Node):string} [printNode]\n   * @return {string}\n   */\n  toString (printNode) {\n    return print(this._root, printNode);\n  }\n}\n\nAVLTree.default = AVLTree;\n","\nimport {default as AVLTree} from \"avl\";\n\n\nexport class SortedValueMap {\n\n\tconstructor(ascending = true) {\n\n\t\tthis.map = new Map();\n\t\tthis.ascending = ascending;\n\n\n\t\tif (this.ascending) {\n\t\t\tthis.tree = new AVLTree((a, b) => {\n\t\t\t\tif (a.key === b.key) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\tif (a.value === b.value) {\n\t\t\t\t\treturn a.key < b.key ? -1 : 1;\n\t\t\t\t}\n\t\t\t\treturn a.value - b.value;\n\t\t\t});\n\t\t}else{\n\t\t\tthis.tree = new AVLTree((a, b) => {\n\t\t\t\tif (a.key === b.key) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\tif (a.value === b.value) {\n\t\t\t\t\treturn a.key < b.key ? -1 : 1;\n\t\t\t\t}\n\t\t\t\treturn b.value - a.value;\n\t\t\t});\n\t\t}\n\t}\n\n\n\tset(key, value) {\n\t\tif (this.map.has(key)) {\n\t\t\tconst oldValue = this.map.get(key);\n\t\t\tthis.tree.remove({ key, value: oldValue });\n\t\t}\n\t\tthis.map.set(key, value);\n\t\tthis.tree.insert({ key, value });\n\t}\n\n\n\tdelete(key) {\n\t\tif(this.map.has(key)){\n\t\t\tconst value = this.map.get(key);\n\t\t\tthis.map.delete(key);\n\t\t\tthis.tree.remove({ key, value });\n\t\t}\n\t}\n\n\n\tget(key) {\n\t\treturn this.map.get(key);\n\t}\n\n\n\tgetSortedKeys() {\n\t\treturn this.tree.keys().map(node => node.key);\n\t}\n\n\tgetSortedPairs() {\n\t\treturn this.tree.keys().map(node => [node.key, node.value]);\n\t}\n}\n\n","\nimport * as d3Ease from \"d3-ease\";\nimport { select as d3Select } from \"d3-selection\";\nimport { zoom as d3Zoom, zoomIdentity as d3ZoomIdentity } from \"d3-zoom\";\nimport * as glm from \"gl-matrix\";\nimport * as glUtils from \"../utilities/webgl.js\";\nimport { Network } from \"./Network.js\";\nimport { HeliosScheduler } from \"./Scheduler.js\";\n// import { drag as d3Drag } from \"d3-drag\";\n// import { default as createGraph } from \"ngraph.graph\"\n// import { default as createLayout } from \"ngraph.forcelayout\"\nimport { default as Pica } from \"pica\";\nimport { layoutWorker as d3ForceLayoutWorker } from \"../layouts/d3force3dLayoutWorker.js\";\nimport * as edgesShaders from \"../shaders/edges.js\";\nimport * as nodesShaders from \"../shaders/nodes.js\";\nimport { DensityGL } from \"../utilities/densityGL.js\";\nimport { SortedValueMap } from \"../utilities/SortedMap.js\";\n\n\nlet isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n\n// throttle function\nfunction _throttle(cb, delay = 250) {\n\tlet shouldWait = false\n\n\treturn (...args) => {\n\t\tif (shouldWait) return\n\n\t\tcb(...args)\n\t\tshouldWait = true\n\t\tsetTimeout(() => {\n\t\t\tshouldWait = false\n\t\t}, delay)\n\t}\n}\n\n/**\n * Helios object controls the network visualization visual parameters and layout\n */\nexport class Helios {\n\t// the class constructor\n\t/**\n\t * constructor description\n\t * @param {Object} config - The configuration object\n\t * @param {string} [config.elementID=\"helios\"] - The ID of the element to attach the canvas to\n\t * @param {boolean} [config.density=false] - Whether to display the density\n\t * @param {Object} [config.nodes={}] - The nodes object. should be a dictionary of node IDs and node attributes.\n\t * \t\t@see {@link Network#addNodes}\n\t * @param {Object[]} [config.edges=[]] - The edges array of objects. Each object should have source and target attributes.\n\t * \t\t@see {@link Network#addEdges}\n\t * @param {Network} [network=null] - Alternavely, a network object can be passed directly. If this is the case, the nodes and edges parameters are ignored.\n\t * \t\t@see {@link Network}\n\t * @param {boolean} [config.use2D=false] - Whether to use 2D mode\n\t * @param {boolean} [config.orthographic=false] - Whether to use orthographic projection instead of perspective\n\t * @param {boolean} [config.hyperbolic=false] - Whether to use hyperbolic mode\n\t * @param {boolean} [config.fastEdges=false] - Whether to use fast edges (edges have always 1 pixel width)\n\t * @param {boolean} [config.forceSupersample=false] - Whether to force supersampling (improves quality of the render even for high density displays)\n\t * @param {boolean} [config.autoStartLayout=true] - Whether to start the layout automatically\n\t * @param {boolean} [config.autoCleanup=true] - Whether to automatically cleanup helios if canvas or element is removed (useful for react and vue)\n\t * @param {Object} [config.webglOptions=defaults] - The webgl options object. See {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/getContext|getContext} for more information.\n\t * Defaults to \n\t * \n\t * \t{\n\t * \t\tantialias: true,\n\t * \t\tpowerPreference: \"high-performance\",\n\t * \t\tdesynchronized: true,\n\t * \t}\n\t * \n\t * \n\t * @example <caption>Example usage of the constructor.</caption>\n\t * // create a new helios object\n\t * let helios = new Helios({\n\t * \telementID: \"helios\",\n\t * \tnodes: {\n\t * \t\t\"0\": {label: \"Node 0\"},\n\t * \t\t\"1\": {label: \"Node 1\"},\n\t * \t\t\"2\": {label: \"Node 2\"},\n\t * \t\t\"3\": {label: \"Node 3\"},\n\t * \t},\n\t * \tedges: [\n\t * \t\t{source: \"0\", target: \"1\"},\n\t * \t\t{source: \"1\", target: \"2\"},\n\t * \t\t{source: \"2\", target: \"3\"},\n\t * \t\t{source: \"3\", target: \"0\"},\n\t * \t],\n\t * });\n\t * \n\t*/\n\tconstructor({\n\t\telement = null,\n\t\telementID = null,\n\t\tdensity = false,\n\t\tnodes = {},\n\t\tedges = [],\n\t\tnetwork = null,\n\t\tuse2D = false,\n\t\torthographic = false,\n\t\thyperbolic = false,\n\t\tfastEdges = false,\n\t\ttracking = true,\n\t\tfieldOfView = 70,\n\t\tforceSupersample = false,\n\t\tautoStartLayout = true,\n\t\tautoCleanup = true, // cleanup helios if canvas or element is removed\n\t\twebglOptions = {},\n\t}) {\n\n\t\t/** @readonly */\n\t\tthis.element = null\n\t\tif (element == null) {\n\t\t\tthis.element = document.getElementById(elementID);\n\t\t} else {\n\t\t\tthis.element = element;\n\t\t}\n\t\tthis.element.innerHTML = '';\n\t\tconst containerPosition = getComputedStyle(this.element).position;\n\n\t\tif (containerPosition === 'static') {\n\t\t\tthis.container.style.position = 'relative';\n\t\t}\n\n\t\t/** @readonly */\n\t\tthis.canvasElement = document.createElement(\"canvas\");\n\t\t// make the canvas element fill the parent element\n\t\tthis.canvasElement.style.position = 'absolute';\n\t\tthis.canvasElement.style.width = '100%';\n\t\tthis.canvasElement.style.height = '100%';\n\t\tthis.canvasElement.style.display = 'block';\n\t\tthis.canvasElement.style.boxSizing = 'border-box';\n\t\tthis.element.appendChild(this.canvasElement);\n\n\t\tthis.svgLayer = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\t\t//SVG that takes the entire space of the canvas\n\t\tthis.svgLayer.style.position = 'absolute';\n\t\tthis.svgLayer.style.width = '100%';\n\t\tthis.svgLayer.style.height = '100%';\n\t\tthis.svgLayer.style.display = 'block';\n\t\tthis.svgLayer.style.boxSizing = 'border-box';\n\t\tthis.svgLayer.style.pointerEvents = 'none';\n\t\t// Do I need to setup the svg bounds?\n\t\tthis.element.appendChild(this.svgLayer);\n\n\t\tthis._canvasMargins = {\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t\tleft: 0,\n\t\t\tright: 0,\n\t\t}\n\n\t\tthis.overlay = document.createElement(\"div\");\n\t\tthis.overlay.style.position = 'absolute';\n\t\tthis.overlay.style.width = '100%';\n\t\tthis.overlay.style.height = '100%';\n\t\tthis.overlay.style.display = 'block';\n\t\tthis.overlay.style.boxSizing = 'border-box';\n\t\tthis.overlay.style.pointerEvents = 'none';\n\t\tthis.element.appendChild(this.overlay);\n\n\t\t\n\t\t/**\n\t\t * @public \n\t\t * @readonly\n\t\t * @type {Network}\n\t\t * @description The network object\n\t\t * @example<caption>Example usage of the network object.</caption>\n\t\t * // get the network object\n\t\t * let network = helios.network;\n\t\t * \n\t\t */\n\t\tif(network == null) {\n\t\t\tthis.network = new Network(nodes, edges);\n\t\t} else {\n\t\t\tthis.network = network;\n\t\t}\n\n\t\tthis._autoCleanup = autoCleanup;\n\t\tthis._hasCleanup = false;\n\n\t\tthis.rotationMatrix = glm.mat4.create();\n\n\t\tthis.translatePosition = glm.vec3.create();\n\t\tthis.lastTranslatePosition = glm.vec3.create();\n\t\tthis.targetTranslatePosition = glm.vec3.create();\n\n\t\tthis.lastPanX = 0;\n\t\tthis.lastPanY = 0;\n\t\tthis.panX = 0;\n\t\tthis.panY = 0;\n\t\tthis._fieldOfView = fieldOfView;\n\t\tthis.targetPanX = 0;\n\t\tthis.targetPanY = 0;\n\n\t\tthis.translateTime = 0;\n\t\tthis.translateDuration = 0;\n\t\tthis.mouseDown = false;\n\t\tthis.lastMouseX = null;\n\t\tthis.lastMouseY = null;\n\t\tthis.redrawingFromMouseWheelEvent = false;\n\t\tthis.fastEdges = fastEdges;\n\t\tthis.animate = false;\n\t\tthis.useShadedNodes = false;\n\t\tthis.forceSupersample = forceSupersample;\n\t\tthis.cameraDistance = 500;\n\t\tthis.interacting = false;\n\t\tthis.rotateLinearX = 0;\n\t\tthis.rotateLinearY = 0;\n\n\n\t\tthis.saveResolutionRatio = 1.0;\n\t\tthis.pickingResolutionRatio = 0.25;\n\t\tthis._trackingMaxPixels = 20000;\n\t\tthis._trackingBufferEnabled = tracking;\n\t\tthis._trackingBuffer = null;\n\t\tthis._trackingBufferTexture = null;\n\t\tthis._trackingBufferPixels = null;\n\t\tthis._attributeTrackers = {};\n\t\tthis._trackingNodeDataMinimumUpdateInterval = 200;\n\t\tthis._trackingNodeMinimumUpdateInterval = 1000 / 30;\n\n\n\t\tthis._updateTrackerNodesDataThrottle = _throttle(() => {\n\t\t\tthis._updateTrackerNodesData();\n\t\t}, this._trackingNodeDataMinimumUpdateInterval);\n\n\t\tthis._lastCanvasDimensions = [this.canvasElement.clientWidth, this.canvasElement.clientHeight];\n\n\t\tthis._zoomFactor = 1;\n\t\tthis._semanticZoomExponent = 0.25;\n\t\tthis._nodesGlobalOpacityScale = 1.0;\n\t\tthis._nodesGlobalOpacityBase = 0.0;\n\n\t\tthis._nodesGlobalSizeScale = 1.0;\n\t\tthis._nodesGlobalSizeBase = 0.0;\n\n\t\tthis._edgesGlobalOpacityScale = 1.0;\n\t\tthis._edgesGlobalOpacityBase = 0.0;\n\n\t\tthis._edgesGlobalWidthScale = 0.25;\n\t\tthis._edgesGlobalWidthBase = 0.0;\n\n\t\tthis._nodesGlobalOutlineWidthScale = 1.0;\n\t\tthis._nodesGlobalOutlineWidthBase = 0.0;\n\n\t\tthis._edgesColorsFromNodes = true;\n\t\tthis._edgesWidthFromNodes = true;\n\n\t\tthis._backgroundColor = [0.5, 0.5, 0.5, 1.0];\n\n\t\tthis._use2D = use2D || hyperbolic;\n\t\tthis._orthographic = orthographic || use2D;\n\t\tthis._hyperbolic = hyperbolic;\n\t\tthis._autoStartLayout = autoStartLayout;\n\t\tthis.useAdditiveBlending = false;\n\t\tthis._pickeableEdges = new Set();\n\t\tthis.scheduler = new HeliosScheduler(this, { throttle: false });\n\t\tthis._webglOptions = webglOptions;\n\n\t\tif (this._use2D) {\n\t\t\tfor (let vertexIndex = 0; vertexIndex < this.network.positions.length; vertexIndex++) {\n\t\t\t\tthis.network.positions[vertexIndex * 3 + 2] = 0;\n\t\t\t}\n\t\t}\n\n\t\tthis._edgeIndicesUpdate = true;\n\n\t\tglm.mat4.identity(this.rotationMatrix);\n\t\tthis.gl = glUtils.createWebGLContext(this.canvasElement, this._webglOptions);\n\n\t\tif (density) {\n\t\t\tthis.densityMap = new DensityGL(this.gl, this.canvasElement.clientWidth, this.canvasElement.clientHeight);\n\t\t\tthis.densityMap.setBandwidth(10);\n\t\t\tthis.densityMap.setKernelWeightScale(0.01);\n\t\t\tthis.densityPlot = true;\n\t\t}\n\n\t\tthis._centerNodes = [];\n\t\tthis._centerNodesTransition = null;\n\n\n\t\tthis.onNodeClickCallback = null;\n\t\tthis.onNodeDoubleClickCallback = null;\n\t\tthis.onNodeHoverStartCallback = null;\n\t\tthis.onNodeHoverMoveCallback = null;\n\t\tthis.onNodeHoverEndCallback = null;\n\n\t\tthis.onEdgeClickCallback = null;\n\t\tthis.onEdgeDoubleClickCallback = null;\n\t\tthis.onEdgeHoverStartCallback = null;\n\t\tthis.onEdgeHoverMoveCallback = null;\n\t\tthis.onEdgeHoverEndCallback = null;\n\n\n\t\tthis.onZoomCallback = null;\n\t\tthis.onRotationCallback = null;\n\t\tthis.onResizeCallback = null;\n\t\tthis.onLayoutStartCallback = null;\n\t\tthis.onLayoutStopCallback = null;\n\t\tthis.onDrawCallback = null;\n\t\tthis.onReadyCallback = null;\n\t\tthis.onCleanupCallback = null;\n\t\tthis._isReady = false;\n\n\n\n\t\tthis._onresizeEvent = (entries) => {\n\t\t\tif (this.canvasElement) {\n\t\t\t\tfor (let entry of entries) {\n\t\t\t\t\tthis._willResizeEvent(entry);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.resizeObserver = new ResizeObserver(this._onresizeEvent);\n\t\tthis.resizeObserver.observe(this.canvasElement);\n\n\n\t\tthis._initialize();\n\t}\n\n\n\t// d3-like function Set/Get\n\t//zoom()\n\t//rotate()\n\t//pan()\n\t//highlightNodes()\n\t//centerNode()\n\n\n\t/** Initialize the webgl context \n\t * @private\n\t * @method _initialize\n\t * @memberof Helios\n\t * @instance\n\t * \n\t*/\n\t_initialize() {\n\t\tthis._setupDensity();\n\t\tthis._setupShaders();\n\t\tthis._buildNodesGeometry();\n\t\tthis._buildPickingBuffers();\n\t\tthis._buildTrackingBuffers();\n\t\tthis._buildEdgesGeometry();\n\t\tthis._willResizeEvent(0);\n\n\t\tthis._setupCamera();\n\t\tthis._setupEvents();\n\t\tthis._setupLayout();\n\t\tthis.scheduler.start();\n\t\tthis.onReadyCallback?.(this);\n\t\t// this.redraw();\n\t\tthis.onReadyCallback = null;\n\n\t\tthis._isReady = true;\n\t}\n\n\t/** Setup the layout worker\n\t * @private\n\t * @method _setupLayout\n\t * @memberof Helios\n\t * @instance\n\t */\n\t_setupLayout() {\n\t\tthis._layoutLastUpdate = null;\n\t\tthis._alpha = 0.001;\n\t\t// this.layoutWorker = new Worker(new URL('../layouts/ngraphLayoutWorker.js', import.meta.url));\n\t\t// this.layoutWorker = new Worker(new URL('../layouts/d3force3dLayoutWorker.js', import.meta.url));\n\t\tthis.newPositions = this.network.positions.slice(0);\n\t\tlet onlayoutUpdate = (data) => {\n\t\t\tthis.newPositions = data.positions;\n\t\t\tif (!this._layoutLastUpdate) {\n\t\t\t\tthis._layoutLastUpdate = performance.now();\n\t\t\t}\n\t\t\tlet layoutElapsedTime = performance.now() - this._layoutLastUpdate;\n\t\t\tif (layoutElapsedTime < 200) {\n\t\t\t\tlayoutElapsedTime = 200;\n\t\t\t} else if (layoutElapsedTime > 2500) {\n\t\t\t\tlayoutElapsedTime = 2500;\n\t\t\t}\n\n\t\t\tthis._alpha = 1.0 / layoutElapsedTime;\n\n\t\t\tlet interpolatorTask = {\n\t\t\t\tname: \"1.1.positionInterpolator\",\n\t\t\t\tcallback: (elapsedTime, task) => {\n\t\t\t\t\tlet maxDisplacement = 0;\n\t\t\t\t\tconst alpha = this._alpha;\n\t\t\t\t\tconst positionsLength = this.network.positions.length;\n\t\t\t\t\tconst newPositions = this.newPositions;\n\t\t\t\t\tconst previousPositions = this.network.positions;\n\t\t\t\t\tfor (let index = 0; index < positionsLength; index++) {\n\t\t\t\t\t\tconst displacement = newPositions[index] - previousPositions[index];\n\n\t\t\t\t\t\tpreviousPositions[index] += alpha * (displacement) * elapsedTime;\n\n\t\t\t\t\t\tmaxDisplacement = Math.max(Math.abs(displacement), maxDisplacement);\n\t\t\t\t\t};\n\n\t\t\t\t\tthis._updateCenterNodesPosition();\n\t\t\t\t\tthis._updateCameraInterpolation(true);\n\t\t\t\t\t// console.log(this.scheduler._averageFPS);\n\n\t\t\t\t\tif (maxDisplacement < 1) {\n\t\t\t\t\t\tthis.scheduler.unschedule(\"1.1.positionInterpolator\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdelay: 0,\n\t\t\t\trepeat: true,\n\t\t\t\tsynchronized: true,\n\t\t\t\timmediateUpdates: false,\n\t\t\t\tredraw: true,\n\t\t\t\tupdateNodesGeometry: true,\n\t\t\t\tupdateEdgesGeometry: true,\n\t\t\t}\n\t\t\tthis.scheduler.schedule({\n\t\t\t\tname: \"1.0.positionChange\",\n\t\t\t\tcallback: (elapsedTime, task) => {\n\t\t\t\t\t// let maxDisplacement = 0;\n\t\t\t\t\t// for (let index = 0; index < this.network.positions.length; index++) {\n\t\t\t\t\t// \tlet displacement = this.newPositions[index] - this.network.positions[index];\n\t\t\t\t\t// \tmaxDisplacement = Math.max(Math.abs(displacement), maxDisplacement);\n\t\t\t\t\t// };\n\t\t\t\t\tthis.scheduler.schedule(interpolatorTask);\n\t\t\t\t\t// console.log(this.scheduler._averageFPS);\n\t\t\t\t},\n\t\t\t\tdelay: 0,\n\t\t\t\trepeat: false,\n\t\t\t\tsynchronized: true,\n\t\t\t\timmediateUpdates: false,\n\t\t\t\tredraw: false,\n\t\t\t\tupdateNodesGeometry: false,\n\t\t\t\tupdateEdgesGeometry: false,\n\t\t\t});\n\t\t};\n\n\t\tlet onLayoutStop = () => {\n\t\t\tthis.onLayoutStopCallback?.();\n\t\t}\n\n\t\tlet onLayoutStart = () => {\n\t\t\tthis._layoutLastUpdate = null;\n\t\t\tthis.onLayoutStartCallback?.();\n\t\t}\n\n\n\t\tthis.layoutWorker = new d3ForceLayoutWorker({\n\t\t\tnetwork: this.network,\n\t\t\tonUpdate: onlayoutUpdate,\n\t\t\tonStop: onLayoutStop,\n\t\t\tonStart: onLayoutStart,\n\t\t\tuse2D: this._use2D\n\t\t});\n\t\tconsole.log(\"Set layout worker\",this.layoutWorker)\n\n\t\tif (this._autoStartLayout) {\n\t\t\tthis.layoutWorker.start();\n\t\t\tconsole.log(\"Start\",this.layoutWorker)\n\t\t}\n\n\n\n\t}\n\n\t/** Setup the density map\n\t * @private\n\t * @method _setupDensity\n\t * @memberof Helios\n\t * @instance\n\t * \n\t */\n\t_setupDensity() {\n\n\t\tif (this.densityMap) {\n\t\t\tthis.densityWeights = new Float32Array(this.network.nodeCount);\n\t\t\tlet maxDegree = 1\n\t\t\tfor (let i = 0; i < this.network.nodeCount; i++) {\n\t\t\t\tlet degree = this.network.nodes[i].edges.length\n\t\t\t\tthis.densityWeights[i] = degree;\n\t\t\t\tmaxDegree = Math.max(maxDegree, degree);\n\t\t\t}\n\t\t\tfor (let i = 0; i < this.network.nodeCount; i++) {\n\t\t\t\tthis.densityWeights[i] /= maxDegree;\n\t\t\t}\n\t\t}\n\t}\n\n\n\t/**\n\t * Pauses the layout computation of the network visualization.\n\t * @public\n\t * @method pauseLayout\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @returns {this} Returns the current Helios instance for chaining\n\t * \n\t */\n\tpauseLayout() {\n\t\tthis.layoutWorker.pause();\n\t\tconsole.log(\"Pause\",this.layoutWorker)\n\t\treturn this;\n\t}\n\n\t/**\n\t * Resumes the layout computation of the network visualization after it has been paused.\n\t * @public\n\t * @method resumeLayout\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @returns {this} Returns the current Helios instance for chaining\n\t * \n\t */\n\tresumeLayout() {\n\t\tthis.layoutWorker.resume();\n\t\tconsole.log(\"Resume\",this.layoutWorker)\n\t\treturn this;\n\t}\n\n\t/**\n\t * Calls the appropriate event callback based on the given pickID, eventType, and event.\n\t * @private\n\t * @method _callEventFromPickID\n\t * @memberof Helios\n\t * @instance\n\t * @param {number} pickID - The unique identifier for the picked node or edge.\n\t * @param {string} eventType - The type of event to be triggered (e.g., click, doubleClick, hoverStart, hoverMove, hoverEnd).\n\t * @param {Event} event - The original DOM event associated with the interaction.\n\t * \n\t */\n\t_callEventFromPickID(pickID, eventType, event) {\n        let pickObject = null;\n        let isNode = true;\n        if (pickID >= 0) {\n            let nodePick = null;\n            // first check for nodes\n            if (pickID < this.network.nodeCount) {\n                isNode = true;\n                nodePick = this.network.index2Node[pickID];\n            }\n            \n            // only select edge if there is not a node\n            if (!nodePick && pickID >= this.network.nodeCount) {\n                let edgeIndex = pickID - this.network.nodeCount;\n                if (edgeIndex < this.network.indexedEdges.length / 2) {\n                    let edge = {\n                        \"source\": this.network.index2Node[this.network.indexedEdges[2 * edgeIndex]],\n                        \"target\": this.network.index2Node[this.network.indexedEdges[2 * edgeIndex + 1]],\n                        \"index\": edgeIndex\n                    }\n                    isNode = false;\n                    pickObject = edge;\n                }\n            }\n\n            if (nodePick) {\n                isNode = true;\n                pickObject = nodePick;\n            }\n\t\t}\n\t\t// if(eventType!=\"hoverMove\"){\n\t\t// \tconsole.log({\n\t\t// \t\tisNode: isNode,\n\t\t// \t\teventType: eventType,\n\t\t// \t\tpickObject: pickObject,\n\t\t// \t})\n\t\t// }\n\t\tif (pickObject) {\n\t\t\tswitch (eventType) {\n\t\t\t\tcase \"click\": {\n\t\t\t\t\tif (isNode) {\n\t\t\t\t\t\tthis.onNodeClickCallback?.(pickObject, event);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.onEdgeClickCallback?.(pickObject, event);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"doubleClick\": {\n\t\t\t\t\tif (isNode) {\n\t\t\t\t\t\tthis.onNodeDoubleClickCallback?.(pickObject, event);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.onEdgeDoubleClickCallback?.(pickObject, event);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"hoverStart\": {\n\t\t\t\t\tif (isNode) {\n\t\t\t\t\t\tthis.onNodeHoverStartCallback?.(pickObject, event);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.onEdgeHoverStartCallback?.(pickObject, event);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"hoverMove\": {\n\t\t\t\t\tif (isNode) {\n\t\t\t\t\t\tthis.onNodeHoverMoveCallback?.(pickObject, event);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.onEdgeHoverMoveCallback?.(pickObject, event);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"hoverEnd\": {\n\t\t\t\t\tif (isNode) {\n\t\t\t\t\t\tthis.onNodeHoverEndCallback?.(pickObject, event);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.onEdgeHoverEndCallback?.(pickObject, event);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Sets up event listeners for user interactions such as click, double-click, and hover events.\n\t * @private\n\t * @method _setupEvents\n\t * @memberof Helios\n\t * @instance\n\t * \n\t */\n\t_setupEvents() {\n\t\tthis.lastMouseX = -1;\n\t\tthis.lastMouseY = -1;\n\n\t\tthis.currentHoverIndex = -1;\n\n\t\tif (this._autoCleanup) {\n\t\t\tthis._mutationObserver = new MutationObserver((events) => {\n\t\t\t\tfor (let index = 0; index < events.length; index++) {\n\t\t\t\t\tlet event = events[index];\n\t\t\t\t\tif (event.type == \"childList\") {\n\t\t\t\t\t\tif (event.removedNodes.length > 0) {\n\t\t\t\t\t\t\tfor (let index = 0; index < event.removedNodes.length; index++) {\n\t\t\t\t\t\t\t\tlet element = event.removedNodes[index];\n\t\t\t\t\t\t\t\tif (element == this.canvasElement || element == this.element) {\n\t\t\t\t\t\t\t\t\tthis._mutationObserver.disconnect();\n\t\t\t\t\t\t\t\t\tthis.cleanup();\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if (element.removedNodes.length > 0) {\n\t\t\t\t// \tconsole.log(\"Element removed\");\n\t\t\t\t// \tthis._mutationObserver.disconnect();\n\t\t\t\t// \tthis.cleanup();\n\t\t\t\t// }\n\t\t\t});\n\n\t\t\tthis._mutationObserver.observe(this.element, { childList: true });\n\t\t\tthis._mutationObserver.observe(this.element.parentNode, { childList: true });\n\t\t}\n\n\t\t//Event listeners\n\t\tthis._clickEventListener = (event) => {\n\t\t\tconst rect = this.canvasElement.getBoundingClientRect();\n\n\t\t\tthis.lastMouseX = event.clientX;\n\t\t\tthis.lastMouseY = event.clientY;\n\t\t\tconst pickID = this.pickPoint(this.lastMouseX - rect.left, this.lastMouseY - rect.top);\n\t\t\tif (pickID >= 0) {\n\t\t\t\tthis._callEventFromPickID(pickID, \"click\", event);\n\t\t\t} else {\n\t\t\t\tthis.onNodeClickCallback?.(null, event);\n\t\t\t\tthis.onEdgeClickCallback?.(null, event);\n\t\t\t}\n\t\t};\n\n\t\tthis._doubleClickEventListener = (event) => {\n\t\t\tconst rect = this.canvasElement.getBoundingClientRect();\n\n\t\t\tthis.lastMouseX = event.clientX;\n\t\t\tthis.lastMouseY = event.clientY;\n\t\t\tconst pickID = this.pickPoint(this.lastMouseX - rect.left, this.lastMouseY - rect.top);\n\t\t\tif (pickID >= 0) {\n\t\t\t\tthis._callEventFromPickID(pickID, \"doubleClick\", event);\n\t\t\t} else {\n\t\t\t\tthis.onNodeDoubleClickCallback?.(null, event);\n\t\t\t\tthis.onEdgeDoubleClickCallback?.(null, event);\n\t\t\t}\n\t\t};\n\n\t\tthis._hoverMoveEventListener = (event) => {\n\t\t\tthis.lastMouseX = event.clientX;\n\t\t\tthis.lastMouseY = event.clientY;\n\t\t\n\t\t\tconst rect = this.canvasElement.getBoundingClientRect();\n\t\t\tconst pickID = this.pickPoint(this.lastMouseX - rect.left, this.lastMouseY - rect.top);\n\t\t\n\t\t\t// Prioritize nodes for hover events\n\t\t\tif (pickID >= 0) {\n\t\t\t\tthis._callEventFromPickID(pickID, \"hoverMove\", event);\n\t\t\t} else {\n\t\t\t\t// If no node or edge is found, trigger hover events with null\n\t\t\t\tthis.onNodeHoverMoveCallback?.(null, event);\n\t\t\t\tthis.onEdgeHoverMoveCallback?.(null, event);\n\t\t\t}\n\t\t};\n\t\t\n\n\t\tthis._hoverLeaveEventListener = (event) => {\n\t\t\tif (this.currentHoverIndex >= 0) {\n\t\t\t\tthis._callEventFromPickID(this.currentHoverIndex, \"hoverEnd\", event);\n\t\t\t\tthis.currentHoverIndex = -1;\n\t\t\t\tthis.lastMouseX = -1;\n\t\t\t\tthis.lastMouseY = -1;\n\t\t\t}\n\t\t};\n\n\t\tthis._hoverLeaveWindowEventListener = (event) => {\n\t\t\tif (!event.relatedTarget && !event.toElement) {\n\t\t\t\tif (this.currentHoverIndex >= 0) {\n\t\t\t\t\tthis._callEventFromPickID(this.currentHoverIndex, \"hoverEnd\", event);\n\t\t\t\t\tthis.currentHoverIndex = -1;\n\t\t\t\t\tthis.lastMouseX = -1;\n\t\t\t\t\tthis.lastMouseY = -1;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// this.canvasElement.onclick = this._clickEventListener;\n\t\t// this.canvasElement.ondblclick = this._doubleClickEventListener;\n\n\t\tthis.canvasElement.addEventListener(\"click\", this._clickEventListener);\n\t\tthis.canvasElement.addEventListener(\"dblclick\", this._doubleClickEventListener);\n\n\t\tthis.canvasElement.addEventListener(\"mousemove\", this._hoverMoveEventListener);\n\t\tthis.canvasElement.addEventListener(\"mouseleave\", this._hoverLeaveEventListener);\n\t\tdocument.body.addEventListener(\"mouseout\", this._hoverLeaveWindowEventListener);\n\t}\n\n\t/**\n\t * Downloads the image data as a file with the specified filename, supersampling factor, and file format.\n\t * @private\n\t * @method _downloadImageData\n\t * @memberof Helios\n\t * @instance\n\t * @param {ImageData} imageData - The image data to be downloaded.\n\t * @param {string} filename - The name of the file to be downloaded.\n\t * @param {number} supersampleFactor - The supersampling factor for resizing the image.\n\t * @returns {Promise<void>} A Promise that resolves when the download is complete.\n\t */\n\tasync _downloadImageData(imageData, filename, supersampleFactor, scale = 1.0) {\n\t\t// let canvas = document.getElementById('SUPERCANVAS');\n\t\tlet pica = new Pica({\n\t\t\t// features:[\"all\"],\n\t\t})\n\t\tlet canvas = document.createElement('canvas');\n\t\tlet canvasFullSize = document.createElement('canvas');\n\t\tlet ctx = canvas.getContext('2d');\n\t\tlet ctxFullSize = canvasFullSize.getContext('2d');\n\t\tcanvasFullSize.width = imageData.width;\n\t\tcanvasFullSize.height = imageData.height;\n\t\tconsole.log(imageData.width, imageData.height, supersampleFactor, scale);\n\t\tcanvas.width = imageData.width / supersampleFactor;\n\t\tcanvas.height = imageData.height / supersampleFactor;\n\t\tctx.imageSmoothingEnabled = true;\n\t\tctxFullSize.imageSmoothingEnabled = true;\n\t\tif (typeof ctx.imageSmoothingQuality !== 'undefined') {\n\t\t\tctx.imageSmoothingQuality = 'high';\n\t\t}\n\t\tif (typeof ctxFullSize.imageSmoothingQuality !== 'undefined') {\n\t\t\tctxFullSize.imageSmoothingQuality = 'high';\n\t\t}\n\n\t\t// let dpr = window.devicePixelRatio || 1;\n\t\t// canvas.style.width =  canvas.width/dpr/10 + \"px\";\n\t\t// canvas.style.height = canvas.height/dpr/10 + \"px\";\n\n\n\t\tctxFullSize.putImageData(imageData, 0, 0);\n\t\tctxFullSize.transform(1, 0, 0, -1, 0, canvasFullSize.height)\n\t\tctxFullSize.globalCompositeOperation = \"copy\"; // if you have transparent pixels\n\t\tctxFullSize.drawImage(ctxFullSize.canvas, 0, 0);\n\t\tctxFullSize.globalCompositeOperation = \"source-over\"; // reset to default\n\n\t\tawait pica.resize(canvasFullSize, canvas, {\n\t\t\talpha: true,\n\t\t});\n\n\t\t// ctxFullSize.drawImage(canvasFullSize, 0, 0,canvasFullSize.width*0.5,canvasFullSize.height*0.5,0,0,\n\t\t// \timagedata.width/supersampleFactor,\n\t\t// \timagedata.height/supersampleFactor);\n\t\t// ctx.drawImage(canvasFullSize, 0, 0,canvasFullSize.width,canvasFullSize.height,0,0,\n\t\t// \timagedata.width/supersampleFactor,\n\t\t// \timagedata.height/supersampleFactor);\n\n\n\t\t// let image = new Image();\n\t\t// let imageSRC = canvas.toDataURL()\n\t\t// image.src = imageSRC;\n\t\tlet downloadLink = document.createElement('a');\n\t\t// console.log([\"CANVAS\",imageSRC]);\n\n\n\t\tif (isSafari) {\n\t\t\t// BUG in Safari\n\t\t\t// console.log(\"Workaround safari bug...\");\n\t\t\tcanvas.toDataURL();\n\t\t}\n\n\t\tdownloadLink.setAttribute('download', filename);\n\t\tlet blob = await pica.toBlob(canvas, \"image/png\");\n\t\tif (blob) {\n\t\t\tif (filename.endsWith(\"svg\")) {\n\t\t\t\t//Create offscreen\n\t\t\t\t// let svgText = `\n\t\t\t\t// <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n\t\t\t\t// width=\"${canvas.width/scale}\" height=\"${canvas.height/scale}\"\n\t\t\t\t// >\n\t\t\t\t// <image\n\t\t\t\t// \t\twidth=\"${canvas.width/scale}\" height=\"${canvas.height/scale}\"\n\t\t\t\t// \t\txlink:href=\"${canvas.toDataURL()}\"\n\t\t\t\t// \t\t/>\n\t\t\t\t// `;\n\t\t\t\t// generate this svg using code\n\t\t\t\tlet svgText =\n\t\t\t\t\t`<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" ` +\n\t\t\t\t\t` width=\"${canvas.width / scale}\" height=\"${canvas.height / scale}\"` +\n\t\t\t\t\t` viewBox=\"0 0 ${canvas.width / scale} ${canvas.height / scale}\"` +\n\t\t\t\t\t` >` +\n\t\t\t\t\t`<image width=\"${canvas.width / scale}\" height=\"${canvas.height / scale}\" xlink:href=\"${canvas.toDataURL()}\" />`;\n\n\t\t\t\tlet svgLayerContent = this.svgLayer.innerHTML;\n\t\t\t\tsvgText += svgLayerContent;\n\n\t\t\t\tsvgText += `</svg>`;\n\t\t\t\tdownloadLink.setAttribute('download', filename);\n\t\t\t\tlet blobSVG = new Blob([svgText], { type: 'image/svg+xml' });\n\t\t\t\tlet url = URL.createObjectURL(blobSVG);\n\t\t\t\tdownloadLink.setAttribute('href', url);\n\t\t\t\tdownloadLink.click();\n\n\t\t\t} else {\n\t\t\t\tlet url = URL.createObjectURL(blob);\n\t\t\t\tdownloadLink.setAttribute('href', url);\n\t\t\t\tdownloadLink.click();\n\t\t\t}\n\t\t} else {\n\t\t\twindow.alert(`An error occured while trying to download the image. Please try again. (Error: blob is null.)`);\n\t\t\t// console.log(\"BLOB IS NULL\");\n\t\t}\n\n\t\t// if (filename.endsWith(\"svg\")) {\n\t\t// \tlet svgText = `\n\t\t// \t<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n\t\t// \twidth=\"${canvas.width}\" height=\"${canvas.width}\"\n\t\t// \t>\n\t\t// \t<image\n\t\t// \t\t\twidth=\"${canvas.width}\" height=\"${canvas.width}\"\n\t\t// \t\t\txlink:href=\"${canvas.toDataURL()}\"\n\t\t// \t\t\t/>\n\n\t\t// \t`;\n\t\t// \t// add contents of svgLayer to svgText without the svg tag\n\t\t// \tlet svgLayerContent = this.svgLayer.innerHTML;\n\t\t// \tsvgLayerContent = svgLayerContent.replace(/<svg[^>]*>/, \"\");\n\t\t// \tsvgLayerContent = svgLayerContent.replace(/<\\/svg>/, \"\");\n\t\t// \tsvgText += svgLayerContent;\n\n\t\t// \tsvgText+=`</svg>`;\n\t\t// \tdownloadLink.setAttribute('download', filename);\n\t\t// \tlet blob = new Blob([svgText], { type: 'image/svg+xml' });\n\t\t// \tlet url = URL.createObjectURL(blob);\n\t\t// \tdownloadLink.setAttribute('href', url);\n\t\t// \tdownloadLink.click();\n\t\t// } else if (false) {\n\t\t// \tdownloadLink.setAttribute('download', filename);\n\t\t// \tdownloadLink.setAttribute('href', canvas.toDataURL(\"image/png\").replace(\"image/png\", \"image/octet-stream\"));\n\t\t// \tdownloadLink.click();\n\t\t// } else {\n\n\t\t// \t// canvas.toBlob(function(blob) {\n\t\t// \t// \tconsole.log([\"CANVAS\",blob]);\n\t\t// \t// \tlet trials = 3;\n\t\t// \t// \tlet success = false;\n\t\t// \t// \tlet lastError = null;\n\t\t// \t// \twhile(trials>0 && !success){\n\t\t// \t// \t\t// FIXME: Safari BUG\n\t\t// \t// \t\ttry {\n\t\t// \t// \t\t\tlet url = URL.createObjectURL(blob);\n\t\t// \t// \t\t\tdownloadLink.setAttribute('href', url);\n\t\t// \t// \t\t\tdownloadLink.click();\n\t\t// \t// \t\t\tsuccess=true;\n\t\t// \t// \t\t} catch (error) {\n\t\t// \t// \t\t\tlastError = error;\n\t\t// \t// \t\t}\n\t\t// \t// \t\ttrials--;\n\t\t// \t// \t}\n\t\t// \t// \tif(!success){\n\t\t// \t// \t\twindow.alert(`An error occured while trying to download the image. Please try again. (Error: ${lastError})`)\n\t\t// \t// \t}\n\t\t// \t// });\n\t\t// }\n\t}\n\n\n\t/**\n\t * Returns the image data from the specified framebuffer.\n\t * @private\n\t * @method _framebufferImage\n\t * @memberof Helios\n\t * @instance\n\t * @param {WebGLFramebuffer} framebuffer - The WebGLFramebuffer from which to read the image data.\n\t * @returns {ImageData} An ImageData object containing the image data from the framebuffer.\n\t */\n\t_framebufferImage(framebuffer) {\n\t\tconst fbWidth = framebuffer.size.width;\n\t\tconst fbHeight = framebuffer.size.height;\n\t\tconst data = new Uint8ClampedArray(4 * fbWidth * fbHeight);\n\t\tconst gl = this.gl;\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n\t\tgl.readPixels(\n\t\t\t0,            // x\n\t\t\t0,            // y\n\t\t\tfbWidth,                 // width\n\t\t\tfbHeight,                 // height\n\t\t\tgl.RGBA,           // format\n\t\t\tgl.UNSIGNED_BYTE,  // type\n\t\t\tdata);             // typed array to hold result\n\n\t\treturn new ImageData(data, fbWidth, fbHeight);\n\t}\n\n\t/**\n\t * Exports the current figure to an image file.\n\t * @method exportFigure\n\t * @memberof Helios\n\t * @instance\n\t * @param {string} filename - The filename for the exported image, including the extension (e.g., \"image.png\").\n\t * @param {Object} options - An object containing export options.\n\t * @param {number} [options.scale=1.0] - The scale factor for the exported image.\n\t * @param {number} [options.supersampleFactor=4.0] - The supersampling factor for the exported image.\n\t * @param {number|null} [options.width=null] - The width of the exported image. If null, the current canvas width is used.\n\t * @param {number|null} [options.height=null] - The height of the exported image. If null, the current canvas height is used.\n\t * @param {string|null} [options.backgroundColor=null] - The background color of the exported image. If null, the current background color is used.\n\t * @example\n\t * helios.exportFigure(\"figure.png\", {\n\t *   scale: 1.0,\n\t *   supersampleFactor: 4.0,\n\t *   width: 800,\n\t *   height: 600,\n\t *   backgroundColor: \"#FFFFFF\",\n\t * });\n\t */\n\texportFigure(filename, {\n\t\tscale,\n\t\tsupersampleFactor,\n\t\twidth = null,\n\t\theight = null,\n\t\tbackgroundColor = null,\n\t}) {\n\t\tif (typeof (scale) === 'undefined') {\n\t\t\tscale = 1.0;\n\t\t}\n\t\tif (typeof (supersampleFactor) === 'undefined') {\n\t\t\tsupersampleFactor = 2.0;\n\t\t}\n\t\tlet framebuffer = this._createOffscreenFramebuffer();\n\t\tif (width == null && height == null) {\n\t\t\twidth = this.canvasElement.clientWidth;\n\t\t\theight = this.canvasElement.clientHeight;\n\t\t} else if (!width) {\n\t\t\twidth = Math.round(height * this.canvasElement.width / this.canvasElement.height);\n\t\t} else if (!height) {\n\t\t\theight = Math.round(width * this.canvasElement.height / this.canvasElement.width);\n\t\t}\n\t\tif (!backgroundColor) {\n\t\t\tbackgroundColor = this.backgroundColor;\n\t\t}\n\t\tframebuffer.setSize(width * scale * supersampleFactor, height * scale * supersampleFactor);\n\t\tframebuffer.backgroundColor = backgroundColor;\n\t\tthis._redrawAll(framebuffer);\n\t\tlet image = this._framebufferImage(framebuffer);\n\t\tthis._downloadImageData(image, filename, supersampleFactor, scale);\n\n\t\tframebuffer.discard();\n\t}\n\n\t/**\n\t * Forces triggering hover events based on the current mouse position.\n\t * @method triggerHoverEvents\n\t * @memberof Helios\n\t * @instance\n\t * @param {Event} event - The MouseEvent object associated with the triggering event (e.g., mousemove, touchmove).\n\t * @param {boolean} shallCancel - If true, the method returns immediately without triggering any events.\n\t * @example\n\t * helios.triggerHoverEvents(event, false);\n\t */\n\ttriggerHoverEvents(event, shallCancel) {\n\t\tif (!this._isReady) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.lastMouseX == -1 || this.lastMouseY == -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet pickID = -1;\n\t\tif (!this.interacting) {\n\t\t\tconst rect = this.canvasElement.getBoundingClientRect();\n\t\t\tpickID = this.pickPoint(this.lastMouseX - rect.left, this.lastMouseY - rect.top);\n\t\t}\n\t\t// let nodesCount = \n\t\tif (pickID >= 0 && this.currentHoverIndex == -1) {\n\t\t\tthis.currentHoverIndex = pickID;\n\t\t\tthis._callEventFromPickID(pickID, \"hoverStart\", event);\n\t\t} else if (pickID >= 0 && this.currentHoverIndex == pickID) {\n\t\t\t// console.log(\"mouse: \",this.lastMouseX,this.lastMouseY)\n\t\t\tthis._callEventFromPickID(pickID, \"hoverMove\", event);\n\t\t} else if (pickID >= 0 && this.currentHoverIndex != pickID) {\n\t\t\tthis._callEventFromPickID(this.currentHoverIndex, \"hoverEnd\", event);\n\t\t\tthis.currentHoverIndex = pickID;\n\t\t\tthis._callEventFromPickID(pickID, \"hoverStart\", event);\n\t\t} else if (pickID == -1 && this.currentHoverIndex != pickID) {\n\t\t\tthis._callEventFromPickID(this.currentHoverIndex, \"hoverEnd\", event);\n\t\t\tthis.currentHoverIndex = -1;\n\t\t}\n\t}\n\n\n\t/**\n\t * Initializes the shader programs used for rendering nodes and edges.\n\t * @method _setupShaders\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_setupShaders() {\n\t\tconst gl = this.gl;\n\n\t\tthis.edgesShaderProgram = new glUtils.ShaderProgram(\n\t\t\tglUtils.getShaderFromString(gl, this._hyperbolic ? edgesShaders.vertexHyperbolicShader : edgesShaders.vertexShader, gl.VERTEX_SHADER),\n\t\t\tglUtils.getShaderFromString(gl, edgesShaders.fragmentShader, gl.FRAGMENT_SHADER),\n\t\t\t[\"viewMatrix\", \"projectionMatrix\", \"nearFar\",\n\t\t\t\t\"globalOpacityScale\", \"globalWidthScale\", \"globalSizeScale\", \"globalOpacityBase\", \"globalWidthBase\", \"globalSizeBase\"],\n\t\t\t[\"fromVertex\", \"toVertex\", \"vertexType\", \"fromColor\", \"toColor\", \"fromSize\", \"toSize\", \"encodedIndex\"],\n\t\t\tthis.gl);\n\n\t\tthis.edgesFastShaderProgram = new glUtils.ShaderProgram(\n\t\t\tglUtils.getShaderFromString(gl, this._hyperbolic ? edgesShaders.fastVertexHyperbolicShader : edgesShaders.fastVertexShader, gl.VERTEX_SHADER),\n\t\t\tglUtils.getShaderFromString(gl, edgesShaders.fastFragmentShader, gl.FRAGMENT_SHADER),\n\t\t\t[\"projectionViewMatrix\", \"nearFar\", \"globalOpacityScale\", \"globalOpacityBase\"],\n\t\t\t[\"vertex\", \"color\"],\n\t\t\tthis.gl);\n\n\t\tthis.edgesPickingShaderProgram = new glUtils.ShaderProgram(\n\t\t\tglUtils.getShaderFromString(gl, this._hyperbolic ? edgesShaders.vertexHyperbolicShader : edgesShaders.vertexShader, gl.VERTEX_SHADER),\n\t\t\tglUtils.getShaderFromString(gl, edgesShaders.pickingShader, gl.FRAGMENT_SHADER),\n\t\t\t[\"viewMatrix\", \"projectionMatrix\", \"nearFar\",\n\t\t\t\t\"globalOpacityScale\", \"globalWidthScale\", \"globalSizeScale\", \"globalOpacityBase\", \"globalWidthBase\", \"globalSizeBase\"],\n\t\t\t[\"fromVertex\", \"toVertex\", \"vertexType\", \"fromColor\", \"toColor\", \"fromSize\", \"toSize\", \"encodedIndex\"],\n\t\t\tthis.gl);\n\n\n\t\tthis.nodesShaderProgram = new glUtils.ShaderProgram(\n\t\t\tglUtils.getShaderFromString(gl, this._hyperbolic ? nodesShaders.vertexHyperbolicShader : nodesShaders.vertexShader, gl.VERTEX_SHADER),\n\t\t\tglUtils.getShaderFromString(gl, nodesShaders.fragmentShader, gl.FRAGMENT_SHADER),\n\t\t\t[\"viewMatrix\", \"projectionMatrix\", \"normalMatrix\",\n\t\t\t\t\"globalOpacityScale\", \"globalSizeScale\", \"globalOutlineWidthScale\", \"globalOpacityBase\", \"globalSizeBase\", \"globalOutlineWidthBase\"],\n\t\t\t[\"vertex\", \"position\", \"color\", \"size\", \"outlineWidth\", \"outlineColor\", \"encodedIndex\"], this.gl);\n\n\t\tthis.nodesFastShaderProgram = new glUtils.ShaderProgram(\n\t\t\tglUtils.getShaderFromString(gl, this._hyperbolic ? nodesShaders.vertexHyperbolicShader : nodesShaders.vertexShader, gl.VERTEX_SHADER),\n\t\t\tglUtils.getShaderFromString(gl, nodesShaders.fastFragmentShader, gl.FRAGMENT_SHADER),\n\t\t\t[\"viewMatrix\", \"projectionMatrix\", \"normalMatrix\",\n\t\t\t\t\"globalOpacityScale\", \"globalSizeScale\", \"globalOutlineWidthScale\", \"globalOpacityBase\", \"globalSizeBase\", \"globalOutlineWidthBase\"],\n\t\t\t[\"vertex\", \"position\", \"color\", \"size\", \"outlineWidth\", \"outlineColor\", \"encodedIndex\"], this.gl);\n\n\t\tthis.nodesPickingShaderProgram = new glUtils.ShaderProgram(\n\t\t\tglUtils.getShaderFromString(gl, this._hyperbolic ? nodesShaders.vertexHyperbolicShader : nodesShaders.vertexShader, gl.VERTEX_SHADER),\n\t\t\tglUtils.getShaderFromString(gl, nodesShaders.pickingShader, gl.FRAGMENT_SHADER),\n\t\t\t[\"viewMatrix\", \"projectionMatrix\", \"normalMatrix\",\n\t\t\t\t\"globalOpacityScale\", \"globalSizeScale\", \"globalOutlineWidthScale\", \"globalOpacityBase\", \"globalSizeBase\", \"globalOutlineWidthBase\"],\n\t\t\t[\"vertex\", \"position\", \"color\", \"size\", \"outlineWidth\", \"outlineColor\", \"encodedIndex\"], this.gl);\n\t}\n\n\n\t/**\n\t * Initializes the picking framebuffer used for object selection.\n\t * @method _buildPickingBuffers\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_buildPickingBuffers() {\n\t\tconst gl = this.gl;\n\t\tthis.pickingFramebuffer = this._createOffscreenFramebuffer();\n\t}\n\n\t/**\n\t * Initializes the tracking framebuffer used for getting the displayed objects.\n\t * @method _buildTrackingBuffers\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_buildTrackingBuffers() {\n\t\tconst gl = this.gl;\n\t\tif (this._trackingBufferEnabled) {\n\t\t\tthis._trackingFramebuffer = this._createOffscreenFramebuffer();\n\t\t}\n\t}\n\n\n\t/**\n\t * Creates and initializes an offscreen framebuffer for rendering operations.\n\t * @method createOffscreenFramebuffer\n\t * @memberof Helios\n\t * @instance\n\t * @returns {WebGLFramebuffer} An offscreen framebuffer with associated texture and depth buffer.\n\t * @private\n\t */\n\t_createOffscreenFramebuffer() {\n\t\tconst gl = this.gl;\n\t\tlet framebuffer = gl.createFramebuffer();\n\t\tframebuffer.texture = gl.createTexture();\n\t\tgl.bindTexture(gl.TEXTURE_2D, framebuffer.texture);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n\t\tframebuffer.depthBuffer = gl.createRenderbuffer();\n\t\tgl.bindRenderbuffer(gl.RENDERBUFFER, framebuffer.depthBuffer);\n\n\t\t// Create and bind the framebuffer\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n\t\tframebuffer.size = {\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t};\n\n\t\tframebuffer.setSize = (width, height) => {\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, framebuffer.texture);\n\t\t\t// define size and format of level 0\n\t\t\tconst level = 0;\n\t\t\tconst internalFormat = gl.RGBA;\n\t\t\tconst border = 0;\n\t\t\tconst format = gl.RGBA;\n\t\t\tconst type = gl.UNSIGNED_BYTE;\n\t\t\tconst data = null;\n\t\t\tconst fbWidth = width;\n\t\t\tconst fbHeight = height;\n\t\t\tgl.texImage2D(gl.TEXTURE_2D, level, internalFormat,\n\t\t\t\tfbWidth, fbHeight, border, format, type, data);\n\t\t\tgl.bindRenderbuffer(gl.RENDERBUFFER, framebuffer.depthBuffer);\n\t\t\tgl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, fbWidth, fbHeight);\n\t\t\tframebuffer.size.width = width;\n\t\t\tframebuffer.size.height = height;\n\t\t};\n\n\t\tframebuffer.discard = () => {\n\t\t\tgl.deleteRenderbuffer(framebuffer.depthBuffer);\n\t\t\tgl.deleteTexture(framebuffer.texture);\n\t\t\tgl.deleteFramebuffer(framebuffer);\n\t\t}\n\t\t// attach the texture as the first color attachment\n\t\tconst attachmentPoint = gl.COLOR_ATTACHMENT0;\n\t\tconst level = 0;\n\t\tgl.framebufferTexture2D(gl.FRAMEBUFFER, attachmentPoint, gl.TEXTURE_2D, framebuffer.texture, level);\n\n\t\t// make a depth buffer and the same size as the targetTexture\n\t\tgl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, framebuffer.depthBuffer);\n\t\treturn framebuffer;\n\t}\n\n\t/**\n\t * Builds the nodes geometry and creates related WebGL buffers.\n\t * @method _buildNodesGeometry\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_buildNodesGeometry() {\n\t\tconst gl = this.gl;\n\t\tlet sphereQuality = 20;\n\t\t// this.nodesGeometry = glUtils.makeSphere(gl, 1.0, sphereQuality, sphereQuality);\n\t\tthis.nodesGeometry = glUtils.makePlane(gl, false, false);\n\t\t// //vertexShape = makeBox(gl);\n\n\n\n\t\tthis.nodesPositionBuffer = gl.createBuffer();\n\t\tthis.nodesColorBuffer = gl.createBuffer();\n\t\tthis.nodesSizeBuffer = gl.createBuffer();\n\t\tthis.nodesOutlineWidthBuffer = gl.createBuffer();\n\t\tthis.nodesOutlineColorBuffer = gl.createBuffer();\n\t\tthis.nodesIndexBuffer = gl.createBuffer();\n\n\t\t//encodedIndex\n\t\tthis.nodesIndexArray = new Float32Array(this.network.index2Node.length * 4);\n\t\tfor (let ID = 0; ID < this.network.index2Node.length; ID++) {\n\t\t\tthis.nodesIndexArray[4 * ID] = (((ID + 1) >> 0) & 0xFF) / 0xFF;\n\t\t\tthis.nodesIndexArray[4 * ID + 1] = (((ID + 1) >> 8) & 0xFF) / 0xFF;\n\t\t\tthis.nodesIndexArray[4 * ID + 2] = (((ID + 1) >> 16) & 0xFF) / 0xFF;\n\t\t\tthis.nodesIndexArray[4 * ID + 3] = (((ID + 1) >> 24) & 0xFF) / 0xFF;\n\t\t}\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesIndexBuffer);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, this.nodesIndexArray, gl.STATIC_DRAW);\n\t\t// console.log(this.nodesIndexArray)\n\n\t\tthis.updateNodesGeometry();\n\t}\n\n\t/** Updates the density map with the current node positions.\n\t * @method updateDensityMap\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @example<caption>Update the density map</caption>\n\t * helios.updateDensityMap();\n\t * @example<caption>Update the density map and render the scene</caption>\n\t * helios.updateDensityMap().render();\n\t * @returns {this} Returns the current Helios instance for chaining.\n\t */\n\tupdateDensityMap() {\n\t\tlet positions = this.network.positions;\n\t\tthis.densityMap?.setData(positions);\n\t\tthis.densityMap?.setWeights(this.densityWeights);\n\t\treturn this;\n\t}\n\n\n\t/** Force update of Nodes Geometry.\n\t * @method updateNodesGeometry\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @example<caption>Update the nodes geometry</caption>\n\t * helios.updateNodesGeometry();\n\t * @example<caption>Update the nodes geometry and render the scene</caption>\n\t * helios.updateNodesGeometry().render();\n\t * @returns {this} Returns the current Helios instance for chaining.\n\t */\n\tupdateNodesGeometry() {\n\n\t\tconst gl = this.gl;\n\n\t\tlet positions = this.network.positions;\n\n\t\tthis.updateDensityMap();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesPositionBuffer);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, positions, gl.DYNAMIC_DRAW);\n\n\t\tlet colors = this.network.colors;\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesColorBuffer);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, colors, gl.STATIC_DRAW);\n\n\t\tlet sizes = this.network.sizes;\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesSizeBuffer);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, sizes, gl.STATIC_DRAW);\n\n\t\tlet outlineWidths = this.network.outlineWidths;\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesOutlineWidthBuffer);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, outlineWidths, gl.STATIC_DRAW);\n\n\t\tlet outlineColors = this.network.outlineColors;\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesOutlineColorBuffer);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, outlineColors, gl.STATIC_DRAW);\n\n\n\t\t// //Depth test is essential for the desired effects\n\n\t\t// gl.disable(gl.CULL_FACE);\n\t\t// gl.frontFace(gl.CCW);\n\t\treturn this;\n\t}\n\n\n\t/** Initializes the geometry and buffers used for rendering edges.\n\t * @method _buildFastEdgesGeometry\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_buildFastEdgesGeometry() {\n\t\tconst gl = this.gl;\n\t\tlet edges = this.network.indexedEdges;\n\t\tlet positions = this.network.positions;\n\t\tlet colors = this.network.colors;\n\n\t\tlet indicesArray;\n\t\tthis.fastEdgesGeometry = null;\n\t\tthis.fastEdgesIndicesArray = null;\n\t\tlet newGeometry = new Object();\n\t\t//FIXME: If num of vertices > 65k, we need to store the geometry in two different indices objects\n\t\tif (positions.length < 65535) {\n\t\t\tindicesArray = new Uint16Array(edges);\n\t\t\tnewGeometry.indexType = gl.UNSIGNED_SHORT;\n\t\t} else {\n\t\t\tvar uints_for_indices = gl.getExtension(\"OES_element_index_uint\");\n\t\t\tif (uints_for_indices == null) {\n\t\t\t\tindicesArray = new Uint16Array(edges);\n\t\t\t\tnewGeometry.indexType = gl.UNSIGNED_SHORT;\n\t\t\t} else {\n\t\t\t\tindicesArray = new Uint32Array(edges);\n\t\t\t\tnewGeometry.indexType = gl.UNSIGNED_INT;\n\t\t\t}\n\t\t}\n\n\t\t// create the lines buffer 2 vertices per geometry.\n\t\tnewGeometry.vertexObject = gl.createBuffer();\n\t\tnewGeometry.colorObject = gl.createBuffer();\n\t\tnewGeometry.numIndices = indicesArray.length;\n\t\tnewGeometry.indexObject = gl.createBuffer();\n\n\t\tthis.fastEdgesGeometry = newGeometry;\n\t\tthis.fastEdgesIndicesArray = indicesArray;\n\n\t}\n\n\t/** Initializes the geometry and buffers used for advanced rendering edges.\n\t * @method _buildAdvancedEdgesGeometry\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_buildAdvancedEdgesGeometry() {\n\t\tconst gl = this.gl;\n\t\tlet edgeVertexTypeArray = [\n\t\t\t0, 1,\n\t\t\t0, 0,\n\t\t\t1, 1,\n\t\t\t1, 0,\n\t\t];\n\t\tlet newGeometry = new Object();\n\t\tnewGeometry.edgeVertexTypeBuffer = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, newGeometry.edgeVertexTypeBuffer);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(edgeVertexTypeArray), gl.STATIC_DRAW);\n\n\t\tnewGeometry.verticesBuffer = gl.createBuffer();\n\t\tnewGeometry.colorBuffer = gl.createBuffer();\n\t\tnewGeometry.sizeBuffer = gl.createBuffer();\n\t\t// this.nodesOutlineWidthBuffer = gl.createBuffer();\n\t\t// this.nodesOutlineColorBuffer = gl.createBuffer();\n\t\tnewGeometry.indexBuffer = gl.createBuffer();\n\n\t\tthis.edgesGeometry = newGeometry;\n\t\tthis.edgesGeometry.count = this.network.indexedEdges.length / 2;\n\n\t\t//encodedIndex\n\t\tthis.edgesGeometry.edgesIndexArray = new Float32Array(this.network.indexedEdges.length * 4 / 2);\n\t\tthis._edgeIndicesUpdate = true;\n\t\t// console.log(this.nodesIndexArray)\n\t}\n\n\t/** Initializes the geometry and buffers used for rendering edges.\n\t * @method _buildEdgesGeometry\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_buildEdgesGeometry() {\n\t\tif (this.fastEdges) {\n\t\t\tthis._buildFastEdgesGeometry();\n\t\t} else {\n\t\t\tthis._buildAdvancedEdgesGeometry();\n\t\t}\n\t\tthis.updateEdgesGeometry()\n\t}\n\n\n\t/** Updates the indices used for picking edges.\n\t * @method _updateEdgeIndices\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_updateEdgeIndices() {\n\t\tif (this._edgeIndicesUpdate) {\n\t\t\tconst gl = this.gl;\n\t\t\tfor (let ID = 0; ID < this.network.indexedEdges.length / 2; ID++) {\n\t\t\t\tlet edgeID = this.network.index2Node.length + ID;\n\t\t\t\tif (this._pickeableEdges.has(ID)) {\n\t\t\t\t\tthis.edgesGeometry.edgesIndexArray[4 * ID] = (((edgeID + 1) >> 0) & 0xFF) / 0xFF;\n\t\t\t\t\tthis.edgesGeometry.edgesIndexArray[4 * ID + 1] = (((edgeID + 1) >> 8) & 0xFF) / 0xFF;\n\t\t\t\t\tthis.edgesGeometry.edgesIndexArray[4 * ID + 2] = (((edgeID + 1) >> 16) & 0xFF) / 0xFF;\n\t\t\t\t\tthis.edgesGeometry.edgesIndexArray[4 * ID + 3] = (((edgeID + 1) >> 24) & 0xFF) / 0xFF;\n\t\t\t\t} else {\n\t\t\t\t\tthis.edgesGeometry.edgesIndexArray[4 * ID] = 0;\n\t\t\t\t\tthis.edgesGeometry.edgesIndexArray[4 * ID + 1] = 0;\n\t\t\t\t\tthis.edgesGeometry.edgesIndexArray[4 * ID + 2] = 0;\n\t\t\t\t\tthis.edgesGeometry.edgesIndexArray[4 * ID + 3] = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.indexBuffer);\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, this.edgesGeometry.edgesIndexArray, gl.DYNAMIC_DRAW);\n\t\t\tthis._edgeIndicesUpdate = false;\n\t\t}\n\t}\n\n\n\t/** Updates the geometry and buffers used for rendering edges.\n\t * @method updateEdgesGeometry\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {boolean} [force=false] - Forces the update of the geometry and buffers.\n\t * @returns {this} Returns the current Helios instance for chaining.\n\t */\n\tupdateEdgesGeometry() {\n\t\tconst gl = this.gl;\n\t\tlet edges = this.network.indexedEdges;\n\t\tlet positions = this.network.positions;\n\t\tlet colors = this.network.colors;\n\t\tif (this.fastEdges) {\n\t\t\tif (!this.fastEdgesGeometry) {\n\t\t\t\tthis._buildEdgesGeometry();\n\t\t\t}\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.fastEdgesGeometry.vertexObject);\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, positions, gl.STREAM_DRAW);\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.fastEdgesGeometry.colorObject);\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, colors, gl.STATIC_DRAW);\n\t\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.fastEdgesGeometry.indexObject);\n\t\t\tgl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.fastEdgesIndicesArray, gl.STREAM_DRAW);\n\t\t} else {\n\n\t\t\tconst gl = this.gl;\n\t\t\tthis.network.updateEdgePositions();\n\t\t\tif (this._edgesColorsFromNodes) {\n\t\t\t\tthis.network.updateEdgeColors();\n\t\t\t}\n\t\t\tif (this._edgesWidthFromNodes) {\n\t\t\t\tthis.network.updateEdgeSizes();\n\t\t\t}\n\t\t\tthis._updateEdgeIndices();\n\n\t\t\tlet edgePositions = this.network.positions;\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.verticesBuffer);\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, this.network.edgePositions, gl.DYNAMIC_DRAW);\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.colorBuffer);\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, this.network.edgeColors, gl.DYNAMIC_DRAW);\n\n\t\t\t// gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.edgesGeometry.indexBuffer);\n\t\t\t// gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.edgesGeometry.edgesIndexArray, gl.DYNAMIC_DRAW);\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.sizeBuffer);\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, this.network.edgeSizes, gl.DYNAMIC_DRAW);\n\t\t}\n\t\treturn this;\n\t}\n\n\n\t/** Updates the all the framebuffers\n\t * @method _updatePickingFramebufferSize\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @param {number} newWidth - The new width of the framebuffers.\n\t * @param {number} newHeight - The new height of the framebuffers.\n\t * @returns {this} Returns the current Helios instance for chaining.\n\t */\n\t_resizeGL(newWidth, newHeight) {\n\t\tthis.canvasElement.width = newWidth;\n\t\tthis.canvasElement.height = newHeight;\n\t\tthis.pickingFramebuffer.setSize(Math.round(newWidth * this.pickingResolutionRatio), Math.round(newHeight * this.pickingResolutionRatio));\n\t\tthis._lastCanvasDimensions = [this.canvasElement.clientWidth, this.canvasElement.clientHeight];\n\t\t// distribute at most this.trackingMaxPixels across the screen (width * height), keeping the aspect ratio\n\t\tlet aspectRatio = newWidth / newHeight;\n\t\tif (this._trackingBufferEnabled) {\n\t\t\tlet trackingWidth, trackingHeight;\n\n\t\t\tif (aspectRatio > 1) {\n\t\t\t\ttrackingWidth = Math.sqrt(this._trackingMaxPixels * aspectRatio);\n\t\t\t\ttrackingHeight = this._trackingMaxPixels / trackingWidth;\n\t\t\t} else {\n\t\t\t\ttrackingHeight = Math.sqrt(this._trackingMaxPixels / aspectRatio);\n\t\t\t\ttrackingWidth = this._trackingMaxPixels / trackingHeight;\n\t\t\t}\n\t\t\tthis._trackingFramebuffer.setSize(Math.round(trackingWidth), Math.round(trackingHeight));\n\t\t\tlet totalTrackingPixels = this._trackingFramebuffer.size.width * this._trackingFramebuffer.size.height;\n\t\t\tthis._pixelXYOnScreen = Array(totalTrackingPixels);\n\t\t\tthis._trackingBufferPixels = new Uint8Array(4 * totalTrackingPixels);\n\t\t\tthis._nodesOnScreen = Array(totalTrackingPixels);\n\t\t\tthis._nodesOnScreen.fill(-1);\n\n\t\t\tfor (let i = 0; i < this._pixelXYOnScreen.length; i++) {\n\t\t\t\tlet x = (i % this._trackingFramebuffer.size.width) / this._trackingFramebuffer.size.width * this.canvasElement.clientWidth;\n\t\t\t\tlet y = (Math.floor(i / this._trackingFramebuffer.size.width)) / this._trackingFramebuffer.size.height * this.canvasElement.clientHeight;\n\t\t\t\tthis._pixelXYOnScreen[i] = [x, y];\n\t\t\t}\n\t\t}\n\n\t\tif (this.densityPlot) {\n\t\t\tthis.densityMap.resize(newWidth, newHeight);\n\t\t}\n\t\tthis.render(true);\n\t\treturn this;\n\t}\n\n\n\n\t/** Setup the camera data.\n\t * @method _setupCamera\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_setupCamera() {\n\t\t// this.canvasElement.onmousedown = event=>this.handleMouseDown(event);\n\t\t// document.onmouseup = event=>this.handleMouseUp(event);\n\t\t// document.onmousemove = event=>this.handleMouseMove(event);\n\t\t// document.onclick = void(0);\n\n\n\t\tthis.zoom = d3Zoom()\n\t\t\t.on(\"zoom\", event => {\n\t\t\t\tthis.interacting = true;\n\t\t\t\tthis._zoomFactor = event.transform.k;\n\t\t\t\tthis.triggerHoverEvents(event);\n\t\t\t\t// check if prevX is undefined\n\t\t\t\tif (this.prevK === undefined) {\n\t\t\t\t\tthis.prevK = event.transform.k;\n\t\t\t\t}\n\t\t\t\tlet dx = 0;\n\t\t\t\tlet dy = 0;\n\t\t\t\tif (this.prevK == event.transform.k || this._use2D) {\n\t\t\t\t\tif (this.prevX === undefined || this._use2D) {\n\t\t\t\t\t\tif (this._use2D) {\n\t\t\t\t\t\t\tdx = event.transform.x - this.canvasElement.clientWidth / 2;\n\t\t\t\t\t\t\tdy = event.transform.y - this.canvasElement.clientHeight / 2;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdx = event.transform.x;\n\t\t\t\t\t\t\tdy = event.transform.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdx = event.transform.x - this.prevX * this._zoomFactor;\n\t\t\t\t\t\tdy = event.transform.y - this.prevY * this._zoomFactor;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t}\n\n\t\t\t\tif (!this._use2D) {\n\t\t\t\t\tthis.prevX = event.transform.x / this._zoomFactor;\n\t\t\t\t\tthis.prevY = event.transform.y / this._zoomFactor;\n\t\t\t\t}\n\t\t\t\tthis.prevK = event.transform.k;\n\t\t\t\t// \tif (!this.positionInterpolator) {\n\t\t\t\t// \t\tthis.update();\n\t\t\t\t// \t\tthis.render();\n\t\t\t\t// \t}\n\t\t\t\t// \t// event => event.preventDefault();\n\t\t\t\t// })\n\t\t\t\t// // this.drag = d3Drag().on(\"drag\", event => {\n\t\t\t\t// // \tlet dx = event.dx;\n\t\t\t\t// // \tlet dy = event.dy;\n\n\t\t\t\t// this.zoom2 = d3Zoom().scaleExtent([1.0,1.0]).on(\"zoom\", event => {\n\t\t\t\t// \tconsole.log(\"ZOOM 2\")\n\t\t\t\t// \t// let dx = event.dx;\n\t\t\t\t// \t// let dy = event.dy;\n\t\t\t\t// let dx = 0;\n\t\t\t\t// let dy = 0;\n\t\t\t\t// if(this.prevX=== undefined){\n\t\t\t\t// \tdx = event.transform.x;\n\t\t\t\t// \tdy = event.transform.y;\n\t\t\t\t// }else{\n\t\t\t\t// \tdx = event.transform.x - this.prevX;\n\t\t\t\t// \tdy = event.transform.y - this.prevY;\n\t\t\t\t// }\n\n\t\t\t\tlet newRotationMatrix = glm.mat4.create();\n\t\t\t\t// console.log(event.sourceEvent.shiftKey)\n\t\t\t\tif (this._use2D || event.sourceEvent?.shiftKey) {\n\t\t\t\t\tconst panelHeight = this.canvasElement.clientHeight;\n\t\t\t\t\tconst fovy = Math.PI * 2 / 360 * this._fieldOfView;\n\t\t\t\t\t// FIXME: Maybe use the distance to the objects instead of the camera distance\n\t\t\t\t\t// For the 3D case. The 2D case is fine.\n\t\t\t\t\tconst finalCameraDistance = this.cameraDistance / this._zoomFactor;\n\t\t\t\t\tconst displacementFactor = 2 * finalCameraDistance * Math.tan(fovy / 2) / panelHeight;\n\t\t\t\t\tif (this._centerNodes.length == 0) {\n\t\t\t\t\t\tif (this._use2D) {\n\n\t\t\t\t\t\t\tthis.panX = dx * displacementFactor;\n\t\t\t\t\t\t\tthis.panY = -dy * displacementFactor;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.panX = this.panX + dx * displacementFactor;\n\t\t\t\t\t\t\tthis.panY = this.panY - dy * displacementFactor;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {//pan\n\t\t\t\t\tglm.mat4.identity(newRotationMatrix);\n\t\t\t\t\tglm.mat4.rotate(newRotationMatrix, newRotationMatrix, glUtils.degToRad(dx / 2), [0, 1, 0]);\n\t\t\t\t\tglm.mat4.rotate(newRotationMatrix, newRotationMatrix, glUtils.degToRad(dy / 2), [1, 0, 0]);\n\n\t\t\t\t\tglm.mat4.multiply(this.rotationMatrix, newRotationMatrix, this.rotationMatrix);\n\t\t\t\t}\n\n\t\t\t\tthis.update();\n\t\t\t\tthis.render();\n\t\t\t\t// this.triggerHoverEvents(event);\n\t\t\t\tevent?.sourceEvent?.preventDefault();\n\t\t\t\tevent?.sourceEvent?.stopPropagation();\n\t\t\t})\n\t\t\t.on(\"end\", event => {\n\t\t\t\tthis.interacting = false;\n\t\t\t\tevent?.sourceEvent?.preventDefault();\n\t\t\t\tevent?.sourceEvent?.stopPropagation();\n\t\t\t});\n\n\t\td3Select(this.canvasElement)//\n\t\t\t// .call(d3ZoomTransform, d3ZoomIdentity.translate(0, 0).scale(this.cameraDistance))\n\t\t\t// .call(this.drag)\n\t\t\t.call(this.zoom)\n\t\t\t// .on(\"mousedown.drag\", null)\n\t\t\t// .on(\"touchstart.drag\", null)\n\t\t\t// .on(\"touchmove.drag\", null)\n\t\t\t// .on(\"touchend.drag\", null)\n\t\t\t.on(\"dblclick.zoom\", null);\n\n\n\t\t// this.zoomFactor(0.05)\n\t\t// this.zoomFactor(1.0,500);\n\t}\n\n\t/** Set the zoom factor.\n\t * @method zoomFactor\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} zoomFactor - The zoom factor.\n\t * @param {number} [duration] - The duration of the zoom animation in milliseconds.\n\t * @returns {this | number} Returns this for chaining if zoomFactor is defined, otherwise returns the current zoom factor.\n\t * @example\n\t * // Set the zoom factor to 0.5\n\t * helios.zoomFactor(0.5);\n\t * @example\n\t * // Set the zoom factor to 0.5 with an animation duration of 500 milliseconds\n\t * helios.zoomFactor(0.5, 500);\n\t * @example\n\t * // Get the current zoom factor\n\t * let zoomFactor = helios.zoomFactor();\n\t */\n\tzoomFactor(zoomFactor, duration) {\n\t\tif (zoomFactor !== undefined) {\n\t\t\tif (duration === undefined) {\n\t\t\t\tif (this._use2D) {\n\t\t\t\t\td3Select(this.canvasElement).call(this.zoom.transform,\n\t\t\t\t\t\td3ZoomIdentity.translate(this.canvasElement.clientWidth / 2, this.canvasElement.clientHeight / 2).scale(zoomFactor))\n\t\t\t\t} else {\n\t\t\t\t\td3Select(this.canvasElement).call(this.zoom.transform, d3ZoomIdentity.translate(0, 0).scale(zoomFactor))\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this._use2D) {\n\t\t\t\t\td3Select(this.canvasElement).transition().ease(d3Ease.easeLinear).duration(duration)\n\t\t\t\t\t\t.call(this.zoom.transform, d3ZoomIdentity.translate(this.canvasElement.clientWidth / 2, this.canvasElement.clientHeight / 2).scale(zoomFactor))\n\n\t\t\t\t} else {\n\t\t\t\t\td3Select(this.canvasElement).transition().ease(d3Ease.easeLinear).duration(duration).call(this.zoom.transform, d3ZoomIdentity.translate(0, 0).scale(zoomFactor))\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this._zoomFactor;\n\t\t}\n\t}\n\n\t/** Set the semantic zoom exponent.\n\t * @method semanticZoomExponent\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} semanticZoomExponent - The semantic zoom exponent.\n\t * @returns {this | number} Returns this for chaining if semanticZoomExponent is defined, otherwise returns the current semantic zoom exponent.\n\t * @example\n\t * // Set the semantic zoom exponent to 0.5\n\t * helios.semanticZoomExponent(0.5);\n\t * @example\n\t * // Get the current semantic zoom exponent\n\t * let semanticZoomExponent = helios.semanticZoomExponent();\n\t */\n\tsemanticZoomExponent(semanticZoomExponent) {\n\t\tif (semanticZoomExponent !== undefined) {\n\t\t\tthis._semanticZoomExponent = semanticZoomExponent;\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this._semanticZoomExponent;\n\t\t}\n\t}\n\n\n\t/** Will resize event helper function\n\t * @method _willResizeEvent\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @param {Event} event - The resize event.\n\t */\n\t_willResizeEvent(event) {\n\t\t//requestAnimFrame(function(){\n\t\tlet dpr = window.devicePixelRatio || 1;\n\t\tif (dpr < 2.0 || this.forceSupersample) {\n\t\t\tdpr = dpr * 2.0;\n\t\t}\n\t\t// dpr = 2.0;\n\n\t\t// this.canvasElement.style.width = this.element.clientWidth + \"px\";\n\t\t// this.canvasElement.style.height = this.element.clientHeight + \"px\";\n\t\t// Update margins:\n\n\t\tlet newFrameworkWidth = dpr * this.canvasElement.clientWidth;\n\t\tlet newFrameworkHeight = dpr * this.canvasElement.clientHeight;\n\n\t\tconsole.log(newFrameworkWidth,newFrameworkHeight);\n\n\t\trequestAnimationFrame(() => {\n\t\t\tthis._resizeGL(newFrameworkWidth, newFrameworkHeight);\n\t\t});\n\n\t\tthis._updateCameraInteraction();\n\n\t\tthis.onResizeCallback?.(event);\n\t\t//});\n\t}\n\n\t/** Update Camera Interaction.\n\t * @method _updateCameraInteraction\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @chainable\n\t * @returns {this} Returns this for chaining.\n\t */\n\t_updateCameraInteraction() {\n\t\tif (this.zoom && this._use2D) {\n\t\t\tconst panelHeight = this.canvasElement.clientHeight;\n\t\t\tconst fovy = Math.PI * 2 / 360 * this._fieldOfView;\n\t\t\t// FIXME: Maybe use the distance to the objects instead of the camera distance\n\t\t\t// For the 3D case. The 2D case is fine.\n\t\t\tconst finalCameraDistance = this.cameraDistance / this._zoomFactor;\n\t\t\tconst displacementFactor = 2 * finalCameraDistance * Math.tan(fovy / 2) / panelHeight;\n\t\t\td3Select(this.canvasElement).property(\"__zoom\",\n\t\t\t\td3ZoomIdentity.translate(\n\t\t\t\t\tthis.panX / displacementFactor + this._lastCanvasDimensions[0] / 2,\n\t\t\t\t\t-this.panY / displacementFactor + this._lastCanvasDimensions[1] / 2\n\t\t\t\t).scale(this._zoomFactor));\n\t\t}\n\t}\n\n\t/** Will hint force Helios to redraw the network.\n\t * @method redraw\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @returns {this} Returns this for chaining.\n\t * @fires Helios#redraw\n\t * @fires Helios#draw\n\t * @fires Helios#HoverEvent\n\t * @example\n\t * // Redraw the network\n\t * helios.redraw();\n\t * @example\n\t * // Update geometry and redraw the network\n\t * helios.update().redraw();\n\t */\n\tredraw() {\n\t\tthis._redrawAll(null, \"normal\"); // Normal\n\t\tthis._redrawAll(this.pickingFramebuffer, \"picking\"); // Picking\n\t\tif (this._trackingBufferEnabled) {\n\t\t\tthis._redrawAll(this._trackingFramebuffer, \"tracking\"); // Labels buffer\n\t\t}\n\t\t// this.redrawDensityMap();\n\t\tthis.triggerHoverEvents(null);\n\t\tthis._updateTrackerNodesDataThrottle();\n\t\tthis.onDrawCallback?.();\n\t\treturn this;\n\t}\n\n\n\t/** Will hint or force Helios to update the network geometry.\n\t * this method needs to be called after any changes to the network data\n\t * or visual properties.\n\t * @method update\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {boolean} [immediate=false] - If true, the update will be performed immediately, otherwise it will be scheduled.\n\t * @param {boolean} [nodes=true] - If true, the node geometry will be updated.\n\t * @param {boolean} [edges=true] - If true, the edge geometry will be updated.\n\t * @returns {this} Returns this for chaining.\n\t * @example\n\t * // Update the network geometry\n\t * helios.update();\n\t * @example\n\t * // Update the network geometry immediately\n\t * helios.update(true);\n\t */\n\tupdate(immediate = false, nodes = true, edges = true) {\n\t\tthis.scheduler.schedule({\n\t\t\tname: \"9.0.update\",\n\t\t\tcallback: null,\n\t\t\tdelay: 0,\n\t\t\trepeat: false,\n\t\t\tsynchronized: true,\n\t\t\timmediateUpdates: immediate,\n\t\t\t// redraw: true,\n\t\t\tupdateNodesGeometry: nodes,\n\t\t\tupdateEdgesGeometry: edges,\n\t\t});\n\t\treturn this;\n\t}\n\n\t/** Will hint or force Helios to render the network.\n\t * @method render\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {boolean} [immediate=false] - If true, the render will be performed immediately, otherwise it will be scheduled.\n\t * @returns {this} Returns this for chaining.\n\t * @example\n\t * // Render the network\n\t * helios.render();\n\t * @example\n\t * // Update geometry and render the network\n\t * helios.update().render();\n\t */\n\trender(immediate = false) {\n\t\t// if (!this.positionInterpolator) {\n\t\t// \twindow.requestAnimationFrame(() => this.redraw());\n\t\t// }\n\n\t\tthis.scheduler.schedule({\n\t\t\tname: \"9.1.render\",\n\t\t\tcallback: null,\n\t\t\tdelay: 0,\n\t\t\trepeat: false,\n\t\t\tsynchronized: true,\n\t\t\timmediateUpdates: immediate,\n\t\t\tredraw: true,\n\t\t\t// updateNodesGeometry: true,\n\t\t\t// updateEdgesGeometry: true,\n\t\t});\n\t\treturn this;\n\t}\n\n\t/** Helper method to prepare drawing framebuffers\n\t * @method _redrawPrepare\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @param {WebGLFramebuffer} destination - The destination framebuffer.\n\t * @param {boolean} isPicking - If true, the framebuffer is used for picking.\n\t * @param {Object} viewport - The viewport to use.\n\t */\n\t_redrawPrepare(destination, framebufferType, viewport) {\n\t\t// if framebufferType is undefined, set it to \"normal\"\n\t\tif (typeof framebufferType === \"undefined\") {\n\t\t\tframebufferType = \"normal\";\n\t\t}\n\t\tconst gl = this.gl;\n\n\t\tconst fbWidth = destination?.size.width || this.canvasElement.width;\n\t\tconst fbHeight = destination?.size.height || this.canvasElement.height;\n\t\t// let orthogonalScaleFactor = 1.0;\n\t\t// orthogonalScaleFactor = Math.max(this.canvasElement.clientWidth/this.canvasElement.width, this.canvasElement.clientHeight/this.canvasElement.height);\n\t\tif (destination == null) {\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\t\tgl.clearColor(...this._backgroundColor);\n\t\t} else if (framebufferType != \"normal\") {\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, destination);\n\t\t\tgl.clearColor(0.0, 0.0, 0.0, 0.0);\n\t\t} else {\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, destination);\n\t\t\tif (typeof destination.backgroundColor === \"undefined\") {\n\t\t\t\tgl.clearColor(...this._backgroundColor);\n\t\t\t} else {\n\t\t\t\tgl.clearColor(...destination.backgroundColor);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof viewport === \"undefined\") {\n\t\t\tgl.viewport(0, 0, fbWidth, fbHeight);\n\t\t} else {\n\t\t\tgl.viewport(...viewport);\n\t\t}\n\n\t\tgl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\t\tgl.depthFunc(gl.LEQUAL);\n\n\t\tthis.projectionMatrix = glm.mat4.create();\n\t\tthis.viewMatrix = glm.mat4.create();\n\t\tthis.projectionViewMatrix = glm.mat4.create();\n\n\t\t// \n\t\tlet fovy = Math.PI * 2 / 360 * this._fieldOfView;\n\t\tlet aspectRatio = fbWidth / fbHeight;\n\t\tif (this._use2D || this._orthographic) {\n\t\t\tconst finalCameraDistance = this.cameraDistance / this._zoomFactor;\n\t\t\tconst orthoHeight = 2 * finalCameraDistance * Math.tan(fovy / 2);\n\t\t\tconst orthoWidth = orthoHeight * aspectRatio;\n\t\t\tconst left = -orthoWidth / 2;\n\t\t\tconst right = orthoWidth / 2;\n\t\t\tconst bottom = -orthoHeight / 2;\n\t\t\tconst top = orthoHeight / 2;\n\t\t\t// orthogonalScaleFactor = 1.0;\n\t\t\t// console.log(\"Scale Factor:\",orthogonalScaleFactor);\n\n\t\t\tglm.mat4.ortho(this.projectionMatrix,\n\t\t\t\tleft,\n\t\t\t\tright,\n\t\t\t\tbottom,\n\t\t\t\ttop,\n\t\t\t\t-100 + finalCameraDistance, 10000.0 + finalCameraDistance);\n\n\t\t\t// glm.mat4.ortho(this.projectionMatrix,\n\t\t\t// \t-fbWidth / this._zoomFactor / orthoRescaleFactor * scaleFactor*orthogonalScaleFactor/ scaleHeight,\n\t\t\t// \tfbWidth / this._zoomFactor / orthoRescaleFactor * scaleFactor*orthogonalScaleFactor / scaleHeight,\n\t\t\t// \t-fbHeight / this._zoomFactor / orthoRescaleFactor * scaleFactor*orthogonalScaleFactor / scaleHeight,\n\t\t\t// \tfbHeight / this._zoomFactor / orthoRescaleFactor * scaleFactor*orthogonalScaleFactor / scaleHeight,\n\t\t\t// \t-10000.0, 100000.0);\n\t\t\t// glm.mat4.perspective(this.projectionMatrix, Math.PI * 2 / 360 * 70, fbWidth / fbHeight, 1.0, 10000.0);\n\n\t\t} else {\n\t\t\tglm.mat4.perspective(this.projectionMatrix, fovy, aspectRatio, 1.0, null);\n\t\t}\n\n\t\tglm.mat4.identity(this.viewMatrix);\n\t\tglm.mat4.translate(this.viewMatrix, this.viewMatrix, [this.panX, this.panY, -this.cameraDistance / this._zoomFactor]);\n\n\n\t\tglm.mat4.multiply(this.viewMatrix, this.viewMatrix, this.rotationMatrix);\n\t\t// glm.mat4.scale(this.viewMatrix, this.viewMatrix, [this._zoomFactor, this._zoomFactor, this._zoomFactor]);\n\t\tglm.mat4.translate(this.viewMatrix, this.viewMatrix, this.translatePosition);\n\n\t\tglm.mat4.multiply(this.projectionViewMatrix, this.projectionMatrix, this.viewMatrix);\n\t}\n\n\t/** Helper method to draw nodes\n\t * @method _redrawNodes\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @param {WebGLFramebuffer} destination - The destination framebuffer.\n\t * @param {boolean} isPicking - If true, the framebuffer is used for picking.\n\t */\n\t_redrawNodes(destination, framebufferType) {\n\t\tif (typeof framebufferType === \"undefined\") {\n\t\t\tframebufferType = \"normal\";\n\t\t}\n\t\tconst gl = this.gl;\n\t\tlet ext = gl.getExtension(\"ANGLE_instanced_arrays\");\n\n\t\tlet adjustedScaleFactor = 1.0 / Math.pow(this._zoomFactor, this._semanticZoomExponent);\n\n\t\tif (framebufferType != \"normal\") {\n\t\t\tadjustedScaleFactor = 1.0 / Math.pow(this._zoomFactor, 0.75 * this._semanticZoomExponent);\n\t\t}\n\n\t\tlet currentShaderProgram;\n\t\tif (framebufferType == \"normal\") {\n\t\t\t// console.log(this.nodesShaderProgram);\n\t\t\tgl.enable(gl.BLEND);\n\t\t\t// if(this.useAdditiveBLending){\n\t\t\t// gl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n\t\t\t// \t}else{\n\t\t\tgl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\t\t\t// gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA,\n\t\t\t// \tgl.ZERO, gl.ONE);\n\t\t\t// \t}\n\t\t\tif (this.useShadedNodes) {\n\t\t\t\tcurrentShaderProgram = this.nodesShaderProgram;\n\t\t\t} else {\n\t\t\t\tcurrentShaderProgram = this.nodesFastShaderProgram;\n\t\t\t}\n\t\t} else {\n\t\t\tgl.disable(gl.BLEND);\n\t\t\t// console.log(this.nodesShaderProgram);\n\t\t\tcurrentShaderProgram = this.nodesPickingShaderProgram;\n\t\t}\n\n\t\tcurrentShaderProgram.use(gl);\n\t\tcurrentShaderProgram.attributes.enable(\"vertex\");\n\t\t// currentShaderProgram.attributes.enable(\"normal\");\n\t\tcurrentShaderProgram.attributes.enable(\"position\");\n\t\tcurrentShaderProgram.attributes.enable(\"size\");\n\t\tcurrentShaderProgram.attributes.enable(\"outlineWidth\");\n\t\tcurrentShaderProgram.attributes.enable(\"outlineColor\");\n\t\tcurrentShaderProgram.attributes.enable(\"encodedIndex\");\n\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesGeometry.vertexObject);\n\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.vertex, 3, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.vertex, 0);\n\n\t\t// gl.bindBuffer(gl.ARRAY_BUFFER, this.nodesGeometry.normalObject);\n\t\t// gl.vertexAttribPointer(currentShaderProgram.attributes.normal, 3, gl.FLOAT, false, 0, 0);\n\t\t// ext.vertexAttribDivisorANGLE(currentShaderProgram.attributes.normal, 0); \n\n\t\tif (this.nodesGeometry.indexObject) {\n\t\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.nodesGeometry.indexObject);\n\t\t}\n\n\t\tgl.uniformMatrix4fv(currentShaderProgram.uniforms.projectionMatrix, false, this.projectionMatrix);\n\t\tgl.uniformMatrix4fv(currentShaderProgram.uniforms.viewMatrix, false, this.viewMatrix);\n\n\t\tgl.uniform1f(currentShaderProgram.uniforms.globalOpacityScale, this._nodesGlobalOpacityScale);\n\t\tgl.uniform1f(currentShaderProgram.uniforms.globalOpacityBase, this._nodesGlobalOpacityBase);\n\n\t\tgl.uniform1f(currentShaderProgram.uniforms.globalSizeScale, this._nodesGlobalSizeScale * adjustedScaleFactor);\n\t\tgl.uniform1f(currentShaderProgram.uniforms.globalSizeBase, this._nodesGlobalSizeBase * adjustedScaleFactor);\n\n\t\tgl.uniform1f(currentShaderProgram.uniforms.globalOutlineWidthScale, this._nodesGlobalOutlineWidthScale * adjustedScaleFactor);\n\t\tgl.uniform1f(currentShaderProgram.uniforms.globalOutlineWidthBase, this._nodesGlobalOutlineWidthBase * adjustedScaleFactor);\n\n\t\tlet normalMatrix = glm.mat3.create();\n\t\tglm.mat3.normalFromMat4(normalMatrix, this.viewMatrix);\n\t\tgl.uniformMatrix3fv(currentShaderProgram.uniforms.normalMatrix, false, normalMatrix);\n\n\t\t// Geometry Mutators and colors obtained from the network properties\n\t\tlet colorsArray = this.network.colors;\n\t\tlet positionsArray = this.network.positions;\n\t\tlet sizeValue = this.network.sizes;\n\t\tlet outlineWidthValue = this.network.outlineWidths;\n\n\t\t// Bind the instance position data\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesPositionBuffer);\n\t\tgl.enableVertexAttribArray(currentShaderProgram.attributes.position);\n\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.position, 3, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.position, 1); // This makes it instanced!\n\n\t\t// Bind the instance color data\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesColorBuffer);\n\t\tgl.enableVertexAttribArray(currentShaderProgram.attributes.color);\n\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.color, 4, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.color, 1); // This makes it instanced!\n\n\t\t// Bind the instance color data\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesSizeBuffer);\n\t\tgl.enableVertexAttribArray(currentShaderProgram.attributes.size);\n\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.size, 1, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.size, 1); // This makes it instanced!\n\n\t\t// Bind the instance color data\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesOutlineColorBuffer);\n\t\tgl.enableVertexAttribArray(currentShaderProgram.attributes.outlineColor);\n\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.outlineColor, 4, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.outlineColor, 1); // This makes it instanced!\n\n\t\t// Bind the instance color data\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesOutlineWidthBuffer);\n\t\tgl.enableVertexAttribArray(currentShaderProgram.attributes.outlineWidth);\n\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.outlineWidth, 1, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.outlineWidth, 1); // This makes it instanced!\n\n\t\t// Bind the instance color data\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.nodesIndexBuffer);\n\t\tgl.enableVertexAttribArray(currentShaderProgram.attributes.encodedIndex);\n\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.encodedIndex, 4, gl.FLOAT, false, 0, 0);\n\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.encodedIndex, 1); // This makes it instanced!\n\n\t\t// console.log(this.network.positions.length/3)\n\t\t// Draw the instanced meshes\n\t\tif (this.nodesGeometry.indexObject) {\n\t\t\text.drawElementsInstancedANGLE(gl.TRIANGLES, this.nodesGeometry.numIndices, this.nodesGeometry.indexType, 0, this.network.positions.length / 3);\n\t\t} else {\n\t\t\text.drawArraysInstancedANGLE(gl.TRIANGLE_STRIP, 0, this.nodesGeometry.numIndices, this.network.positions.length / 3);\n\t\t}\n\n\t\t// Disable attributes\n\t\tcurrentShaderProgram.attributes.disable(\"vertex\");\n\t\t// this.nodesShaderProgram.attributes.disable(\"normal\");\n\t\tcurrentShaderProgram.attributes.disable(\"position\");\n\t\tcurrentShaderProgram.attributes.disable(\"size\");\n\t\tcurrentShaderProgram.attributes.disable(\"outlineWidth\");\n\t\tcurrentShaderProgram.attributes.disable(\"outlineColor\");\n\t\tcurrentShaderProgram.attributes.disable(\"encodedIndex\");\n\t}\n\n\n\t/** Helper function to redraw the edges\n\t * @method _redrawEdges\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @param {WebGLFramebuffer} destination - The destination framebuffer.\n\t * @param {String} framebufferType - The type of framebuffer to render to (normal, picking, or tracking).\n\t */\n\t_redrawEdges(destination, framebufferType) {\n\n\t\tif (typeof framebufferType === \"undefined\") {\n\t\t\tframebufferType = \"normal\";\n\t\t}\n\t\tlet hasEdgeCallbacks = this.onEdgeClickCallback\n\t\t\t|| this.onEdgeHoverMoveCallback\n\t\t\t|| this.onEdgeHoverStartCallback\n\t\t\t|| this.onEdgeHoverEndCallback\n\t\t\t|| this.onEdgeDoubleClickCallback\n\t\t\t|| this.onEdgeClickCallback;\n\n\t\tif (framebufferType != \"normal\" && (this.fastEdges || !hasEdgeCallbacks)) {\n\t\t\treturn // no picking for fast edges or no callbacks\n\t\t}\n\n\t\tlet adjustedScaleFactor = 1.0 / Math.pow(this._zoomFactor, this._semanticZoomExponent);\n\n\t\tif (framebufferType != \"normal\") {\n\t\t\tadjustedScaleFactor = 1.0 / Math.pow(this._zoomFactor, 0.5 * this._semanticZoomExponent);\n\t\t}\n\t\tconst gl = this.gl;\n\t\tlet ext = gl.getExtension(\"ANGLE_instanced_arrays\");\n\n\t\tlet currentShaderProgram;\n\t\tif (framebufferType == \"normal\") {\n\t\t\tgl.enable(gl.BLEND);\n\t\t\t// \t//Edges are rendered with additive blending.\n\t\t\t// \tgl.enable(gl.BLEND);\n\t\t\tif (this.useAdditiveBlending) {\n\t\t\t\tgl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n\t\t\t} else {\n\t\t\t\t// gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\t\t\t\t// gl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\t\t\t\t// gl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ZERO, gl.ONE ); //Original from Networks 3D\n\t\t\t\tgl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE); // New (works for transparent background)\n\t\t\t}\n\t\t\tif (this.fastEdges) {\n\t\t\t\tcurrentShaderProgram = this.edgesFastShaderProgram;\n\t\t\t} else {\n\t\t\t\tcurrentShaderProgram = this.edgesShaderProgram;\n\t\t\t}\n\t\t} else {\n\t\t\tgl.disable(gl.BLEND);\n\t\t\t// console.log(\"PICKING EDGESSSS\");\n\t\t\tcurrentShaderProgram = this.edgesPickingShaderProgram;\n\t\t}\n\n\t\tif (this.fastEdges) {\n\t\t\t// console.log(this.edgesShaderProgram)\n\n\t\t\tcurrentShaderProgram.use(gl);\n\t\t\tcurrentShaderProgram.attributes.enable(\"vertex\");\n\t\t\tcurrentShaderProgram.attributes.enable(\"color\");\n\t\t\t// currentShaderProgram.attributes.enable(\"encodedIndex\");\n\n\n\n\t\t\t//bind attributes and unions\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.fastEdgesGeometry.vertexObject);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.vertex, 3, gl.FLOAT, false, 0, 0);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.vertex, 0); // This makes it instanced!\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.fastEdgesGeometry.colorObject);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.color, 4, gl.FLOAT, false, 0, 0);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.color, 0); // This makes it instanced!\n\n\t\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.fastEdgesGeometry.indexObject);\n\n\t\t\tgl.uniformMatrix4fv(currentShaderProgram.uniforms.projectionViewMatrix, false, this.projectionViewMatrix);\n\n\t\t\t//gl.uniform2fv(edgesShaderProgram.uniforms.nearFar,[0.1,10.0]);\n\t\t\tgl.uniform1f(currentShaderProgram.uniforms.globalOpacityScale, this._edgesGlobalOpacityScale);\n\t\t\tgl.uniform1f(currentShaderProgram.uniforms.globalOpacityBase, this._edgesGlobalOpacityBase);\n\n\n\t\t\t//drawElements is called only 1 time. no overhead from javascript\n\t\t\tgl.drawElements(gl.LINES, this.fastEdgesGeometry.numIndices, this.fastEdgesGeometry.indexType, 0);\n\n\t\t\t//disabling attributes\n\t\t\tcurrentShaderProgram.attributes.disable(\"vertex\");\n\t\t\tcurrentShaderProgram.attributes.disable(\"color\");\n\t\t\t// currentShaderProgram.attributes.disable(\"encodedIndex\");\n\t\t} else {\n\t\t\tcurrentShaderProgram.use(gl);\n\t\t\tcurrentShaderProgram.attributes.enable(\"fromVertex\");\n\t\t\tcurrentShaderProgram.attributes.enable(\"toVertex\");\n\t\t\tcurrentShaderProgram.attributes.enable(\"vertexType\");\n\t\t\tcurrentShaderProgram.attributes.enable(\"fromColor\");\n\t\t\tcurrentShaderProgram.attributes.enable(\"toColor\");\n\t\t\tcurrentShaderProgram.attributes.enable(\"fromSize\");\n\t\t\tcurrentShaderProgram.attributes.enable(\"toSize\");\n\t\t\tcurrentShaderProgram.attributes.enable(\"encodedIndex\");\n\n\t\t\t// newGeometry.edgeVertexTypeBuffer = gl.createBuffer();\n\t\t\t// newGeometry.verticesBuffer = gl.createBuffer();\n\t\t\t// newGeometry.colorBuffer = gl.createBuffer();\n\t\t\t// newGeometry.sizeBuffer = gl.createBuffer();\n\t\t\t// newGeometry.indexBuffer = gl.createBuffer();\n\t\t\t// console.log(currentShaderProgram.attributes);\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.edgeVertexTypeBuffer);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.vertexType, 2, gl.FLOAT, false, 0, 0);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.vertexType, 0);\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.verticesBuffer);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.fromVertex, 3, gl.FLOAT, false, 4 * 3 * 2, 0);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.fromVertex, 1);\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.verticesBuffer);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.toVertex, 3, gl.FLOAT, false, 4 * 3 * 2, 4 * 3);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.toVertex, 1);\n\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.colorBuffer);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.fromColor, 4, gl.FLOAT, false, 4 * 4 * 2, 0);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.fromColor, 1);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.toColor, 4, gl.FLOAT, false, 4 * 4 * 2, 4 * 4);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.toColor, 1);\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.sizeBuffer);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.fromSize, 1, gl.FLOAT, false, 4 * 2, 0);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.fromSize, 1);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.toSize, 1, gl.FLOAT, false, 4 * 2, 4);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.toSize, 1);\n\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.edgesGeometry.indexBuffer);\n\t\t\tgl.enableVertexAttribArray(currentShaderProgram.attributes.encodedIndex);\n\t\t\tgl.vertexAttribPointer(currentShaderProgram.attributes.encodedIndex, 4, gl.FLOAT, false, 0, 0);\n\t\t\text.vertexAttribDivisorANGLE(currentShaderProgram.attributes.encodedIndex, 1); // This makes it instanced!\n\n\t\t\t// gl.bindBuffer(gl.ARRAY_BUFFER, this.nodesGeometry.normalObject);\n\t\t\t// gl.vertexAttribPointer(currentShaderProgram.attributes.normal, 3, gl.FLOAT, false, 0, 0);\n\t\t\t// ext.vertexAttribDivisorANGLE(currentShaderProgram.attributes.normal, 0); \n\n\t\t\tgl.uniformMatrix4fv(currentShaderProgram.uniforms.projectionMatrix, false, this.projectionMatrix);\n\t\t\tgl.uniformMatrix4fv(currentShaderProgram.uniforms.viewMatrix, false, this.viewMatrix);\n\n\t\t\t//gl.uniform2fv(edgesShaderProgram.uniforms.nearFar,[0.1,10.0]);\n\t\t\tgl.uniform1f(currentShaderProgram.uniforms.globalOpacityScale, this._edgesGlobalOpacityScale);\n\t\t\tgl.uniform1f(currentShaderProgram.uniforms.globalOpacityBase, this._edgesGlobalOpacityBase);\n\n\t\t\tgl.uniform1f(currentShaderProgram.uniforms.globalWidthScale, this._edgesGlobalWidthScale);\n\t\t\tgl.uniform1f(currentShaderProgram.uniforms.globalWidthBase, this._edgesGlobalWidthBase);\n\n\t\t\tgl.uniform1f(currentShaderProgram.uniforms.globalSizeScale, this._nodesGlobalSizeScale * adjustedScaleFactor);\n\t\t\tgl.uniform1f(currentShaderProgram.uniforms.globalSizeBase, this._nodesGlobalSizeBase * adjustedScaleFactor);\n\n\t\t\t// 01,11,21\n\t\t\t// let cameraUp = glm.vec3.fromValues(this.viewMatrix[1], this.viewMatrix[5], this.viewMatrix[9]);\n\t\t\t// // let cameraUp = glm.vec3.fromValues(0, 1.0, 0);\n\t\t\t// // 00,10,20\n\t\t\t// let cameraRight = glm.vec3.fromValues(this.viewMatrix[0], this.viewMatrix[4], this.viewMatrix[8]);\n\t\t\t// let cameraForward = glm.vec3.fromValues(this.viewMatrix[2], this.viewMatrix[6], this.viewMatrix[10]);\n\n\t\t\t// console.log(cameraUp);\n\t\t\t// glm.vec3.normalize(cameraUp, cameraUp);\n\t\t\t// glm.vec3.normalize(cameraRight, cameraRight);\n\t\t\t// glm.vec3.cross(cameraForward,cameraUp,cameraRight);\n\t\t\t// glm.vec3.normalize(cameraForward, cameraForward);\n\t\t\t// gl.uniform3fv(currentShaderProgram.uniforms.cameraUp, cameraUp);\n\t\t\t// gl.uniform3fv(currentShaderProgram.uniforms.cameraRight, cameraRight);\n\t\t\t// gl.uniform3fv(currentShaderProgram.uniforms.cameraForward, cameraForward);\n\t\t\t// cameraRight;// = normalize(vec3(viewMatrix[0][0], viewMatrix[1][0], viewMatrix[2][0]));\n\t\t\t// cameraUp;// = normalize(vec3(viewMatrix[0][1], viewMatrix[1][1], viewMatrix[2][1]));\n\t\t\t// cameraForward;// = normalize(vec3(viewMatrix[0][2], viewMatrix[1][2], viewMatrix[2][2]));\n\n\t\t\text.drawArraysInstancedANGLE(gl.TRIANGLE_STRIP, 0, 4, this.edgesGeometry.count);\n\n\t\t\tcurrentShaderProgram.attributes.disable(\"fromVertex\");\n\t\t\tcurrentShaderProgram.attributes.disable(\"toVertex\");\n\t\t\tcurrentShaderProgram.attributes.disable(\"vertexType\");\n\t\t\tcurrentShaderProgram.attributes.disable(\"fromColor\");\n\t\t\tcurrentShaderProgram.attributes.disable(\"toColor\");\n\t\t\tcurrentShaderProgram.attributes.disable(\"fromSize\");\n\t\t\tcurrentShaderProgram.attributes.disable(\"toSize\");\n\t\t\tcurrentShaderProgram.attributes.disable(\"encodedIndex\");\n\t\t\t// console.log(\"PICKING? \" + isPicking)\n\t\t}\n\t}\n\n\t/** Helper function to redraw the scene.\n\t * @method _redrawAll\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @param {Object} destination - The destination to draw to. If undefined, the canvas will be used.\n\t * @param {String} framebufferType - Type of the framebuffer to draw \"normal\", \"picking\", \"tracking\" . Default is \"normal\"\n\t */\n\t_redrawAll(destination, framebufferType) {\n\t\tif (typeof framebufferType === 'undefined') {\n\t\t\tframebufferType = \"normal\";\n\t\t}\n\t\tconst gl = this.gl;\n\n\t\tthis._redrawPrepare(destination, framebufferType);\n\t\tif (framebufferType == \"normal\" && this.densityPlot) {\n\n\t\t\t// gl.clearColor(0.0, 0.0, 0.0, 1.0);\n\t\t\t// gl.clearDepth(1.0)\n\t\t\tgl.disable(this.gl.DEPTH_TEST);\n\t\t\t// gl.depthMask(true);\n\n\t\t\tconst fbWidth = destination?.size.width || this.canvasElement.width;\n\t\t\tconst fbHeight = destination?.size.height || this.canvasElement.height;\n\t\t\t// this.densityMap.resize(fbWidth,fbHeight);\n\t\t\tthis.densityMap.drawScene(this.projectionMatrix, this.viewMatrix);\n\t\t}\n\n\t\tgl.depthMask(true);\n\n\t\tif (this._use2D) {\n\t\t\tgl.disable(gl.DEPTH_TEST);\n\t\t\tgl.depthMask(false);\n\t\t\n\t\t\tif (framebufferType != \"tracking\" && this._edgesGlobalOpacityScale > 0.0) {\n\t\t\t\tthis._redrawEdges(destination, framebufferType);\n\t\t\t}\n\t\t\n\t\t\tthis._redrawNodes(destination, framebufferType);\n\t\t} else {\n\t\t\tgl.enable(gl.DEPTH_TEST);\n\t\t\tgl.depthFunc(gl.LEQUAL);\n\t\t\n\t\t\tthis._redrawNodes(destination, framebufferType);\n\t\t\n\t\t\tgl.depthFunc(gl.ALWAYS);\n\t\t\tgl.depthMask(false); // Prevent depth buffer writes for edges\n\t\t\n\t\t\tif (framebufferType != \"tracking\" && this._edgesGlobalOpacityScale > 0.0) {\n\t\t\t\tthis._redrawEdges(destination, framebufferType);\n\t\t\t}\n\t\t\n\t\t\tgl.depthMask(true);\n\t\t\tgl.depthFunc(gl.LEQUAL);\n\t\t}\n\t}\n\n\t// onResizeCallback\n\t// onNodeClickCallback\n\t// onNodeHoverStartCallback \n\t// onNodeHoverEndCallback\n\t// onNodeHoverMoveCallback\n\t// onZoomCallback\n\t// onRotationCallback\n\t// onLayoutStartCallback\n\t// onLayoutFinishCallback\n\t// onDrawCallback\n\n\t/** Helper function to update the center nodes position.\n\t * @method _updateCenterNodesPosition\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_updateCenterNodesPosition() {\n\t\tthis.targetTranslatePosition[0] = 0;\n\t\tthis.targetTranslatePosition[1] = 0;\n\t\tthis.targetTranslatePosition[2] = 0;\n\n\t\tif (this._centerNodes && this._centerNodes.length > 0) {\n\t\t\tfor (let i = 0; i < this._centerNodes.length; i++) {\n\t\t\t\tlet node = this._centerNodes[i];\n\t\t\t\t// if node is not of type node, get node by id\n\t\t\t\tlet pos = node.position;\n\t\t\t\tthis.targetTranslatePosition[0] -= pos[0];\n\t\t\t\tthis.targetTranslatePosition[1] -= pos[1];\n\t\t\t\tthis.targetTranslatePosition[2] -= pos[2];\n\t\t\t}\n\t\t\tlet lengthSize = this._centerNodes.length;\n\t\t\tthis.targetTranslatePosition[0] /= lengthSize;\n\t\t\tthis.targetTranslatePosition[1] /= lengthSize;\n\t\t\tthis.targetTranslatePosition[2] /= lengthSize;\n\t\t}\n\t}\n\n\t/** Center view on nodes with animation.\n\t * @method centerOnNodes\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number[]|Node} nodes - The nodes to center on.\n\t * @param {number} duration - The duration of the animation in milliseconds.\n\t * @example\n\t * // Center on node with id 1\n\t * helios.centerOnNodes([1], 1000);\n\t * @example\n\t * // Center on node with id 1 and 2\n\t * helios.centerOnNodes([1, 2], 1000);\n\t * @example\n\t * // Center on node with id 1 and node object\n\t * helios.centerOnNodes([1, helios.network.nodes[2]], 1000);\n\t * return {this} The current instance of Helios for chaining.\n\t */\n\tcenterOnNodes(nodes, duration) {\n\t\t//\n\t\tthis._centerNodes = [];\n\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\tlet node = nodes[i];\n\t\t\tif (node.ID === undefined) {\n\t\t\t\tnode = this.network.nodes[node];\n\t\t\t}\n\t\t\tthis._centerNodes.push(node);\n\t\t}\n\n\t\tthis._updateCameraInteraction();\n\n\t\tthis.lastTranslatePosition[0] = this.translatePosition[0];\n\t\tthis.lastTranslatePosition[1] = this.translatePosition[1];\n\t\tthis.lastTranslatePosition[2] = this.translatePosition[2];\n\t\tthis.lastPanX = this.panX;\n\t\tthis.lastPanY = this.panY;\n\t\tif (duration === undefined || duration <= 0) {\n\t\t\tthis.translateDuration = 0;\n\t\t\tthis.translateStartTime = null;\n\t\t\t// this.update(); No need to update?\n\t\t\t// this.render();\n\t\t} else {\n\t\t\tthis.translateDuration = duration;\n\t\t\tthis.translateStartTime = performance.now();\n\t\t}\n\t\tthis._scheduleCameraInterpolation();\n\t\treturn this;\n\t}\n\n\t/** Get the nodes being centered on.\n\t * @method getCenterNodes\n\t * @memberof Helios\n\t * @instance\n\t * @return {Array<Node>} The nodes being centered on.\n\t * @example\n\t * // Get the nodes being centered on\n\t * let nodes = helios.getCenterNodes();\n\t */\n\tcenteredNodes() {\n\t\treturn this._centerNodes;\n\t}\n\n\n\t/** Helper method to update the camera interpolation.\n\t * @method _updateCameraInterpolation\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @param {Boolean} ignoreInstantaneousUpdate - Ignore instantaneous update.\n\t * @return {Boolean} True if the camera interpolation needs to continue, false otherwise.\n\t */\n\t_updateCameraInterpolation(ignoreInstantaneousUpdate = false) {\n\t\tif (this.translateDuration == 0) {\n\t\t\tif (!ignoreInstantaneousUpdate) {\n\t\t\t\tthis.translatePosition[0] = this.targetTranslatePosition[0];\n\t\t\t\tthis.translatePosition[1] = this.targetTranslatePosition[1];\n\t\t\t\tthis.translatePosition[2] = this.targetTranslatePosition[2];\n\t\t\t\tthis.panX = 0;\n\t\t\t\tthis.panY = 0;\n\t\t\t\tif (this._use2D) {\n\t\t\t\t\t// this.zoom.translateTo(d3Select(this.canvasElement),this.panX+this.canvasElement.clientWidth/2,this.panY+this.canvasElement.clientHeight/2);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false; //no need to continue\n\t\t} else {\n\t\t\tlet elapsedTime = performance.now() - this.translateStartTime;\n\t\t\tlet alpha = elapsedTime / this.translateDuration;\n\t\t\tif (alpha > 1) {\n\t\t\t\talpha = 1.0;\n\t\t\t}\n\t\t\t// console.log(elapsedTime);\n\t\t\tthis.translatePosition[0] = (1.0 - alpha) * this.lastTranslatePosition[0];\n\t\t\tthis.translatePosition[1] = (1.0 - alpha) * this.lastTranslatePosition[1];\n\t\t\tthis.translatePosition[2] = (1.0 - alpha) * this.lastTranslatePosition[2];\n\n\t\t\tthis.translatePosition[0] += alpha * this.targetTranslatePosition[0];\n\t\t\tthis.translatePosition[1] += alpha * this.targetTranslatePosition[1];\n\t\t\tthis.translatePosition[2] += alpha * this.targetTranslatePosition[2];\n\n\t\t\tthis.panX = (1.0 - alpha) * this.lastPanX;\n\t\t\tthis.panY = (1.0 - alpha) * this.lastPanY;\n\t\t\tthis.panX += alpha * this.targetPanX;\n\t\t\tthis.panY += alpha * this.targetPanY;\n\t\t\tif (this._use2D) {\n\t\t\t\t// this.zoom.translateTo(d3Select(this.canvasElement),this.panX+this.canvasElement.clientWidth/2,this.panY+this.canvasElement.clientHeight/2);\n\t\t\t}\n\t\t\tif (alpha >= 1.0) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\n\t/** Helper method to schedule the camera interpolation.\n\t * @method _scheduleCameraInterpolation\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_scheduleCameraInterpolation() {\n\t\tlet cameraInterpolatorTask = {\n\t\t\tname: \"1.1.cameraInterpolator\",\n\t\t\tcallback: (elapsedTime, task) => {\n\t\t\t\tthis._updateCenterNodesPosition();\n\t\t\t\tif (!this._updateCameraInterpolation()) {\n\n\t\t\t\t\tthis.scheduler.unschedule(\"1.1.cameraInterpolator\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelay: 0,\n\t\t\trepeat: true,\n\t\t\tsynchronized: true,\n\t\t\timmediateUpdates: false,\n\t\t\tredraw: true,\n\t\t\tupdateNodesGeometry: false,\n\t\t\tupdateEdgesGeometry: false,\n\t\t}\n\t\tthis.scheduler.schedule({\n\t\t\tname: \"1.0.cameraInterpolator\",\n\t\t\tcallback: (elapsedTime, task) => {\n\t\t\t\tthis.scheduler.schedule(cameraInterpolatorTask);\n\t\t\t},\n\t\t\tdelay: 0,\n\t\t\trepeat: false,\n\t\t\tsynchronized: true,\n\t\t\timmediateUpdates: false,\n\t\t\tredraw: false,\n\t\t\tupdateNodesGeometry: false,\n\t\t\tupdateEdgesGeometry: false,\n\t\t});\n\t}\n\n\t//#region Events\n\n\t/** Set the callback for the resize event.\n\t * @method onResize\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the resize event\n\t * helios.onResize((width, height) => {\n\t * \tconsole.log(\"The canvas was resized to \" + width + \"x\" + height);\n\t * });\n\t */\n\tonResize(callback) {\n\t\tthis.onResizeCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the node click event.\n\t * @method onNodeClick\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the node click event\n\t * helios.onNodeClick((node) => {\n\t * \tconsole.log(\"The node \" + node.id + \" was clicked\");\n\t * });\n\t */\n\tonNodeClick(callback) {\n\t\tthis.onNodeClickCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the node double click event.\n\t * @method onNodeDoubleClick\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the node double click event\n\t * helios.onNodeDoubleClick((node) => {\n\t * \tconsole.log(\"The node \" + node.id + \" was double clicked\");\n\t * });\n\t * @see {@link Helios#onNodeClick}\n\t */\n\tonNodeDoubleClick(callback) {\n\t\tthis.onNodeDoubleClickCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the node hover start event.\n\t * @method onNodeHoverStart\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the node hover start event\n\t * helios.onNodeHoverStart((node) => {\n\t * \tconsole.log(\"The node \" + node.id + \" was hovered\");\n\t * });\n\t * @see {@link Helios#onNodeHoverEnd}\n\t * @see {@link Helios#onNodeHoverMove}\n\t */\n\tonNodeHoverStart(callback) {\n\t\tthis.onNodeHoverStartCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the node hover end event.\n\t * @method onNodeHoverEnd\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the node hover end event\n\t * helios.onNodeHoverEnd((node) => {\n\t * \tconsole.log(\"The node \" + node.id + \" was no longer hovered\");\n\t * });\n\t * @see {@link Helios#onNodeHoverStart}\n\t * @see {@link Helios#onNodeHoverMove}\n\t */\n\tonNodeHoverEnd(callback) {\n\t\tthis.onNodeHoverEndCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the node hover move event.\n\t * @method onNodeHoverMove\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @category Events\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the node hover move event\n\t * helios.onNodeHoverMove((node) => {\n\t * \tconsole.log(\"The node \" + node.id + \" was hovered\");\n\t * });\n\t * @see {@link Helios#onNodeHoverStart}\n\t * @see {@link Helios#onNodeHoverEnd}\n\t */\n\tonNodeHoverMove(callback) {\n\t\tthis.onNodeHoverMoveCallback = callback;\n\t\treturn this;\n\t}\n\n\n\n\t/** Set the callback for the edge click event.\n\t * @method onEdgeClick\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the edge click event\n\t * helios.onEdgeClick((edge) => {\n\t * \tconsole.log(\"The edge \" + edge.id + \" was clicked\");\n\t * });\n\t * @see {@link Helios#onEdgeDoubleClick}\n\t * @see {@link Helios#onEdgeHoverStart}\n\t * @see {@link Helios#onEdgeHoverEnd}\n\t * @see {@link Helios#onEdgeHoverMove}\n\t */\n\tonEdgeClick(callback) {\n\t\tthis.onEdgeClickCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the edge double click event.\n\t * @method onEdgeDoubleClick\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the edge double click event\n\t * helios.onEdgeDoubleClick((edge) => {\n\t * \tconsole.log(\"The edge \" + edge.id + \" was double clicked\");\n\t * });\n\t * @see {@link Helios#onEdgeClick}\n\t * @see {@link Helios#onEdgeHoverStart}\n\t * @see {@link Helios#onEdgeHoverEnd}\n\t * @see {@link Helios#onEdgeHoverMove}\n\t */\n\tonEdgeDoubleClick(callback) {\n\t\tthis.onEdgeDoubleClickCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the edge hover start event.\n\t * @method onEdgeHoverStart\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the edge hover start event\n\t * helios.onEdgeHoverStart((edge) => {\n\t * \tconsole.log(\"The edge \" + edge.id + \" was hovered\");\n\t * });\n\t * @see {@link Helios#onEdgeClick}\n\t * @see {@link Helios#onEdgeDoubleClick}\n\t * @see {@link Helios#onEdgeHoverEnd}\n\t * @see {@link Helios#onEdgeHoverMove}\n\t */\n\tonEdgeHoverStart(callback) {\n\t\tthis.onEdgeHoverStartCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the edge hover end event.\n\t * @method onEdgeHoverEnd\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the edge hover end event\n\t * helios.onEdgeHoverEnd((edge) => {\n\t * \tconsole.log(\"The edge \" + edge.id + \" was no longer hovered\");\n\t * });\n\t * @see {@link Helios#onEdgeClick}\n\t * @see {@link Helios#onEdgeDoubleClick}\n\t * @see {@link Helios#onEdgeHoverStart}\n\t * @see {@link Helios#onEdgeHoverMove}\n\t */\n\tonEdgeHoverEnd(callback) {\n\t\tthis.onEdgeHoverEndCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the edge hover move event.\n\t * @method onEdgeHoverMove\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the edge hover move event\n\t * helios.onEdgeHoverMove((edge) => {\n\t * \tconsole.log(\"The edge \" + edge.id + \" was hovered\");\n\t * });\n\t * @see {@link Helios#onEdgeClick}\n\t * @see {@link Helios#onEdgeDoubleClick}\n\t * @see {@link Helios#onEdgeHoverStart}\n\t * @see {@link Helios#onEdgeHoverEnd}\n\t */\n\tonEdgeHoverMove(callback) {\n\t\tthis.onEdgeHoverMoveCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the zoom event.\n\t * @method onZoom\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the zoom event\n\t * helios.onZoom((zoom) => {\n\t * \tconsole.log(\"The zoom is now \" + zoom);\n\t * });\n\t * @see {@link Helios#onRotation}\n\t */\n\tonZoom(callback) {\n\t\tthis.onZoomCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the rotation event.\n\t * @method onRotation\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the rotation event\n\t * helios.onRotation((rotation) => {\n\t * \tconsole.log(\"The rotation is now \" + rotation);\n\t * });\n\t * @see {@link Helios#onZoom}\n\t */\n\tonRotation(callback) {\n\t\tthis.onRotationCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the layout start event.\n\t * @method onLayoutStart\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the layout start event\n\t * helios.onLayoutStart(() => {\n\t * \tconsole.log(\"The layout has started\");\n\t * });\n\t * @see {@link Helios#onLayoutStop}\n\t * @see {@link Helios#onLayoutTick}\n\t * @see {@link Helios#onLayoutEnd}\n\t */\n\tonLayoutStart(callback) {\n\t\tconsole.log(\"On start\",this.layoutWorker)\n\t\tthis.onLayoutStartCallback = callback;\n\t\tthis?.layoutWorker.onStart(() => {\n\t\t\tthis.onLayoutStartCallback?.();\n\t\t});\n\t\treturn this;\n\t}\n\n\n\t/** Set the callback for the layout stop event.\n\t * @method onLayoutStop\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the layout stop event\n\t * helios.onLayoutStop(() => {\n\t * \tconsole.log(\"The layout has stopped\");\n\t * });\n\t * @see {@link Helios#onLayoutStart}\n\t * @see {@link Helios#onLayoutTick}\n\t */\n\tonLayoutStop(callback) {\n\t\tconsole.log(\"Stop\",this.layoutWorker)\n\t\tthis.onLayoutStopCallback = callback;\n\t\tthis?.layoutWorker.onStop(() => {\n\t\t\tthis.onLayoutStopCallback?.();\n\t\t});\n\t\treturn this;\n\t}\n\n\t/** Set the callback for the draw event.\n\t * @method onDraw\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for the draw event\n\t * helios.onDraw(() => {\n\t * \tconsole.log(\"The graph was drawn\");\n\t * });\n\t * @see {@link Helios#onReady}\n\t */\n\tonDraw(callback) {\n\t\tthis.onDrawCallback = callback;\n\t\treturn this;\n\t}\n\n\t/** Set the callback for when Helios is ready and properly initialized.\n\t * @method onReady\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for when Helios is ready\n\t * let helios = Helios(\"elementID\",networkData);\n\t * helios.onReady(() => {\n\t * \tconsole.log(\"Helios is ready\");\n\t * });\n\t */\n\tonReady(callback) {\n\t\tif (this._isReady) {\n\t\t\tcallback?.(this);\n\t\t} else {\n\t\t\tthis.onReadyCallback = callback;\n\t\t}\n\t}\n\n\n\t/** Set the callback for when Helios is cleaned up and properly disposed.\n\t * @method onCleanup\n\t * @memberof Helios\n\t * @instance\n\t * @param {Function} callback - The callback function.\n\t * @chainable\n\t * @return {this} The current Helios instance for chaining.\n\t * @example\n\t * // Set the callback for when Helios is cleaned up\n\t * let helios = Helios(\"elementID\",networkData);\n\t * helios.onCleanup(() => {\n\t * \tconsole.log(\"Helios is cleaned up\");\n\t * });\n\t */\n\tonCleanup(callback) {\n\t\tif (this.isCleanedUp) {\n\t\t\tcallback?.(this);\n\t\t} else {\n\t\t\tthis.onCleanupCallback = callback;\n\t\t}\n\t}\n\n\n\t//#endregion\n\n\n\t//#region Style attributes\n\n\t/** Set the background color of the graph.\n\t * @method backgroundColor\n\t * @memberof Helios\n\t * @instance\n\t * @param {Array<number>} color - The background color of the graph in RGB or RGBA formats as 3 or 4 float entries from 0.0 to 1.0.\n\t * @chainable\n\t * @return {Array<number>|this} The background color of the panel or the current Helios instance for chaining.\n\t * @example\n\t * // Set the background color of the graph to red\n\t * helios.backgroundColor([1.0,0,0,1.0]);\n\t * @example\n\t * // Get the background color of the graph\n\t * let backgroundColor = helios.backgroundColor();\n\t */\n\tbackgroundColor(color) {\n\t\t// check if color is defined\n\t\tif (typeof color === \"undefined\") {\n\t\t\treturn this._backgroundColor;\n\t\t} else {\n\t\t\tthis._backgroundColor = color;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\n\t/** Set the color of the nodes.\n\t * @method nodeColor\n\t * @memberof Helios\n\t * @instance\n\t * @param {Array<number>|Function} colorInput - The color of the nodes in RGB or RGBA formats as 3 or 4 float entries from 0.0 to 1.0 or a function that returns the color of the nodes.\n\t * @param {string} [nodeID] - The ID of the node to set the color of. If not specified, the color of all nodes will be set.\n\t * @chainable\n\t * @return {Array<number>|this} The color of the nodes or the current Helios instance for chaining.\n\t * @example\n\t * // Set the color of all nodes to red\n\t * helios.nodeColor([1.0,0,0,1.0]);\n\t * @example\n\t * // Set the color of a specific node to red\n\t * helios.nodeColor([1.0,0,0,1.0], \"nodeID\");\n\t * @example\n\t * // Set the color of all nodes to a random color\n\t * helios.nodeColor((node) => {\n\t * \treturn [Math.random(), Math.random(), Math.random(), 1.0];\n\t * });\n\t * @example\n\t * // Set the color of all nodes based on an node attribute called `altColor`\n\t * helios.nodeColor((node) => {\n\t * \treturn node.altColor;\n\t * });\n\t */\n\tnodeColor(colorInput, nodeID) {\n\t\tif (typeof nodeID === \"undefined\") {\n\t\t\tif (typeof colorInput === \"undefined\") {\n\t\t\t\treturn this.network.colors;\n\t\t\t} else if (typeof colorInput === \"function\") {\n\t\t\t\t// This may be used in future if we want to have a dynamic nodes\n\t\t\t\t// for (const [nodeID, node] of Object.entries(this.network.nodes)) {\n\t\t\t\t// \tlet nodeIndex = this.network.ID2index[nodeID];\n\n\t\t\t\tlet allNodes = this.network.index2Node;\n\t\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\t\tlet node = allNodes[nodeIndex];\n\t\t\t\t\tlet aColor = colorInput(node, nodeIndex, this.network);\n\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 0] = aColor[0];\n\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 1] = aColor[1];\n\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 2] = aColor[2];\n\t\t\t\t\tif (aColor.length > 3) {\n\t\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 3] = aColor[3];\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t} else if (typeof colorInput === \"number\") {\n\t\t\t\t//index\n\t\t\t\treturn this.network.colors[this.network.ID2index[colorInput]];\n\t\t\t} else {\n\t\t\t\tlet allNodes = this.network.index2Node;\n\t\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 0] = colorInput[0];\n\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 1] = colorInput[1];\n\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 2] = colorInput[2];\n\t\t\t\t\tif (colorInput.length > 3) {\n\t\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 3] = colorInput[3];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof colorInput === \"function\") {\n\t\t\t\tlet nodeIndex = this.network.ID2index[nodeID];\n\t\t\t\tlet aColor = colorInput(nodeID, nodeIndex, this.network);\n\t\t\t\tthis.network.colors[nodeIndex * 4 + 0] = aColor[0];\n\t\t\t\tthis.network.colors[nodeIndex * 4 + 1] = aColor[1];\n\t\t\t\tthis.network.colors[nodeIndex * 4 + 2] = aColor[2];\n\t\t\t\tif (aColor.length > 3) {\n\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 3] = aColor[3];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet nodeIndex = this.network.ID2index[nodeID];\n\t\t\t\tthis.network.colors[nodeIndex * 4 + 0] = colorInput[0];\n\t\t\t\tthis.network.colors[nodeIndex * 4 + 1] = colorInput[1];\n\t\t\t\tthis.network.colors[nodeIndex * 4 + 2] = colorInput[2];\n\t\t\t\tif (colorInput.length > 3) {\n\t\t\t\t\tthis.network.colors[nodeIndex * 4 + 3] = colorInput[3];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\t/** Set the size of the nodes.\n\t * @method nodeSize\n\t * @memberof Helios\n\t * @instance\n\t * @param {number|Function} sizeInput - The size of the nodes or a function that returns the size of the nodes.\n\t * @param {string} [nodeID] - The ID of the node to set the size of. If not specified, the size of all nodes will be set.\n\t * @chainable\n\t * @return {number|this} The size of the nodes or the current Helios instance for chaining.\n\t * @example\n\t * // Set the size of all nodes to 10\n\t * helios.nodeSize(10);\n\t * @example\n\t * // Set the size of a specific node to 10\n\t * helios.nodeSize(10, \"nodeID\");\n\t * @example\n\t * // Set the size of all nodes to a random size\n\t * helios.nodeSize(() => {\n\t * \treturn Math.random() * 10;\n\t * });\n\t * @example\n\t * // Set the size of all nodes based on an node attribute called `altSize`\n\t * helios.nodeSize((node) => {\n\t * \treturn node.altSize;\n\t * });\n\t */\n\tnodeSize(sizeInput, nodeID) {\n\t\tif (typeof nodeID === \"undefined\") {\n\t\t\tif (typeof sizeInput === \"undefined\") {\n\t\t\t\treturn this.network.sizes;\n\t\t\t} else if (typeof sizeInput === \"function\") {\n\t\t\t\tlet allNodes = this.network.index2Node;\n\t\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\t\tlet node = allNodes[nodeIndex];\n\t\t\t\t\tlet aSize = sizeInput(node, this.network);\n\t\t\t\t\tthis.network.sizes[nodeIndex] = aSize;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet allNodes = this.network.index2Node;\n\t\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\t\tthis.network.sizes[nodeIndex] = sizeInput;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof sizeInput === \"function\") {\n\t\t\t\tlet aSize = sizeInput(nodeID, this.network);\n\t\t\t\tlet nodeIndex = this.network.ID2index[nodeID];\n\t\t\t\tthis.network.sizes[nodeIndex] = aSize;\n\t\t\t} else {\n\t\t\t\tlet nodeIndex = this.network.ID2index[nodeID];\n\t\t\t\tthis.network.sizes[nodeIndex] = sizeInput;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\n\t/** Set the color of the node outlines.\n\t * @method nodeOutlineColor\n\t * @memberof Helios\n\t * @instance\n\t * @param {number[]|Function} colorInput - The color of the node outlines or a function that returns the color of the node outlines. Uses RGBA or RGBA formatted array.\n\t * @param {string} [nodeID] - The ID of the node to set the color of. If not specified, the color of all nodes will be set.\n\t * @chainable\n\t * @return {number[]|this} The color of the node outlines or the current Helios instance for chaining.\n\t * @example\n\t * // Set the color of all node outlines to red\n\t * helios.nodeOutlineColor([1, 0, 0, 1]);\n\t * @example\n\t * // Set the color of a specific node outline to red\n\t * helios.nodeOutlineColor([1, 0, 0, 1], \"nodeID\");\n\t * @example\n\t * // Set the color of all node outlines to a random color\n\t * helios.nodeOutlineColor(() => {\n\t * \treturn [Math.random(), Math.random(), Math.random(), 1];\n\t * });\n\t * @example\n\t * // Set the color of all node outlines based on an node attribute called `altColor`\n\t * helios.nodeOutlineColor((node) => {\n\t * \treturn node.altColor;\n\t * });\n\t */\n\tnodeOutlineColor(colorInput, nodeID) {\n\t\tif (typeof nodeID === \"undefined\") {\n\t\t\tif (typeof colorInput === \"undefined\") {\n\t\t\t\treturn this.network.outlineColors;\n\t\t\t} else if (typeof colorInput === \"function\") {\n\t\t\t\tlet allNodes = this.network.index2Node;\n\t\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\t\tlet node = allNodes[nodeIndex];\n\t\t\t\t\tlet aColor = colorInput(node, nodeIndex, this.network);\n\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 0] = aColor[0];\n\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 1] = aColor[1];\n\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 2] = aColor[2];\n\t\t\t\t\tif (aColor.length > 3) {\n\t\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 3] = aColor[3];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (typeof colorInput === \"number\") {\n\t\t\t\t//index\n\t\t\t\treturn this.network.outlineColors[this.network.ID2index[colorInput]];\n\t\t\t} else {\n\t\t\t\tlet allNodes = this.network.index2Node;\n\t\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 0] = colorInput[0];\n\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 1] = colorInput[1];\n\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 2] = colorInput[2];\n\t\t\t\t\tif (colorInput.length > 3) {\n\t\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 3] = colorInput[3];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof colorInput === \"function\") {\n\t\t\t\tlet nodeIndex = this.network.ID2index[nodeID];\n\t\t\t\tlet aColor = colorInput(nodeID, nodeIndex, this.network);\n\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 0] = aColor[0];\n\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 1] = aColor[1];\n\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 2] = aColor[2];\n\t\t\t\tif (aColor.length > 3) {\n\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 3] = aColor[3];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet nodeIndex = this.network.ID2index[nodeID];\n\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 0] = colorInput[0];\n\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 1] = colorInput[1];\n\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 2] = colorInput[2];\n\t\t\t\tif (colorInput.length > 3) {\n\t\t\t\t\tthis.network.outlineColors[nodeIndex * 4 + 3] = colorInput[3];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\t/** Set the width of the node outlines.\n\t * @method nodeOutlineWidth\n\t * @memberof Helios\n\t * @instance\n\t * @param {number|Function} widthInput - The width of the node outlines or a function that returns the width of the node outlines.\n\t * @param {string} [nodeID] - The ID of the node to set the width of. If not specified, the width of all nodes will be set.\n\t * @chainable\n\t * @return {number|this} The width of the node outlines or the current Helios instance for chaining.\n\t * @example\n\t * // Set the width of all node outlines to 5\n\t * helios.nodeOutlineWidth(5);\n\t * @example\n\t * // Set the width of a specific node outline to 5\n\t * helios.nodeOutlineWidth(5, \"nodeID\");\n\t * @example\n\t * // Set the width of all node outlines to a random width\n\t * helios.nodeOutlineWidth(() => {\n\t * \treturn Math.random() * 10;\n\t * });\n\t * @example\n\t * // Set the width of all node outlines based on an node attribute called `altWidth`\n\t * helios.nodeOutlineWidth((node) => {\n\t * \treturn node.altWidth;\n\t * });\n\t * @example\n\t * // Set the width of all node outlines based on an node attribute called `altWidth`\n\t * helios.nodeOutlineWidth((node) => {\n\t * \treturn node.altWidth;\n\t * });\n\t */\n\tnodeOutlineWidth(widthInput, nodeID) {\n\t\tif (typeof nodeID === \"undefined\") {\n\t\t\tif (typeof widthInput === \"undefined\") {\n\t\t\t\treturn this.network.outlineWidths;\n\t\t\t} else if (typeof widthInput === \"function\") {\n\t\t\t\tlet allNodes = this.network.index2Node;\n\t\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\t\tlet node = allNodes[nodeIndex];\n\t\t\t\t\tlet aWidth = widthInput(node, this.network);\n\t\t\t\t\tthis.network.outlineWidths[node.index] = aWidth;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet allNodes = this.network.index2Node;\n\t\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\t\tthis.network.outlineWidths[nodeIndex] = widthInput;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof widthInput === \"function\") {\n\t\t\t\tlet aWidth = widthInput(nodeID, this.network);\n\t\t\t\tlet nodeIndex = this.network.ID2index[nodeID];\n\t\t\t\tthis.network.outlineWidths[nodeIndex] = aWidth;\n\t\t\t} else {\n\t\t\t\tlet nodeIndex = this.network.ID2index[nodeID];\n\t\t\t\tthis.network.outlineWidths[nodeIndex] = widthInput;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\n\n\t/** Set the color of the edges.\n\t * @method edgeColor\n\t * @memberof Helios\n\t * @instance\n\t * @param {number|Function} colorInput - The color of the edges or a function that returns the color of the edges.\n\t * @param {string} [edgeID] - The ID of the edge to set the color of. If not specified, the color of all edges will be set.\n\t * @chainable\n\t * @return {number|this} The color of the edges or the current Helios instance for chaining.\n\t * @example\n\t * // Set the color of all edges to red\n\t * helios.edgeColor([1, 0, 0, 1]);\n\t * @example\n\t * // Set the color of a specific edge to red\n\t * helios.edgeColor([1, 0, 0, 1], \"edgeID\");\n\t * @example\n\t * // Set the color of all edges to a random color\n\t * helios.edgeColor(() => {\n\t * \treturn [Math.random(), Math.random(), Math.random(), 1];\n\t * });\n\t * @example\n\t * // Set the color of all edges based on an edge attribute called `altColor`\n\t * helios.edgeColor((edge) => {\n\t * \treturn edge.altColor;\n\t * });\n\t */\n\tedgeColor(colorInput, edgeID) {\n\t\tif (typeof edgeID === \"undefined\") {\n\t\t\tif (typeof colorInput === \"undefined\") {\n\t\t\t\treturn this.network.edgeColors;\n\t\t\t} else if (typeof colorInput === \"function\") {\n\t\t\t\t// This may be used in future if we want to have a dynamic nodes\n\t\t\t\t// for (const [nodeID, node] of Object.entries(this.network.nodes)) {\n\t\t\t\t// \tlet nodeIndex = this.network.ID2index[nodeID];\n\n\t\t\t\tlet allNodes = this.network.index2Node;\n\t\t\t\tlet allEdges = this.network.indexedEdges;\n\t\t\t\tfor (let edgeIndex = 0; edgeIndex < allEdges.length / 2; edgeIndex++) {\n\t\t\t\t\tlet sourceNode = allNodes[allEdges[edgeIndex * 2]];\n\t\t\t\t\tlet targetNode = allNodes[allEdges[edgeIndex * 2 + 1]];\n\t\t\t\t\tlet aColor = colorInput(edgeIndex, sourceNode, targetNode, this.network);\n\t\t\t\t\tif (aColor.length == 2) {// two colors\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 0] = aColor[0][0];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 1] = aColor[0][1];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 2] = aColor[0][2];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 0] = aColor[1][0];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 1] = aColor[1][1];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 2] = aColor[1][2];\n\t\t\t\t\t\tif (aColor[0].length > 3) {\n\t\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 3] = aColor[0][3];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (aColor[1].length > 3) {\n\t\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 3] = aColor[1][3];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {// two colors\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 0] = aColor[0];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 1] = aColor[1];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 2] = aColor[2];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 0] = aColor[0];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 1] = aColor[1];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 2] = aColor[2];\n\t\t\t\t\t\tif (aColor.length > 3) {\n\t\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 3] = aColor[3];\n\t\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 3] = aColor[3];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (typeof colorInput === \"number\") {\n\t\t\t\t//index\n\t\t\t\treturn [this.network.edgeColors[colorInput * 2 + 0], this.network.edgeColors[colorInput * 2 + 1]];\n\t\t\t} else {\n\n\t\t\t\tlet allNodes = this.network.index2Node;\n\t\t\t\tlet allEdges = this.network.indexedEdges;\n\t\t\t\tfor (let edgeIndex = 0; edgeIndex < allEdges.length / 2; edgeIndex++) {\n\t\t\t\t\tlet sourceNode = allNodes[allEdges[edgeIndex * 2]];\n\t\t\t\t\tlet targetNode = allNodes[allEdges[edgeIndex * 2 + 1]];\n\t\t\t\t\tif (colorInput.length == 2) {// two colors\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 0] = colorInput[0][0];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 1] = colorInput[0][1];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 2] = colorInput[0][2];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 0] = colorInput[1][0];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 1] = colorInput[1][1];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 2] = colorInput[1][2];\n\t\t\t\t\t\tif (colorInput[0].length > 3) {\n\t\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 3] = colorInput[0][3];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (colorInput[1].length > 3) {\n\t\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 3] = colorInput[1][3];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {// two colors\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 0] = colorInput[0];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 1] = colorInput[1];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 2] = colorInput[2];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 0] = colorInput[0];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 1] = colorInput[1];\n\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 2] = colorInput[2];\n\t\t\t\t\t\tif (colorInput.length > 3) {\n\t\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 3] = colorInput[3];\n\t\t\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 3] = colorInput[3];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tlet aColor = colorInput;\n\t\t\tif (typeof colorInput === \"function\") {\n\t\t\t\tlet aColor = colorInput(nodeID, nodeIndex, this.network);\n\t\t\t}\n\t\t\tlet nodeIndex = this.network.ID2index[nodeID];\n\t\t\tif (colorInput.length == 2) {// two colors\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 0] = colorInput[0][0];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 1] = colorInput[0][1];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 2] = colorInput[0][2];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 0] = colorInput[1][0];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 1] = colorInput[1][1];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 2] = colorInput[1][2];\n\t\t\t\tif (colorInput[0].length > 3) {\n\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 3] = colorInput[0][3];\n\t\t\t\t}\n\t\t\t\tif (colorInput[1].length > 3) {\n\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 3] = colorInput[1][3];\n\t\t\t\t}\n\t\t\t} else {// two colors\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 0] = colorInput[0];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 1] = colorInput[1];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2) * 4 + 2] = colorInput[2];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 0] = colorInput[0];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 1] = colorInput[1];\n\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 2] = colorInput[2];\n\t\t\t\tif (colorInput.length > 3) {\n\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 3] = colorInput[3];\n\t\t\t\t\tthis.network.edgeColors[(edgeIndex * 2 + 1) * 4 + 3] = colorInput[3];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\n\t/** Set the width of the edges. \n\t * @method edgeWidth\n\t * @memberof Helios\n\t * @instance\n\t * @param {number|function} widthInput - The width of the edges. If a function is provided, it will be called for each edge. The function should return a number or an array of two numbers, the width at the source and target.\n\t * @param {number} [edgeIndex] - The index of the edge. If not provided, the width will be set for all edges.\n\t * @return {number|this} - The width of the edge if no arguments are provided, otherwise the Helios instance for chaining.\n\t * @example\n\t * // Set the width of all edges to 5.\n\t * helios.edgeWidth(5);\n\t * @example\n\t * // Set the width of the edge with index 0 to 5.\n\t * helios.edgeWidth(5, 0);\n\t * @example\n\t * // Set the width of all edges to a random number between 1 and 10.\n\t * helios.edgeWidth(sourceNode, targetNode, edgeIndex) => {\n\t *    return Math.random() * 9 + 1;\n\t * });\n\t * @example\n\t * // Set the width of all edges to 5 at source and 2 at target.\n\t * helios.edgeWidth(sourceNode, targetNode, edgeIndex) => {\n\t *   return [5, 2];\n\t * });\n\t * @example\n\t * // Set the width of the edge with altSizes properties from source and target.\n\t * helios.edgeWidth(sourceNode, targetNode, edgeIndex) => {\n\t *  return [sourceNode.altSizes, targetNode.altSizes];\n\t * });\n\t */\n\tedgeWidth(widthInput, edgeIndex) {\n\t\tif (typeof edgeIndex === \"undefined\") {\n\t\t\tif (typeof widthInput === \"undefined\") {\n\t\t\t\treturn this.network.edgeColors;\n\t\t\t} else if (typeof widthInput === \"function\") {\n\t\t\t\tlet allNodes = this.network.index2Node;\n\t\t\t\tlet allEdges = this.network.indexedEdges;\n\t\t\t\tfor (let edgeIndex = 0; edgeIndex < allEdges.length / 2; edgeIndex++) {\n\t\t\t\t\tlet sourceNode = allNodes[allEdges[edgeIndex * 2]];\n\t\t\t\t\tlet targetNode = allNodes[allEdges[edgeIndex * 2 + 1]];\n\t\t\t\t\tlet aWidth = widthInput(sourceNode, targetNode, edgeIndex, this.network);\n\n\t\t\t\t\tif (typeof aWidth === \"number\") {\n\t\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2] = aWidth;\n\t\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2 + 1] = aWidth;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2] = aWidth[0];\n\t\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2 + 1] = aWidth[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet allEdges = this.network.indexedEdges;\n\t\t\t\tfor (let edgeIndex = 0; edgeIndex < allEdges.length / 2; edgeIndex++) {\n\t\t\t\t\tif (typeof widthInput === \"number\") {\n\t\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2] = widthInput;\n\t\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2 + 1] = widthInput;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2] = widthInput[0];\n\t\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2 + 1] = widthInput[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof widthInput === \"function\") {\n\t\t\t\tlet allNodes = this.network.index2Node;\n\t\t\t\tlet allEdges = this.network.indexedEdges;\n\t\t\t\tlet sourceNode = allNodes[allEdges[edgeIndex * 2]];\n\t\t\t\tlet targetNode = allNodes[allEdges[edgeIndex * 2 + 1]];\n\t\t\t\tlet aWidth = widthInput(sourceNode, targetNode, edgeIndex, this.network);\n\t\t\t\tif (typeof aWidth === \"number\") {\n\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2] = aWidth;\n\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2 + 1] = aWidth;\n\t\t\t\t} else {\n\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2] = aWidth[0];\n\t\t\t\t\tthis.network.edgeSizes[edgeIndex * 2 + 1] = aWidth[1];\n\t\t\t\t}\n\t\t\t} else if (typeof widthInput === \"number\") {\n\t\t\t\tthis.network.edgeSizes[edgeIndex * 2] = widthInput;\n\t\t\t\tthis.network.edgeSizes[edgeIndex * 2 + 1] = widthInput;\n\t\t\t} else {\n\t\t\t\tthis.network.edgeSizes[edgeIndex * 2] = widthInput[0];\n\t\t\t\tthis.network.edgeSizes[edgeIndex * 2 + 1] = widthInput[1];\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\n\t/** Project the positions of the nodes provided to the screen (using the projection matrix).\n\t * @method getProjectedPositions\n\t * @memberof Helios\n\t * @instance\n\t * @param {Node[]|number} nodes - The nodes or indices of nodes to project.\n\t * @return {Float32Array} - The projected positions of the nodes.\n\t * @example\n\t * // Get the projected positions of all nodes.\n\t * let projectedPositions = helios.getProjectedPositions(helios.network.nodes);\n\t */\n\tgetProjectedPositions(nodes) {\n\t\t// Use the CPU to project the positions\n\t\t// if nodes are provided, use them, otherwise use all nodes\n\t\tif (nodes === undefined) {\n\t\t\tnodes = this.network.nodes;\n\t\t}\n\t\t// if nodes is not empty\n\t\tif (nodes.length > 0) {\n\t\t\tconst gl = this.gl;\n\t\t\tlet nodeIndices = new Uint32Array(nodes.length);\n\t\t\tif (typeof nodes[0] === \"number\") {\n\t\t\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\t\t\tnodeIndices[i] = nodes[i];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnodeIndices = new Uint32Array(nodes.length);\n\t\t\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\t\t\tnodeIndices[i] = nodes[i].index;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet nodePositions = this.network.positions;\n\t\t\tlet projectedPositions = new Float32Array(nodes.length * 4);\n\n\t\t\tlet [w2d, h2d] = this._lastCanvasDimensions;\n\n\t\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\t\tlet nodeIndex = nodeIndices[i];\n\t\t\t\tlet nodePosition = [nodePositions[nodeIndex * 3], nodePositions[nodeIndex * 3 + 1], nodePositions[nodeIndex * 3 + 2], 1.0];\n\n\t\t\t\tlet projectedPosition = glm.vec4.create();\n\t\t\t\tglm.vec4.transformMat4(projectedPosition, nodePosition, this.projectionViewMatrix);\n\t\t\t\t// console.log(projectedPosition)\n\t\t\t\t// mat4.multiplyVec4(projectionViewMatrix, position, dest);\n\t\t\t\t// if (projectedPosition[2] < 0) {//behind the camera\n\t\t\t\t// \t// continue;\n\t\t\t\t// }\n\n\t\t\t\tlet perspectiveFactor = 1.0 / projectedPosition[3];\n\n\t\t\t\t// if(!this._orthographic){\n\t\t\t\t// \tperspectiveFactor = 1.0 / (projectedPosition[3]);\n\t\t\t\t// }\n\t\t\t\tlet x = w2d / 2 + projectedPosition[0] * w2d * 0.5 * perspectiveFactor;\n\t\t\t\tlet y = h2d / 2 - projectedPosition[1] * h2d * 0.5 * perspectiveFactor;\n\t\t\t\t//perspective divide\n\t\t\t\tprojectedPositions[i * 4] = x;\n\t\t\t\tprojectedPositions[i * 4 + 1] = y;\n\t\t\t\tprojectedPositions[i * 4 + 2] = projectedPosition[2];\n\t\t\t\tprojectedPositions[i * 4 + 3] = projectedPosition[3];\n\t\t\t}\n\t\t\treturn projectedPositions;\n\t\t} else {\n\t\t\treturn Float32Array(0);\n\t\t}\n\t}\n\n\n\n\t/** Pick a node at the given screen coordinates.\n\t * @method pickNode\n\t * @memberof Helios\n\t * @instance\n\t * @param {number} x - The x coordinate of the point to pick.\n\t * @param {number} y - The y coordinate of the point to pick.\n\t * @return {Node} - The node at the given point, or null if no node was picked.\n\t * @example\n\t * // Pick a node at the center of the canvas.\n\t * let node = helios.pickNode(helios.canvasElement.width / 2, helios.canvasElement.height / 2);\n\t * if(node !== null) {\n\t *    console.log(\"Picked node \" + node.index);\n\t * }\n\t * @example\n\t * // Pick a node at the center of the canvas, and highlight it.\n\t * let node = helios.pickNode(helios.canvasElement.width / 2, helios.canvasElement.height / 2);\n\t * if(node !== null) {\n\t *   console.log(\"Picked node \" + node.index);\n\t *  helios.highlightNode(node);\n\t * }\n\t */\n\tpickPoint(x, y) {\n\t\tconst fbWidth = this.canvasElement.width * this.pickingResolutionRatio;\n\t\tconst fbHeight = this.canvasElement.height * this.pickingResolutionRatio;\n\t\tconst pixelX = Math.round(x * fbWidth / this.canvasElement.clientWidth - 0.5);\n\t\tconst pixelY = Math.round(fbHeight - y * fbHeight / this.canvasElement.clientHeight - 0.5);\n\t\tconst data = new Uint8Array(4);\n\t\tconst gl = this.gl;\n\t\n\t\t// Helper function to read the ID\n\t\tconst readID = () => {\n\t\t\tgl.readPixels(\n\t\t\t\tpixelX,            // x\n\t\t\t\tpixelY,            // y\n\t\t\t\t1,                 // width\n\t\t\t\t1,                 // height\n\t\t\t\tgl.RGBA,           // format\n\t\t\t\tgl.UNSIGNED_BYTE,  // type\n\t\t\t\tdata);             // typed array to hold result\n\t\t\treturn (data[0] + (data[1] << 8) + (data[2] << 16) + (data[3] << 24)) - 1;\n\t\t};\n\t\n\t\t// Bind the framebuffer for picking\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.pickingFramebuffer);\n\t\n\t\tconst ID = readID();\n\t\tif (ID >= 0) {\n\t\t\t// it is a node or edge\n\t\t\tif (ID < this.network.nodeCount) {\n\t\t\t\treturn ID; // Node\n\t\t\t} else if (ID <= this.network.nodeCount) {\n\t\t\t\treturn ID; // Edge\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn -1; // Nothing picked\n\n\t}\n\t\n\n\t_consolidateCentroids(centroids, counts) {\n\t\tfor (const [nodeAttribute, centroid] of centroids) {\n\t\t\tconst count = counts.get(nodeAttribute);\n\t\t\tcentroid[0] /= count;\n\t\t\tcentroid[1] /= count;\n\t\t}\n\t}\n\n\t_calculateCentroidForAttribute(nodeAttribute, xy, centroids, counts) {\n\t\t// const xy = this._pixelXYOnScreen[i];\n\t\tif (!centroids.has(nodeAttribute)) {\n\t\t\tcentroids.set(nodeAttribute, [0, 0]);\n\t\t\tcounts.set(nodeAttribute, 0);\n\t\t}\n\t\tconst centroid = centroids.get(nodeAttribute);\n\t\tcentroid[0] += xy[0];\n\t\tcentroid[1] += xy[1];\n\n\t\tconst count = counts.get(nodeAttribute);\n\t\tcounts.set(nodeAttribute, count + 1);\n\t}\n\n\n\t_updateTrackerNodesData() {\n\t\tconst gl = this.gl;\n\t\tconst data = this._trackingBufferPixels;\n\t\tconst nodesOnScreen = this._nodesOnScreen;\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this._trackingFramebuffer);\n\t\tgl.readPixels(\n\t\t\t0,            // x\n\t\t\t0,            // y\n\t\t\tthis._trackingFramebuffer.size.width,                 // width\n\t\t\tthis._trackingFramebuffer.size.height,                 // height\n\t\t\tgl.RGBA,           // format\n\t\t\tgl.UNSIGNED_BYTE,  // type\n\t\t\tdata);             // typed array to hold result\n\t\t//  if this.pixelCountsByIndex is not defined\n\n\t\tfor (let i = 0; i < data.length; i += 4) {\n\t\t\tconst nodeIndex = (data[i] + (data[i + 1] << 8) + (data[i + 2] << 16) + (data[i + 3] << 24)) - 1;\n\t\t\tnodesOnScreen[i / 4] = nodeIndex;\n\t\t}\n\n\t}\n\n\t/** Pick a node at the given screen coordinates.\n\t * @method updateAttributeTrackers\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @return {Helios|this} - The Helios instance (for chaining).\n\t */\n\tupdateAttributeTrackers(avoidPixelBufferUpdate = false) {\n\t\tif (!this._trackingBufferEnabled || Object.keys(this._attributeTrackers).length === 0) {\n\t\t\treturn this;\n\t\t}\n\t\tconst attributeTrackers = this._attributeTrackers;\n\t\tconst totalPixels = this._trackingFramebuffer.size.width * this._trackingFramebuffer.size.height;\n\n\n\t\tconst nodesOnScreen = this._nodesOnScreen;\n\t\tconst XYPositions = this._pixelXYOnScreen;\n\n\t\tif (!avoidPixelBufferUpdate) {\n\t\t\tthis._updateTrackerNodesData();\n\t\t}\n\n\t\tconst now = performance.now();\n\t\tlet elapsedTime = now - this._trackingLastTime || now;\n\t\tif (elapsedTime > 1000) {\n\t\t\telapsedTime = 1000;\n\t\t}\n\t\tthis._trackingLastTime = now;\n\n\t\tfor (let trackedAttributeEntryKey in attributeTrackers) {\n\t\t\tconst trackedAttributeEntry = attributeTrackers[trackedAttributeEntryKey];\n\t\t\tconst pixelCounter = trackedAttributeEntry.pixelCounter;\n\t\t\tconst currentKeys = pixelCounter.getSortedKeys();\n\t\t\tconst smoothness = trackedAttributeEntry.smoothness;\n\t\t\tconst minProportion = trackedAttributeEntry.minProportion;\n\t\t\tconst calculateCentroid = trackedAttributeEntry.calculateCentroid;\n\t\t\tconst centroidPositions = trackedAttributeEntry.centroidPositions;\n\t\t\tconst attribute = trackedAttributeEntry.attribute;\n\t\t\tconst maxLabels = trackedAttributeEntry.maxLabels;\n\t\t\tconst centroids = new Map();\n\t\t\tconst counts = new Map();\n\n\t\t\t// calculate coefficient based on elapsed time of the last update using performance\n\n\n\n\t\t\t// const coefficient = Math.exp(- (now - trackedAttributeEntry.lastUpdate) / smoothness);\n\t\t\tconst coefficient = Math.exp(-elapsedTime / (100 * smoothness));\n\t\t\t// const coefficient = smoothness;\n\t\t\t// console.log(coefficient);\n\n\t\t\t// smoothness = -30/log(0.8)\n\n\t\t\t// const attribute = trackedAttributeEntry.attribute;\n\t\t\t// console.log(currentKeys.length);\n\t\t\tfor (let i = 0; i < currentKeys.length; i++) {\n\t\t\t\tconst currentKey = currentKeys[i];\n\t\t\t\tconst newValue = pixelCounter.get(currentKeys[i]) * coefficient;\n\t\t\t\tif (newValue > minProportion) {\n\t\t\t\t\t// console.log(newValue);\n\t\t\t\t\tpixelCounter.set(currentKeys[i], newValue);\n\t\t\t\t\tif (calculateCentroid) {\n\t\t\t\t\t\tif (centroidPositions.has(currentKeys[i])) {\n\t\t\t\t\t\t\tconst centroidPosition = centroidPositions.get(currentKeys[i]);\n\t\t\t\t\t\t\tif (centroidPosition) {\n\t\t\t\t\t\t\t\tcentroidPosition[0] *= coefficient;\n\t\t\t\t\t\t\t\tcentroidPosition[1] *= coefficient;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// centroidPositions.set(currentKeys[i], centroidPosition);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tpixelCounter.delete(currentKeys[i]);\n\t\t\t\t\tif (calculateCentroid) {\n\t\t\t\t\t\tcentroidPositions.delete(currentKeys[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// const totalPixels\n\n\t\t\tif (attribute == \"index\") {\n\t\t\t\tfor (let i = 0; i < nodesOnScreen.length; i++) {\n\t\t\t\t\tconst nodeIndex = nodesOnScreen[i];\n\t\t\t\t\tif (nodeIndex >= 0) {\n\t\t\t\t\t\tconst newValue = (pixelCounter.get(nodeIndex) || 0) + 1.0 / totalPixels * (1.0 - coefficient);\n\t\t\t\t\t\tpixelCounter.set(nodeIndex, newValue);\n\t\t\t\t\t\tif (calculateCentroid) {\n\t\t\t\t\t\t\tthis._calculateCentroidForAttribute(nodeIndex, XYPositions[i], centroids, counts);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// is a function\n\t\t\t} else if (attribute == \"node\") {\n\t\t\t\tfor (let i = 0; i < nodesOnScreen.length; i++) {\n\t\t\t\t\tconst index2node = this.network.index2Node;\n\t\t\t\t\tif (nodeIndex >= 0) {\n\t\t\t\t\t\tconst node = index2node[nodeIndex];\n\t\t\t\t\t\tconst newValue = (pixelCounter.get(node) || 0) + 1.0 / totalPixels * (1.0 - coefficient);\n\t\t\t\t\t\tpixelCounter.set(node, newValue);\n\t\t\t\t\t\tif (calculateCentroid) {\n\t\t\t\t\t\t\tthis._calculateCentroidForAttribute(node, XYPositions[i], centroids, counts);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// is a function\n\t\t\t} else if (typeof attribute === 'function') {\n\t\t\t\tconst index2node = this.network.index2Node;\n\t\t\t\tfor (let i = 0; i < nodesOnScreen.length; i++) {\n\t\t\t\t\tconst nodeIndex = nodesOnScreen[i];\n\t\t\t\t\tif (nodeIndex >= 0) {\n\t\t\t\t\t\tconst node = index2node[nodeIndex];\n\t\t\t\t\t\tconst attributeEntry = attribute(node, nodeIndex);\n\t\t\t\t\t\tconst newValue = (pixelCounter.get(attributeEntry) || 0) + 1.0 / totalPixels * (1.0 - coefficient);\n\t\t\t\t\t\tpixelCounter.set(attributeEntry, newValue);\n\t\t\t\t\t\tif (calculateCentroid) {\n\t\t\t\t\t\t\tthis._calculateCentroidForAttribute(attributeEntry, XYPositions[i], centroids, counts);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// attribute is a string\n\t\t\t} else {\n\t\t\t\tconst index2node = this.network.index2Node;\n\t\t\t\tfor (let i = 0; i < nodesOnScreen.length; i++) {\n\t\t\t\t\tconst nodeIndex = nodesOnScreen[i];\n\t\t\t\t\tif (nodeIndex >= 0) {\n\t\t\t\t\t\tconst node = index2node[nodeIndex];\n\t\t\t\t\t\tconst attributeEntry = node[attribute];\n\t\t\t\t\t\tconst newValue = (pixelCounter.get(attributeEntry) || 0) + 1.0 / totalPixels * (1.0 - coefficient);\n\t\t\t\t\t\tpixelCounter.set(attributeEntry, newValue);\n\t\t\t\t\t\tif (calculateCentroid) {\n\t\t\t\t\t\t\tthis._calculateCentroidForAttribute(attributeEntry, XYPositions[i], centroids, counts);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (calculateCentroid) {\n\t\t\t\tthis._consolidateCentroids(centroids, counts);\n\t\t\t\tfor (let [key, value] of centroids) {\n\t\t\t\t\t// add to centroidPositions if not null, otherwise set it to the new centroids\n\t\t\t\t\tconst centroidPosition = centroidPositions.get(key);\n\t\t\t\t\tconst newCentroidPosition = value;\n\t\t\t\t\tif (centroidPosition) {\n\t\t\t\t\t\t// add new centroid (1.0 - coefficient)\n\t\t\t\t\t\tcentroidPosition[0] += newCentroidPosition[0] * (1.0 - coefficient);\n\t\t\t\t\t\tcentroidPosition[1] += newCentroidPosition[1] * (1.0 - coefficient);\n\n\t\t\t\t\t\t// centroidPosition[0] = newCentroidPosition[0];\n\t\t\t\t\t\t// centroidPosition[1] = newCentroidPosition[1];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcentroidPositions.set(key, newCentroidPosition);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tif (maxLabels >= 0) {\n\t\t\t\t// keeping only 10* maxLabels\n\t\t\t\tlet trackedKeys = pixelCounter.getSortedKeys();\n\t\t\t\tlet toRemove = trackedKeys.slice(maxLabels, trackedKeys.length);\n\t\t\t\tfor (let i = 0; i < toRemove.length; i++) {\n\t\t\t\t\tpixelCounter.delete(toRemove[i]);\n\t\t\t\t\tcentroidPositions.delete(toRemove[i]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t\treturn this;\n\t\t// let IDProportion = this.pixelCountsByIndex.getSortedPairs();\n\t\t// return IDProportion.slice(0,maxLabels);\n\t}\n\n\t/** Returns the attributes on screen\n\t * @method trackedAttributesOnScreen\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @param {string} trackerName - Name of the tracker to get the attributes from.\n\t * @return {Array} - Array of attributes on screen. Each entry is an array of two or four elements. \n\t * if the tracker saves the centroid, 4 elements are returned: [attribute,proportion, x, y], otherwise [attribute,proportion]\n\t */\n\ttrackedAttributesOnScreen(trackerName) {\n\t\tif (this._trackingBufferEnabled && this._attributeTrackers[trackerName]) {\n\t\t\tconst attributeTracker = this._attributeTrackers[trackerName];\n\t\t\tconst pixelCounter = attributeTracker.pixelCounter;\n\t\t\t// const IDProportion = \n\t\t\tif (attributeTracker.calculateCentroid) {\n\t\t\t\tconst centroidPositions = attributeTracker.centroidPositions;\n\t\t\t\tconst IDProportion = pixelCounter.getSortedPairs();\n\t\t\t\t// add the centroid positions to the array [ID,proportion,x,y]\n\t\t\t\tfor (let i = 0; i < IDProportion.length; i++) {\n\t\t\t\t\tconst ID = IDProportion[i][0];\n\t\t\t\t\tconst proportion = IDProportion[i][1];\n\t\t\t\t\tconst centroidPosition = centroidPositions.get(ID);\n\t\t\t\t\tIDProportion[i] = [ID, proportion, centroidPosition[0], centroidPosition[1]];\n\t\t\t\t}\n\t\t\t\treturn IDProportion;\n\t\t\t} else {\n\t\t\t\treturn pixelCounter.getSortedPairs();\n\t\t\t}\n\t\t}\n\t}\n\n\n\t/** Returns tracked attributes centroids\n\t * @method trackedAttributesCentroids\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t * @param {string} trackerName - Name of the tracker to get the attributes from.\n\t * \n\t * @return {Array} - Centroid of trackerName.\n\t * \n\t */\n\ttrackedAttributesCentroids(trackerName) {\n\t\tif (this._trackingBufferEnabled && this._attributeTrackers[trackerName]) {\n\t\t\tconst attributeTracker = this._attributeTrackers[trackerName];\n\t\t\treturn attributeTracker.centroidPositions;\n\t\t}\n\t}\n\n\t/** Update the attribute trackers Schedule.\n\t * @method _updateTrackerScheduleTask\n\t * @memberof Helios\n\t * @instance\n\t * @private\n\t */\n\t_updateTrackerScheduleTask() {\n\t\tconst trackerTaskName = \"9.5.tracker_update\";\n\t\tif (!this._trackingBufferEnabled || Object.keys(this._attributeTrackers).length === 0) {\n\t\t\tif (this.scheduler.hasTask(trackerTaskName)) {\n\t\t\t\tthis.scheduler.unschedule(trackerTaskName);\n\t\t\t\t// this.scheduler.unschedule(trackerNodeUpdateTaskName);\n\t\t\t}\n\t\t} else if (!this.scheduler.hasTask(trackerTaskName)) {\n\t\t\tthis.scheduler.schedule({\n\t\t\t\tname: trackerTaskName,\n\t\t\t\tcallback: (elapsedTime, task) => {\n\t\t\t\t\tthis.updateAttributeTrackers(true);\n\t\t\t\t\tfor (let trackerName in this._attributeTrackers) {\n\t\t\t\t\t\tconst tracker = this._attributeTrackers[trackerName];\n\t\t\t\t\t\tif (tracker.onTrack) {\n\t\t\t\t\t\t\ttracker.onTrack(this.trackedAttributesOnScreen(trackerName), tracker);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdelay: 0,\n\t\t\t\trepeatInterval: this._trackingNodeMinimumUpdateInterval,\n\t\t\t\trepeat: true,\n\t\t\t\tsynchronized: true,\n\t\t\t\tafterRedraw: true,\n\t\t\t\timmediateUpdates: false,\n\t\t\t\tredraw: false,\n\t\t\t\tupdateNodesGeometry: false,\n\t\t\t\tupdateEdgesGeometry: false,\n\t\t\t});\n\n\t\t}\n\t}\n\n\t/** Set the attribute to track.\n\t * @method trackAttribute\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {string} trackerName - A tracker name so that it can be untracked later.\n\t * @param {string|function} attribute - The attribute to track. If a string, it is the name of the attribute of the node to track (use \"index\" for index and \"node\" for the node itself). If a function, it is a function that takes a node and its index as arguments and returns the attribute to track.\n\t * \t * @param {Object} options - The configuration object\n\t * @param {string} [options.minProportion=0.001] - The minimum proportion of the screen that a node must occupy to be tracked.\n\t * @param {string} [options.smoothness=0.8] - The smoothness of the tracking. The higher the value, the more the tracking is smoothed.\n\t * @param {string} [options.maxLabels=20] - The maximum number of labels to display. If -1, all labels are displayed.\n\t * @param {string} [options.calculateCentroid=false] - If true, the centroid of the tracked nodes is calculated and expored as the 3rd and 4th (x and y) elements of the tracker results.\n\t * @param {function} [options.onTrack=null] - A callback function that is called when a node is tracked. It takes the attribute entries and relative proportions as argument and the tracker (attributeProportions,tracker)=>{} \n\t * @return {Helios|this} - The Helios instance for chaining.\n\t * @example\n\t * // Track the index of the nodes, with a minimum proportion of 0.001, a smoothness of 0.8 and a maximum of 10 labels.\n\t * helios.trackAttribute(\"indexTracker\",\"index\",{minProportion:0.001,smoothness:0.8,maxLabels:20});\n\t * @example\n\t * // Track the community attribute of the nodes, with a minimum proportion of 0.001, a smoothness of 0.8 and a maximum of 20 labels.\n\t * helios.trackAttribute(\"communityTracker\",\"community\",{minProportion:0.001,smoothness:0.8,maxLabels:20});\n\t */\n\ttrackAttribute(trackerName, attribute, { minProportion = 0.001, smoothness = 0.8, maxLabels = 20, calculateCentroid = false, onTrack = null } = {}) {\n\t\tif (trackerName in this._attributeTrackers) {\n\t\t\tthis.untrackAttribute(trackerName);\n\t\t}\n\t\tthis._attributeTrackers[trackerName] = {\n\t\t\tattribute: attribute,\n\t\t\tpixelCounter: new SortedValueMap(false),\n\t\t\tminProportion: minProportion,\n\t\t\tsmoothness: smoothness,\n\t\t\tmaxLabels: maxLabels,\n\t\t\tcalculateCentroid: calculateCentroid,\n\t\t\tcentroidPositions: new Map(),\n\t\t\tonTrack: onTrack,\n\t\t};\n\n\t\tthis._updateTrackerScheduleTask();\n\t\treturn this;\n\t}\n\n\t/** Untrack the attribute.\n\t * @method untrackAttribute\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {string|function} attribute - The attribute to untrack. If a string, it is the name of the attribute of the node to untrack (use \"index\" for index and \"node\" for the node itself). If a function, it is a function that takes a node and its index as arguments and returns the attribute to untrack.\n\t * @return {Helios|this} - The Helios instance for chaining.\n\t * @example\n\t * // Untrack the index of the nodes.\n\t * helios.untrackAttribute(\"indexTracker\");\n\t */\n\tuntrackAttribute(attribute) {\n\t\tthis._attributeTrackers = this._attributeTrackers.filter((trackedAttribute) => {\n\t\t\treturn trackedAttribute.attribute !== attribute;\n\t\t});\n\t\tthis._updateTrackerScheduleTask();\n\t\treturn this;\n\t}\n\n\t/** attributesTrackers getter.\n\t * @method attributesTrackers\n\t * @memberof Helios\n\t * @instance\n\t * @return {Object} - The tracked attributes.\n\t * @example\n\t * // Get the tracked attributes.\n\t * let attributesTrackers = helios.attributesTrackers();\n\t */\n\tattributesTrackers() {\n\t\t// copy the _attributeTrackers object\n\t\treturn Object.assign({}, this._attributeTrackers);\n\t}\n\n\t/** Set/get tracker node update interval.\n\t * @method trackingNodeUpdateInterval\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} interval - The interval in milliseconds.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current interval if no argument is provided.\n\t * @example\n\t * // Set the tracker node update interval to 200ms.\n\t * helios._trackingBufferUpdateInterval(200);\n\t * @example\n\t * // Get the tracker node update interval.\n\t * let interval = helios._trackingBufferUpdateInterval();\n\t * console.log(interval);\n\t */\n\ttrackingBufferUpdateInterval(interval) {\n\t\t// check if interval is defined\n\t\tif (typeof interval === \"undefined\") {\n\t\t\treturn this._trackingBufferUpdateInterval;\n\t\t} else {\n\t\t\tthis._trackingBufferUpdateInterval = interval;\n\t\t\tthis._updateTrackerScheduleTask();\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get tracker update interval\n\t * @method trackingUpdateInterval\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} interval - The interval in milliseconds.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current interval if no argument is provided.\n\t * @example\n\t * // Set the tracker update interval to 33ms.\n\t * helios._trackingUpdateInterval(33);\n\t * @example\n\t * // Get the tracker update interval.\n\t * let interval = helios._trackingUpdateInterval();\n\t * console.log(interval);\n\t */\n\ttrackingUpdateInterval(interval) {\n\t\t// check if interval is defined\n\t\tif (typeof interval === \"undefined\") {\n\t\t\treturn this._trackingUpdateInterval;\n\t\t} else {\n\t\t\tthis._trackingUpdateInterval = interval;\n\t\t\tthis._updateTrackerScheduleTask();\n\t\t\treturn this;\n\t\t}\n\t}\n\n\n\t/** Set/get edge global opacity scale. The opacity of each edge is calculated as: opacity = globalBase + globalScale * edgeOpacity\n\t * @method edgesGlobalOpacityScale\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} opacity - The global opacity scale of the edges.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global opacity if no argument is provided.\n\t * @example\n\t * // Set the global opacity of the edges to 0.5.\n\t * helios.edgesGlobalOpacityScale(0.5);\n\t */\n\tedgesGlobalOpacityScale(opacity) {\n\t\t// check if color is defined\n\t\tif (typeof opacity === \"undefined\") {\n\t\t\treturn this._edgesGlobalOpacityScale;\n\t\t} else {\n\t\t\tthis._edgesGlobalOpacityScale = opacity;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get edge global opacity base. The opacity of each edge is calculated as: opacity = globalBase + globalScale * edgeOpacity\n\t * @method edgesGlobalOpacityBase\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} opacity - The global opacity base of the edges.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global opacity if no argument is provided.\n\t * @example\n\t * // Set the global opacity base of the edges to 0.5.\n\t * helios.edgesGlobalOpacityBase(0.5);\n\t */\n\tedgesGlobalOpacityBase(opacity) {\n\t\t// check if color is defined\n\t\tif (typeof opacity === \"undefined\") {\n\t\t\treturn this._edgesGlobalOpacityBase;\n\t\t} else {\n\t\t\tthis._edgesGlobalOpacityBase = opacity;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get edge global width scale. The width of each edge is calculated as: width = globalBase + globalScale * edgeWidth\n\t * @method edgesGlobalWidthScale\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} width - The global width scale of the edges.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global width if no argument is provided.\n\t * @example\n\t * // Set the global width of the edges to 0.5.\n\t * helios.edgesGlobalWidthScale(0.5);\n\t */\n\tedgesGlobalWidthScale(width) {\n\t\t// check if color is defined\n\t\tif (typeof width === \"undefined\") {\n\t\t\treturn this._edgesGlobalWidthScale;\n\t\t} else {\n\t\t\tthis._edgesGlobalWidthScale = width;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get edge global width base. The width of each edge is calculated as: width = globalBase + globalScale * edgeWidth\n\t * @method edgesGlobalWidthBase\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} width - The global width base of the edges.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global width if no argument is provided.\n\t * @example\n\t * // Set the global width base of the edges to 0.5.\n\t * helios.edgesGlobalWidthBase(0.5);\n\t */\n\tedgesGlobalWidthBase(width) {\n\t\t// check if color is defined\n\t\tif (typeof width === \"undefined\") {\n\t\t\treturn this._edgesGlobalWidthBase;\n\t\t} else {\n\t\t\tthis._edgesGlobalWidthBase = width;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get node global opacity scale. The opacity of each node is calculated as: opacity = globalBase + globalScale * nodeOpacity\n\t * @method nodesGlobalOpacityScale\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} opacity - The global opacity scale of the nodes.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global opacity if no argument is provided.\n\t * @example\n\t * // Set the global opacity of the nodes to 0.5.\n\t * helios.nodesGlobalOpacityScale(0.5);\n\t * @example\n\t * // Get the global opacity of the nodes.\n\t * let scale = helios.nodesGlobalOpacityScale();\n\t */\n\tnodesGlobalOpacityScale(opacity) {\n\t\t// check if color is defined\n\t\tif (typeof opacity === \"undefined\") {\n\t\t\treturn this._nodesGlobalOpacityScale;\n\t\t} else {\n\t\t\tthis._nodesGlobalOpacityScale = opacity;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get node global opacity base. The opacity of each node is calculated as: opacity = globalBase + globalScale * nodeOpacity\n\t * @method nodesGlobalOpacityBase\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} opacity - The global opacity base of the nodes.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global opacity if no argument is provided.\n\t * @example\n\t * // Set the global opacity base of the nodes to 0.5.\n\t * helios.nodesGlobalOpacityBase(0.5);\n\t * @example\n\t * // Get the global opacity base of the nodes.\n\t * let base = helios.nodesGlobalOpacityBase();\n\t */\n\tnodesGlobalOpacityBase(opacity) {\n\t\t// check if color is defined\n\t\tif (typeof opacity === \"undefined\") {\n\t\t\treturn this._nodesGlobalOpacityBase;\n\t\t} else {\n\t\t\tthis._nodesGlobalOpacityBase = opacity;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get node global size scale. The size of each node is calculated as: size = globalBase + globalScale * nodeSize\n\t * @method nodesGlobalSizeScale\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} size - The global size scale of the nodes.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global size if no argument is provided.\n\t * @example\n\t * // Set the global size of the nodes to 0.5.\n\t * helios.nodesGlobalSizeScale(0.5);\n\t * @example\n\t * // Get the global size of the nodes.\n\t * let scale = helios.nodesGlobalSizeScale();\n\t */\n\tnodesGlobalSizeScale(size) {\n\t\t// check if color is defined\n\t\tif (typeof size === \"undefined\") {\n\t\t\treturn this._nodesGlobalSizeScale;\n\t\t} else {\n\t\t\tthis._nodesGlobalSizeScale = size;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get node global size base. The size of each node is calculated as: size = globalBase + globalScale * nodeSize\n\t * @method nodesGlobalSizeBase\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} size - The global size base of the nodes.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global size if no argument is provided.\n\t * @example\n\t * // Set the global size base of the nodes to 0.5.\n\t * helios.nodesGlobalSizeBase(0.5);\n\t * @example\n\t * // Get the global size base of the nodes.\n\t * let base = helios.nodesGlobalSizeBase();\n\t */\n\tnodesGlobalSizeBase(size) {\n\t\t// check if color is defined\n\t\tif (typeof size === \"undefined\") {\n\t\t\treturn this._nodesGlobalSizeBase;\n\t\t} else {\n\t\t\tthis._nodesGlobalSizeBase = size;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get node global outline width scale. The outline width of each node is calculated as: width = globalBase + globalScale * nodeOutlineWidth\n\t * @method nodesGlobalOutlineWidthScale\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} width - The global outline width scale of the nodes.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global outline width if no argument is provided.\n\t * @example\n\t * // Set the global outline width of the nodes to 0.5.\n\t * helios.nodesGlobalOutlineWidthScale(0.5);\n\t * @example\n\t * // Get the global outline width of the nodes.\n\t * let scale = helios.nodesGlobalOutlineWidthScale();\n\t */\n\tnodesGlobalOutlineWidthScale(width) {\n\t\t// check if color is defined\n\t\tif (typeof width === \"undefined\") {\n\t\t\treturn this._nodesGlobalOutlineWidthScale;\n\t\t} else {\n\t\t\tthis._nodesGlobalOutlineWidthScale = width;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Set/get node global outline width base. The outline width of each node is calculated as: width = globalBase + globalScale * nodeOutlineWidth\n\t * @method nodesGlobalOutlineWidthBase\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} width - The global outline width base of the nodes.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global outline width if no argument is provided.\n\t * @example\n\t * // Set the global outline width base of the nodes to 0.5.\n\t * helios.nodesGlobalOutlineWidthBase(0.5);\n\t * @example\n\t * // Get the global outline width base of the nodes.\n\t * let base = helios.nodesGlobalOutlineWidthBase();\n\t */\n\tnodesGlobalOutlineWidthBase(width) {\n\t\t// check if color is defined\n\t\tif (typeof width === \"undefined\") {\n\t\t\treturn this._nodesGlobalOutlineWidthBase;\n\t\t} else {\n\t\t\tthis._nodesGlobalOutlineWidthBase = width;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\n\t/** Set/get node global outline opacity scale. The outline opacity of each node is calculated as: opacity = globalBase + globalScale * nodeOutlineOpacity\n\t * @method nodesGlobalOutlineOpacityScale\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} opacity - The global outline opacity scale of the nodes.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current global outline opacity if no argument is provided.\n\t * @example\n\t * // Set the global outline opacity of the nodes to 0.5.\n\t * helios.nodesGlobalOutlineOpacityScale(0.5);\n\t * @example\n\t * // Get the global outline opacity of the nodes.\n\t * let scale = helios.nodesGlobalOutlineOpacityScale();\n\t */\n\tnodeOpacity(colorInput) {\n\t\tif (typeof colorInput === \"undefined\") {\n\t\t\treturn this.network.colors.map(color => color[3]);\n\t\t} else if (typeof colorInput === \"function\") {\n\t\t\tlet allNodes = this.network.index2Node;\n\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\tlet node = allNodes[nodeIndex];\n\t\t\t\tlet anOpacity = colorInput(node, nodeIndex, this.network);\n\t\t\t\tthis.network.colors[nodeIndex * 4 + 3] = anOpacity;\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let nodeIndex = 0; nodeIndex < allNodes.length; nodeIndex++) {\n\t\t\t\tthis.network.colors[nodeIndex * 4 + 3] = colorInput;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\n\t/** Enables or disables updating the edge colors to match the node colors.\n\t * @method edgesColorsFromNodes\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {boolean} edgesColorsFromNodes - Whether to update the edge colors to match the node colors.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current value if no argument is provided.\n\t * @example\n\t * // Enable updating the edge colors to match the node colors.\n\t * helios.edgesColorsFromNodes(true);\n\t */\n\tedgesColorsFromNodes(edgesColorsFromNodes) {\n\t\t// check if shaded is defined\n\t\tif (typeof edgesColorsFromNodes === \"undefined\") {\n\t\t\treturn this._edgesColorsFromNodes;\n\t\t} else {\n\t\t\tthis._edgesColorsFromNodes = edgesColorsFromNodes;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Enables or disables updating the edge widths to match the node widths.\n\t * @method edgesWidthFromNodes\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {boolean} edgesWidthFromNodes - Whether to update the edge widths to match the node widths.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current value if no argument is provided.\n\t * @example\n\t * // Enable updating the edge widths to match the node widths.\n\t * helios.edgesWidthFromNodes(true);\n\t */\n\tedgesWidthFromNodes(edgesWidthFromNodes) {\n\t\t// check if shaded is defined\n\t\tif (typeof edgesWidthFromNodes === \"undefined\") {\n\t\t\treturn this._edgesWidthFromNodes;\n\t\t} else {\n\t\t\tthis._edgesWidthFromNodes = edgesWidthFromNodes;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t//#endregion\n\n\n\t/** Enables or disables additive blending (Useful for dark backgrounds).\n\t * @method additiveBlending\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {boolean} enableAdditiveBlending - Whether to enable additive blending.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current value if no argument is provided.\n\t * @example\n\t * // Enable additive blending.\n\t * helios.additiveBlending(true);\n\t * @example\n\t * // Disable additive blending.\n\t * helios.additiveBlending(false);\n\t */\n\tadditiveBlending(enableAdditiveBlending) {\n\t\t// check if color is defined\n\t\tif (typeof enableAdditiveBlending === \"undefined\") {\n\t\t\treturn this.useAdditiveBlending;\n\t\t} else {\n\t\t\tthis.useAdditiveBlending = enableAdditiveBlending;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Enables or disables shaded nodes.\n\t * @method shadedNodes\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {boolean} enableShadedNodes - Whether to enable shaded nodes.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current value if no argument is provided.\n\t * @example\n\t * // Enable shaded nodes.\n\t * helios.shadedNodes(true);\n\t */\n\tshadedNodes(enableShadedNodes) {\n\t\t// check if shaded is defined\n\t\tif (typeof enableShadedNodes === \"undefined\") {\n\t\t\treturn this.useShadedNodes;\n\t\t} else {\n\t\t\tthis.useShadedNodes = enableShadedNodes;\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Enables or disables edges that can be pickeable\n\t * @method pickeableEdges\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number[]|\"all\"} pickables - The indices of the edges that can be pickeable, or \"all\" to make all edges pickeable.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current value if no argument is provided.\n\t * @example\n\t * // Enable pickeable edges for [0,1,2,3]\n\t * helios.pickeableEdges([0, 1, 2, 3]);\n\t * @example\n\t * // Enable pickeable edges for all edges\n\t * helios.pickeableEdges(\"all\");\n\t */\n\tpickeableEdges(pickables) {\n\t\t// check if pickables is defined\n\t\tif (typeof pickables === \"undefined\") {\n\t\t\treturn this._pickeableEdges;\n\t\t} else {\n\t\t\tthis._pickeableEdges = new Set(pickables);\n\t\t\tif (pickables == \"all\") {\n\t\t\t\t// console.log(\"all\");\n\t\t\t\tfor (let i = 0; i < this.network.edges.length; i++) {\n\t\t\t\t\tthis._pickeableEdges.add(i);\n\t\t\t\t}\n\t\t\t\tthis._edgeIndicesUpdate = true;\n\t\t\t\tthis.update();\n\t\t\t} else {\n\t\t\t\t// console.log(this._pickeableEdges);\n\t\t\t\tthis._edgeIndicesUpdate = true;\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Get or set labels buffer size\n\t * @method labelsMaxPixels\n\t * @memberof Helios\n\t * @instance\n\t * @chainable\n\t * @param {number} labelsMaxPixels - The maximum number of pixels for the labels buffer.\n\t * @return {Helios|this} - The Helios instance for chaining, or the current value if no argument is provided.\n\t * @example\n\t * // Set the maximum number of pixels for the labels buffer to 10000.\n\t * helios.labelsMaxPixels(10000);\n\t */\n\tlabelsMaxPixels(labelsMaxPixels) {\n\t\t// check if labelsMaxPixels is defined\n\t\tif (typeof labelsMaxPixels === \"undefined\") {\n\t\t\treturn this._trackingMaxPixels;\n\t\t} else {\n\t\t\tthis._trackingMaxPixels = labelsMaxPixels;\n\t\t\t_willResizeEvent(0);\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t/** Manually cleanup the Helios instance.\n\t * @method cleanup\n\t * @memberof Helios\n\t * @instance\n\t * @param {boolean} keepGLContext - Whether to keep the WebGL context alive.\n\t * @example\n\t * // Cleanup the Helios instance.\n\t * helios.cleanup();\n\t * @example\n\t * // Cleanup the Helios instance and keep the WebGL context alive.\n\t * helios.cleanup(true);\n\t */\n\tcleanup(keepGLContext) {\n\t\t// console.log(\"Cleanup started\");\n\t\tthis._isReady = false;\n\n\t\tconsole.log(\"Cleanup\",this.layoutWorker)\n\t\tthis.layoutWorker?.cleanup();\n\t\tthis.scheduler?.stop();\n\t\tconsole.log(\"Null\",this.layoutWorker)\n\t\tthis.layoutWorker = null;\n\t\tconst gl = this.gl;\n\t\tthis.onReadyCallback = null;\n\n\t\tthis.onNodeClickCallback = null;\n\t\tthis.onNodeDoubleClickCallback = null;\n\t\tthis.onNodeHoverStartCallback = null;\n\t\tthis.onNodeHoverMoveCallback = null;\n\t\tthis.onNodeHoverEndCallback = null;\n\n\t\tthis.onEdgeClickCallback = null;\n\t\tthis.onEdgeDoubleClickCallback = null;\n\t\tthis.onEdgeHoverStartCallback = null;\n\t\tthis.onEdgeHoverMoveCallback = null;\n\t\tthis.onEdgeHoverEndCallback = null;\n\n\n\t\tthis.onZoomCallback = null;\n\t\tthis.onRotationCallback = null;\n\t\tthis.onResizeCallback = null;\n\t\tthis.onLayoutStartCallback = null;\n\t\tthis.onLayoutStopCallback = null;\n\t\tthis.onDrawCallback = null;\n\t\tthis.onReadyCallback = null;\n\t\tthis._isReady = false;\n\n\t\t// window.removeEventListener('resize', this._onresizeEvent);\n\t\tif (this._resizeObserver) {\n\t\t\tconsole.log(\"disconnecting resize observer\");\n\t\t\tthis._resizeObserver.disconnect();\n\t\t\tthis._resizeObserver = null;\n\t\t\tdelete this._resizeObserver;\n\t\t}\n\n\t\tif (this.canvasElement) {\n\t\t\tthis.canvasElement.removeEventListener(\"click\", this._clickEventListener);\n\t\t\tthis.canvasElement.removeEventListener(\"dblclick\", this._doubleClickEventListener);\n\n\t\t\tthis.canvasElement.removeEventListener(\"mousemove\", this._hoverMoveEventListener);\n\t\t\tthis.canvasElement.removeEventListener(\"mouseleave\", this._hoverLeaveEventListener);\n\t\t\tdocument.body.removeEventListener(\"mouseout\", this._hoverLeaveWindowEventListener);\n\t\t}\n\n\t\tif (!keepGLContext && gl) {\n\t\t\tlet numTextureUnits = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n\t\t\tthis.pickingFramebuffer?.discard();\n\t\t\tthis._trackingFramebuffer?.discard();\n\t\t\tfor (let unit = 0; unit < numTextureUnits; ++unit) {\n\t\t\t\tgl.activeTexture(gl.TEXTURE0 + unit);\n\t\t\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t\t\t\tgl.bindTexture(gl.TEXTURE_CUBE_MAP, null);\n\t\t\t}\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, null);\n\t\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n\t\t\tgl.bindRenderbuffer(gl.RENDERBUFFER, null);\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n\t\t\tgl.deleteBuffer(this.nodesPositionBuffer);\n\t\t\tgl.deleteBuffer(this.nodesColorBuffer);\n\t\t\tgl.deleteBuffer(this.nodesSizeBuffer);\n\t\t\tgl.deleteBuffer(this.nodesSizeBuffer);\n\t\t\tgl.deleteBuffer(this.nodesOutlineWidthBuffer);\n\t\t\tgl.deleteBuffer(this.nodesOutlineColorBuffer);\n\t\t\tgl.deleteBuffer(this.nodesIndexBuffer);\n\n\t\t\tif (this.edgesGeometry) {\n\t\t\t\tgl.deleteBuffer(this.edgesGeometry.edgeVertexTypeBuffer);\n\t\t\t\tgl.deleteBuffer(this.edgesGeometry.verticesBuffer);\n\t\t\t\tgl.deleteBuffer(this.edgesGeometry.colorBuffer);\n\t\t\t\tgl.deleteBuffer(this.edgesGeometry.sizeBuffer);\n\t\t\t}\n\n\t\t\tif (this.fastEdgesGeometry) {\n\t\t\t\tgl.deleteBuffer(this.fastEdgesGeometry.indexBuffer);\n\t\t\t\tgl.deleteBuffer(this.fastEdgesGeometry.vertexObject);\n\t\t\t\tgl.deleteBuffer(this.fastEdgesGeometry.colorObject);\n\t\t\t\tgl.deleteBuffer(this.fastEdgesGeometry.indexObject);\n\t\t\t}\n\t\t}\n\n\t\tif (this.densityMap) {\n\t\t\tthis.densityMap.cleanup();\n\t\t}\n\n\t\tif (this._autoCleanup) {\n\t\t\tthis._mutationObserver.disconnect();\n\t\t\tthis._mutationObserver = null;\n\t\t}\n\t\tif (this.canvasElement) {\n\t\t\tthis.canvasElement.remove();\n\t\t\tthis.canvasElement = null;\n\t\t}\n\t\t// Remove this.svgLayer and this.overlay \n\t\tif (this.svgLayer) {\n\t\t\tthis.svgLayer.remove();\n\t\t\tthis.svgLayer = null;\n\t\t}\n\t\tif (this.overlay) {\n\t\t\tthis.overlay.remove();\n\t\t\tthis.overlay = null;\n\t\t}\n\n\t\tthis.onCleanupCallback?.();\n\n\t\tthis._hasCleanup = true;\n\t}\n\n\n\t/**\n\t * Returns whether the Helios instance is ready to be used.\n\t * @method isReady\n\t * @memberof Helios\n\t * @instance\n\t * @returns {boolean} - Whether the Helios instance is ready to be used.\n\t * @example\n\t * // Check if Helios is ready to be used.\n\t * if (helios.isReady()) {\n\t *   // Helios is ready, do something.\n\t * } else {\n\t *   // Helios is not ready yet, wait or handle the error.\n\t * }\n\t */\n\tisReady() {\n\t\treturn this._isReady;\n\t}\n\n\t/** Destroys the Helios instance.\n\t * @method destroy\n\t * @memberof Helios\n\t * @instance\n\t */\n\tdestroy() {\n\t\tif (!this._hasCleanup) {\n\t\t\tthis.cleanup();\n\t\t}\n\t}\n\n}\n\n// Helios.xnet = xnet;\n","\"use strict\";\n\nlet textSplit2 = (text) => {\n\tlet entries = text.split(/\\s/)\n\tif (entries.length < 2) {\n\t\treturn null;\n\t}\n\treturn [+entries[0], +entries[1]];\n};\n\nlet textSplit3 = (text) => {\n\tlet entries = text.split(/\\s/)\n\tif (entries.length < 3) {\n\t\treturn null;\n\t}\n\treturn [+entries[0], +entries[1], +entries[2]];\n};\n\nlet readNumberIgnoringNone = (text) => {\n\tif (isNaN(text)) {\n\t\treturn 0.0;\n\t} else {\n\t\treturn +text;\n\t}\n};\n\n\nlet propertyHeaderRegular = /#([ve]) \\\"(.+)\\\" ([sn]|v2|v3)/;\nlet propertyFunctions = {\n\t\"s\": String,\n\t\"n\": readNumberIgnoringNone,\n\t\"v2\": textSplit2,\n\t\"v3\": textSplit3\n};\n\n\n\nlet readXNETVerticesHeader = (status) => {\n\twhile (status.lineIndex + 1 < status.lines.length && status.lines[status.lineIndex].length == 0) {\n\t\tstatus.lineIndex++;\n\t}\n\n\tlet headerLine = status.lines[status.lineIndex];\n\tlet headerEntries = headerLine.split(/\\s/);\n\tlet nodeCount = 0;\n\t\n\tif (headerEntries.length == 0 || headerEntries[0].toLowerCase() != \"#vertices\" ||\n\t\tisNaN(headerEntries[1]) || !Number.isInteger(+headerEntries[1])) {\n\t\tthrow `Malformed xnet data (Reading Vertices Header)[line: ${status.lineIndex}]\\n\\t> ${status.lines[status.lineIndex]}`;\n\t}\n\tnodeCount = +headerEntries[1];\n\tstatus.lineIndex++;\n\treturn nodeCount;\n};\n\nlet readXNETLabels = (status) => {\n\tlet labels = [];\n\twhile (status.lineIndex < status.lines.length) {\n\t\tlet currentLine = status.lines[status.lineIndex];\n\t\tlet lineLength = currentLine.length;\n\t\tif (lineLength == 0) {\n\t\t\tstatus.lineIndex++;\n\t\t\tcontinue;\n\t\t}\n\t\tif (currentLine[0] == \"#\") {\n\t\t\tbreak;\n\t\t}\n\t\tvar label = currentLine;\n\t\tif (currentLine[0] == \"\\\"\" && currentLine[lineLength - 1] == \"\\\"\") {\n\t\t\tlabel = currentLine.slice(1, -1);\n\t\t}\n\t\tlabels.push(label);\n\t\tstatus.lineIndex++;\n\t}\n\treturn labels;\n};\n\nlet readXNETEdgesHeader = (status) => {\n\twhile (status.lineIndex + 1 < status.lines.length && status.lines[status.lineIndex].length == 0) {\n\t\tstatus.lineIndex++;\n\t}\n\n\tlet headerLine = status.lines[status.lineIndex];\n\tlet headerEntries = headerLine.split(/\\s/);\n\n\tlet weighted = false;\n\tlet directed = false;\n\n\tif (headerEntries.length == 0 || headerEntries[0].toLowerCase() != \"#edges\") {\n\t\tthrow `Malformed xnet data (Reading Edges Header)[line: ${status.lineIndex}]\\n\\t> ${status.lines[status.lineIndex]}`;\n\t}\n\n\theaderEntries.forEach(headerEntry => {\n\t\tif (headerEntry.toLowerCase() == \"weighted\") {\n\t\t\tweighted = true;\n\t\t}\n\t\tif (headerEntry.toLowerCase() == \"nonweighted\") {\n\t\t\tweighted = false;\n\t\t}\n\t\tif (headerEntry.toLowerCase() == \"directed\") {\n\t\t\tdirected = true;\n\t\t}\n\t\tif (headerEntry.toLowerCase() == \"undirected\") {\n\t\t\tdirected = false;\n\t\t}\n\t});\n\tstatus.lineIndex++;\n\treturn { weighted: weighted, directed: directed };\n};\n\n\nlet readXNETEdges = (status) => {\n\tlet edges = [];\n\tlet weights = [];\n\twhile (status.lineIndex < status.lines.length) {\n\t\tlet currentLine = status.lines[status.lineIndex];\n\t\tlet lineLength = currentLine.length;\n\t\tif (lineLength == 0) {\n\t\t\tstatus.lineIndex++;\n\t\t\tcontinue;\n\t\t}\n\t\tif (currentLine[0] == \"#\") {\n\t\t\tbreak;\n\t\t}\n\t\tlet entries = currentLine.split(/\\s/);\n\t\tlet weight = 1.0;\n\t\t\n\t\tif (entries.length < 2) {\n\t\t\tthrow `Malformed xnet data (Reading Edges)[line: ${status.lineIndex}]\\n\\t> ${status.lines[status.lineIndex]}`;\n\t\t}\n\t\tif (entries.length > 2) {\n\t\t\tweight = +entries[2];\n\t\t}\n\t\tedges.push([+entries[0], +entries[1]]);\n\t\tweights.push(weight);\n\t\tstatus.lineIndex++;\n\t}\n\treturn { edges: edges, weights: weights };\n};\n\n\nlet readXNETPropertyHeader = (status) => {\n\twhile (status.lineIndex + 1 < status.lines.length && status.lines[status.lineIndex].length == 0) {\n\t\tstatus.lineIndex++;\n\t}\n\n\tlet headerEntries = propertyHeaderRegular.exec(status.lines[status.lineIndex]);\n\n\tif (headerEntries.length != 4) {\n\t\tthrow `Malformed xnet data [line: ${status.lineIndex}]\\n\\t> ${status.lines[status.lineIndex]}`;\n\t}\n\tlet propertyType = headerEntries[1];\n\tlet propertyKey = headerEntries[2];\n\tlet propertyFormat = headerEntries[3];\n\n\tstatus.lineIndex++;\n\n\treturn { type: propertyType, key: propertyKey, format: propertyFormat };\n};\n\n\n\nlet readXNETProperty = (status, propertyHeader) => {\n\tlet properties = [];\n\tlet propertyFunction = propertyFunctions[propertyHeader.format];\n\twhile (status.lineIndex < status.lines.length) {\n\t\tlet currentLine = status.lines[status.lineIndex];\n\t\tlet lineLength = currentLine.length;\n\t\tif (lineLength == 0) {\n\t\t\tstatus.lineIndex++;\n\t\t\tcontinue;\n\t\t}\n\t\tif (currentLine[0] == \"#\") {\n\t\t\tbreak;\n\t\t}\n\t\tlet value = currentLine;\n\t\tif (value[0] == \"\\\"\" && value[lineLength - 1] == \"\\\"\") {\n\t\t\tvalue = value.slice(1, -1);\n\t\t}\n\t\tproperties.push(propertyFunction(value));\n\t\tstatus.lineIndex++;\n\t}\n\treturn properties;\n};\n\n\n\nlet loadXNET = (data) => {\n\tlet status = { lineIndex:0, lines: data.split(\"\\n\") };\n\tlet nodesCount = readXNETVerticesHeader(status);\n\tlet labels = readXNETLabels(status);\n\n\tlet network = { nodesCount: nodesCount, verticesProperties: {}, edgesProperties: {} }\n\n\tif (labels.length > 0) {\n\t\tif (labels.length < nodesCount) {\n\t\t\tthrow `Malformed xnet data [line: ${status.lineIndex}]\\n\\t> ${status.lines[status.lineIndex]}`;\n\t\t} else {\n\t\t\tnetwork.labels = labels;\n\t\t}\n\t}\n\tlet edgesHeader = readXNETEdgesHeader(status);\n\tnetwork.directed = edgesHeader.directed;\n\tnetwork.weighted = edgesHeader.weighted;\n\n\tlet edgesData = readXNETEdges(status);\n\tnetwork.edges = edgesData.edges;\n\tif (network.weighted) {\n\t\tnetwork.weights = edgesData.weights;\n\t}\n\n\tdo{\n\t\twhile (status.lineIndex < status.lines.length && status.lines[status.lineIndex].length == 0) {\n\t\t\tstatus.lineIndex++;\n\t\t}\n\t\tif(!(status.lineIndex < status.lines.length)){\n\t\t\tbreak;\n\t\t}\n\t\tlet propertyHeader = readXNETPropertyHeader(status);\n\t\tlet propertyData = readXNETProperty(status, propertyHeader);\n\t\t//console.log(propertyHeader);\n\t\tif (propertyHeader.type == \"e\") {\n\t\t\tnetwork.edgesProperties[propertyHeader.key] = propertyData;\n\t\t} else if (propertyHeader.type == \"v\") {\n\t\t\tnetwork.verticesProperties[propertyHeader.key] = propertyData;\n\t\t}\n\t\t// status.lineIndex++;\n\t}while (status.lineIndex < status.lines.length);\n\treturn network;\n};\n\n\nasync function loadXNETFile(networkFile){\n\tlet networkData = await fetch(networkFile)\n\t\t.then(response => response.text());\n\t\t// .then();\n\treturn loadXNET(networkData);\n}\n\nfunction convertXNET2JSON(network){\n\n\tlet nodeCount = network.nodesCount;\n\n\tlet nodes = {};\n\tlet edges = [];\n\tfor (let index = 0; index < nodeCount; index++) {\n\t\tnodes[\"\" + index] = {\n\t\t\tID: \"\" + index,\n\t\t\t// position: [0,0,0],//network.verticesProperties[\"Position\"][index],\n\t\t\t// color:[0.0,0.0,0.0]//[network.verticesProperties[\"Color\"][index]],\n\t\t\t// size:1\n\t\t};\n\t\tif (network.labels) {\n\t\t\tnodes[\"\" + index].Label = network.labels[index];\n\t\t}\n\t}\n\tfor (const [key, value] of Object.entries(network.verticesProperties)) {\n\t\tfor (let index = 0; index < nodeCount; index++) {\n\t\t\tnodes[\"\" + index][key] = value[index];\n\t\t}\n\t}\n\n\tfor (let index = 0; index < network.edges.length; index++) {\n\t\tlet fromIndex, toIndex;\n\n\t\tedges.push({\n\t\t\t\"source\": \"\" + network.edges[index][0],\n\t\t\t\"target\": \"\" + network.edges[index][1],\n\t\t\t// directed?\n\t\t});\n\t}\n\t\n\treturn {nodes:nodes,edges:edges};\n}\n\nexport {loadXNET,loadXNETFile,convertXNET2JSON}","import { rgb as d3rgb } from \"d3-color\"\n\n'use strict';\n\n/**\n * GEXF Parser\n * ============\n *\n * Author: PLIQUE Guillaume (Yomguithereal)\n * URL: https://github.com/Yomguithereal/gexf\n * Version: 0.2.5\n */\n\n/**\n * Helper Namespace\n * -----------------\n *\n * A useful batch of function dealing with DOM operations and types.\n */\nlet _helpers = {\n\tgetModelTags: function (xml) {\n\t\tlet attributesTags = xml.getElementsByTagName('attributes'),\n\t\t\tmodelTags = {},\n\t\t\tl = attributesTags.length,\n\t\t\ti;\n\n\t\tfor (i = 0; i < l; i++)\n\t\t\tmodelTags[attributesTags[i].getAttribute('class')] =\n\t\t\t\tattributesTags[i].childNodes;\n\n\t\treturn modelTags;\n\t},\n\tnodeListToArray: function (nodeList) {\n\n\t\t// Return array\n\t\tlet children = [];\n\n\t\t// Iterating\n\t\tfor (let i = 0, len = nodeList.length; i < len; ++i) {\n\t\t\tif (nodeList[i].nodeName !== '#text')\n\t\t\t\tchildren.push(nodeList[i]);\n\t\t}\n\n\t\treturn children;\n\t},\n\tnodeListEach: function (nodeList, func) {\n\n\t\t// Iterating\n\t\tfor (let i = 0, len = nodeList.length; i < len; ++i) {\n\t\t\tif (nodeList[i].nodeName !== '#text')\n\t\t\t\tfunc(nodeList[i]);\n\t\t}\n\t},\n\tnodeListToHash: function (nodeList, filter) {\n\n\t\t// Return object\n\t\tlet children = {};\n\n\t\t// Iterating\n\t\tfor (let i = 0; i < nodeList.length; i++) {\n\t\t\tif (nodeList[i].nodeName !== '#text') {\n\t\t\t\tlet prop = filter(nodeList[i]);\n\t\t\t\tchildren[prop.key] = prop.value;\n\t\t\t}\n\t\t}\n\n\t\treturn children;\n\t},\n\tnamedNodeMapToObject: function (nodeMap) {\n\n\t\t// Return object\n\t\tlet attributes = {};\n\n\t\t// Iterating\n\t\tfor (let i = 0; i < nodeMap.length; i++) {\n\t\t\tattributes[nodeMap[i].name] = nodeMap[i].value;\n\t\t}\n\n\t\treturn attributes;\n\t},\n\tgetFirstElementByTagNS: function (node, ns, tag) {\n\t\tlet el = node.getElementsByTagName(ns + ':' + tag)[0];\n\n\t\tif (!el)\n\t\t\tel = node.getElementsByTagNameNS(ns, tag)[0];\n\n\t\tif (!el)\n\t\t\tel = node.getElementsByTagName(tag)[0];\n\n\t\treturn el;\n\t},\n\tgetAttributeNS: function (node, ns, attribute) {\n\t\tlet attr_value = node.getAttribute(ns + ':' + attribute);\n\n\t\tif (attr_value === undefined)\n\t\t\tattr_value = node.getAttributeNS(ns, attribute);\n\n\t\tif (attr_value === undefined)\n\t\t\tattr_value = node.getAttribute(attribute);\n\n\t\treturn attr_value;\n\t},\n\tenforceType: function (type, value) {\n\n\t\tswitch (type) {\n\t\t\tcase 'boolean':\n\t\t\t\tvalue = (value === 'true');\n\t\t\t\tbreak;\n\n\t\t\tcase 'integer':\n\t\t\tcase 'long':\n\t\t\tcase 'float':\n\t\t\tcase 'double':\n\t\t\t\tvalue = +value;\n\t\t\t\tbreak;\n\n\t\t\tcase 'liststring':\n\t\t\t\tvalue = value ? value.split('|') : [];\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn value;\n\t},\n\tgetRGB: function (values) {\n\t\treturn (values[3]) ?\n\t\t\t'rgba(' + values.join(',') + ')' :\n\t\t\t'rgb(' + values.slice(0, -1).join(',') + ')';\n\t}\n};\n\n\n/**\n * Parser Core Functions\n * ----------------------\n *\n * The XML parser's functions themselves.\n */\n\n/**\n * Node structure.\n * A function returning an object guarded with default value.\n *\n * @param  {object} properties The node properties.\n * @return {object}            The guarded node object.\n */\nfunction Node(properties) {\n\n\t// Possible Properties\n\tlet node = {\n\t\tid: properties.id,\n\t\tlabel: properties.label\n\t};\n\n\tif (properties.viz)\n\t\tnode.viz = properties.viz;\n\n\tif (properties.attributes)\n\t\tnode.attributes = properties.attributes;\n\n\treturn node;\n}\n\n\n/**\n * Edge structure.\n * A function returning an object guarded with default value.\n *\n * @param  {object} properties The edge properties.\n * @return {object}            The guarded edge object.\n */\nfunction Edge(properties) {\n\n\t// Possible Properties\n\tlet edge = {\n\t\tid: properties.id,\n\t\ttype: properties.type || 'undirected',\n\t\tlabel: properties.label || '',\n\t\tsource: properties.source,\n\t\ttarget: properties.target,\n\t\tweight: +properties.weight || 1.0\n\t};\n\n\tif (properties.viz)\n\t\tedge.viz = properties.viz;\n\n\tif (properties.attributes)\n\t\tedge.attributes = properties.attributes;\n\n\treturn edge;\n}\n\n/**\n * Graph parser.\n * This structure parse a gexf string and return an object containing the\n * parsed graph.\n *\n * @param  {string} xmlString The xml string of the gexf file to parse.\n * @return {object}     The parsed graph.\n */\nfunction Graph(xmlString) {\n\tlet xmlParser = new DOMParser();\n  let xml = xmlParser.parseFromString(xmlString,\"text/xml\");\n\tlet _xml = {};\n\tconsole.log(xml);\n\t// Basic Properties\n\t//------------------\n\t_xml.els = {\n\t\troot: xml.getElementsByTagName('gexf')[0],\n\t\tgraph: xml.getElementsByTagName('graph')[0],\n\t\tmeta: xml.getElementsByTagName('meta')[0],\n\t\tnodes: xml.getElementsByTagName('node'),\n\t\tedges: xml.getElementsByTagName('edge'),\n\t\tmodel: _helpers.getModelTags(xml)\n\t};\n\n\t// Information\n\t_xml.hasViz = !!_helpers.getAttributeNS(_xml.els.root, 'xmlns', 'viz');\n\t_xml.version = _xml.els.root.getAttribute('version') || '1.0';\n\t_xml.mode = _xml.els.graph.getAttribute('mode') || 'static';\n\n\tlet edgeType = _xml.els.graph.getAttribute('defaultedgetype');\n\t_xml.defaultEdgetype = edgeType || 'undirected';\n\n\t// Parser Functions\n\t//------------------\n\n\t// Meta Data\n\tfunction _metaData() {\n\n\t\tlet metas = {};\n\t\tif (!_xml.els.meta)\n\t\t\treturn metas;\n\n\t\t// Last modified date\n\t\tmetas.lastmodifieddate = _xml.els.meta.getAttribute('lastmodifieddate');\n\n\t\t// Other information\n\t\t_helpers.nodeListEach(_xml.els.meta.childNodes, function (child) {\n\t\t\tmetas[child.tagName.toLowerCase()] = child.textContent;\n\t\t});\n\n\t\treturn metas;\n\t}\n\n\t// Model\n\tfunction _model(cls) {\n\t\tlet attributes = [];\n\n\t\t// Iterating through attributes\n\t\tif (_xml.els.model[cls])\n\t\t\t_helpers.nodeListEach(_xml.els.model[cls], function (attr) {\n\n\t\t\t\t// Properties\n\t\t\t\tlet properties = {\n\t\t\t\t\tid: attr.getAttribute('id') || attr.getAttribute('for'),\n\t\t\t\t\ttype: attr.getAttribute('type') || 'string',\n\t\t\t\t\ttitle: attr.getAttribute('title') || ''\n\t\t\t\t};\n\n\t\t\t\t// Defaults\n\t\t\t\tlet default_el = _helpers.nodeListToArray(attr.childNodes);\n\n\t\t\t\tif (default_el.length > 0)\n\t\t\t\t\tproperties.defaultValue = default_el[0].textContent;\n\n\t\t\t\t// Creating attribute\n\t\t\t\tattributes.push(properties);\n\t\t\t});\n\n\t\treturn attributes.length > 0 ? attributes : false;\n\t}\n\n\t// Data from nodes or edges\n\tfunction _data(model, node_or_edge) {\n\n\t\tlet data = {};\n\t\tlet attvalues_els = node_or_edge.getElementsByTagName('attvalue');\n\n\t\t// Getting Node Indicated Attributes\n\t\tlet ah = _helpers.nodeListToHash(attvalues_els, function (el) {\n\t\t\tlet attributes = _helpers.namedNodeMapToObject(el.attributes);\n\t\t\tlet key = attributes.id || attributes['for'];\n\n\t\t\t// Returning object\n\t\t\treturn { key: key, value: attributes.value };\n\t\t});\n\n\n\t\t// Iterating through model\n\t\tmodel.map(function (a) {\n\n\t\t\t// Default value?\n\t\t\tdata[a.id] = !(a.id in ah) && 'defaultValue' in a ?\n\t\t\t\t_helpers.enforceType(a.type, a.defaultValue) :\n\t\t\t\t_helpers.enforceType(a.type, ah[a.id]);\n\n\t\t});\n\n\t\treturn data;\n\t}\n\n\t// Nodes\n\tfunction _nodes(model) {\n\t\tlet nodes = [];\n\n\t\t// Iteration through nodes\n\t\t_helpers.nodeListEach(_xml.els.nodes, function (n) {\n\n\t\t\t// Basic properties\n\t\t\tlet properties = {\n\t\t\t\tid: n.getAttribute('id'),\n\t\t\t\tlabel: n.getAttribute('label') || ''\n\t\t\t};\n\n\t\t\t// Retrieving data from nodes if any\n\t\t\tif (model)\n\t\t\t\tproperties.attributes = _data(model, n);\n\n\t\t\t// Retrieving viz information\n\t\t\tif (_xml.hasViz)\n\t\t\t\tproperties.viz = _nodeViz(n);\n\n\t\t\t// Pushing node\n\t\t\tnodes.push(Node(properties));\n\t\t});\n\n\t\treturn nodes;\n\t}\n\n\t// Viz information from nodes\n\tfunction _nodeViz(node) {\n\t\tlet viz = {};\n\n\t\t// Color\n\t\tlet color_el = _helpers.getFirstElementByTagNS(node, 'viz', 'color');\n\n\t\tif (color_el) {\n\t\t\tlet color = ['r', 'g', 'b', 'a'].map(function (c) {\n\t\t\t\treturn color_el.getAttribute(c);\n\t\t\t});\n\n\t\t\tviz.color = _helpers.getRGB(color);\n\t\t}\n\n\t\t// Position\n\t\tlet pos_el = _helpers.getFirstElementByTagNS(node, 'viz', 'position');\n\n\t\tif (pos_el) {\n\t\t\tviz.position = {};\n\n\t\t\t['x', 'y', 'z'].map(function (p) {\n\t\t\t\tviz.position[p] = +pos_el.getAttribute(p);\n\t\t\t});\n\t\t}\n\n\t\t// Size\n\t\tlet size_el = _helpers.getFirstElementByTagNS(node, 'viz', 'size');\n\t\tif (size_el)\n\t\t\tviz.size = +size_el.getAttribute('value');\n\n\t\t// Shape\n\t\tlet shape_el = _helpers.getFirstElementByTagNS(node, 'viz', 'shape');\n\t\tif (shape_el)\n\t\t\tviz.shape = shape_el.getAttribute('value');\n\n\t\treturn viz;\n\t}\n\n\t// Edges\n\tfunction _edges(model, default_type) {\n\t\tlet edges = [];\n\n\t\t// Iteration through edges\n\t\t_helpers.nodeListEach(_xml.els.edges, function (e) {\n\n\t\t\t// Creating the edge\n\t\t\tlet properties = _helpers.namedNodeMapToObject(e.attributes);\n\t\t\tif (!('type' in properties)) {\n\t\t\t\tproperties.type = default_type;\n\t\t\t}\n\n\t\t\t// Retrieving edge data\n\t\t\tif (model)\n\t\t\t\tproperties.attributes = _data(model, e);\n\n\n\t\t\t// Retrieving viz information\n\t\t\tif (_xml.hasViz)\n\t\t\t\tproperties.viz = _edgeViz(e);\n\n\t\t\tedges.push(Edge(properties));\n\t\t});\n\n\t\treturn edges;\n\t}\n\n\t// Viz information from edges\n\tfunction _edgeViz(edge) {\n\t\tlet viz = {};\n\n\t\t// Color\n\t\tlet color_el = _helpers.getFirstElementByTagNS(edge, 'viz', 'color');\n\n\t\tif (color_el) {\n\t\t\tlet color = ['r', 'g', 'b', 'a'].map(function (c) {\n\t\t\t\treturn color_el.getAttribute(c);\n\t\t\t});\n\n\t\t\tviz.color = _helpers.getRGB(color);\n\t\t}\n\n\t\t// Shape\n\t\tlet shape_el = _helpers.getFirstElementByTagNS(edge, 'viz', 'shape');\n\t\tif (shape_el)\n\t\t\tviz.shape = shape_el.getAttribute('value');\n\n\t\t// Thickness\n\t\tlet thick_el = _helpers.getFirstElementByTagNS(edge, 'viz', 'thickness');\n\t\tif (thick_el)\n\t\t\tviz.thickness = +thick_el.getAttribute('value');\n\n\t\treturn viz;\n\t}\n\n\n\t// Returning the Graph\n\t//---------------------\n\tlet nodeModel = _model('node'),\n\t\tedgeModel = _model('edge');\n\n\tlet graph = {\n\t\tversion: _xml.version,\n\t\tmode: _xml.mode,\n\t\tdefaultEdgeType: _xml.defaultEdgetype,\n\t\tmeta: _metaData(),\n\t\tmodel: {},\n\t\tnodes: _nodes(nodeModel),\n\t\tedges: _edges(edgeModel, _xml.defaultEdgetype)\n\t};\n\n\tif (nodeModel)\n\t\tgraph.model.node = nodeModel;\n\tif (edgeModel)\n\t\tgraph.model.edge = edgeModel;\n\n\treturn graph;\n}\n\n\n// Parsing the GEXF File\nfunction parse(gexf) {\n\treturn Graph(gexf);\n}\n\n\n/**\n * Exporting\n * ----------\n */\nlet gexf = {\n\n\t// Functions\n\tparse: parse,\n\n\t// Version\n\tversion: '0.2.5'\n};\n\n\n\nfunction loadGEXF(networkData){\n  return gexf.parse(networkData);\n}\n\n\nasync function loadGEXFFile(networkFile){\n  let networkData = await fetch(networkFile)\n    .then(response => response.text());\n  return gexf.parse(networkData);\n}\n\n\n\nfunction convertGEXF2JSON(network){\n  /*\n  network = {\n    nodes: [\n      {id: \"n0\", attributes:{...}},\n      {id: \"n1\", attributes:{...}},\n      {id: \"n2\", attributes:{...}},\n\n    ],\n    edges: [\n      {id: \"e0\", source: \"n0\", target: \"n1\", attributes:{...}},\n      {id: \"e1\", source: \"n1\", target: \"n2\", attributes:{...}},\n  }\n  */\n\n\tlet nodes = {};\n\tlet edges = [];\n  for (let node of network.nodes) {\n    let nodeID = node.id;\n    nodes[nodeID] = {};\n    // update with attributes\n    if (node.attributes) {\n      for (const [key, value] of Object.entries(node.attributes||{})) {\n        nodes[nodeID][key] = value;\n      }\n    }\n    // update label if exists\n    if (node.label) {\n      nodes[nodeID].Label = node.label;\n    }else if (node?.attributes.name) {\n      nodes[nodeID].Label = node.attributes.name;\n    }else{\n      nodes[nodeID].Label = nodeID;\n    }\n    if (node.viz?.position) {\n      let pos = node.viz?.position;\n      nodes[nodeID].Position = [pos?.x||0, pos?.y||0, pos?.z||0];\n    }\n\n    if (node.viz?.color) {\n      let color = d3rgb(node.viz?.color);\n      nodes[nodeID].Color = [color.r/255, color.g/255, color.b/255];\n    }\n  }\n\n\n\tfor (let edge of network.edges||[]) {\n    let newEdge = {};\n    newEdge.source = edge.source;\n    newEdge.target = edge.target;\n    for (const [key, value] of Object.entries(edge.attributes||{})) {\n      newEdge[key] = value;\n    }\n    edges.push(newEdge);\n\t}\n\t\n\treturn {nodes:nodes,edges:edges};\n}\n\nexport {loadGEXFFile,loadGEXF,convertGEXF2JSON}\n","/*\n * The GML software is based on the code from https://github.com/mobenar/mobenga-gml\n *\n * MIT License\n *\n * Copyright (c) [year] [author]\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * Parses GML string.\n *\n * @param {String} gml\n * @returns {Object}\n * @throws {SyntaxError}\n */\n\nfunction GMLParse(gml) {\n\n\tvar json = ('{\\n' + gml + '\\n}')\n\t\t.replace(/^(\\s*)(\\w+)\\s*\\[/gm, '$1\"$2\": {')\n\t\t.replace(/^(\\s*)\\]/gm, '$1},')\n\t\t.replace(/^(\\s*)(\\w+)\\s+(.+)$/gm, '$1\"$2\": $3,')\n\t\t.replace(/,(\\s*)\\}/g, '$1}');\n\n\tvar graph = {};\n\tvar nodes = [];\n\tvar edges = [];\n\tvar i = 0;\n\tvar parsed;\n\n\tjson = json.replace(/^(\\s*)\"node\"/gm, function (all, indent) {\n\n\t\treturn (indent + '\"node[' + (i++) + ']\"');\n\t});\n\n\ti = 0;\n\n\tjson = json.replace(/^(\\s*)\"edge\"/gm, function (all, indent) {\n\n\t\treturn (indent + '\"edge[' + (i++) + ']\"');\n\t});\n\t//replace NaN with null\n\tjson = json.replace(/: NaN/g, ': null');\n\t\n\ttry {\n\t\tparsed = JSON.parse(json);\n\t}\n\tcatch (err) {\n\t\tthrow new SyntaxError('bad format');\n\t}\n\tif (!isObject(parsed.graph)) {\n\t\tthrow new SyntaxError('no graph tag');\n\t}\n\n\tforIn(parsed.graph, function (key, value) {\n\n\t\tvar matches = key.match(/^(\\w+)\\[(\\d+)\\]$/);\n\t\tvar name;\n\t\tvar i;\n\n\t\tif (matches) {\n\t\t\tname = matches[1];\n\t\t\ti = parseInt(matches[2], 10);\n\n\t\t\tif (name === 'node') {\n\t\t\t\tnodes[i] = value;\n\t\t\t}\n\t\t\telse if (name === 'edge') {\n\t\t\t\tedges[i] = value;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgraph[key] = value;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tgraph[key] = value;\n\t\t}\n\t});\n\tlet nodesDictionary = {};\n\tnodes.forEach(function (node) {\n\t\tnodesDictionary[node.id] = node;\n\t});\n\tgraph.nodes = nodesDictionary;\n\tgraph.edges = edges;\n\n\treturn graph;\n};\n\n/**\n * Stringifies GML object.\n *\n * @param {Object} graph\n * @param {Object} [options]\n * @returns {String}\n */\nfunction GMLStringify(graph, options) {\n\n\tif (typeof graph.toJSON === 'function') {\n\t\tgraph = graph.toJSON();\n\t}\n\n\toptions = options || {};\n\n\tvar nodes = graph.nodes || [];\n\tvar edges = graph.edges || [];\n\tvar indent1 = (typeof options.indent === 'string' ? options.indent : '  ');\n\tvar indent2 = indent1 + indent1;\n\tvar getGraphAttributes = options.graphAttributes || null;\n\tvar getNodeAttributes = options.nodeAttributes || null;\n\tvar getEdgeAttributes = options.edgeAttributes || null;\n\tvar lines = ['graph ['];\n\n\tfunction addAttribute(key, value, indent) {\n\n\t\tif (isObject(value)) {\n\t\t\tlines.push(indent + key + ' [');\n\n\t\t\tforIn(value, function (key, value) {\n\n\t\t\t\taddAttribute(key, value, indent + indent1);\n\t\t\t});\n\n\t\t\tlines.push(indent + ']');\n\t\t}\n\t\telse {\n\t\t\tlines.push(indent + attribute(key, value));\n\t\t}\n\t}\n\n\tforIn(graph, function (key, value) {\n\n\t\tif (key !== 'nodes' && key !== 'edges') {\n\t\t\taddAttribute(key, value, indent1);\n\t\t}\n\t});\n\n\tif (getGraphAttributes) {\n\t\tforIn(getGraphAttributes(graph), function (key, value) {\n\n\t\t\taddAttribute(key, value, indent1);\n\t\t});\n\t}\n\n\tnodes.forEach(function (node) {\n\n\t\tlines.push(indent1 + 'node [');\n\n\t\t// addAttribute('id', node.id, indent2);\n\t\t// addAttribute('label', node.label, indent2);\n\n\t\tif (getNodeAttributes) {\n\t\t\t// getNodeAttributes\n\t\t\tgetNodeAttributes.forEach(function (key) {\n\n\t\t\t\taddAttribute(key, node[key], indent2);\n\t\t\t});\n\t\t}\n\n\t\tlines.push(indent1 + ']');\n\t});\n\n\tedges.forEach(function (edge) {\n\n\t\tlines.push(indent1 + 'edge [');\n\n\t\taddAttribute('source', edge.source, indent2);\n\t\taddAttribute('target', edge.target, indent2);\n\t\t// addAttribute('label', edge.label, indent2);\n\n\t\tif (getEdgeAttributes) {\n\t\t\tgetEdgeAttributes.forEach(function (key) {\n\n\t\t\t\taddAttribute(key, edge[key], indent2);\n\t\t\t});\n\t\t}\n\n\t\tlines.push(indent1 + ']');\n\t});\n\n\tlines.push(']');\n\n\treturn lines.join('\\n');\n};\n\nfunction isObject(value) {\n\n\treturn (value && Object.prototype.toString.call(value) === '[object Object]');\n}\n\nfunction forIn(object, callback) {\n\n\tObject.keys(object).forEach(function (key) {\n\n\t\tcallback(key, object[key]);\n\t});\n}\n\nfunction attribute(key, value) {\n\n\tif (typeof value === 'boolean') {\n\t\tvalue = Number(value);\n\t}\n\telse {\n\t\tvalue = JSON.stringify(value);\n\t}\n\n\treturn (key + ' ' + value);\n}\n\n\n\nfunction loadGML(networkData) {\n\treturn GMLParse(networkData);\n}\n\n\nasync function loadGMLFile(networkFile) {\n\tlet networkData = await fetch(networkFile)\n\t\t.then(response => {\n\t\t\treturn response.text();\n\t\t});\n\treturn loadGML(networkData);\n}\n\nexport { loadGML, loadGMLFile, GMLStringify };","/**\n * A class representing a behavior filter for Helios.\n */\nexport class BehaviorFilter {\n\t/**\n\t * Creates a new instance of BehaviorFilter.\n\t * @param {Helios} helios - The Helios object to be attached to.\n\t */\n\tconstructor(helios) {\n\t\t/**\n\t\t * The filters to be applied.\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._filters = {};\n\t\tthis._updatedNodes = new Set();\n\n\t\t/**\n\t\t * The Helios object to be attached to.\n\t\t * @type {Helios}\n\t\t * @private\n\t\t */\n\t\tthis._helios = helios;\n\t}\n\n\t/**\n\t * Gets the filters.\n\t * @type {Object}\n\t */\n\tget filters() {\n\t\treturn this._filters;\n\t}\n\n\t/**\n\t * Sets a filter.\n\t * @param {string} name - The name of the filter.\n\t * @param {function} filter - The filter function.\n\t */\n\tsetFilter(name, filter) {\n\t\tthis._filters[name] = filter;\n\t}\n\n\t/**\n\t * Removes a filter.\n\t * @param {string} name - The name of the filter to remove.\n\t */\n\tremoveFilter(name) {\n\t\tdelete this._filters[name];\n\t}\n\n\t/**\n\t * Applies the filters.\n\t */\n\tapplyFilters() {\n\t\tfor (let node of this._helios.network.index2Node) {\n\t\t\tlet nodeState = false;\n\t\t\tfor (let filter in this._filters) {\n\t\t\t\tnodeState = nodeState || this._filters[filter](node);\n\t\t\t}\n\t\t\tif (nodeState != node._filtered) {\n\t\t\t\tthis._updatedNodes.add(node);\n\t\t\t}\n\t\t\tnode._filtered = nodeState;\n\t\t}\n\t}\n\n\t/**\n\t * Gets the updated nodes.\n\t * @type {Set}\n\t * @readonly\n\t */\n\tupdatedNodes(clear=true) {\n\t\t//Create copy of set\n\t\tlet nodes = new Set(this._updatedNodes);\n\t\tif (clear) {\n\t\t\tthis._updatedNodes.clear();\n\t\t}\n\t\treturn nodes;\n\t} \n}\n"],"names":["linear","cubicInOut","xhtml","namespaces","namespace","name","prefix","i","creatorInherit","document","uri","creatorFixed","fullname","creator","none","selector","selection_select","select","groups","m","subgroups","j","group","n","subgroup","node","subnode","Selection","array","x","empty","selectorAll","arrayAll","selection_selectAll","parents","matcher","childMatcher","find","childFind","match","childFirst","selection_selectChild","filter","children","childrenFilter","selection_selectChildren","selection_filter","sparse","update","selection_enter","EnterNode","parent","datum","child","next","constant$2","bindIndex","enter","exit","data","groupLength","dataLength","bindKey","key","nodeByKeyValue","keyValues","keyValue","selection_data","value","bind","constant","arraylike","enterGroup","updateGroup","exitGroup","i0","i1","previous","selection_exit","selection_join","onenter","onupdate","onexit","selection_merge","context","selection","groups0","groups1","m0","m1","merges","group0","group1","merge","selection_order","selection_sort","compare","ascending","compareNode","a","b","sortgroups","sortgroup","selection_call","callback","selection_nodes","selection_node","selection_size","size","selection_empty","selection_each","attrRemove","attrRemoveNS","attrConstant","attrConstantNS","attrFunction","v","attrFunctionNS","selection_attr","defaultView","styleRemove","styleConstant","priority","styleFunction","selection_style","styleValue","propertyRemove","propertyConstant","propertyFunction","selection_property","classArray","string","classList","ClassList","classedAdd","names","list","classedRemove","classedTrue","classedFalse","classedFunction","selection_classed","textRemove","textConstant","textFunction","selection_text","htmlRemove","htmlConstant","htmlFunction","selection_html","raise","selection_raise","lower","selection_lower","selection_append","create","constantNull","selection_insert","before","remove","selection_remove","selection_cloneShallow","clone","selection_cloneDeep","selection_clone","deep","selection_datum","contextListener","listener","event","parseTypenames","typenames","t","onRemove","typename","on","o","onAdd","options","selection_on","dispatchEvent","type","params","window","dispatchConstant","dispatchFunction","selection_dispatch","selection_iterator","root","selection_selection","d3Select","sourceEvent","pointer","svg","point","rect","noop","dispatch","_","Dispatch","types","T","get","set","copy","that","args","c","nonpassivecapture","noevent$1","dragDisable","view","noevent","yesdrag","noclick","define$1","constructor","factory","prototype","extend","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","define","color","channels","color_formatHex","color_formatHex8","color_formatHsl","color_formatRgb","hslConvert","format","l","rgbn","Rgb","rgba","hsla","r","g","rgbConvert","rgb","opacity","k","clampi","clampa","rgb_formatHex","rgb_formatHex8","rgb_formatRgb","hex","h","s","Hsl","min","max","hsl","m2","hsl2rgb","clamph","clampt","constant$1","d","exponential","y","gamma","nogamma","interpolateRgb","rgbGamma","start","end","colorRgb","interpolateNumber","reA","reB","zero","one","interpolateString","bi","am","bm","bs","q","number","degrees","identity","decompose","e","f","scaleX","scaleY","skewX","svgNode","parseCss","parseSvg","interpolateTransform","parse","pxComma","pxParen","degParen","pop","translate","xa","ya","xb","yb","rotate","scale","interpolateTransformCss","interpolateTransformSvg","epsilon2","cosh","sinh","tanh","interpolateZoom","zoomRho","rho","rho2","rho4","zoom","p0","p1","ux0","uy0","w0","ux1","uy1","w1","dx","dy","d2","S","d1","b0","b1","r0","r1","coshr0","u","_1","_2","_4","frame","timeout","interval","pokeDelay","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","setFrame","now","clearNow","Timer","timer","delay","time","sleep","timerFlush","wake","nap","poke","t0","t1","t2","elapsed","emptyOn","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","schedule","id","index","timing","schedules","init","self","tween","stop","tick","interrupt","active","selection_interrupt","tweenRemove","tween0","tween1","tweenFunction","transition_tween","tweenValue","transition","interpolate","value1","string00","string1","interpolate0","string0","string10","transition_attr","attrInterpolate","attrInterpolateNS","attrTweenNS","attrTween","transition_attrTween","delayFunction","delayConstant","transition_delay","durationFunction","durationConstant","transition_duration","easeConstant","transition_ease","easeVarying","transition_easeVarying","transition_filter","Transition","transition_merge","onFunction","on0","on1","sit","transition_on","removeFunction","transition_remove","transition_select","transition_selectAll","inherit","transition_selection","styleNull","style","styleMaybeRemove","listener0","transition_style","styleInterpolate","styleTween","transition_styleTween","transition_text","textInterpolate","textTween","transition_textTween","transition_transition","id0","id1","newId","transition_end","resolve","reject","cancel","selection_prototype","defaultTiming","easeCubicInOut","selection_transition","ZoomEvent","target","transform","Transform","location","nopropagation","defaultFilter","defaultExtent","defaultTransform","defaultWheelDelta","defaultTouchable","defaultConstrain","extent","translateExtent","dx0","dx1","dy0","dy1","d3Zoom","constrain","wheelDelta","touchable","scaleExtent","duration","listeners","touchstarting","touchfirst","touchending","touchDelay","wheelDelay","clickDistance2","tapDistance","wheeled","mousedowned","dblclicked","touchstarted","touchmoved","touchended","collection","gesture","p","k0","k1","centroid","w","clean","Gesture","wheelidled","currentTarget","mousemoved","mouseupped","x0","y0","dragEnable","touches","started","l0","l1","dp","dl","EPSILON","ARRAY_TYPE","out","glMatrix.ARRAY_TYPE","normalFromMat4","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","multiply","b2","b3","z","rad","axis","len","b12","b20","b21","b22","glMatrix.EPSILON","perspectiveNO","fovy","aspect","near","far","nf","perspective","orthoNO","left","right","bottom","top","lr","bt","ortho","vec","stride","offset","count","fn","arg","transformMat4","createWebGLContext","canvas","opt_attribs","ii","getShaderFromString","gl","str","shader","ShaderProgram","vertexShader","fragmentShader","uniforms","attributes","glContext","shaderProgram","attributeName","makePlane","ctx","generateNormal","generateTexCoord","geometryData","normalData","texCoordData","retval","degToRad","findIndex","nodes","delta","delta1","linearMixer","lowerNodeValue","upperNodeValue","frac","isNode","isNodeArray","colorCombination","X","Y","ensureMixer","mixer","createColorMap","colors","noColorMap","createMapFromNodes","createMapFromArray","linearCombination","sortedNodes","scaledValue","coeff0","coeff1","arr","indexFloat","_value","linearScale","domain","range","d0","colors$2","Node$1","originalObject","ID","network","nodeProperty","newColor","nodeIndex","newOpacity","newSize","newWidth","newPosition","Network","edges","properties","nodeID","edgeIndex","edge","fromIndex","toIndex","colorScale","colorMap","inferno","newNode","Node","fromNode","toNode","edgesLength","nodePositions","edgePositions","indexedEdges","edgeFromPositionIndex","edgeToPositionIndex","updateOpacity","edgeColors","nodeColors","edgeFromColorIndex","edgeToColorIndex","edgeSizes","nodeSizes","HeliosScheduler","helios","FPS","throttle","maxQueueLength","repeat","maxRepeatCount","maxRepeatTime","repeatInterval","synchronized","immediateUpdates","updateNodesGeometry","updateEdgesGeometry","afterRedraw","redraw","replace","newTask","currentTimestamp","elapsedTime","newCurrentTimestamp","task","afterRedrawTasks","allTasksCurrentTimestamp","taskName","willExecute","needsRender","needsUpdateNodesGeometry","needsUpdateEdgesGeometry","updateTimeoutAfterRender","taskQueue","taskIndex","module","require","_dereq_","exports","Multimath","mm_unsharp_mask","mm_resize","MathLib","requested_features","__requested_features","features","cache","result","clampTo8","clampNegative","convolveHor","src","dest","srcW","srcH","destW","filters","filterPtr","filterShift","filterSize","srcPtr","srcY","destX","filterVal","srcOffset","destOffset","convolveVert","convolveHorWithPre","alpha","convolveVertWithPre","createFilters","_require","hasAlpha","width","height","ptr","resetAlpha","dst","destH","offsetX","offsetY","filtersX","filtersY","tmp","FILTER_INFO","FIXED_FRAC_BITS","toFixedPoint","num","srcSize","destSize","filterFunction","scaleInverted","scaleClamped","srcWindow","destPixel","srcPixel","srcFirst","srcLast","filterElementSize","floatFilter","fxpFilter","total","pxl","idx","floatVal","filterTotal","leftNotEmpty","rightNotEmpty","maxFilterElementSize","packedFilter","packedFilterPtr","slowCopy","xpi","asUint8Array","IS_LE","copyInt16asLE","target_offset","src_offset","src_size","tmp_offset","tmp_size","filtersX_offset","filtersY_offset","alloc_bytes","instance","mem","mem32","src32","dest32","glur_mono16","hsv_v16","img","amount","radius","threshold","v1","v2","vmul","diff","iTimes4","brightness","blured","amountFp","thresholdFp","pixels","img_bytes_cnt","hsv_bytes_cnt","blur_bytes_cnt","blur_line_byte_cnt","blur_coeffs_byte_cnt","img_offset","hsv_offset","blur_offset","blur_tmp_offset","blur_line_offset","blur_coeffs_offset","img32","GC_INTERVAL","Pool","idle","_this","resource","_this2","_this3","MIN_INNER_TILE_SIZE","fromWidth","fromHeight","toWidth","toHeight","srcTileSize","destTileBorder","minScale","stageCount","PIXEL_EPSILON","pixelFloor","nearest","pixelCeil","innerTileWidth","innerTileHeight","innerX","innerY","toTileWidth","toTileHeight","tiles","tile","objClass","obj","element","cname","concurrency","queue","roll","err","createCanvas","bitmap","status","workerPayload","code","ev","usable","image","mathLib","tileOpts","a0","a1","a2","a3","left_corner","right_corner","gaussCoef","sigma","g1","g2","convolveMono16","line","coeff","prev_src","curr_src","curr_out","prev_out","prev_prev_out","src_index","out_index","line_index","coeff_a0","coeff_a1","coeff_b1","coeff_b2","blurMono16","tmp_line","assign","base64decode","hasWebAssembly","DEFAULT_OPTIONS","MultiMath","opts","bytes","mem_size","memsize","env_extra","env_base","base","reminder","BASE64_MAP","input","bits","tailbits","wa","bin","getOwnPropertySymbols","hasOwnProperty","propIsEnumerable","toObject","val","shouldUseNative","test1","test2","order2","test3","letter","source","from","to","symbols","bundleFn","sources","stringify","wkey","cacheKeys","exp","wcache","skey","scache","workerSources","resolveSources","depPath","depKey","URL","blob","workerUrl","worker","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","minLen","_arrayLikeToArray","arr2","_i","_arr","_n","_d","_s","_e","webworkify","utils","createStages","createRegions","filter_info","singletones","NEED_SAFARI_FIX","DEFAULT_PICA_OPTS","tmpCanvas","DEFAULT_RESIZE_OPTS","CAN_NEW_IMAGE_DATA","CAN_CREATE_IMAGE_BITMAP","CAN_USE_CANVAS_GET_IMAGE_DATA","CAN_USE_OFFSCREEN_CANVAS","CAN_USE_CIB_REGION_FOR_IMAGE","workerFabric","url","Pica","limiter_key","wkr","wpool_key","initMath","mathlib","checkCibResize","checkOffscreenCanvas","checkCibRegion","transfer","stageEnv","extractTo","tmpCtx","toImageData","processTile","imageBitmap","regions","jobs","cleanup","stages","_this4","_stages$shift","_stages$shift2","isLastStage","res","_this5","toCtx","iData","_this6","DEST_TILE_BORDER","_this7","mimeType","quality","asString","asBuffer","workerFunction","moduleName","N","A","M","E","D","attributeNames","attribute","msg","use2D","inputNodesPositions","inputEdges","links","vz","edgeFrom","edgeTo","edgeObject","vertexIndex","workerFunctionString","workerURL","d3ForceLayoutWorker","onUpdate","onStop","onStart","alphaValue","velocityDecayValue","vertexHyperbolicShader","pickingShader","fastVertexShader","fastVertexHyperbolicShader","fastFragmentShader","LinkedList_1","_createClass","defineProperties","props","descriptor","Constructor","protoProps","staticProps","_classCallCheck","LinkedList","CircularLinkedList_1","_LinkedList2","require$$0","_possibleConstructorReturn","call","_inherits","subClass","superClass","CircularLinkedList","_LinkedList","nodeFromStart","nodeFromEnd","useNodes","linked","PRECISION_1","Matrix_1","_PRECISION","_Vector","require$$1","Matrix","elements","col","cols","matrix","nj","els","returnVector","sum","ni","rows","np","multiplier","tr","rank","divisor","inverse_elements","new_element","matrix_rows","theta","mod","Vector_1","_Matrix","Vector","vector","V","dot","mod1","mod2","angle","product","B","part","plane","R","C","P","Q","Plane_1","require$$2","_Line","require$$3","Plane","anchor","direction","O","solver","inverse","intersection","C1","C2","C3","A1","A2","A3","N1","N2","N3","newA","AN1","AN2","AN3","newN","v11","v12","v13","normal","v21","v22","v23","points","prevN","totalN","Line_1","_Plane","Line","PA1","PA2","PA3","modPA","cosTheta","sin2","dist","X1","X2","X3","Y1","Y2","Y3","PsubQ1","PsubQ2","PsubQ3","XdotQsubP","YdotPsubQ","XdotX","YdotY","XdotY","D1","D2","D3","E1","E2","E3","AD1","AD2","AD3","newD","LineSegment_1","LineSegment","segment","vect","startPoint","endPoint","LinkedListNode_1","LinkedListNode","Polygon_1","require$$4","require$$5","Polygon","vertex","triangles","firstVertex","trigs","area","prev","prevWasConvex","nextWasConvex","W","dt","loops","success","poly","convexNode","mainNode","trig","pointSet","newVertex","Vertex_1","_Vector2","Vertex","_ret","polygon","Utils","mht","makeLookAt","makeOrtho","makePerspective","makeFrustum","ex","ey","ez","cx","cy","cz","ux","uy","uz","eye","center","up","znear","zfar","tx","ty","tz","ymax","ymin","xmin","xmax","_CircularLinkedList","_LineSegment","_LinkedListNode","require$$6","_Polygon","require$$7","require$$8","_Vertex","require$$9","_Utils","require$$10","require$$11","specifier","ramp","textureFragmentShader","textureVertexShader","getShader","createShader","densityShaders.fragmentShader","densityShaders.vertexShader","program","createShader2Dlut","frags","densityShaders.textureFragmentShader","verts","densityShaders.textureVertexShader","log_it","what","DensityGL","qualityScale","vertices","glUtils.makePlane","projectionMatrix","viewMatrix","ext","currentFBO","currentViewport","force","fboWidth","fboHeight","FloatingPointTextureExtensionSupported","FloatingPointTextureExtensionSupportedLinear","FBO","interpolateFunction","colorCount","colormapTexture","d3Chromatic.interpolateInferno","colormapValues","rgbColor","d3rgb","newData","newWeights","print","printNode","row","isTail","indent","isBalanced","lh","rh","loadRecursive","keys","values","middle","markBalance","sort","pivot","DEFAULT_COMPARE","rotateLeft","rightNode","rotateRight","leftNode","AVLTree","comparator","noDuplicates","cmp","successor","predecessor","current","done","low","high","returnValue","subtree","newRoot","pp","presort","SortedValueMap","oldValue","isSafari","_throttle","cb","shouldWait","Helios","elementID","density","orthographic","hyperbolic","fastEdges","tracking","fieldOfView","forceSupersample","autoStartLayout","autoCleanup","webglOptions","glm.mat4.create","glm.vec3.create","glm.mat4.identity","glUtils.createWebGLContext","entries","entry","onlayoutUpdate","layoutElapsedTime","interpolatorTask","maxDisplacement","positionsLength","newPositions","previousPositions","displacement","onLayoutStop","onLayoutStart","maxDegree","degree","pickID","eventType","pickObject","nodePick","events","imageData","filename","supersampleFactor","pica","canvasFullSize","ctxFullSize","downloadLink","svgText","svgLayerContent","blobSVG","framebuffer","fbWidth","fbHeight","backgroundColor","shallCancel","glUtils.ShaderProgram","glUtils.getShaderFromString","edgesShaders.vertexHyperbolicShader","edgesShaders.vertexShader","edgesShaders.fragmentShader","edgesShaders.fastVertexHyperbolicShader","edgesShaders.fastVertexShader","edgesShaders.fastFragmentShader","edgesShaders.pickingShader","nodesShaders.vertexHyperbolicShader","nodesShaders.vertexShader","nodesShaders.fragmentShader","nodesShaders.fastFragmentShader","nodesShaders.pickingShader","level","internalFormat","border","attachmentPoint","positions","sizes","outlineWidths","outlineColors","indicesArray","newGeometry","uints_for_indices","edgeVertexTypeArray","edgeID","newHeight","aspectRatio","trackingWidth","trackingHeight","totalTrackingPixels","newRotationMatrix","panelHeight","displacementFactor","glm.mat4.rotate","glUtils.degToRad","glm.mat4.multiply","zoomFactor","d3ZoomIdentity","d3Ease.easeLinear","semanticZoomExponent","dpr","newFrameworkWidth","newFrameworkHeight","immediate","destination","framebufferType","viewport","finalCameraDistance","orthoHeight","orthoWidth","glm.mat4.ortho","glm.mat4.perspective","glm.mat4.translate","adjustedScaleFactor","currentShaderProgram","normalMatrix","glm.mat3.create","glm.mat3.normalFromMat4","hasEdgeCallbacks","pos","lengthSize","ignoreInstantaneousUpdate","cameraInterpolatorTask","colorInput","allNodes","aColor","sizeInput","aSize","widthInput","aWidth","allEdges","sourceNode","targetNode","nodeIndices","projectedPositions","w2d","h2d","nodePosition","projectedPosition","glm.vec4.create","glm.vec4.transformMat4","perspectiveFactor","pixelX","pixelY","readID","centroids","counts","nodeAttribute","xy","nodesOnScreen","avoidPixelBufferUpdate","attributeTrackers","totalPixels","XYPositions","trackedAttributeEntryKey","trackedAttributeEntry","pixelCounter","currentKeys","smoothness","minProportion","calculateCentroid","centroidPositions","maxLabels","coefficient","newValue","centroidPosition","index2node","attributeEntry","newCentroidPosition","trackedKeys","toRemove","trackerName","attributeTracker","IDProportion","proportion","trackerTaskName","tracker","onTrack","trackedAttribute","anOpacity","edgesColorsFromNodes","edgesWidthFromNodes","enableAdditiveBlending","enableShadedNodes","pickables","labelsMaxPixels","keepGLContext","numTextureUnits","unit","textSplit2","text","textSplit3","readNumberIgnoringNone","propertyHeaderRegular","propertyFunctions","readXNETVerticesHeader","headerEntries","nodeCount","readXNETLabels","labels","currentLine","lineLength","label","readXNETEdgesHeader","weighted","directed","headerEntry","readXNETEdges","weights","weight","readXNETPropertyHeader","propertyType","propertyKey","propertyFormat","readXNETProperty","propertyHeader","loadXNET","nodesCount","edgesHeader","edgesData","propertyData","loadXNETFile","networkFile","networkData","response","convertXNET2JSON","_helpers","xml","attributesTags","modelTags","nodeList","func","prop","nodeMap","ns","tag","el","attr_value","Edge","Graph","xmlString","_xml","edgeType","_metaData","metas","_model","cls","attr","default_el","_data","model","node_or_edge","attvalues_els","ah","_nodes","_nodeViz","viz","color_el","pos_el","size_el","shape_el","_edges","default_type","_edgeViz","thick_el","nodeModel","edgeModel","graph","gexf","loadGEXF","loadGEXFFile","convertGEXF2JSON","newEdge","GMLParse","gml","json","parsed","all","isObject","forIn","matches","nodesDictionary","GMLStringify","indent1","indent2","getGraphAttributes","getNodeAttributes","getEdgeAttributes","lines","addAttribute","object","loadGML","loadGMLFile","BehaviorFilter","nodeState","clear"],"mappings":"AAAO,MAAMA,KAAS,OAAK,CAAC;ACQrB,SAASC,GAAW,GAAG;AAC5B,WAAS,KAAK,MAAM,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,IAAI,IAAI,KAAK;AAC9D;ACVO,IAAIC,KAAQ;AAEnB,MAAeC,KAAA;AAAA,EACb,KAAK;AAAA,EACL,OAAOD;AAAA,EACP,OAAO;AAAA,EACP,KAAK;AAAA,EACL,OAAO;AACT;ACNe,SAAQE,GAACC,GAAM;AAC5B,MAAIC,IAASD,KAAQ,IAAIE,IAAID,EAAO,QAAQ,GAAG;AAC/C,SAAIC,KAAK,MAAMD,IAASD,EAAK,MAAM,GAAGE,CAAC,OAAO,YAASF,IAAOA,EAAK,MAAME,IAAI,CAAC,IACvEJ,GAAW,eAAeG,CAAM,IAAI,EAAC,OAAOH,GAAWG,CAAM,GAAG,OAAOD,EAAI,IAAIA;AACxF;ACHA,SAASG,GAAeH,GAAM;AAC5B,SAAO,WAAW;AAChB,QAAII,IAAW,KAAK,eAChBC,IAAM,KAAK;AACf,WAAOA,MAAQR,MAASO,EAAS,gBAAgB,iBAAiBP,KAC5DO,EAAS,cAAcJ,CAAI,IAC3BI,EAAS,gBAAgBC,GAAKL,CAAI;AAAA,EAC5C;AACA;AAEA,SAASM,GAAaC,GAAU;AAC9B,SAAO,WAAW;AAChB,WAAO,KAAK,cAAc,gBAAgBA,EAAS,OAAOA,EAAS,KAAK;AAAA,EAC5E;AACA;AAEe,SAAQC,GAACR,GAAM;AAC5B,MAAIO,IAAWR,GAAUC,CAAI;AAC7B,UAAQO,EAAS,QACXD,KACAH,IAAgBI,CAAQ;AAChC;ACxBA,SAASE,KAAO;AAAE;AAEH,SAAQC,GAACA,GAAU;AAChC,SAAOA,KAAY,OAAOD,KAAO,WAAW;AAC1C,WAAO,KAAK,cAAcC,CAAQ;AAAA,EACtC;AACA;ACHe,SAAQC,GAACC,GAAQ;AAC9B,EAAI,OAAOA,KAAW,eAAYA,IAASF,GAASE,CAAM;AAE1D,WAASC,IAAS,KAAK,SAASC,IAAID,EAAO,QAAQE,IAAY,IAAI,MAAMD,CAAC,GAAGE,IAAI,GAAGA,IAAIF,GAAG,EAAEE;AAC3F,aAASC,IAAQJ,EAAOG,CAAC,GAAGE,IAAID,EAAM,QAAQE,IAAWJ,EAAUC,CAAC,IAAI,IAAI,MAAME,CAAC,GAAGE,GAAMC,GAASnB,IAAI,GAAGA,IAAIgB,GAAG,EAAEhB;AACnH,OAAKkB,IAAOH,EAAMf,CAAC,OAAOmB,IAAUT,EAAO,KAAKQ,GAAMA,EAAK,UAAUlB,GAAGe,CAAK,OACvE,cAAcG,MAAMC,EAAQ,WAAWD,EAAK,WAChDD,EAASjB,CAAC,IAAImB;AAKpB,SAAO,IAAIC,EAAUP,GAAW,KAAK,QAAQ;AAC/C;ACVe,SAASQ,GAAMC,GAAG;AAC/B,SAAOA,KAAK,OAAO,CAAE,IAAG,MAAM,QAAQA,CAAC,IAAIA,IAAI,MAAM,KAAKA,CAAC;AAC7D;ACRA,SAASC,KAAQ;AACf,SAAO;AACT;AAEe,SAAQC,GAAChB,GAAU;AAChC,SAAOA,KAAY,OAAOe,KAAQ,WAAW;AAC3C,WAAO,KAAK,iBAAiBf,CAAQ;AAAA,EACzC;AACA;ACJA,SAASiB,GAASf,GAAQ;AACxB,SAAO,WAAW;AAChB,WAAOW,GAAMX,EAAO,MAAM,MAAM,SAAS,CAAC;AAAA,EAC9C;AACA;AAEe,SAAQgB,GAAChB,GAAQ;AAC9B,EAAI,OAAOA,KAAW,aAAYA,IAASe,GAASf,CAAM,IACrDA,IAASc,GAAYd,CAAM;AAEhC,WAASC,IAAS,KAAK,SAASC,IAAID,EAAO,QAAQE,IAAY,CAAE,GAAEc,IAAU,CAAE,GAAEb,IAAI,GAAGA,IAAIF,GAAG,EAAEE;AAC/F,aAASC,IAAQJ,EAAOG,CAAC,GAAGE,IAAID,EAAM,QAAQG,GAAMlB,IAAI,GAAGA,IAAIgB,GAAG,EAAEhB;AAClE,OAAIkB,IAAOH,EAAMf,CAAC,OAChBa,EAAU,KAAKH,EAAO,KAAKQ,GAAMA,EAAK,UAAUlB,GAAGe,CAAK,CAAC,GACzDY,EAAQ,KAAKT,CAAI;AAKvB,SAAO,IAAIE,EAAUP,GAAWc,CAAO;AACzC;ACxBe,SAAQC,GAACpB,GAAU;AAChC,SAAO,WAAW;AAChB,WAAO,KAAK,QAAQA,CAAQ;AAAA,EAChC;AACA;AAEO,SAASqB,GAAarB,GAAU;AACrC,SAAO,SAASU,GAAM;AACpB,WAAOA,EAAK,QAAQV,CAAQ;AAAA,EAChC;AACA;ACRA,IAAIsB,KAAO,MAAM,UAAU;AAE3B,SAASC,GAAUC,GAAO;AACxB,SAAO,WAAW;AAChB,WAAOF,GAAK,KAAK,KAAK,UAAUE,CAAK;AAAA,EACzC;AACA;AAEA,SAASC,KAAa;AACpB,SAAO,KAAK;AACd;AAEe,SAAQC,GAACF,GAAO;AAC7B,SAAO,KAAK,OAAOA,KAAS,OAAOC,KAC7BF,GAAU,OAAOC,KAAU,aAAaA,IAAQH,GAAaG,CAAK,CAAC,CAAC;AAC5E;ACfA,IAAIG,KAAS,MAAM,UAAU;AAE7B,SAASC,KAAW;AAClB,SAAO,MAAM,KAAK,KAAK,QAAQ;AACjC;AAEA,SAASC,GAAeL,GAAO;AAC7B,SAAO,WAAW;AAChB,WAAOG,GAAO,KAAK,KAAK,UAAUH,CAAK;AAAA,EAC3C;AACA;AAEe,SAAQM,GAACN,GAAO;AAC7B,SAAO,KAAK,UAAUA,KAAS,OAAOI,KAChCC,GAAe,OAAOL,KAAU,aAAaA,IAAQH,GAAaG,CAAK,CAAC,CAAC;AACjF;ACde,SAAQO,GAACP,GAAO;AAC7B,EAAI,OAAOA,KAAU,eAAYA,IAAQJ,GAAQI,CAAK;AAEtD,WAASrB,IAAS,KAAK,SAASC,IAAID,EAAO,QAAQE,IAAY,IAAI,MAAMD,CAAC,GAAGE,IAAI,GAAGA,IAAIF,GAAG,EAAEE;AAC3F,aAASC,IAAQJ,EAAOG,CAAC,GAAGE,IAAID,EAAM,QAAQE,IAAWJ,EAAUC,CAAC,IAAI,CAAA,GAAII,GAAMlB,IAAI,GAAGA,IAAIgB,GAAG,EAAEhB;AAChG,OAAKkB,IAAOH,EAAMf,CAAC,MAAMgC,EAAM,KAAKd,GAAMA,EAAK,UAAUlB,GAAGe,CAAK,KAC/DE,EAAS,KAAKC,CAAI;AAKxB,SAAO,IAAIE,EAAUP,GAAW,KAAK,QAAQ;AAC/C;ACfe,SAAQ2B,GAACC,GAAQ;AAC9B,SAAO,IAAI,MAAMA,EAAO,MAAM;AAChC;ACCe,SAAAC,KAAW;AACxB,SAAO,IAAItB,EAAU,KAAK,UAAU,KAAK,QAAQ,IAAIoB,EAAM,GAAG,KAAK,QAAQ;AAC7E;AAEO,SAASG,GAAUC,GAAQC,GAAO;AACvC,OAAK,gBAAgBD,EAAO,eAC5B,KAAK,eAAeA,EAAO,cAC3B,KAAK,QAAQ,MACb,KAAK,UAAUA,GACf,KAAK,WAAWC;AAClB;AAEAF,GAAU,YAAY;AAAA,EACpB,aAAaA;AAAA,EACb,aAAa,SAASG,GAAO;AAAE,WAAO,KAAK,QAAQ,aAAaA,GAAO,KAAK,KAAK;AAAA,EAAI;AAAA,EACrF,cAAc,SAASA,GAAOC,GAAM;AAAE,WAAO,KAAK,QAAQ,aAAaD,GAAOC,CAAI;AAAA,EAAI;AAAA,EACtF,eAAe,SAASvC,GAAU;AAAE,WAAO,KAAK,QAAQ,cAAcA,CAAQ;AAAA,EAAI;AAAA,EAClF,kBAAkB,SAASA,GAAU;AAAE,WAAO,KAAK,QAAQ,iBAAiBA,CAAQ;AAAA,EAAI;AAC1F;ACrBe,SAAQwC,GAAC1B,GAAG;AACzB,SAAO,WAAW;AAChB,WAAOA;AAAA,EACX;AACA;ACAA,SAAS2B,GAAUL,GAAQ7B,GAAOmC,GAAOT,GAAQU,GAAMC,GAAM;AAS3D,WARIpD,IAAI,GACJkB,GACAmC,IAActC,EAAM,QACpBuC,IAAaF,EAAK,QAKfpD,IAAIsD,GAAY,EAAEtD;AACvB,KAAIkB,IAAOH,EAAMf,CAAC,MAChBkB,EAAK,WAAWkC,EAAKpD,CAAC,GACtByC,EAAOzC,CAAC,IAAIkB,KAEZgC,EAAMlD,CAAC,IAAI,IAAI2C,GAAUC,GAAQQ,EAAKpD,CAAC,CAAC;AAK5C,SAAOA,IAAIqD,GAAa,EAAErD;AACxB,KAAIkB,IAAOH,EAAMf,CAAC,OAChBmD,EAAKnD,CAAC,IAAIkB;AAGhB;AAEA,SAASqC,GAAQX,GAAQ7B,GAAOmC,GAAOT,GAAQU,GAAMC,GAAMI,GAAK;AAC9D,MAAIxD,GACAkB,GACAuC,IAAiB,oBAAI,OACrBJ,IAActC,EAAM,QACpBuC,IAAaF,EAAK,QAClBM,IAAY,IAAI,MAAML,CAAW,GACjCM;AAIJ,OAAK3D,IAAI,GAAGA,IAAIqD,GAAa,EAAErD;AAC7B,KAAIkB,IAAOH,EAAMf,CAAC,OAChB0D,EAAU1D,CAAC,IAAI2D,IAAWH,EAAI,KAAKtC,GAAMA,EAAK,UAAUlB,GAAGe,CAAK,IAAI,IAChE0C,EAAe,IAAIE,CAAQ,IAC7BR,EAAKnD,CAAC,IAAIkB,IAEVuC,EAAe,IAAIE,GAAUzC,CAAI;AAQvC,OAAKlB,IAAI,GAAGA,IAAIsD,GAAY,EAAEtD;AAC5B,IAAA2D,IAAWH,EAAI,KAAKZ,GAAQQ,EAAKpD,CAAC,GAAGA,GAAGoD,CAAI,IAAI,KAC5ClC,IAAOuC,EAAe,IAAIE,CAAQ,MACpClB,EAAOzC,CAAC,IAAIkB,GACZA,EAAK,WAAWkC,EAAKpD,CAAC,GACtByD,EAAe,OAAOE,CAAQ,KAE9BT,EAAMlD,CAAC,IAAI,IAAI2C,GAAUC,GAAQQ,EAAKpD,CAAC,CAAC;AAK5C,OAAKA,IAAI,GAAGA,IAAIqD,GAAa,EAAErD;AAC7B,KAAKkB,IAAOH,EAAMf,CAAC,MAAOyD,EAAe,IAAIC,EAAU1D,CAAC,CAAC,MAAMkB,MAC7DiC,EAAKnD,CAAC,IAAIkB;AAGhB;AAEA,SAAS2B,GAAM3B,GAAM;AACnB,SAAOA,EAAK;AACd;AAEe,SAAA0C,GAASC,GAAOL,GAAK;AAClC,MAAI,CAAC,UAAU;AAAQ,WAAO,MAAM,KAAK,MAAMX,EAAK;AAEpD,MAAIiB,IAAON,IAAMD,KAAUN,IACvBtB,IAAU,KAAK,UACfhB,IAAS,KAAK;AAElB,EAAI,OAAOkD,KAAU,eAAYA,IAAQE,GAASF,CAAK;AAEvD,WAASjD,IAAID,EAAO,QAAQ8B,IAAS,IAAI,MAAM7B,CAAC,GAAGsC,IAAQ,IAAI,MAAMtC,CAAC,GAAGuC,IAAO,IAAI,MAAMvC,CAAC,GAAGE,IAAI,GAAGA,IAAIF,GAAG,EAAEE,GAAG;AAC/G,QAAI8B,IAASjB,EAAQb,CAAC,GAClBC,IAAQJ,EAAOG,CAAC,GAChBuC,IAActC,EAAM,QACpBqC,IAAOY,GAAUH,EAAM,KAAKjB,GAAQA,KAAUA,EAAO,UAAU9B,GAAGa,CAAO,CAAC,GAC1E2B,IAAaF,EAAK,QAClBa,IAAaf,EAAMpC,CAAC,IAAI,IAAI,MAAMwC,CAAU,GAC5CY,IAAczB,EAAO3B,CAAC,IAAI,IAAI,MAAMwC,CAAU,GAC9Ca,IAAYhB,EAAKrC,CAAC,IAAI,IAAI,MAAMuC,CAAW;AAE/C,IAAAS,EAAKlB,GAAQ7B,GAAOkD,GAAYC,GAAaC,GAAWf,GAAMI,CAAG;AAKjE,aAASY,IAAK,GAAGC,IAAK,GAAGC,GAAUvB,GAAMqB,IAAKd,GAAY,EAAEc;AAC1D,UAAIE,IAAWL,EAAWG,CAAE,GAAG;AAE7B,aADIA,KAAMC,MAAIA,IAAKD,IAAK,IACjB,EAAErB,IAAOmB,EAAYG,CAAE,MAAM,EAAEA,IAAKf;AAAW;AACtD,QAAAgB,EAAS,QAAQvB,KAAQ;AAAA,MAC1B;AAAA,EAEJ;AAED,SAAAN,IAAS,IAAIrB,EAAUqB,GAAQd,CAAO,GACtCc,EAAO,SAASS,GAChBT,EAAO,QAAQU,GACRV;AACT;AAQA,SAASuB,GAAUZ,GAAM;AACvB,SAAO,OAAOA,KAAS,YAAY,YAAYA,IAC3CA,IACA,MAAM,KAAKA,CAAI;AACrB;AC5He,SAAAmB,KAAW;AACxB,SAAO,IAAInD,EAAU,KAAK,SAAS,KAAK,QAAQ,IAAIoB,EAAM,GAAG,KAAK,QAAQ;AAC5E;ACLe,SAAAgC,GAASC,GAASC,GAAUC,GAAQ;AACjD,MAAIzB,IAAQ,KAAK,SAAST,IAAS,MAAMU,IAAO,KAAK;AACrD,SAAI,OAAOsB,KAAY,cACrBvB,IAAQuB,EAAQvB,CAAK,GACjBA,MAAOA,IAAQA,EAAM,UAAS,MAElCA,IAAQA,EAAM,OAAOuB,IAAU,EAAE,GAE/BC,KAAY,SACdjC,IAASiC,EAASjC,CAAM,GACpBA,MAAQA,IAASA,EAAO,UAAS,KAEnCkC,KAAU,OAAMxB,EAAK,OAAM,IAASwB,EAAOxB,CAAI,GAC5CD,KAAST,IAASS,EAAM,MAAMT,CAAM,EAAE,MAAO,IAAGA;AACzD;ACZe,SAAQmC,GAACC,GAAS;AAG/B,WAFIC,IAAYD,EAAQ,YAAYA,EAAQ,UAAW,IAAGA,GAEjDE,IAAU,KAAK,SAASC,IAAUF,EAAU,SAASG,IAAKF,EAAQ,QAAQG,IAAKF,EAAQ,QAAQpE,IAAI,KAAK,IAAIqE,GAAIC,CAAE,GAAGC,IAAS,IAAI,MAAMF,CAAE,GAAGnE,IAAI,GAAGA,IAAIF,GAAG,EAAEE;AACpK,aAASsE,IAASL,EAAQjE,CAAC,GAAGuE,IAASL,EAAQlE,CAAC,GAAGE,IAAIoE,EAAO,QAAQE,IAAQH,EAAOrE,CAAC,IAAI,IAAI,MAAME,CAAC,GAAGE,GAAMlB,IAAI,GAAGA,IAAIgB,GAAG,EAAEhB;AAC5H,OAAIkB,IAAOkE,EAAOpF,CAAC,KAAKqF,EAAOrF,CAAC,OAC9BsF,EAAMtF,CAAC,IAAIkB;AAKjB,SAAOJ,IAAImE,GAAI,EAAEnE;AACf,IAAAqE,EAAOrE,CAAC,IAAIiE,EAAQjE,CAAC;AAGvB,SAAO,IAAIM,EAAU+D,GAAQ,KAAK,QAAQ;AAC5C;AClBe,SAAAI,KAAW;AAExB,WAAS5E,IAAS,KAAK,SAASG,IAAI,IAAIF,IAAID,EAAO,QAAQ,EAAEG,IAAIF;AAC/D,aAASG,IAAQJ,EAAOG,CAAC,GAAG,IAAIC,EAAM,SAAS,GAAGgC,IAAOhC,EAAM,CAAC,GAAGG,GAAM,EAAE,KAAK;AAC9E,OAAIA,IAAOH,EAAM,CAAC,OACZgC,KAAQ7B,EAAK,wBAAwB6B,CAAI,IAAI,KAAGA,EAAK,WAAW,aAAa7B,GAAM6B,CAAI,GAC3FA,IAAO7B;AAKb,SAAO;AACT;ACVe,SAAQsE,GAACC,GAAS;AAC/B,EAAKA,MAASA,IAAUC;AAExB,WAASC,EAAYC,GAAGC,GAAG;AACzB,WAAOD,KAAKC,IAAIJ,EAAQG,EAAE,UAAUC,EAAE,QAAQ,IAAI,CAACD,IAAI,CAACC;AAAA,EACzD;AAED,WAASlF,IAAS,KAAK,SAASC,IAAID,EAAO,QAAQmF,IAAa,IAAI,MAAMlF,CAAC,GAAGE,IAAI,GAAGA,IAAIF,GAAG,EAAEE,GAAG;AAC/F,aAASC,IAAQJ,EAAOG,CAAC,GAAGE,IAAID,EAAM,QAAQgF,IAAYD,EAAWhF,CAAC,IAAI,IAAI,MAAME,CAAC,GAAGE,GAAMlB,IAAI,GAAGA,IAAIgB,GAAG,EAAEhB;AAC5G,OAAIkB,IAAOH,EAAMf,CAAC,OAChB+F,EAAU/F,CAAC,IAAIkB;AAGnB,IAAA6E,EAAU,KAAKJ,CAAW;AAAA,EAC3B;AAED,SAAO,IAAIvE,EAAU0E,GAAY,KAAK,QAAQ,EAAE;AAClD;AAEA,SAASJ,GAAUE,GAAGC,GAAG;AACvB,SAAOD,IAAIC,IAAI,KAAKD,IAAIC,IAAI,IAAID,KAAKC,IAAI,IAAI;AAC/C;ACvBe,SAAAG,KAAW;AACxB,MAAIC,IAAW,UAAU,CAAC;AAC1B,mBAAU,CAAC,IAAI,MACfA,EAAS,MAAM,MAAM,SAAS,GACvB;AACT;ACLe,SAAAC,KAAW;AACxB,SAAO,MAAM,KAAK,IAAI;AACxB;ACFe,SAAAC,KAAW;AAExB,WAASxF,IAAS,KAAK,SAASG,IAAI,GAAGF,IAAID,EAAO,QAAQG,IAAIF,GAAG,EAAEE;AACjE,aAASC,IAAQJ,EAAOG,CAAC,GAAG,IAAI,GAAGE,IAAID,EAAM,QAAQ,IAAIC,GAAG,EAAE,GAAG;AAC/D,UAAIE,IAAOH,EAAM,CAAC;AAClB,UAAIG;AAAM,eAAOA;AAAA,IAClB;AAGH,SAAO;AACT;ACVe,SAAAkF,KAAW;AACxB,MAAIC,IAAO;AACX,aAAWnF,KAAQ;AAAM,MAAEmF;AAC3B,SAAOA;AACT;ACJe,SAAAC,KAAW;AACxB,SAAO,CAAC,KAAK;AACf;ACFe,SAAQC,GAACN,GAAU;AAEhC,WAAStF,IAAS,KAAK,SAASG,IAAI,GAAGF,IAAID,EAAO,QAAQG,IAAIF,GAAG,EAAEE;AACjE,aAASC,IAAQJ,EAAOG,CAAC,GAAGd,IAAI,GAAGgB,IAAID,EAAM,QAAQG,GAAMlB,IAAIgB,GAAG,EAAEhB;AAClE,OAAIkB,IAAOH,EAAMf,CAAC,MAAGiG,EAAS,KAAK/E,GAAMA,EAAK,UAAUlB,GAAGe,CAAK;AAIpE,SAAO;AACT;ACPA,SAASyF,GAAW1G,GAAM;AACxB,SAAO,WAAW;AAChB,SAAK,gBAAgBA,CAAI;AAAA,EAC7B;AACA;AAEA,SAAS2G,GAAapG,GAAU;AAC9B,SAAO,WAAW;AAChB,SAAK,kBAAkBA,EAAS,OAAOA,EAAS,KAAK;AAAA,EACzD;AACA;AAEA,SAASqG,GAAa5G,GAAM+D,GAAO;AACjC,SAAO,WAAW;AAChB,SAAK,aAAa/D,GAAM+D,CAAK;AAAA,EACjC;AACA;AAEA,SAAS8C,GAAetG,GAAUwD,GAAO;AACvC,SAAO,WAAW;AAChB,SAAK,eAAexD,EAAS,OAAOA,EAAS,OAAOwD,CAAK;AAAA,EAC7D;AACA;AAEA,SAAS+C,GAAa9G,GAAM+D,GAAO;AACjC,SAAO,WAAW;AAChB,QAAIgD,IAAIhD,EAAM,MAAM,MAAM,SAAS;AACnC,IAAIgD,KAAK,OAAM,KAAK,gBAAgB/G,CAAI,IACnC,KAAK,aAAaA,GAAM+G,CAAC;AAAA,EAClC;AACA;AAEA,SAASC,GAAezG,GAAUwD,GAAO;AACvC,SAAO,WAAW;AAChB,QAAIgD,IAAIhD,EAAM,MAAM,MAAM,SAAS;AACnC,IAAIgD,KAAK,OAAM,KAAK,kBAAkBxG,EAAS,OAAOA,EAAS,KAAK,IAC/D,KAAK,eAAeA,EAAS,OAAOA,EAAS,OAAOwG,CAAC;AAAA,EAC9D;AACA;AAEe,SAAAE,GAASjH,GAAM+D,GAAO;AACnC,MAAIxD,IAAWR,GAAUC,CAAI;AAE7B,MAAI,UAAU,SAAS,GAAG;AACxB,QAAIoB,IAAO,KAAK;AAChB,WAAOb,EAAS,QACVa,EAAK,eAAeb,EAAS,OAAOA,EAAS,KAAK,IAClDa,EAAK,aAAab,CAAQ;AAAA,EACjC;AAED,SAAO,KAAK,MAAMwD,KAAS,OACpBxD,EAAS,QAAQoG,KAAeD,KAAe,OAAO3C,KAAU,aAChExD,EAAS,QAAQyG,KAAiBF,KAClCvG,EAAS,QAAQsG,KAAiBD,IAAgBrG,GAAUwD,CAAK,CAAC;AAC3E;ACxDe,SAAQmD,GAAC9F,GAAM;AAC5B,SAAQA,EAAK,iBAAiBA,EAAK,cAAc,eACzCA,EAAK,YAAYA,KAClBA,EAAK;AACd;ACFA,SAAS+F,GAAYnH,GAAM;AACzB,SAAO,WAAW;AAChB,SAAK,MAAM,eAAeA,CAAI;AAAA,EAClC;AACA;AAEA,SAASoH,GAAcpH,GAAM+D,GAAOsD,GAAU;AAC5C,SAAO,WAAW;AAChB,SAAK,MAAM,YAAYrH,GAAM+D,GAAOsD,CAAQ;AAAA,EAChD;AACA;AAEA,SAASC,GAActH,GAAM+D,GAAOsD,GAAU;AAC5C,SAAO,WAAW;AAChB,QAAIN,IAAIhD,EAAM,MAAM,MAAM,SAAS;AACnC,IAAIgD,KAAK,OAAM,KAAK,MAAM,eAAe/G,CAAI,IACxC,KAAK,MAAM,YAAYA,GAAM+G,GAAGM,CAAQ;AAAA,EACjD;AACA;AAEe,SAAAE,GAASvH,GAAM+D,GAAOsD,GAAU;AAC7C,SAAO,UAAU,SAAS,IACpB,KAAK,MAAMtD,KAAS,OACdoD,KAAc,OAAOpD,KAAU,aAC/BuD,KACAF,IAAepH,GAAM+D,GAAOsD,KAAmB,EAAa,CAAC,IACnEG,GAAW,KAAK,KAAM,GAAExH,CAAI;AACpC;AAEO,SAASwH,GAAWpG,GAAMpB,GAAM;AACrC,SAAOoB,EAAK,MAAM,iBAAiBpB,CAAI,KAChCkH,GAAY9F,CAAI,EAAE,iBAAiBA,GAAM,IAAI,EAAE,iBAAiBpB,CAAI;AAC7E;AClCA,SAASyH,GAAezH,GAAM;AAC5B,SAAO,WAAW;AAChB,WAAO,KAAKA,CAAI;AAAA,EACpB;AACA;AAEA,SAAS0H,GAAiB1H,GAAM+D,GAAO;AACrC,SAAO,WAAW;AAChB,SAAK/D,CAAI,IAAI+D;AAAA,EACjB;AACA;AAEA,SAAS4D,GAAiB3H,GAAM+D,GAAO;AACrC,SAAO,WAAW;AAChB,QAAIgD,IAAIhD,EAAM,MAAM,MAAM,SAAS;AACnC,IAAIgD,KAAK,OAAM,OAAO,KAAK/G,CAAI,IAC1B,KAAKA,CAAI,IAAI+G;AAAA,EACtB;AACA;AAEe,SAAAa,GAAS5H,GAAM+D,GAAO;AACnC,SAAO,UAAU,SAAS,IACpB,KAAK,MAAMA,KAAS,OAChB0D,KAAiB,OAAO1D,KAAU,aAClC4D,KACAD,IAAkB1H,GAAM+D,CAAK,CAAC,IAClC,KAAK,OAAO/D,CAAI;AACxB;AC3BA,SAAS6H,GAAWC,GAAQ;AAC1B,SAAOA,EAAO,KAAI,EAAG,MAAM,OAAO;AACpC;AAEA,SAASC,GAAU3G,GAAM;AACvB,SAAOA,EAAK,aAAa,IAAI4G,GAAU5G,CAAI;AAC7C;AAEA,SAAS4G,GAAU5G,GAAM;AACvB,OAAK,QAAQA,GACb,KAAK,SAASyG,GAAWzG,EAAK,aAAa,OAAO,KAAK,EAAE;AAC3D;AAEA4G,GAAU,YAAY;AAAA,EACpB,KAAK,SAAShI,GAAM;AAClB,QAAIE,IAAI,KAAK,OAAO,QAAQF,CAAI;AAChC,IAAIE,IAAI,MACN,KAAK,OAAO,KAAKF,CAAI,GACrB,KAAK,MAAM,aAAa,SAAS,KAAK,OAAO,KAAK,GAAG,CAAC;AAAA,EAEzD;AAAA,EACD,QAAQ,SAASA,GAAM;AACrB,QAAIE,IAAI,KAAK,OAAO,QAAQF,CAAI;AAChC,IAAIE,KAAK,MACP,KAAK,OAAO,OAAOA,GAAG,CAAC,GACvB,KAAK,MAAM,aAAa,SAAS,KAAK,OAAO,KAAK,GAAG,CAAC;AAAA,EAEzD;AAAA,EACD,UAAU,SAASF,GAAM;AACvB,WAAO,KAAK,OAAO,QAAQA,CAAI,KAAK;AAAA,EACrC;AACH;AAEA,SAASiI,GAAW7G,GAAM8G,GAAO;AAE/B,WADIC,IAAOJ,GAAU3G,CAAI,GAAGlB,IAAI,IAAIgB,IAAIgH,EAAM,QACvC,EAAEhI,IAAIgB;AAAG,IAAAiH,EAAK,IAAID,EAAMhI,CAAC,CAAC;AACnC;AAEA,SAASkI,GAAchH,GAAM8G,GAAO;AAElC,WADIC,IAAOJ,GAAU3G,CAAI,GAAGlB,IAAI,IAAIgB,IAAIgH,EAAM,QACvC,EAAEhI,IAAIgB;AAAG,IAAAiH,EAAK,OAAOD,EAAMhI,CAAC,CAAC;AACtC;AAEA,SAASmI,GAAYH,GAAO;AAC1B,SAAO,WAAW;AAChB,IAAAD,GAAW,MAAMC,CAAK;AAAA,EAC1B;AACA;AAEA,SAASI,GAAaJ,GAAO;AAC3B,SAAO,WAAW;AAChB,IAAAE,GAAc,MAAMF,CAAK;AAAA,EAC7B;AACA;AAEA,SAASK,GAAgBL,GAAOnE,GAAO;AACrC,SAAO,WAAW;AAChB,KAACA,EAAM,MAAM,MAAM,SAAS,IAAIkE,KAAaG,IAAe,MAAMF,CAAK;AAAA,EAC3E;AACA;AAEe,SAAAM,GAASxI,GAAM+D,GAAO;AACnC,MAAImE,IAAQL,GAAW7H,IAAO,EAAE;AAEhC,MAAI,UAAU,SAAS,GAAG;AAExB,aADImI,IAAOJ,GAAU,KAAK,KAAM,CAAA,GAAG,IAAI,IAAI7G,IAAIgH,EAAM,QAC9C,EAAE,IAAIhH;AAAG,UAAI,CAACiH,EAAK,SAASD,EAAM,CAAC,CAAC;AAAG,eAAO;AACrD,WAAO;AAAA,EACR;AAED,SAAO,KAAK,MAAM,OAAOnE,KAAU,aAC7BwE,KAAkBxE,IAClBsE,KACAC,IAAcJ,GAAOnE,CAAK,CAAC;AACnC;AC1EA,SAAS0E,KAAa;AACpB,OAAK,cAAc;AACrB;AAEA,SAASC,GAAa3E,GAAO;AAC3B,SAAO,WAAW;AAChB,SAAK,cAAcA;AAAA,EACvB;AACA;AAEA,SAAS4E,GAAa5E,GAAO;AAC3B,SAAO,WAAW;AAChB,QAAIgD,IAAIhD,EAAM,MAAM,MAAM,SAAS;AACnC,SAAK,cAAcgD,KAAY;AAAA,EACnC;AACA;AAEe,SAAQ6B,GAAC7E,GAAO;AAC7B,SAAO,UAAU,SACX,KAAK,KAAKA,KAAS,OACf0E,MAAc,OAAO1E,KAAU,aAC/B4E,KACAD,IAAc3E,CAAK,CAAC,IACxB,KAAK,KAAM,EAAC;AACpB;ACxBA,SAAS8E,KAAa;AACpB,OAAK,YAAY;AACnB;AAEA,SAASC,GAAa/E,GAAO;AAC3B,SAAO,WAAW;AAChB,SAAK,YAAYA;AAAA,EACrB;AACA;AAEA,SAASgF,GAAahF,GAAO;AAC3B,SAAO,WAAW;AAChB,QAAIgD,IAAIhD,EAAM,MAAM,MAAM,SAAS;AACnC,SAAK,YAAYgD,KAAY;AAAA,EACjC;AACA;AAEe,SAAQiC,GAACjF,GAAO;AAC7B,SAAO,UAAU,SACX,KAAK,KAAKA,KAAS,OACf8E,MAAc,OAAO9E,KAAU,aAC/BgF,KACAD,IAAc/E,CAAK,CAAC,IACxB,KAAK,KAAM,EAAC;AACpB;ACxBA,SAASkF,KAAQ;AACf,EAAI,KAAK,eAAa,KAAK,WAAW,YAAY,IAAI;AACxD;AAEe,SAAAC,KAAW;AACxB,SAAO,KAAK,KAAKD,EAAK;AACxB;ACNA,SAASE,KAAQ;AACf,EAAI,KAAK,mBAAiB,KAAK,WAAW,aAAa,MAAM,KAAK,WAAW,UAAU;AACzF;AAEe,SAAAC,KAAW;AACxB,SAAO,KAAK,KAAKD,EAAK;AACxB;ACJe,SAAQE,GAACrJ,GAAM;AAC5B,MAAIsJ,IAAS,OAAOtJ,KAAS,aAAaA,IAAOQ,GAAQR,CAAI;AAC7D,SAAO,KAAK,OAAO,WAAW;AAC5B,WAAO,KAAK,YAAYsJ,EAAO,MAAM,MAAM,SAAS,CAAC;AAAA,EACzD,CAAG;AACH;ACJA,SAASC,KAAe;AACtB,SAAO;AACT;AAEe,SAAAC,GAASxJ,GAAMyJ,GAAQ;AACpC,MAAIH,IAAS,OAAOtJ,KAAS,aAAaA,IAAOQ,GAAQR,CAAI,GACzDY,IAAS6I,KAAU,OAAOF,KAAe,OAAOE,KAAW,aAAaA,IAAS/I,GAAS+I,CAAM;AACpG,SAAO,KAAK,OAAO,WAAW;AAC5B,WAAO,KAAK,aAAaH,EAAO,MAAM,MAAM,SAAS,GAAG1I,EAAO,MAAM,MAAM,SAAS,KAAK,IAAI;AAAA,EACjG,CAAG;AACH;ACbA,SAAS8I,KAAS;AAChB,MAAI5G,IAAS,KAAK;AAClB,EAAIA,KAAQA,EAAO,YAAY,IAAI;AACrC;AAEe,SAAA6G,KAAW;AACxB,SAAO,KAAK,KAAKD,EAAM;AACzB;ACPA,SAASE,KAAyB;AAChC,MAAIC,IAAQ,KAAK,UAAU,EAAK,GAAG/G,IAAS,KAAK;AACjD,SAAOA,IAASA,EAAO,aAAa+G,GAAO,KAAK,WAAW,IAAIA;AACjE;AAEA,SAASC,KAAsB;AAC7B,MAAID,IAAQ,KAAK,UAAU,EAAI,GAAG/G,IAAS,KAAK;AAChD,SAAOA,IAASA,EAAO,aAAa+G,GAAO,KAAK,WAAW,IAAIA;AACjE;AAEe,SAAQE,GAACC,GAAM;AAC5B,SAAO,KAAK,OAAOA,IAAOF,KAAsBF,EAAsB;AACxE;ACZe,SAAQK,GAAClG,GAAO;AAC7B,SAAO,UAAU,SACX,KAAK,SAAS,YAAYA,CAAK,IAC/B,KAAK,KAAM,EAAC;AACpB;ACJA,SAASmG,GAAgBC,GAAU;AACjC,SAAO,SAASC,GAAO;AACrB,IAAAD,EAAS,KAAK,MAAMC,GAAO,KAAK,QAAQ;AAAA,EAC5C;AACA;AAEA,SAASC,GAAeC,GAAW;AACjC,SAAOA,EAAU,OAAO,MAAM,OAAO,EAAE,IAAI,SAASC,GAAG;AACrD,QAAIvK,IAAO,IAAIE,IAAIqK,EAAE,QAAQ,GAAG;AAChC,WAAIrK,KAAK,MAAGF,IAAOuK,EAAE,MAAMrK,IAAI,CAAC,GAAGqK,IAAIA,EAAE,MAAM,GAAGrK,CAAC,IAC5C,EAAC,MAAMqK,GAAG,MAAMvK,EAAI;AAAA,EAC/B,CAAG;AACH;AAEA,SAASwK,GAASC,GAAU;AAC1B,SAAO,WAAW;AAChB,QAAIC,IAAK,KAAK;AACd,QAAKA,GACL;AAAA,eAAS1J,IAAI,GAAGd,IAAI,IAAIY,IAAI4J,EAAG,QAAQC,GAAG3J,IAAIF,GAAG,EAAEE;AACjD,QAAI2J,IAAID,EAAG1J,CAAC,IAAI,CAACyJ,EAAS,QAAQE,EAAE,SAASF,EAAS,SAASE,EAAE,SAASF,EAAS,OACjF,KAAK,oBAAoBE,EAAE,MAAMA,EAAE,UAAUA,EAAE,OAAO,IAEtDD,EAAG,EAAExK,CAAC,IAAIyK;AAGd,MAAI,EAAEzK,IAAGwK,EAAG,SAASxK,IAChB,OAAO,KAAK;AAAA;AAAA,EACrB;AACA;AAEA,SAAS0K,GAAMH,GAAU1G,GAAO8G,GAAS;AACvC,SAAO,WAAW;AAChB,QAAIH,IAAK,KAAK,MAAMC,GAAGR,IAAWD,GAAgBnG,CAAK;AACvD,QAAI2G;AAAI,eAAS1J,IAAI,GAAGF,IAAI4J,EAAG,QAAQ1J,IAAIF,GAAG,EAAEE;AAC9C,aAAK2J,IAAID,EAAG1J,CAAC,GAAG,SAASyJ,EAAS,QAAQE,EAAE,SAASF,EAAS,MAAM;AAClE,eAAK,oBAAoBE,EAAE,MAAMA,EAAE,UAAUA,EAAE,OAAO,GACtD,KAAK,iBAAiBA,EAAE,MAAMA,EAAE,WAAWR,GAAUQ,EAAE,UAAUE,CAAO,GACxEF,EAAE,QAAQ5G;AACV;AAAA,QACD;AAAA;AAEH,SAAK,iBAAiB0G,EAAS,MAAMN,GAAUU,CAAO,GACtDF,IAAI,EAAC,MAAMF,EAAS,MAAM,MAAMA,EAAS,MAAM,OAAO1G,GAAO,UAAUoG,GAAU,SAASU,EAAO,GAC5FH,IACAA,EAAG,KAAKC,CAAC,IADL,KAAK,OAAO,CAACA,CAAC;AAAA,EAE3B;AACA;AAEe,SAAAG,GAASL,GAAU1G,GAAO8G,GAAS;AAChD,MAAIP,IAAYD,GAAeI,IAAW,EAAE,GAAG,GAAGvJ,IAAIoJ,EAAU,QAAQC;AAExE,MAAI,UAAU,SAAS,GAAG;AACxB,QAAIG,IAAK,KAAK,KAAI,EAAG;AACrB,QAAIA;AAAI,eAAS1J,IAAI,GAAGF,IAAI4J,EAAG,QAAQC,GAAG3J,IAAIF,GAAG,EAAEE;AACjD,aAAK,IAAI,GAAG2J,IAAID,EAAG1J,CAAC,GAAG,IAAIE,GAAG,EAAE;AAC9B,eAAKqJ,IAAID,EAAU,CAAC,GAAG,SAASK,EAAE,QAAQJ,EAAE,SAASI,EAAE;AACrD,mBAAOA,EAAE;AAAA;AAIf;AAAA,EACD;AAGD,OADAD,IAAK3G,IAAQ6G,KAAQJ,IAChB,IAAI,GAAG,IAAItJ,GAAG,EAAE;AAAG,SAAK,KAAKwJ,EAAGJ,EAAU,CAAC,GAAGvG,GAAO8G,CAAO,CAAC;AAClE,SAAO;AACT;AChEA,SAASE,GAAc3J,GAAM4J,GAAMC,GAAQ;AACzC,MAAIC,IAAShE,GAAY9F,CAAI,GACzBgJ,IAAQc,EAAO;AAEnB,EAAI,OAAOd,KAAU,aACnBA,IAAQ,IAAIA,EAAMY,GAAMC,CAAM,KAE9Bb,IAAQc,EAAO,SAAS,YAAY,OAAO,GACvCD,KAAQb,EAAM,UAAUY,GAAMC,EAAO,SAASA,EAAO,UAAU,GAAGb,EAAM,SAASa,EAAO,UACvFb,EAAM,UAAUY,GAAM,IAAO,EAAK,IAGzC5J,EAAK,cAAcgJ,CAAK;AAC1B;AAEA,SAASe,GAAiBH,GAAMC,GAAQ;AACtC,SAAO,WAAW;AAChB,WAAOF,GAAc,MAAMC,GAAMC,CAAM;AAAA,EAC3C;AACA;AAEA,SAASG,GAAiBJ,GAAMC,GAAQ;AACtC,SAAO,WAAW;AAChB,WAAOF,GAAc,MAAMC,GAAMC,EAAO,MAAM,MAAM,SAAS,CAAC;AAAA,EAClE;AACA;AAEe,SAAAI,GAASL,GAAMC,GAAQ;AACpC,SAAO,KAAK,MAAM,OAAOA,KAAW,aAC9BG,KACAD,IAAkBH,GAAMC,CAAM,CAAC;AACvC;ACjCe,UAAAK,KAAY;AACzB,WAASzK,IAAS,KAAK,SAASG,IAAI,GAAGF,IAAID,EAAO,QAAQG,IAAIF,GAAG,EAAEE;AACjE,aAASC,IAAQJ,EAAOG,CAAC,GAAG,IAAI,GAAGE,IAAID,EAAM,QAAQG,GAAM,IAAIF,GAAG,EAAE;AAClE,OAAIE,IAAOH,EAAM,CAAC,OAAG,MAAMG;AAGjC;AC6BO,IAAImK,KAAO,CAAC,IAAI;AAEhB,SAASjK,EAAUT,GAAQgB,GAAS;AACzC,OAAK,UAAUhB,GACf,KAAK,WAAWgB;AAClB;AAEA,SAASmD,KAAY;AACnB,SAAO,IAAI1D,EAAU,CAAC,CAAC,SAAS,eAAe,CAAC,GAAGiK,EAAI;AACzD;AAEA,SAASC,KAAsB;AAC7B,SAAO;AACT;AAEAlK,EAAU,YAAY0D,GAAU,YAAY;AAAA,EAC1C,aAAa1D;AAAAA,EACb,QAAQX;AAAA,EACR,WAAWiB;AAAA,EACX,aAAaQ;AAAA,EACb,gBAAgBI;AAAA,EAChB,QAAQC;AAAA,EACR,MAAMqB;AAAA,EACN,OAAOlB;AAAA,EACP,MAAM6B;AAAA,EACN,MAAMC;AAAA,EACN,OAAOI;AAAA,EACP,WAAW0G;AAAA,EACX,OAAO/F;AAAA,EACP,MAAMC;AAAA,EACN,MAAMQ;AAAA,EACN,OAAOE;AAAA,EACP,MAAMC;AAAA,EACN,MAAMC;AAAA,EACN,OAAOE;AAAA,EACP,MAAMC;AAAA,EACN,MAAMQ;AAAA,EACN,OAAOM;AAAA,EACP,UAAUK;AAAA,EACV,SAASY;AAAA,EACT,MAAMI;AAAA,EACN,MAAMI;AAAA,EACN,OAAOE;AAAA,EACP,OAAOE;AAAA,EACP,QAAQC;AAAA,EACR,QAAQG;AAAA,EACR,QAAQG;AAAA,EACR,OAAOI;AAAA,EACP,OAAOE;AAAA,EACP,IAAIa;AAAA,EACJ,UAAUO;AAAA,EACV,CAAC,OAAO,QAAQ,GAAGC;AACrB;ACrFe,SAAQG,EAAC/K,GAAU;AAChC,SAAO,OAAOA,KAAa,WACrB,IAAIY,EAAU,CAAC,CAAC,SAAS,cAAcZ,CAAQ,CAAC,CAAC,GAAG,CAAC,SAAS,eAAe,CAAC,IAC9E,IAAIY,EAAU,CAAC,CAACZ,CAAQ,CAAC,GAAG6K,EAAI;AACxC;ACNe,SAAQG,GAACtB,GAAO;AAC7B,MAAIsB;AACJ,SAAOA,IAActB,EAAM;AAAa,IAAAA,IAAQsB;AAChD,SAAOtB;AACT;ACFe,SAAAuB,GAASvB,GAAOhJ,GAAM;AAGnC,MAFAgJ,IAAQsB,GAAYtB,CAAK,GACrBhJ,MAAS,WAAWA,IAAOgJ,EAAM,gBACjChJ,GAAM;AACR,QAAIwK,IAAMxK,EAAK,mBAAmBA;AAClC,QAAIwK,EAAI,gBAAgB;AACtB,UAAIC,IAAQD,EAAI;AAChB,aAAAC,EAAM,IAAIzB,EAAM,SAASyB,EAAM,IAAIzB,EAAM,SACzCyB,IAAQA,EAAM,gBAAgBzK,EAAK,aAAc,EAAC,QAAO,CAAE,GACpD,CAACyK,EAAM,GAAGA,EAAM,CAAC;AAAA,IACzB;AACD,QAAIzK,EAAK,uBAAuB;AAC9B,UAAI0K,IAAO1K,EAAK;AAChB,aAAO,CAACgJ,EAAM,UAAU0B,EAAK,OAAO1K,EAAK,YAAYgJ,EAAM,UAAU0B,EAAK,MAAM1K,EAAK,SAAS;AAAA,IAC/F;AAAA,EACF;AACD,SAAO,CAACgJ,EAAM,OAAOA,EAAM,KAAK;AAClC;ACnBA,IAAI2B,KAAO,EAAC,OAAO,MAAM;AAAA,EAAE;AAE3B,SAASC,KAAW;AAClB,WAAS9L,IAAI,GAAGgB,IAAI,UAAU,QAAQ+K,IAAI,CAAA,GAAI1B,GAAGrK,IAAIgB,GAAG,EAAEhB,GAAG;AAC3D,QAAI,EAAEqK,IAAI,UAAUrK,CAAC,IAAI,OAAQqK,KAAK0B,KAAM,QAAQ,KAAK1B,CAAC;AAAG,YAAM,IAAI,MAAM,mBAAmBA,CAAC;AACjG,IAAA0B,EAAE1B,CAAC,IAAI;EACR;AACD,SAAO,IAAI2B,GAASD,CAAC;AACvB;AAEA,SAASC,GAASD,GAAG;AACnB,OAAK,IAAIA;AACX;AAEA,SAAS5B,GAAeC,GAAW6B,GAAO;AACxC,SAAO7B,EAAU,OAAO,MAAM,OAAO,EAAE,IAAI,SAASC,GAAG;AACrD,QAAIvK,IAAO,IAAI,IAAIuK,EAAE,QAAQ,GAAG;AAEhC,QADI,KAAK,MAAGvK,IAAOuK,EAAE,MAAM,IAAI,CAAC,GAAGA,IAAIA,EAAE,MAAM,GAAG,CAAC,IAC/CA,KAAK,CAAC4B,EAAM,eAAe5B,CAAC;AAAG,YAAM,IAAI,MAAM,mBAAmBA,CAAC;AACvE,WAAO,EAAC,MAAMA,GAAG,MAAMvK,EAAI;AAAA,EAC/B,CAAG;AACH;AAEAkM,GAAS,YAAYF,GAAS,YAAY;AAAA,EACxC,aAAaE;AAAA,EACb,IAAI,SAASzB,GAAUtE,GAAU;AAC/B,QAAI8F,IAAI,KAAK,GACTG,IAAI/B,GAAeI,IAAW,IAAIwB,CAAC,GACnC1B,GACArK,IAAI,IACJgB,IAAIkL,EAAE;AAGV,QAAI,UAAU,SAAS,GAAG;AACxB,aAAO,EAAElM,IAAIgB;AAAG,aAAKqJ,KAAKE,IAAW2B,EAAElM,CAAC,GAAG,UAAUqK,IAAI8B,GAAIJ,EAAE1B,CAAC,GAAGE,EAAS,IAAI;AAAI,iBAAOF;AAC3F;AAAA,IACD;AAID,QAAIpE,KAAY,QAAQ,OAAOA,KAAa;AAAY,YAAM,IAAI,MAAM,uBAAuBA,CAAQ;AACvG,WAAO,EAAEjG,IAAIgB;AACX,UAAIqJ,KAAKE,IAAW2B,EAAElM,CAAC,GAAG;AAAM,QAAA+L,EAAE1B,CAAC,IAAI+B,GAAIL,EAAE1B,CAAC,GAAGE,EAAS,MAAMtE,CAAQ;AAAA,eAC/DA,KAAY;AAAM,aAAKoE,KAAK0B;AAAG,UAAAA,EAAE1B,CAAC,IAAI+B,GAAIL,EAAE1B,CAAC,GAAGE,EAAS,MAAM,IAAI;AAG9E,WAAO;AAAA,EACR;AAAA,EACD,MAAM,WAAW;AACf,QAAI8B,IAAO,CAAE,GAAEN,IAAI,KAAK;AACxB,aAAS1B,KAAK0B;AAAG,MAAAM,EAAKhC,CAAC,IAAI0B,EAAE1B,CAAC,EAAE;AAChC,WAAO,IAAI2B,GAASK,CAAI;AAAA,EACzB;AAAA,EACD,MAAM,SAASvB,GAAMwB,GAAM;AACzB,SAAKtL,IAAI,UAAU,SAAS,KAAK;AAAG,eAASuL,IAAO,IAAI,MAAMvL,CAAC,GAAGhB,IAAI,GAAGgB,GAAGqJ,GAAGrK,IAAIgB,GAAG,EAAEhB;AAAG,QAAAuM,EAAKvM,CAAC,IAAI,UAAUA,IAAI,CAAC;AACpH,QAAI,CAAC,KAAK,EAAE,eAAe8K,CAAI;AAAG,YAAM,IAAI,MAAM,mBAAmBA,CAAI;AACzE,SAAKT,IAAI,KAAK,EAAES,CAAI,GAAG9K,IAAI,GAAGgB,IAAIqJ,EAAE,QAAQrK,IAAIgB,GAAG,EAAEhB;AAAG,MAAAqK,EAAErK,CAAC,EAAE,MAAM,MAAMsM,GAAMC,CAAI;AAAA,EACpF;AAAA,EACD,OAAO,SAASzB,GAAMwB,GAAMC,GAAM;AAChC,QAAI,CAAC,KAAK,EAAE,eAAezB,CAAI;AAAG,YAAM,IAAI,MAAM,mBAAmBA,CAAI;AACzE,aAAST,IAAI,KAAK,EAAES,CAAI,GAAG,IAAI,GAAG9J,IAAIqJ,EAAE,QAAQ,IAAIrJ,GAAG,EAAE;AAAG,MAAAqJ,EAAE,CAAC,EAAE,MAAM,MAAMiC,GAAMC,CAAI;AAAA,EACxF;AACH;AAEA,SAASJ,GAAIrB,GAAMhL,GAAM;AACvB,WAASE,IAAI,GAAGgB,IAAI8J,EAAK,QAAQ0B,GAAGxM,IAAIgB,GAAG,EAAEhB;AAC3C,SAAKwM,IAAI1B,EAAK9K,CAAC,GAAG,SAASF;AACzB,aAAO0M,EAAE;AAGf;AAEA,SAASJ,GAAItB,GAAMhL,GAAMmG,GAAU;AACjC,WAASjG,IAAI,GAAGgB,IAAI8J,EAAK,QAAQ9K,IAAIgB,GAAG,EAAEhB;AACxC,QAAI8K,EAAK9K,CAAC,EAAE,SAASF,GAAM;AACzB,MAAAgL,EAAK9K,CAAC,IAAI6L,IAAMf,IAAOA,EAAK,MAAM,GAAG9K,CAAC,EAAE,OAAO8K,EAAK,MAAM9K,IAAI,CAAC,CAAC;AAChE;AAAA,IACD;AAEH,SAAIiG,KAAY,QAAM6E,EAAK,KAAK,EAAC,MAAMhL,GAAM,OAAOmG,EAAQ,CAAC,GACtD6E;AACT;AC9EO,MAAM2B,KAAoB,EAAC,SAAS,IAAM,SAAS,GAAK;AAMhD,SAAQC,GAACxC,GAAO;AAC7B,EAAAA,EAAM,eAAc,GACpBA,EAAM,yBAAwB;AAChC;ACTe,SAAQyC,GAACC,GAAM;AAC5B,MAAIvB,IAAOuB,EAAK,SAAS,iBACrB9H,IAAYpE,EAAOkM,CAAI,EAAE,GAAG,kBAAkBC,IAASJ,EAAiB;AAC5E,EAAI,mBAAmBpB,IACrBvG,EAAU,GAAG,oBAAoB+H,IAASJ,EAAiB,KAE3DpB,EAAK,aAAaA,EAAK,MAAM,eAC7BA,EAAK,MAAM,gBAAgB;AAE/B;AAEO,SAASyB,GAAQF,GAAMG,GAAS;AACrC,MAAI1B,IAAOuB,EAAK,SAAS,iBACrB9H,IAAYpE,EAAOkM,CAAI,EAAE,GAAG,kBAAkB,IAAI;AACtD,EAAIG,MACFjI,EAAU,GAAG,cAAc+H,IAASJ,EAAiB,GACrD,WAAW,WAAW;AAAE,IAAA3H,EAAU,GAAG,cAAc,IAAI;AAAA,KAAM,CAAC,IAE5D,mBAAmBuG,IACrBvG,EAAU,GAAG,oBAAoB,IAAI,KAErCuG,EAAK,MAAM,gBAAgBA,EAAK,YAChC,OAAOA,EAAK;AAEhB;AC3Be,SAAA2B,GAASC,GAAaC,GAASC,GAAW;AACvD,EAAAF,EAAY,YAAYC,EAAQ,YAAYC,GAC5CA,EAAU,cAAcF;AAC1B;AAEO,SAASG,GAAOxK,GAAQyK,GAAY;AACzC,MAAIF,IAAY,OAAO,OAAOvK,EAAO,SAAS;AAC9C,WAASY,KAAO6J;AAAY,IAAAF,EAAU3J,CAAG,IAAI6J,EAAW7J,CAAG;AAC3D,SAAO2J;AACT;ACPO,SAASG,KAAQ;AAAE;AAEnB,IAAIC,KAAS,KACTC,KAAW,IAAID,IAEtBE,KAAM,uBACNC,KAAM,qDACNC,KAAM,sDACNC,KAAQ,sBACRC,KAAe,IAAI,OAAO,UAAUJ,EAAG,IAAIA,EAAG,IAAIA,EAAG,MAAM,GAC3DK,KAAe,IAAI,OAAO,UAAUH,EAAG,IAAIA,EAAG,IAAIA,EAAG,MAAM,GAC3DI,KAAgB,IAAI,OAAO,WAAWN,EAAG,IAAIA,EAAG,IAAIA,EAAG,IAAIC,EAAG,MAAM,GACpEM,KAAgB,IAAI,OAAO,WAAWL,EAAG,IAAIA,EAAG,IAAIA,EAAG,IAAID,EAAG,MAAM,GACpEO,KAAe,IAAI,OAAO,UAAUP,EAAG,IAAIC,EAAG,IAAIA,EAAG,MAAM,GAC3DO,KAAgB,IAAI,OAAO,WAAWR,EAAG,IAAIC,EAAG,IAAIA,EAAG,IAAID,EAAG,MAAM,GAEpES,KAAQ;AAAA,EACV,WAAW;AAAA,EACX,cAAc;AAAA,EACd,MAAM;AAAA,EACN,YAAY;AAAA,EACZ,OAAO;AAAA,EACP,OAAO;AAAA,EACP,QAAQ;AAAA,EACR,OAAO;AAAA,EACP,gBAAgB;AAAA,EAChB,MAAM;AAAA,EACN,YAAY;AAAA,EACZ,OAAO;AAAA,EACP,WAAW;AAAA,EACX,WAAW;AAAA,EACX,YAAY;AAAA,EACZ,WAAW;AAAA,EACX,OAAO;AAAA,EACP,gBAAgB;AAAA,EAChB,UAAU;AAAA,EACV,SAAS;AAAA,EACT,MAAM;AAAA,EACN,UAAU;AAAA,EACV,UAAU;AAAA,EACV,eAAe;AAAA,EACf,UAAU;AAAA,EACV,WAAW;AAAA,EACX,UAAU;AAAA,EACV,WAAW;AAAA,EACX,aAAa;AAAA,EACb,gBAAgB;AAAA,EAChB,YAAY;AAAA,EACZ,YAAY;AAAA,EACZ,SAAS;AAAA,EACT,YAAY;AAAA,EACZ,cAAc;AAAA,EACd,eAAe;AAAA,EACf,eAAe;AAAA,EACf,eAAe;AAAA,EACf,eAAe;AAAA,EACf,YAAY;AAAA,EACZ,UAAU;AAAA,EACV,aAAa;AAAA,EACb,SAAS;AAAA,EACT,SAAS;AAAA,EACT,YAAY;AAAA,EACZ,WAAW;AAAA,EACX,aAAa;AAAA,EACb,aAAa;AAAA,EACb,SAAS;AAAA,EACT,WAAW;AAAA,EACX,YAAY;AAAA,EACZ,MAAM;AAAA,EACN,WAAW;AAAA,EACX,MAAM;AAAA,EACN,OAAO;AAAA,EACP,aAAa;AAAA,EACb,MAAM;AAAA,EACN,UAAU;AAAA,EACV,SAAS;AAAA,EACT,WAAW;AAAA,EACX,QAAQ;AAAA,EACR,OAAO;AAAA,EACP,OAAO;AAAA,EACP,UAAU;AAAA,EACV,eAAe;AAAA,EACf,WAAW;AAAA,EACX,cAAc;AAAA,EACd,WAAW;AAAA,EACX,YAAY;AAAA,EACZ,WAAW;AAAA,EACX,sBAAsB;AAAA,EACtB,WAAW;AAAA,EACX,YAAY;AAAA,EACZ,WAAW;AAAA,EACX,WAAW;AAAA,EACX,aAAa;AAAA,EACb,eAAe;AAAA,EACf,cAAc;AAAA,EACd,gBAAgB;AAAA,EAChB,gBAAgB;AAAA,EAChB,gBAAgB;AAAA,EAChB,aAAa;AAAA,EACb,MAAM;AAAA,EACN,WAAW;AAAA,EACX,OAAO;AAAA,EACP,SAAS;AAAA,EACT,QAAQ;AAAA,EACR,kBAAkB;AAAA,EAClB,YAAY;AAAA,EACZ,cAAc;AAAA,EACd,cAAc;AAAA,EACd,gBAAgB;AAAA,EAChB,iBAAiB;AAAA,EACjB,mBAAmB;AAAA,EACnB,iBAAiB;AAAA,EACjB,iBAAiB;AAAA,EACjB,cAAc;AAAA,EACd,WAAW;AAAA,EACX,WAAW;AAAA,EACX,UAAU;AAAA,EACV,aAAa;AAAA,EACb,MAAM;AAAA,EACN,SAAS;AAAA,EACT,OAAO;AAAA,EACP,WAAW;AAAA,EACX,QAAQ;AAAA,EACR,WAAW;AAAA,EACX,QAAQ;AAAA,EACR,eAAe;AAAA,EACf,WAAW;AAAA,EACX,eAAe;AAAA,EACf,eAAe;AAAA,EACf,YAAY;AAAA,EACZ,WAAW;AAAA,EACX,MAAM;AAAA,EACN,MAAM;AAAA,EACN,MAAM;AAAA,EACN,YAAY;AAAA,EACZ,QAAQ;AAAA,EACR,eAAe;AAAA,EACf,KAAK;AAAA,EACL,WAAW;AAAA,EACX,WAAW;AAAA,EACX,aAAa;AAAA,EACb,QAAQ;AAAA,EACR,YAAY;AAAA,EACZ,UAAU;AAAA,EACV,UAAU;AAAA,EACV,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,SAAS;AAAA,EACT,WAAW;AAAA,EACX,WAAW;AAAA,EACX,WAAW;AAAA,EACX,MAAM;AAAA,EACN,aAAa;AAAA,EACb,WAAW;AAAA,EACX,KAAK;AAAA,EACL,MAAM;AAAA,EACN,SAAS;AAAA,EACT,QAAQ;AAAA,EACR,WAAW;AAAA,EACX,QAAQ;AAAA,EACR,OAAO;AAAA,EACP,OAAO;AAAA,EACP,YAAY;AAAA,EACZ,QAAQ;AAAA,EACR,aAAa;AACf;AAEAC,GAAOd,IAAOe,IAAO;AAAA,EACnB,KAAKC,GAAU;AACb,WAAO,OAAO,OAAO,IAAI,KAAK,eAAa,MAAMA,CAAQ;AAAA,EAC1D;AAAA,EACD,cAAc;AACZ,WAAO,KAAK,MAAM;EACnB;AAAA,EACD,KAAKC;AAAA;AAAA,EACL,WAAWA;AAAA,EACX,YAAYC;AAAA,EACZ,WAAWC;AAAA,EACX,WAAWC;AAAA,EACX,UAAUA;AACZ,CAAC;AAED,SAASH,KAAkB;AACzB,SAAO,KAAK,MAAM;AACpB;AAEA,SAASC,KAAmB;AAC1B,SAAO,KAAK,MAAM;AACpB;AAEA,SAASC,KAAkB;AACzB,SAAOE,GAAW,IAAI,EAAE;AAC1B;AAEA,SAASD,KAAkB;AACzB,SAAO,KAAK,MAAM;AACpB;AAEe,SAASL,GAAMO,GAAQ;AACpC,MAAIhO,GAAGiO;AACP,SAAAD,KAAUA,IAAS,IAAI,KAAM,EAAC,YAAW,IACjChO,IAAIgN,GAAM,KAAKgB,CAAM,MAAMC,IAAIjO,EAAE,CAAC,EAAE,QAAQA,IAAI,SAASA,EAAE,CAAC,GAAG,EAAE,GAAGiO,MAAM,IAAIC,GAAKlO,CAAC,IACtFiO,MAAM,IAAI,IAAIE,EAAKnO,KAAK,IAAI,KAAQA,KAAK,IAAI,KAAQA,KAAK,IAAI,KAAQA,IAAI,MAASA,IAAI,OAAQ,IAAMA,IAAI,IAAM,CAAC,IAChHiO,MAAM,IAAIG,GAAKpO,KAAK,KAAK,KAAMA,KAAK,KAAK,KAAMA,KAAK,IAAI,MAAOA,IAAI,OAAQ,GAAI,IAC/EiO,MAAM,IAAIG,GAAMpO,KAAK,KAAK,KAAQA,KAAK,IAAI,KAAQA,KAAK,IAAI,KAAQA,KAAK,IAAI,KAAQA,KAAK,IAAI,KAAQA,IAAI,OAAUA,IAAI,OAAQ,IAAMA,IAAI,MAAQ,GAAI,IACtJ,SACCA,IAAIiN,GAAa,KAAKe,CAAM,KAAK,IAAIG,EAAInO,EAAE,CAAC,GAAGA,EAAE,CAAC,GAAGA,EAAE,CAAC,GAAG,CAAC,KAC5DA,IAAIkN,GAAa,KAAKc,CAAM,KAAK,IAAIG,EAAInO,EAAE,CAAC,IAAI,MAAM,KAAKA,EAAE,CAAC,IAAI,MAAM,KAAKA,EAAE,CAAC,IAAI,MAAM,KAAK,CAAC,KAChGA,IAAImN,GAAc,KAAKa,CAAM,KAAKI,GAAKpO,EAAE,CAAC,GAAGA,EAAE,CAAC,GAAGA,EAAE,CAAC,GAAGA,EAAE,CAAC,CAAC,KAC7DA,IAAIoN,GAAc,KAAKY,CAAM,KAAKI,GAAKpO,EAAE,CAAC,IAAI,MAAM,KAAKA,EAAE,CAAC,IAAI,MAAM,KAAKA,EAAE,CAAC,IAAI,MAAM,KAAKA,EAAE,CAAC,CAAC,KACjGA,IAAIqN,GAAa,KAAKW,CAAM,KAAKK,GAAKrO,EAAE,CAAC,GAAGA,EAAE,CAAC,IAAI,KAAKA,EAAE,CAAC,IAAI,KAAK,CAAC,KACrEA,IAAIsN,GAAc,KAAKU,CAAM,KAAKK,GAAKrO,EAAE,CAAC,GAAGA,EAAE,CAAC,IAAI,KAAKA,EAAE,CAAC,IAAI,KAAKA,EAAE,CAAC,CAAC,IAC1EuN,GAAM,eAAeS,CAAM,IAAIE,GAAKX,GAAMS,CAAM,CAAC,IACjDA,MAAW,gBAAgB,IAAIG,EAAI,KAAK,KAAK,KAAK,CAAC,IACnD;AACR;AAEA,SAASD,GAAK9N,GAAG;AACf,SAAO,IAAI+N,EAAI/N,KAAK,KAAK,KAAMA,KAAK,IAAI,KAAMA,IAAI,KAAM,CAAC;AAC3D;AAEA,SAASgO,GAAKE,GAAGC,GAAGtJ,GAAGD,GAAG;AACxB,SAAIA,KAAK,MAAGsJ,IAAIC,IAAItJ,IAAI,MACjB,IAAIkJ,EAAIG,GAAGC,GAAGtJ,GAAGD,CAAC;AAC3B;AAEO,SAASwJ,GAAW3E,GAAG;AAE5B,SADMA,aAAa6C,OAAQ7C,IAAI4D,GAAM5D,CAAC,IACjCA,KACLA,IAAIA,EAAE,OACC,IAAIsE,EAAItE,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,OAAO,KAFxB,IAAIsE;AAGrB;AAEO,SAASM,GAAIH,GAAGC,GAAGtJ,GAAGyJ,GAAS;AACpC,SAAO,UAAU,WAAW,IAAIF,GAAWF,CAAC,IAAI,IAAIH,EAAIG,GAAGC,GAAGtJ,GAAGyJ,KAAkB,CAAW;AAChG;AAEO,SAASP,EAAIG,GAAGC,GAAGtJ,GAAGyJ,GAAS;AACpC,OAAK,IAAI,CAACJ,GACV,KAAK,IAAI,CAACC,GACV,KAAK,IAAI,CAACtJ,GACV,KAAK,UAAU,CAACyJ;AAClB;AAEAlB,GAAOW,GAAKM,IAAKjC,GAAOE,IAAO;AAAA,EAC7B,SAASiC,GAAG;AACV,WAAAA,IAAIA,KAAK,OAAO/B,KAAW,KAAK,IAAIA,IAAU+B,CAAC,GACxC,IAAIR,EAAI,KAAK,IAAIQ,GAAG,KAAK,IAAIA,GAAG,KAAK,IAAIA,GAAG,KAAK,OAAO;AAAA,EAChE;AAAA,EACD,OAAOA,GAAG;AACR,WAAAA,IAAIA,KAAK,OAAOhC,KAAS,KAAK,IAAIA,IAAQgC,CAAC,GACpC,IAAIR,EAAI,KAAK,IAAIQ,GAAG,KAAK,IAAIA,GAAG,KAAK,IAAIA,GAAG,KAAK,OAAO;AAAA,EAChE;AAAA,EACD,MAAM;AACJ,WAAO;AAAA,EACR;AAAA,EACD,QAAQ;AACN,WAAO,IAAIR,EAAIS,GAAO,KAAK,CAAC,GAAGA,GAAO,KAAK,CAAC,GAAGA,GAAO,KAAK,CAAC,GAAGC,GAAO,KAAK,OAAO,CAAC;AAAA,EACpF;AAAA,EACD,cAAc;AACZ,WAAQ,QAAQ,KAAK,KAAK,KAAK,IAAI,SAC3B,QAAQ,KAAK,KAAK,KAAK,IAAI,SAC3B,QAAQ,KAAK,KAAK,KAAK,IAAI,SAC3B,KAAK,KAAK,WAAW,KAAK,WAAW;AAAA,EAC9C;AAAA,EACD,KAAKC;AAAA;AAAA,EACL,WAAWA;AAAA,EACX,YAAYC;AAAA,EACZ,WAAWC;AAAA,EACX,UAAUA;AACZ,CAAC,CAAC;AAEF,SAASF,KAAgB;AACvB,SAAO,IAAIG,GAAI,KAAK,CAAC,CAAC,GAAGA,GAAI,KAAK,CAAC,CAAC,GAAGA,GAAI,KAAK,CAAC,CAAC;AACpD;AAEA,SAASF,KAAiB;AACxB,SAAO,IAAIE,GAAI,KAAK,CAAC,CAAC,GAAGA,GAAI,KAAK,CAAC,CAAC,GAAGA,GAAI,KAAK,CAAC,CAAC,GAAGA,IAAK,MAAM,KAAK,OAAO,IAAI,IAAI,KAAK,WAAW,GAAG,CAAC;AAC1G;AAEA,SAASD,KAAgB;AACvB,QAAMhK,IAAI6J,GAAO,KAAK,OAAO;AAC7B,SAAO,GAAG7J,MAAM,IAAI,SAAS,OAAO,GAAG4J,GAAO,KAAK,CAAC,CAAC,KAAKA,GAAO,KAAK,CAAC,CAAC,KAAKA,GAAO,KAAK,CAAC,CAAC,GAAG5J,MAAM,IAAI,MAAM,KAAKA,CAAC,GAAG;AACzH;AAEA,SAAS6J,GAAOH,GAAS;AACvB,SAAO,MAAMA,CAAO,IAAI,IAAI,KAAK,IAAI,GAAG,KAAK,IAAI,GAAGA,CAAO,CAAC;AAC9D;AAEA,SAASE,GAAO3L,GAAO;AACrB,SAAO,KAAK,IAAI,GAAG,KAAK,IAAI,KAAK,KAAK,MAAMA,CAAK,KAAK,CAAC,CAAC;AAC1D;AAEA,SAASgM,GAAIhM,GAAO;AAClB,SAAAA,IAAQ2L,GAAO3L,CAAK,IACZA,IAAQ,KAAK,MAAM,MAAMA,EAAM,SAAS,EAAE;AACpD;AAEA,SAASoL,GAAKa,GAAGC,GAAGlB,GAAGjJ,GAAG;AACxB,SAAIA,KAAK,IAAGkK,IAAIC,IAAIlB,IAAI,MACfA,KAAK,KAAKA,KAAK,IAAGiB,IAAIC,IAAI,MAC1BA,KAAK,MAAGD,IAAI,MACd,IAAIE,GAAIF,GAAGC,GAAGlB,GAAGjJ,CAAC;AAC3B;AAEO,SAAS+I,GAAWlE,GAAG;AAC5B,MAAIA,aAAauF;AAAK,WAAO,IAAIA,GAAIvF,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,OAAO;AAE7D,MADMA,aAAa6C,OAAQ7C,IAAI4D,GAAM5D,CAAC,IAClC,CAACA;AAAG,WAAO,IAAIuF;AACnB,MAAIvF,aAAauF;AAAK,WAAOvF;AAC7B,EAAAA,IAAIA,EAAE;AACN,MAAIyE,IAAIzE,EAAE,IAAI,KACV0E,IAAI1E,EAAE,IAAI,KACV5E,IAAI4E,EAAE,IAAI,KACVwF,IAAM,KAAK,IAAIf,GAAGC,GAAGtJ,CAAC,GACtBqK,IAAM,KAAK,IAAIhB,GAAGC,GAAGtJ,CAAC,GACtBiK,IAAI,KACJ,IAAII,IAAMD,GACVpB,KAAKqB,IAAMD,KAAO;AACtB,SAAI,KACEf,MAAMgB,IAAKJ,KAAKX,IAAItJ,KAAK,KAAKsJ,IAAItJ,KAAK,IAClCsJ,MAAMe,IAAKJ,KAAKjK,IAAIqJ,KAAK,IAAI,IACjCY,KAAKZ,IAAIC,KAAK,IAAI,GACvB,KAAKN,IAAI,MAAMqB,IAAMD,IAAM,IAAIC,IAAMD,GACrCH,KAAK,MAEL,IAAIjB,IAAI,KAAKA,IAAI,IAAI,IAAIiB,GAEpB,IAAIE,GAAIF,GAAG,GAAGjB,GAAGpE,EAAE,OAAO;AACnC;AAEO,SAAS0F,GAAIL,GAAGC,GAAGlB,GAAGS,GAAS;AACpC,SAAO,UAAU,WAAW,IAAIX,GAAWmB,CAAC,IAAI,IAAIE,GAAIF,GAAGC,GAAGlB,GAAGS,KAAkB,CAAW;AAChG;AAEA,SAASU,GAAIF,GAAGC,GAAGlB,GAAGS,GAAS;AAC7B,OAAK,IAAI,CAACQ,GACV,KAAK,IAAI,CAACC,GACV,KAAK,IAAI,CAAClB,GACV,KAAK,UAAU,CAACS;AAClB;AAEAlB,GAAO4B,IAAKG,IAAK/C,GAAOE,IAAO;AAAA,EAC7B,SAASiC,GAAG;AACV,WAAAA,IAAIA,KAAK,OAAO/B,KAAW,KAAK,IAAIA,IAAU+B,CAAC,GACxC,IAAIS,GAAI,KAAK,GAAG,KAAK,GAAG,KAAK,IAAIT,GAAG,KAAK,OAAO;AAAA,EACxD;AAAA,EACD,OAAOA,GAAG;AACR,WAAAA,IAAIA,KAAK,OAAOhC,KAAS,KAAK,IAAIA,IAAQgC,CAAC,GACpC,IAAIS,GAAI,KAAK,GAAG,KAAK,GAAG,KAAK,IAAIT,GAAG,KAAK,OAAO;AAAA,EACxD;AAAA,EACD,MAAM;AACJ,QAAIO,IAAI,KAAK,IAAI,OAAO,KAAK,IAAI,KAAK,KAClCC,IAAI,MAAMD,CAAC,KAAK,MAAM,KAAK,CAAC,IAAI,IAAI,KAAK,GACzCjB,IAAI,KAAK,GACTuB,IAAKvB,KAAKA,IAAI,MAAMA,IAAI,IAAIA,KAAKkB,GACjC7K,IAAK,IAAI2J,IAAIuB;AACjB,WAAO,IAAIrB;AAAA,MACTsB,GAAQP,KAAK,MAAMA,IAAI,MAAMA,IAAI,KAAK5K,GAAIkL,CAAE;AAAA,MAC5CC,GAAQP,GAAG5K,GAAIkL,CAAE;AAAA,MACjBC,GAAQP,IAAI,MAAMA,IAAI,MAAMA,IAAI,KAAK5K,GAAIkL,CAAE;AAAA,MAC3C,KAAK;AAAA,IACX;AAAA,EACG;AAAA,EACD,QAAQ;AACN,WAAO,IAAIJ,GAAIM,GAAO,KAAK,CAAC,GAAGC,GAAO,KAAK,CAAC,GAAGA,GAAO,KAAK,CAAC,GAAGd,GAAO,KAAK,OAAO,CAAC;AAAA,EACpF;AAAA,EACD,cAAc;AACZ,YAAQ,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAAM,KAAK,CAAC,MAC1C,KAAK,KAAK,KAAK,KAAK,KAAK,KACzB,KAAK,KAAK,WAAW,KAAK,WAAW;AAAA,EAC9C;AAAA,EACD,YAAY;AACV,UAAM7J,IAAI6J,GAAO,KAAK,OAAO;AAC7B,WAAO,GAAG7J,MAAM,IAAI,SAAS,OAAO,GAAG0K,GAAO,KAAK,CAAC,CAAC,KAAKC,GAAO,KAAK,CAAC,IAAI,GAAG,MAAMA,GAAO,KAAK,CAAC,IAAI,GAAG,IAAI3K,MAAM,IAAI,MAAM,KAAKA,CAAC,GAAG;AAAA,EACtI;AACH,CAAC,CAAC;AAEF,SAAS0K,GAAOzM,GAAO;AACrB,SAAAA,KAASA,KAAS,KAAK,KAChBA,IAAQ,IAAIA,IAAQ,MAAMA;AACnC;AAEA,SAAS0M,GAAO1M,GAAO;AACrB,SAAO,KAAK,IAAI,GAAG,KAAK,IAAI,GAAGA,KAAS,CAAC,CAAC;AAC5C;AAGA,SAASwM,GAAQP,GAAG5K,GAAIkL,GAAI;AAC1B,UAAQN,IAAI,KAAK5K,KAAMkL,IAAKlL,KAAM4K,IAAI,KAChCA,IAAI,MAAMM,IACVN,IAAI,MAAM5K,KAAMkL,IAAKlL,MAAO,MAAM4K,KAAK,KACvC5K,KAAM;AACd;AC3YA,MAAesL,KAAA,CAAAlP,MAAK,MAAMA;ACE1B,SAAS7B,GAAOmG,GAAG6K,GAAG;AACpB,SAAO,SAASpG,GAAG;AACjB,WAAOzE,IAAIyE,IAAIoG;AAAA,EACnB;AACA;AAEA,SAASC,GAAY9K,GAAGC,GAAG8K,GAAG;AAC5B,SAAO/K,IAAI,KAAK,IAAIA,GAAG+K,CAAC,GAAG9K,IAAI,KAAK,IAAIA,GAAG8K,CAAC,IAAI/K,GAAG+K,IAAI,IAAIA,GAAG,SAAStG,GAAG;AACxE,WAAO,KAAK,IAAIzE,IAAIyE,IAAIxE,GAAG8K,CAAC;AAAA,EAChC;AACA;AAOO,SAASC,GAAMD,GAAG;AACvB,UAAQA,IAAI,CAACA,MAAO,IAAIE,KAAU,SAASjL,GAAGC,GAAG;AAC/C,WAAOA,IAAID,IAAI8K,GAAY9K,GAAGC,GAAG8K,CAAC,IAAI5M,GAAS,MAAM6B,CAAC,IAAIC,IAAID,CAAC;AAAA,EACnE;AACA;AAEe,SAASiL,GAAQjL,GAAGC,GAAG;AACpC,MAAI4K,IAAI5K,IAAID;AACZ,SAAO6K,IAAIhR,GAAOmG,GAAG6K,CAAC,IAAI1M,GAAS,MAAM6B,CAAC,IAAIC,IAAID,CAAC;AACrD;ACvBA,MAAAkL,KAAgB,SAASC,EAASJ,GAAG;AACnC,MAAItC,IAAQuC,GAAMD,CAAC;AAEnB,WAAStB,EAAI2B,GAAOC,GAAK;AACvB,QAAI/B,IAAIb,GAAO2C,IAAQE,GAASF,CAAK,GAAG,IAAIC,IAAMC,GAASD,CAAG,GAAG,CAAC,GAC9D9B,IAAId,EAAM2C,EAAM,GAAGC,EAAI,CAAC,GACxBpL,IAAIwI,EAAM2C,EAAM,GAAGC,EAAI,CAAC,GACxB3B,IAAUuB,GAAQG,EAAM,SAASC,EAAI,OAAO;AAChD,WAAO,SAAS5G,GAAG;AACjB,aAAA2G,EAAM,IAAI9B,EAAE7E,CAAC,GACb2G,EAAM,IAAI7B,EAAE9E,CAAC,GACb2G,EAAM,IAAInL,EAAEwE,CAAC,GACb2G,EAAM,UAAU1B,EAAQjF,CAAC,GAClB2G,IAAQ;AAAA,IACrB;AAAA,EACG;AAED3B,SAAAA,EAAI,QAAQ0B,GAEL1B;AACT,EAAG,CAAC;ACzBW,SAAA8B,GAASvL,GAAGC,GAAG;AAC5B,SAAOD,IAAI,CAACA,GAAGC,IAAI,CAACA,GAAG,SAASwE,GAAG;AACjC,WAAOzE,KAAK,IAAIyE,KAAKxE,IAAIwE;AAAA,EAC7B;AACA;ACFA,IAAI+G,KAAM,+CACNC,KAAM,IAAI,OAAOD,GAAI,QAAQ,GAAG;AAEpC,SAASE,GAAKzL,GAAG;AACf,SAAO,WAAW;AAChB,WAAOA;AAAA,EACX;AACA;AAEA,SAAS0L,GAAI1L,GAAG;AACd,SAAO,SAASwE,GAAG;AACjB,WAAOxE,EAAEwE,CAAC,IAAI;AAAA,EAClB;AACA;AAEe,SAAAmH,GAAS5L,GAAGC,GAAG;AAC5B,MAAI4L,IAAKL,GAAI,YAAYC,GAAI,YAAY,GACrCK,GACAC,GACAC,GACA5R,IAAI,IACJ,IAAI,CAAE,GACN6R,IAAI,CAAA;AAMR,OAHAjM,IAAIA,IAAI,IAAIC,IAAIA,IAAI,KAGZ6L,IAAKN,GAAI,KAAKxL,CAAC,OACf+L,IAAKN,GAAI,KAAKxL,CAAC;AACrB,KAAK+L,IAAKD,EAAG,SAASF,MACpBG,IAAK/L,EAAE,MAAM4L,GAAIG,CAAE,GACf,EAAE5R,CAAC,IAAG,EAAEA,CAAC,KAAK4R,IACb,EAAE,EAAE5R,CAAC,IAAI4R,KAEXF,IAAKA,EAAG,CAAC,QAAQC,IAAKA,EAAG,CAAC,KACzB,EAAE3R,CAAC,IAAG,EAAEA,CAAC,KAAK2R,IACb,EAAE,EAAE3R,CAAC,IAAI2R,KAEd,EAAE,EAAE3R,CAAC,IAAI,MACT6R,EAAE,KAAK,EAAC,GAAG7R,GAAG,GAAG8R,GAAOJ,GAAIC,CAAE,EAAC,CAAC,IAElCF,IAAKJ,GAAI;AAIX,SAAII,IAAK5L,EAAE,WACT+L,IAAK/L,EAAE,MAAM4L,CAAE,GACX,EAAEzR,CAAC,IAAG,EAAEA,CAAC,KAAK4R,IACb,EAAE,EAAE5R,CAAC,IAAI4R,IAKT,EAAE,SAAS,IAAKC,EAAE,CAAC,IACpBN,GAAIM,EAAE,CAAC,EAAE,CAAC,IACVP,GAAKzL,CAAC,KACLA,IAAIgM,EAAE,QAAQ,SAASxH,GAAG;AACzB,aAASrK,IAAI,GAAGyK,GAAGzK,IAAI6F,GAAG,EAAE7F;AAAG,SAAGyK,IAAIoH,EAAE7R,CAAC,GAAG,CAAC,IAAIyK,EAAE,EAAEJ,CAAC;AACtD,WAAO,EAAE,KAAK,EAAE;AAAA,EAC1B;AACA;AC/DA,IAAI0H,KAAU,MAAM,KAAK,IAEdC,KAAW;AAAA,EACpB,YAAY;AAAA,EACZ,YAAY;AAAA,EACZ,QAAQ;AAAA,EACR,OAAO;AAAA,EACP,QAAQ;AAAA,EACR,QAAQ;AACV;AAEe,SAAAC,GAASrM,GAAGC,GAAG2G,GAAGiE,GAAGyB,GAAGC,GAAG;AACxC,MAAIC,GAAQC,GAAQC;AACpB,UAAIF,IAAS,KAAK,KAAKxM,IAAIA,IAAIC,IAAIA,CAAC,OAAGD,KAAKwM,GAAQvM,KAAKuM,KACrDE,IAAQ1M,IAAI4G,IAAI3G,IAAI4K,OAAGjE,KAAK5G,IAAI0M,GAAO7B,KAAK5K,IAAIyM,KAChDD,IAAS,KAAK,KAAK7F,IAAIA,IAAIiE,IAAIA,CAAC,OAAGjE,KAAK6F,GAAQ5B,KAAK4B,GAAQC,KAASD,IACtEzM,IAAI6K,IAAI5K,IAAI2G,MAAG5G,IAAI,CAACA,GAAGC,IAAI,CAACA,GAAGyM,IAAQ,CAACA,GAAOF,IAAS,CAACA,IACtD;AAAA,IACL,YAAYF;AAAA,IACZ,YAAYC;AAAA,IACZ,QAAQ,KAAK,MAAMtM,GAAGD,CAAC,IAAImM;AAAA,IAC3B,OAAO,KAAK,KAAKO,CAAK,IAAIP;AAAA,IAC1B,QAAQK;AAAA,IACR,QAAQC;AAAA,EACZ;AACA;ACvBA,IAAIE;AAGG,SAASC,GAAS3O,GAAO;AAC9B,QAAMjD,IAAI,KAAK,OAAO,aAAc,aAAa,YAAY,iBAAiBiD,IAAQ,EAAE;AACxF,SAAOjD,EAAE,aAAaoR,KAAWC,GAAUrR,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,CAAC;AACzE;AAEO,SAAS6R,GAAS5O,GAAO;AAI9B,SAHIA,KAAS,SACR0O,OAASA,KAAU,SAAS,gBAAgB,8BAA8B,GAAG,IAClFA,GAAQ,aAAa,aAAa1O,CAAK,GACnC,EAAEA,IAAQ0O,GAAQ,UAAU,QAAQ,YAAa,MAAUP,MAC/DnO,IAAQA,EAAM,QACPoO,GAAUpO,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,CAAC;AACvE;ACdA,SAAS6O,GAAqBC,GAAOC,GAASC,GAASC,GAAU;AAE/D,WAASC,EAAIhD,GAAG;AACd,WAAOA,EAAE,SAASA,EAAE,IAAK,IAAG,MAAM;AAAA,EACnC;AAED,WAASiD,EAAUC,GAAIC,GAAIC,GAAIC,GAAIrD,GAAG8B,GAAG;AACvC,QAAIoB,MAAOE,KAAMD,MAAOE,GAAI;AAC1B,UAAIpT,IAAI+P,EAAE,KAAK,cAAc,MAAM6C,GAAS,MAAMC,CAAO;AACzD,MAAAhB,EAAE,KAAK,EAAC,GAAG7R,IAAI,GAAG,GAAG8R,GAAOmB,GAAIE,CAAE,EAAC,GAAG,EAAC,GAAGnT,IAAI,GAAG,GAAG8R,GAAOoB,GAAIE,CAAE,EAAC,CAAC;AAAA,IACzE;AAAW,OAAID,KAAMC,MACfrD,EAAE,KAAK,eAAeoD,IAAKP,IAAUQ,IAAKP,CAAO;AAAA,EAEpD;AAED,WAASQ,EAAOzN,GAAGC,GAAGkK,GAAG8B,GAAG;AAC1B,IAAIjM,MAAMC,KACJD,IAAIC,IAAI,MAAKA,KAAK,MAAcA,IAAID,IAAI,QAAKA,KAAK,MACtDiM,EAAE,KAAK,EAAC,GAAG9B,EAAE,KAAKgD,EAAIhD,CAAC,IAAI,WAAW,MAAM+C,CAAQ,IAAI,GAAG,GAAGhB,GAAOlM,GAAGC,CAAC,EAAC,CAAC,KAClEA,KACTkK,EAAE,KAAKgD,EAAIhD,CAAC,IAAI,YAAYlK,IAAIiN,CAAQ;AAAA,EAE3C;AAED,WAASR,EAAM1M,GAAGC,GAAGkK,GAAG8B,GAAG;AACzB,IAAIjM,MAAMC,IACRgM,EAAE,KAAK,EAAC,GAAG9B,EAAE,KAAKgD,EAAIhD,CAAC,IAAI,UAAU,MAAM+C,CAAQ,IAAI,GAAG,GAAGhB,GAAOlM,GAAGC,CAAC,EAAC,CAAC,IACjEA,KACTkK,EAAE,KAAKgD,EAAIhD,CAAC,IAAI,WAAWlK,IAAIiN,CAAQ;AAAA,EAE1C;AAED,WAASQ,EAAML,GAAIC,GAAIC,GAAIC,GAAIrD,GAAG8B,GAAG;AACnC,QAAIoB,MAAOE,KAAMD,MAAOE,GAAI;AAC1B,UAAIpT,IAAI+P,EAAE,KAAKgD,EAAIhD,CAAC,IAAI,UAAU,MAAM,KAAK,MAAM,GAAG;AACtD,MAAA8B,EAAE,KAAK,EAAC,GAAG7R,IAAI,GAAG,GAAG8R,GAAOmB,GAAIE,CAAE,EAAC,GAAG,EAAC,GAAGnT,IAAI,GAAG,GAAG8R,GAAOoB,GAAIE,CAAE,EAAC,CAAC;AAAA,IACpE;AAAM,OAAID,MAAO,KAAKC,MAAO,MAC5BrD,EAAE,KAAKgD,EAAIhD,CAAC,IAAI,WAAWoD,IAAK,MAAMC,IAAK,GAAG;AAAA,EAEjD;AAED,SAAO,SAASxN,GAAGC,GAAG;AACpB,QAAIkK,IAAI,CAAE,GACN8B,IAAI,CAAA;AACR,WAAAjM,IAAI+M,EAAM/M,CAAC,GAAGC,IAAI8M,EAAM9M,CAAC,GACzBmN,EAAUpN,EAAE,YAAYA,EAAE,YAAYC,EAAE,YAAYA,EAAE,YAAYkK,GAAG8B,CAAC,GACtEwB,EAAOzN,EAAE,QAAQC,EAAE,QAAQkK,GAAG8B,CAAC,GAC/BS,EAAM1M,EAAE,OAAOC,EAAE,OAAOkK,GAAG8B,CAAC,GAC5ByB,EAAM1N,EAAE,QAAQA,EAAE,QAAQC,EAAE,QAAQA,EAAE,QAAQkK,GAAG8B,CAAC,GAClDjM,IAAIC,IAAI,MACD,SAASwE,GAAG;AAEjB,eADIrK,IAAI,IAAIgB,IAAI6Q,EAAE,QAAQpH,GACnB,EAAEzK,IAAIgB;AAAG,QAAA+O,GAAGtF,IAAIoH,EAAE7R,CAAC,GAAG,CAAC,IAAIyK,EAAE,EAAEJ,CAAC;AACvC,aAAO0F,EAAE,KAAK,EAAE;AAAA,IACtB;AAAA,EACA;AACA;AAEO,IAAIwD,KAA0Bb,GAAqBF,IAAU,QAAQ,OAAO,MAAM,GAC9EgB,KAA0Bd,GAAqBD,IAAU,MAAM,KAAK,GAAG,GC9D9EgB,KAAW;AAEf,SAASC,GAAKpS,GAAG;AACf,WAASA,IAAI,KAAK,IAAIA,CAAC,KAAK,IAAIA,KAAK;AACvC;AAEA,SAASqS,GAAKrS,GAAG;AACf,WAASA,IAAI,KAAK,IAAIA,CAAC,KAAK,IAAIA,KAAK;AACvC;AAEA,SAASsS,GAAKtS,GAAG;AACf,WAASA,IAAI,KAAK,IAAI,IAAIA,CAAC,KAAK,MAAMA,IAAI;AAC5C;AAEA,MAAeuS,KAAC,SAASC,EAAQC,GAAKC,GAAMC,GAAM;AAIhD,WAASC,EAAKC,GAAIC,GAAI;AACpB,QAAIC,IAAMF,EAAG,CAAC,GAAGG,IAAMH,EAAG,CAAC,GAAGI,IAAKJ,EAAG,CAAC,GACnCK,IAAMJ,EAAG,CAAC,GAAGK,IAAML,EAAG,CAAC,GAAGM,IAAKN,EAAG,CAAC,GACnCO,IAAKH,IAAMH,GACXO,IAAKH,IAAMH,GACXO,IAAKF,IAAKA,IAAKC,IAAKA,GACpB5U,GACA8U;AAGJ,QAAID,IAAKpB;AACP,MAAAqB,IAAI,KAAK,IAAIJ,IAAKH,CAAE,IAAIR,GACxB/T,IAAI,SAASqK,GAAG;AACd,eAAO;AAAA,UACLgK,IAAMhK,IAAIsK;AAAA,UACVL,IAAMjK,IAAIuK;AAAA,UACVL,IAAK,KAAK,IAAIR,IAAM1J,IAAIyK,CAAC;AAAA,QACnC;AAAA,MACO;AAAA,SAIE;AACH,UAAIC,IAAK,KAAK,KAAKF,CAAE,GACjBG,KAAMN,IAAKA,IAAKH,IAAKA,IAAKN,IAAOY,MAAO,IAAIN,IAAKP,IAAOe,IACxDE,KAAMP,IAAKA,IAAKH,IAAKA,IAAKN,IAAOY,MAAO,IAAIH,IAAKV,IAAOe,IACxDG,IAAK,KAAK,IAAI,KAAK,KAAKF,IAAKA,IAAK,CAAC,IAAIA,CAAE,GACzCG,IAAK,KAAK,IAAI,KAAK,KAAKF,IAAKA,IAAK,CAAC,IAAIA,CAAE;AAC7C,MAAAH,KAAKK,IAAKD,KAAMnB,GAChB/T,IAAI,SAASqK,GAAG;AACd,YAAI0F,IAAI1F,IAAIyK,GACRM,IAAS1B,GAAKwB,CAAE,GAChBG,IAAId,KAAMP,IAAOe,MAAOK,IAASxB,GAAKG,IAAMhE,IAAImF,CAAE,IAAIvB,GAAKuB,CAAE;AACjE,eAAO;AAAA,UACLb,IAAMgB,IAAIV;AAAA,UACVL,IAAMe,IAAIT;AAAA,UACVL,IAAKa,IAAS1B,GAAKK,IAAMhE,IAAImF,CAAE;AAAA,QACzC;AAAA,MACO;AAAA,IACF;AAED,WAAAlV,EAAE,WAAW8U,IAAI,MAAOf,IAAM,KAAK,OAE5B/T;AAAA,EACR;AAED,SAAAkU,EAAK,MAAM,SAASnI,GAAG;AACrB,QAAIuJ,IAAK,KAAK,IAAI,MAAM,CAACvJ,CAAC,GAAGwJ,IAAKD,IAAKA,GAAIE,IAAKD,IAAKA;AACrD,WAAOzB,EAAQwB,GAAIC,GAAIC,CAAE;AAAA,EAC7B,GAEStB;AACT,EAAG,KAAK,OAAO,GAAG,CAAC;ACtEnB,IAAIuB,KAAQ,GACRC,KAAU,GACVC,KAAW,GACXC,KAAY,KACZC,IACAC,IACAC,KAAY,GACZC,KAAW,GACXC,KAAY,GACZC,KAAQ,OAAO,eAAgB,YAAY,YAAY,MAAM,cAAc,MAC3EC,KAAW,OAAO,UAAW,YAAY,OAAO,wBAAwB,OAAO,sBAAsB,KAAK,MAAM,IAAI,SAAShE,GAAG;AAAE,aAAWA,GAAG,EAAE;;AAE/I,SAASiE,KAAM;AACpB,SAAOJ,OAAaG,GAASE,EAAQ,GAAGL,KAAWE,GAAM,QAAQD;AACnE;AAEA,SAASI,KAAW;AAClB,EAAAL,KAAW;AACb;AAEO,SAASM,KAAQ;AACtB,OAAK,QACL,KAAK,QACL,KAAK,QAAQ;AACf;AAEAA,GAAM,YAAYC,GAAM,YAAY;AAAA,EAClC,aAAaD;AAAA,EACb,SAAS,SAASrQ,GAAUuQ,GAAOC,GAAM;AACvC,QAAI,OAAOxQ,KAAa;AAAY,YAAM,IAAI,UAAU,4BAA4B;AACpF,IAAAwQ,KAAQA,KAAQ,OAAOL,GAAG,IAAK,CAACK,MAASD,KAAS,OAAO,IAAI,CAACA,IAC1D,CAAC,KAAK,SAASV,OAAa,SAC1BA,KAAUA,GAAS,QAAQ,OAC1BD,KAAW,MAChBC,KAAW,OAEb,KAAK,QAAQ7P,GACb,KAAK,QAAQwQ,GACbC;EACD;AAAA,EACD,MAAM,WAAW;AACf,IAAI,KAAK,UACP,KAAK,QAAQ,MACb,KAAK,QAAQ,OACbA;EAEH;AACH;AAEO,SAASH,GAAMtQ,GAAUuQ,GAAOC,GAAM;AAC3C,MAAIpM,IAAI,IAAIiM;AACZ,SAAAjM,EAAE,QAAQpE,GAAUuQ,GAAOC,CAAI,GACxBpM;AACT;AAEO,SAASsM,KAAa;AAC3B,EAAAP,MACA,EAAEX;AAEF,WADI,IAAII,IAAU,GACX;AACL,KAAK,IAAIG,KAAW,EAAE,UAAU,KAAG,EAAE,MAAM,KAAK,QAAW,CAAC,GAC5D,IAAI,EAAE;AAER,IAAEP;AACJ;AAEA,SAASmB,KAAO;AACd,EAAAZ,MAAYD,KAAYG,GAAM,IAAG,KAAMD,IACvCR,KAAQC,KAAU;AAClB,MAAI;AACF,IAAAiB;EACJ,UAAY;AACR,IAAAlB,KAAQ,GACRoB,MACAb,KAAW;AAAA,EACZ;AACH;AAEA,SAASc,KAAO;AACd,MAAIV,IAAMF,GAAM,IAAK,GAAEM,IAAQJ,IAAML;AACrC,EAAIS,IAAQZ,OAAWK,MAAaO,GAAOT,KAAYK;AACzD;AAEA,SAASS,KAAM;AAEb,WADIE,GAAIC,IAAKnB,IAAUoB,GAAIR,IAAO,OAC3BO;AACL,IAAIA,EAAG,SACDP,IAAOO,EAAG,UAAOP,IAAOO,EAAG,QAC/BD,IAAKC,GAAIA,IAAKA,EAAG,UAEjBC,IAAKD,EAAG,OAAOA,EAAG,QAAQ,MAC1BA,IAAKD,IAAKA,EAAG,QAAQE,IAAKpB,KAAWoB;AAGzC,EAAAnB,KAAWiB,GACXL,GAAMD,CAAI;AACZ;AAEA,SAASC,GAAMD,GAAM;AACnB,MAAI,CAAAhB,IACJ;AAAA,IAAIC,OAASA,KAAU,aAAaA,EAAO;AAC3C,QAAIc,IAAQC,IAAOT;AACnB,IAAIQ,IAAQ,MACNC,IAAO,UAAUf,KAAU,WAAWkB,IAAMH,IAAOP,GAAM,QAAQD,EAAS,IAC1EN,OAAUA,KAAW,cAAcA,EAAQ,OAE1CA,OAAUI,KAAYG,GAAM,OAAOP,KAAW,YAAYmB,IAAMlB,EAAS,IAC9EH,KAAQ,GAAGU,GAASS,EAAI;AAAA;AAE5B;AC3Ge,SAAAlB,GAASzP,GAAUuQ,GAAOC,GAAM;AAC7C,MAAIpM,IAAI,IAAIiM;AACZ,SAAAE,IAAQA,KAAS,OAAO,IAAI,CAACA,GAC7BnM,EAAE,QAAQ,CAAA6M,MAAW;AACnB,IAAA7M,EAAE,KAAI,GACNpE,EAASiR,IAAUV,CAAK;AAAA,EAC5B,GAAKA,GAAOC,CAAI,GACPpM;AACT;ACPA,IAAI8M,KAAUrL,GAAS,SAAS,OAAO,UAAU,WAAW,GACxDsL,KAAa,CAAA,GAENC,KAAU,GACVC,KAAY,GACZC,KAAW,GACXC,KAAU,GACVC,KAAU,GACVC,KAAS,GACTC,KAAQ;AAEJ,SAAAC,GAAS1W,GAAMpB,GAAM+X,GAAIC,GAAO/W,GAAOgX,GAAQ;AAC5D,MAAIC,IAAY9W,EAAK;AACrB,MAAI,CAAC8W;AAAW,IAAA9W,EAAK,eAAe,CAAA;AAAA,WAC3B2W,KAAMG;AAAW;AAC1B5O,EAAAA,GAAOlI,GAAM2W,GAAI;AAAA,IACf,MAAM/X;AAAA,IACN,OAAOgY;AAAA;AAAA,IACP,OAAO/W;AAAA;AAAA,IACP,IAAIoW;AAAA,IACJ,OAAOC;AAAA,IACP,MAAMW,EAAO;AAAA,IACb,OAAOA,EAAO;AAAA,IACd,UAAUA,EAAO;AAAA,IACjB,MAAMA,EAAO;AAAA,IACb,OAAO;AAAA,IACP,OAAOV;AAAA,EACX,CAAG;AACH;AAEO,SAASY,GAAK/W,GAAM2W,GAAI;AAC7B,MAAID,IAAWzL,GAAIjL,GAAM2W,CAAE;AAC3B,MAAID,EAAS,QAAQP;AAAS,UAAM,IAAI,MAAM,6BAA6B;AAC3E,SAAOO;AACT;AAEO,SAASxL,GAAIlL,GAAM2W,GAAI;AAC5B,MAAID,IAAWzL,GAAIjL,GAAM2W,CAAE;AAC3B,MAAID,EAAS,QAAQJ;AAAS,UAAM,IAAI,MAAM,2BAA2B;AACzE,SAAOI;AACT;AAEO,SAASzL,GAAIjL,GAAM2W,GAAI;AAC5B,MAAID,IAAW1W,EAAK;AACpB,MAAI,CAAC0W,KAAY,EAAEA,IAAWA,EAASC,CAAE;AAAI,UAAM,IAAI,MAAM,sBAAsB;AACnF,SAAOD;AACT;AAEA,SAASxO,GAAOlI,GAAM2W,GAAIK,GAAM;AAC9B,MAAIF,IAAY9W,EAAK,cACjBiX;AAIJ,EAAAH,EAAUH,CAAE,IAAIK,GAChBA,EAAK,QAAQ3B,GAAMqB,GAAU,GAAGM,EAAK,IAAI;AAEzC,WAASN,EAASV,GAAS;AACzB,IAAAgB,EAAK,QAAQZ,IACbY,EAAK,MAAM,QAAQlH,GAAOkH,EAAK,OAAOA,EAAK,IAAI,GAG3CA,EAAK,SAAShB,KAASlG,EAAMkG,IAAUgB,EAAK,KAAK;AAAA,EACtD;AAED,WAASlH,EAAMkG,GAAS;AACtB,QAAIlX,GAAGc,GAAGE,GAAGyJ;AAGb,QAAIyN,EAAK,UAAUZ;AAAW,aAAOc,EAAI;AAEzC,SAAKpY,KAAKgY;AAER,UADAvN,IAAIuN,EAAUhY,CAAC,GACXyK,EAAE,SAASyN,EAAK,MAKpB;AAAA,YAAIzN,EAAE,UAAU+M;AAAS,iBAAO9B,GAAQ1E,CAAK;AAG7C,QAAIvG,EAAE,UAAUgN,MACdhN,EAAE,QAAQkN,IACVlN,EAAE,MAAM,QACRA,EAAE,GAAG,KAAK,aAAavJ,GAAMA,EAAK,UAAUuJ,EAAE,OAAOA,EAAE,KAAK,GAC5D,OAAOuN,EAAUhY,CAAC,KAIX,CAACA,IAAI6X,MACZpN,EAAE,QAAQkN,IACVlN,EAAE,MAAM,QACRA,EAAE,GAAG,KAAK,UAAUvJ,GAAMA,EAAK,UAAUuJ,EAAE,OAAOA,EAAE,KAAK,GACzD,OAAOuN,EAAUhY,CAAC;AAAA;AAoBtB,QAZA0V,GAAQ,WAAW;AACjB,MAAIwC,EAAK,UAAUV,OACjBU,EAAK,QAAQT,IACbS,EAAK,MAAM,QAAQG,GAAMH,EAAK,OAAOA,EAAK,IAAI,GAC9CG,EAAKnB,CAAO;AAAA,IAEpB,CAAK,GAIDgB,EAAK,QAAQX,IACbW,EAAK,GAAG,KAAK,SAAShX,GAAMA,EAAK,UAAUgX,EAAK,OAAOA,EAAK,KAAK,GAC7DA,EAAK,UAAUX,IAKnB;AAAA,WAJAW,EAAK,QAAQV,IAGbW,IAAQ,IAAI,MAAMnX,IAAIkX,EAAK,MAAM,MAAM,GAClClY,IAAI,GAAGc,IAAI,IAAId,IAAIgB,GAAG,EAAEhB;AAC3B,SAAIyK,IAAIyN,EAAK,MAAMlY,CAAC,EAAE,MAAM,KAAKkB,GAAMA,EAAK,UAAUgX,EAAK,OAAOA,EAAK,KAAK,OAC1EC,EAAM,EAAErX,CAAC,IAAI2J;AAGjB,MAAA0N,EAAM,SAASrX,IAAI;AAAA;AAAA,EACpB;AAED,WAASuX,EAAKnB,GAAS;AAKrB,aAJI7M,IAAI6M,IAAUgB,EAAK,WAAWA,EAAK,KAAK,KAAK,MAAMhB,IAAUgB,EAAK,QAAQ,KAAKA,EAAK,MAAM,QAAQE,CAAI,GAAGF,EAAK,QAAQR,IAAQ,IAC9H1X,IAAI,IACJgB,IAAImX,EAAM,QAEP,EAAEnY,IAAIgB;AACX,MAAAmX,EAAMnY,CAAC,EAAE,KAAKkB,GAAMmJ,CAAC;AAIvB,IAAI6N,EAAK,UAAUR,OACjBQ,EAAK,GAAG,KAAK,OAAOhX,GAAMA,EAAK,UAAUgX,EAAK,OAAOA,EAAK,KAAK,GAC/DE;EAEH;AAED,WAASA,IAAO;AACd,IAAAF,EAAK,QAAQP,IACbO,EAAK,MAAM,QACX,OAAOF,EAAUH,CAAE;AACnB,aAAS7X,KAAKgY;AAAW;AACzB,WAAO9W,EAAK;AAAA,EACb;AACH;ACtJe,SAAAoX,GAASpX,GAAMpB,GAAM;AAClC,MAAIkY,IAAY9W,EAAK,cACjB0W,GACAW,GACAhX,IAAQ,IACRvB;AAEJ,MAAKgY,GAEL;AAAA,IAAAlY,IAAOA,KAAQ,OAAO,OAAOA,IAAO;AAEpC,SAAKE,KAAKgY,GAAW;AACnB,WAAKJ,IAAWI,EAAUhY,CAAC,GAAG,SAASF,GAAM;AAAE,QAAAyB,IAAQ;AAAO;AAAA,MAAW;AACzE,MAAAgX,IAASX,EAAS,QAAQL,MAAYK,EAAS,QAAQF,IACvDE,EAAS,QAAQD,IACjBC,EAAS,MAAM,QACfA,EAAS,GAAG,KAAKW,IAAS,cAAc,UAAUrX,GAAMA,EAAK,UAAU0W,EAAS,OAAOA,EAAS,KAAK,GACrG,OAAOI,EAAUhY,CAAC;AAAA,IACnB;AAED,IAAIuB,KAAO,OAAOL,EAAK;AAAA;AACzB;ACrBe,SAAQsX,GAAC1Y,GAAM;AAC5B,SAAO,KAAK,KAAK,WAAW;AAC1B,IAAAwY,GAAU,MAAMxY,CAAI;AAAA,EACxB,CAAG;AACH;ACJA,SAAS2Y,GAAYZ,GAAI/X,GAAM;AAC7B,MAAI4Y,GAAQC;AACZ,SAAO,WAAW;AAChB,QAAIf,IAAWxL,GAAI,MAAMyL,CAAE,GACvBM,IAAQP,EAAS;AAKrB,QAAIO,MAAUO,GAAQ;AACpB,MAAAC,IAASD,IAASP;AAClB,eAASnY,IAAI,GAAGgB,IAAI2X,EAAO,QAAQ3Y,IAAIgB,GAAG,EAAEhB;AAC1C,YAAI2Y,EAAO3Y,CAAC,EAAE,SAASF,GAAM;AAC3B,UAAA6Y,IAASA,EAAO,SAChBA,EAAO,OAAO3Y,GAAG,CAAC;AAClB;AAAA,QACD;AAAA,IAEJ;AAED,IAAA4X,EAAS,QAAQe;AAAA,EACrB;AACA;AAEA,SAASC,GAAcf,GAAI/X,GAAM+D,GAAO;AACtC,MAAI6U,GAAQC;AACZ,MAAI,OAAO9U,KAAU;AAAY,UAAM,IAAI;AAC3C,SAAO,WAAW;AAChB,QAAI+T,IAAWxL,GAAI,MAAMyL,CAAE,GACvBM,IAAQP,EAAS;AAKrB,QAAIO,MAAUO,GAAQ;AACpB,MAAAC,KAAUD,IAASP,GAAO,MAAK;AAC/B,eAAS9N,IAAI,EAAC,MAAMvK,GAAM,OAAO+D,EAAK,GAAG7D,IAAI,GAAGgB,IAAI2X,EAAO,QAAQ3Y,IAAIgB,GAAG,EAAEhB;AAC1E,YAAI2Y,EAAO3Y,CAAC,EAAE,SAASF,GAAM;AAC3B,UAAA6Y,EAAO3Y,CAAC,IAAIqK;AACZ;AAAA,QACD;AAEH,MAAIrK,MAAMgB,KAAG2X,EAAO,KAAKtO,CAAC;AAAA,IAC3B;AAED,IAAAuN,EAAS,QAAQe;AAAA,EACrB;AACA;AAEe,SAAAE,GAAS/Y,GAAM+D,GAAO;AACnC,MAAIgU,IAAK,KAAK;AAId,MAFA/X,KAAQ,IAEJ,UAAU,SAAS,GAAG;AAExB,aADIqY,IAAQhM,GAAI,KAAK,KAAI,GAAI0L,CAAE,EAAE,OACxB,IAAI,GAAG7W,IAAImX,EAAM,QAAQ9N,GAAG,IAAIrJ,GAAG,EAAE;AAC5C,WAAKqJ,IAAI8N,EAAM,CAAC,GAAG,SAASrY;AAC1B,eAAOuK,EAAE;AAGb,WAAO;AAAA,EACR;AAED,SAAO,KAAK,MAAMxG,KAAS,OAAO4U,KAAcG,IAAef,GAAI/X,GAAM+D,CAAK,CAAC;AACjF;AAEO,SAASiV,GAAWC,GAAYjZ,GAAM+D,GAAO;AAClD,MAAIgU,IAAKkB,EAAW;AAEpB,SAAAA,EAAW,KAAK,WAAW;AACzB,QAAInB,IAAWxL,GAAI,MAAMyL,CAAE;AAC3B,KAACD,EAAS,UAAUA,EAAS,QAAQ,CAAE,IAAG9X,CAAI,IAAI+D,EAAM,MAAM,MAAM,SAAS;AAAA,EACjF,CAAG,GAEM,SAAS3C,GAAM;AACpB,WAAOiL,GAAIjL,GAAM2W,CAAE,EAAE,MAAM/X,CAAI;AAAA,EACnC;AACA;AC7Ee,SAAAkZ,GAASpT,GAAGC,GAAG;AAC5B,MAAI2G;AACJ,UAAQ,OAAO3G,KAAM,WAAWsL,KAC1BtL,aAAawI,KAAQyC,MACpBtE,IAAI6B,GAAMxI,CAAC,MAAMA,IAAI2G,GAAGsE,MACzBU,IAAmB5L,GAAGC,CAAC;AAC/B;ACJA,SAASW,GAAW1G,GAAM;AACxB,SAAO,WAAW;AAChB,SAAK,gBAAgBA,CAAI;AAAA,EAC7B;AACA;AAEA,SAAS2G,GAAapG,GAAU;AAC9B,SAAO,WAAW;AAChB,SAAK,kBAAkBA,EAAS,OAAOA,EAAS,KAAK;AAAA,EACzD;AACA;AAEA,SAASqG,GAAa5G,GAAMkZ,GAAaC,GAAQ;AAC/C,MAAIC,GACAC,IAAUF,IAAS,IACnBG;AACJ,SAAO,WAAW;AAChB,QAAIC,IAAU,KAAK,aAAavZ,CAAI;AACpC,WAAOuZ,MAAYF,IAAU,OACvBE,MAAYH,IAAWE,IACvBA,IAAeJ,EAAYE,IAAWG,GAASJ,CAAM;AAAA,EAC/D;AACA;AAEA,SAAStS,GAAetG,GAAU2Y,GAAaC,GAAQ;AACrD,MAAIC,GACAC,IAAUF,IAAS,IACnBG;AACJ,SAAO,WAAW;AAChB,QAAIC,IAAU,KAAK,eAAehZ,EAAS,OAAOA,EAAS,KAAK;AAChE,WAAOgZ,MAAYF,IAAU,OACvBE,MAAYH,IAAWE,IACvBA,IAAeJ,EAAYE,IAAWG,GAASJ,CAAM;AAAA,EAC/D;AACA;AAEA,SAASrS,GAAa9G,GAAMkZ,GAAanV,GAAO;AAC9C,MAAIqV,GACAI,GACAF;AACJ,SAAO,WAAW;AAChB,QAAIC,GAASJ,IAASpV,EAAM,IAAI,GAAGsV;AACnC,WAAIF,KAAU,OAAa,KAAK,KAAK,gBAAgBnZ,CAAI,KACzDuZ,IAAU,KAAK,aAAavZ,CAAI,GAChCqZ,IAAUF,IAAS,IACZI,MAAYF,IAAU,OACvBE,MAAYH,KAAYC,MAAYG,IAAWF,KAC9CE,IAAWH,GAASC,IAAeJ,EAAYE,IAAWG,GAASJ,CAAM;AAAA,EACpF;AACA;AAEA,SAASnS,GAAezG,GAAU2Y,GAAanV,GAAO;AACpD,MAAIqV,GACAI,GACAF;AACJ,SAAO,WAAW;AAChB,QAAIC,GAASJ,IAASpV,EAAM,IAAI,GAAGsV;AACnC,WAAIF,KAAU,OAAa,KAAK,KAAK,kBAAkB5Y,EAAS,OAAOA,EAAS,KAAK,KACrFgZ,IAAU,KAAK,eAAehZ,EAAS,OAAOA,EAAS,KAAK,GAC5D8Y,IAAUF,IAAS,IACZI,MAAYF,IAAU,OACvBE,MAAYH,KAAYC,MAAYG,IAAWF,KAC9CE,IAAWH,GAASC,IAAeJ,EAAYE,IAAWG,GAASJ,CAAM;AAAA,EACpF;AACA;AAEe,SAAAM,GAASzZ,GAAM+D,GAAO;AACnC,MAAIxD,IAAWR,GAAUC,CAAI,GAAGE,IAAIK,MAAa,cAAcqS,KAAuBsG;AACtF,SAAO,KAAK,UAAUlZ,GAAM,OAAO+D,KAAU,cACtCxD,EAAS,QAAQyG,KAAiBF,IAAcvG,GAAUL,GAAG8Y,GAAW,MAAM,UAAUhZ,GAAM+D,CAAK,CAAC,IACrGA,KAAS,QAAQxD,EAAS,QAAQoG,KAAeD,IAAYnG,CAAQ,KACpEA,EAAS,QAAQsG,KAAiBD,IAAcrG,GAAUL,GAAG6D,CAAK,CAAC;AAC5E;AC3EA,SAAS2V,GAAgB1Z,GAAME,GAAG;AAChC,SAAO,SAASqK,GAAG;AACjB,SAAK,aAAavK,GAAME,EAAE,KAAK,MAAMqK,CAAC,CAAC;AAAA,EAC3C;AACA;AAEA,SAASoP,GAAkBpZ,GAAUL,GAAG;AACtC,SAAO,SAASqK,GAAG;AACjB,SAAK,eAAehK,EAAS,OAAOA,EAAS,OAAOL,EAAE,KAAK,MAAMqK,CAAC,CAAC;AAAA,EACvE;AACA;AAEA,SAASqP,GAAYrZ,GAAUwD,GAAO;AACpC,MAAIkT,GAAI3S;AACR,WAAS+T,IAAQ;AACf,QAAInY,IAAI6D,EAAM,MAAM,MAAM,SAAS;AACnC,WAAI7D,MAAMoE,MAAI2S,KAAM3S,IAAKpE,MAAMyZ,GAAkBpZ,GAAUL,CAAC,IACrD+W;AAAA,EACR;AACD,SAAAoB,EAAM,SAAStU,GACRsU;AACT;AAEA,SAASwB,GAAU7Z,GAAM+D,GAAO;AAC9B,MAAIkT,GAAI3S;AACR,WAAS+T,IAAQ;AACf,QAAInY,IAAI6D,EAAM,MAAM,MAAM,SAAS;AACnC,WAAI7D,MAAMoE,MAAI2S,KAAM3S,IAAKpE,MAAMwZ,GAAgB1Z,GAAME,CAAC,IAC/C+W;AAAA,EACR;AACD,SAAAoB,EAAM,SAAStU,GACRsU;AACT;AAEe,SAAAyB,GAAS9Z,GAAM+D,GAAO;AACnC,MAAIL,IAAM,UAAU1D;AACpB,MAAI,UAAU,SAAS;AAAG,YAAQ0D,IAAM,KAAK,MAAMA,CAAG,MAAMA,EAAI;AAChE,MAAIK,KAAS;AAAM,WAAO,KAAK,MAAML,GAAK,IAAI;AAC9C,MAAI,OAAOK,KAAU;AAAY,UAAM,IAAI;AAC3C,MAAIxD,IAAWR,GAAUC,CAAI;AAC7B,SAAO,KAAK,MAAM0D,IAAMnD,EAAS,QAAQqZ,KAAcC,IAAWtZ,GAAUwD,CAAK,CAAC;AACpF;ACzCA,SAASgW,GAAchC,GAAIhU,GAAO;AAChC,SAAO,WAAW;AAChB,IAAAoU,GAAK,MAAMJ,CAAE,EAAE,QAAQ,CAAChU,EAAM,MAAM,MAAM,SAAS;AAAA,EACvD;AACA;AAEA,SAASiW,GAAcjC,GAAIhU,GAAO;AAChC,SAAOA,IAAQ,CAACA,GAAO,WAAW;AAChC,IAAAoU,GAAK,MAAMJ,CAAE,EAAE,QAAQhU;AAAA,EAC3B;AACA;AAEe,SAAQkW,GAAClW,GAAO;AAC7B,MAAIgU,IAAK,KAAK;AAEd,SAAO,UAAU,SACX,KAAK,MAAM,OAAOhU,KAAU,aACxBgW,KACAC,IAAejC,GAAIhU,CAAK,CAAC,IAC7BsI,GAAI,KAAK,KAAM,GAAE0L,CAAE,EAAE;AAC7B;ACpBA,SAASmC,GAAiBnC,GAAIhU,GAAO;AACnC,SAAO,WAAW;AAChB,IAAAuI,GAAI,MAAMyL,CAAE,EAAE,WAAW,CAAChU,EAAM,MAAM,MAAM,SAAS;AAAA,EACzD;AACA;AAEA,SAASoW,GAAiBpC,GAAIhU,GAAO;AACnC,SAAOA,IAAQ,CAACA,GAAO,WAAW;AAChC,IAAAuI,GAAI,MAAMyL,CAAE,EAAE,WAAWhU;AAAA,EAC7B;AACA;AAEe,SAAQqW,GAACrW,GAAO;AAC7B,MAAIgU,IAAK,KAAK;AAEd,SAAO,UAAU,SACX,KAAK,MAAM,OAAOhU,KAAU,aACxBmW,KACAC,IAAkBpC,GAAIhU,CAAK,CAAC,IAChCsI,GAAI,KAAK,KAAM,GAAE0L,CAAE,EAAE;AAC7B;ACpBA,SAASsC,GAAatC,GAAIhU,GAAO;AAC/B,MAAI,OAAOA,KAAU;AAAY,UAAM,IAAI;AAC3C,SAAO,WAAW;AAChB,IAAAuI,GAAI,MAAMyL,CAAE,EAAE,OAAOhU;AAAA,EACzB;AACA;AAEe,SAAQuW,GAACvW,GAAO;AAC7B,MAAIgU,IAAK,KAAK;AAEd,SAAO,UAAU,SACX,KAAK,KAAKsC,GAAatC,GAAIhU,CAAK,CAAC,IACjCsI,GAAI,KAAK,KAAM,GAAE0L,CAAE,EAAE;AAC7B;ACbA,SAASwC,GAAYxC,GAAIhU,GAAO;AAC9B,SAAO,WAAW;AAChB,QAAIgD,IAAIhD,EAAM,MAAM,MAAM,SAAS;AACnC,QAAI,OAAOgD,KAAM;AAAY,YAAM,IAAI;AACvC,IAAAuF,GAAI,MAAMyL,CAAE,EAAE,OAAOhR;AAAA,EACzB;AACA;AAEe,SAAQyT,GAACzW,GAAO;AAC7B,MAAI,OAAOA,KAAU;AAAY,UAAM,IAAI;AAC3C,SAAO,KAAK,KAAKwW,GAAY,KAAK,KAAKxW,CAAK,CAAC;AAC/C;ACVe,SAAQ0W,GAACvY,GAAO;AAC7B,EAAI,OAAOA,KAAU,eAAYA,IAAQJ,GAAQI,CAAK;AAEtD,WAASrB,IAAS,KAAK,SAASC,IAAID,EAAO,QAAQE,IAAY,IAAI,MAAMD,CAAC,GAAGE,IAAI,GAAGA,IAAIF,GAAG,EAAEE;AAC3F,aAASC,IAAQJ,EAAOG,CAAC,GAAGE,IAAID,EAAM,QAAQE,IAAWJ,EAAUC,CAAC,IAAI,CAAA,GAAII,GAAMlB,IAAI,GAAGA,IAAIgB,GAAG,EAAEhB;AAChG,OAAKkB,IAAOH,EAAMf,CAAC,MAAMgC,EAAM,KAAKd,GAAMA,EAAK,UAAUlB,GAAGe,CAAK,KAC/DE,EAAS,KAAKC,CAAI;AAKxB,SAAO,IAAIsZ,GAAW3Z,GAAW,KAAK,UAAU,KAAK,OAAO,KAAK,GAAG;AACtE;ACbe,SAAQ4Z,GAAC1B,GAAY;AAClC,MAAIA,EAAW,QAAQ,KAAK;AAAK,UAAM,IAAI;AAE3C,WAAShU,IAAU,KAAK,SAASC,IAAU+T,EAAW,SAAS9T,IAAKF,EAAQ,QAAQG,IAAKF,EAAQ,QAAQpE,IAAI,KAAK,IAAIqE,GAAIC,CAAE,GAAGC,IAAS,IAAI,MAAMF,CAAE,GAAGnE,IAAI,GAAGA,IAAIF,GAAG,EAAEE;AACrK,aAASsE,IAASL,EAAQjE,CAAC,GAAGuE,IAASL,EAAQlE,CAAC,GAAGE,IAAIoE,EAAO,QAAQE,IAAQH,EAAOrE,CAAC,IAAI,IAAI,MAAME,CAAC,GAAGE,GAAMlB,IAAI,GAAGA,IAAIgB,GAAG,EAAEhB;AAC5H,OAAIkB,IAAOkE,EAAOpF,CAAC,KAAKqF,EAAOrF,CAAC,OAC9BsF,EAAMtF,CAAC,IAAIkB;AAKjB,SAAOJ,IAAImE,GAAI,EAAEnE;AACf,IAAAqE,EAAOrE,CAAC,IAAIiE,EAAQjE,CAAC;AAGvB,SAAO,IAAI0Z,GAAWrV,GAAQ,KAAK,UAAU,KAAK,OAAO,KAAK,GAAG;AACnE;AChBA,SAAS6L,GAAMlR,GAAM;AACnB,UAAQA,IAAO,IAAI,KAAM,EAAC,MAAM,OAAO,EAAE,MAAM,SAASuK,GAAG;AACzD,QAAIrK,IAAIqK,EAAE,QAAQ,GAAG;AACrB,WAAIrK,KAAK,MAAGqK,IAAIA,EAAE,MAAM,GAAGrK,CAAC,IACrB,CAACqK,KAAKA,MAAM;AAAA,EACvB,CAAG;AACH;AAEA,SAASqQ,GAAW7C,GAAI/X,GAAMmK,GAAU;AACtC,MAAI0Q,GAAKC,GAAKC,IAAM7J,GAAMlR,CAAI,IAAImY,KAAO7L;AACzC,SAAO,WAAW;AAChB,QAAIwL,IAAWiD,EAAI,MAAMhD,CAAE,GACvBrN,IAAKoN,EAAS;AAKlB,IAAIpN,MAAOmQ,MAAMC,KAAOD,IAAMnQ,GAAI,QAAQ,GAAG1K,GAAMmK,CAAQ,GAE3D2N,EAAS,KAAKgD;AAAA,EAClB;AACA;AAEe,SAAAE,GAAShb,GAAMmK,GAAU;AACtC,MAAI4N,IAAK,KAAK;AAEd,SAAO,UAAU,SAAS,IACpB1L,GAAI,KAAK,KAAM,GAAE0L,CAAE,EAAE,GAAG,GAAG/X,CAAI,IAC/B,KAAK,KAAK4a,GAAW7C,GAAI/X,GAAMmK,CAAQ,CAAC;AAChD;AC/BA,SAAS8Q,GAAelD,GAAI;AAC1B,SAAO,WAAW;AAChB,QAAIjV,IAAS,KAAK;AAClB,aAAS5C,KAAK,KAAK;AAAc,UAAI,CAACA,MAAM6X;AAAI;AAChD,IAAIjV,KAAQA,EAAO,YAAY,IAAI;AAAA,EACvC;AACA;AAEe,SAAAoY,KAAW;AACxB,SAAO,KAAK,GAAG,cAAcD,GAAe,KAAK,GAAG,CAAC;AACvD;ACNe,SAAQE,GAACva,GAAQ;AAC9B,MAAIZ,IAAO,KAAK,OACZ+X,IAAK,KAAK;AAEd,EAAI,OAAOnX,KAAW,eAAYA,IAASF,GAASE,CAAM;AAE1D,WAASC,IAAS,KAAK,SAASC,IAAID,EAAO,QAAQE,IAAY,IAAI,MAAMD,CAAC,GAAGE,IAAI,GAAGA,IAAIF,GAAG,EAAEE;AAC3F,aAASC,IAAQJ,EAAOG,CAAC,GAAGE,IAAID,EAAM,QAAQE,IAAWJ,EAAUC,CAAC,IAAI,IAAI,MAAME,CAAC,GAAGE,GAAMC,GAASnB,IAAI,GAAGA,IAAIgB,GAAG,EAAEhB;AACnH,OAAKkB,IAAOH,EAAMf,CAAC,OAAOmB,IAAUT,EAAO,KAAKQ,GAAMA,EAAK,UAAUlB,GAAGe,CAAK,OACvE,cAAcG,MAAMC,EAAQ,WAAWD,EAAK,WAChDD,EAASjB,CAAC,IAAImB,GACdyW,GAAS3W,EAASjB,CAAC,GAAGF,GAAM+X,GAAI7X,GAAGiB,GAAUkL,GAAIjL,GAAM2W,CAAE,CAAC;AAKhE,SAAO,IAAI2C,GAAW3Z,GAAW,KAAK,UAAUf,GAAM+X,CAAE;AAC1D;ACjBe,SAAQqD,GAACxa,GAAQ;AAC9B,MAAIZ,IAAO,KAAK,OACZ+X,IAAK,KAAK;AAEd,EAAI,OAAOnX,KAAW,eAAYA,IAASc,GAAYd,CAAM;AAE7D,WAASC,IAAS,KAAK,SAASC,IAAID,EAAO,QAAQE,IAAY,CAAE,GAAEc,IAAU,CAAE,GAAEb,IAAI,GAAGA,IAAIF,GAAG,EAAEE;AAC/F,aAASC,IAAQJ,EAAOG,CAAC,GAAGE,IAAID,EAAM,QAAQG,GAAMlB,IAAI,GAAGA,IAAIgB,GAAG,EAAEhB;AAClE,UAAIkB,IAAOH,EAAMf,CAAC,GAAG;AACnB,iBAASoC,IAAW1B,EAAO,KAAKQ,GAAMA,EAAK,UAAUlB,GAAGe,CAAK,GAAG+B,GAAOqY,IAAUhP,GAAIjL,GAAM2W,CAAE,GAAGtI,IAAI,GAAGV,IAAIzM,EAAS,QAAQmN,IAAIV,GAAG,EAAEU;AACnI,WAAIzM,IAAQV,EAASmN,CAAC,MACpBqI,GAAS9U,GAAOhD,GAAM+X,GAAItI,GAAGnN,GAAU+Y,CAAO;AAGlD,QAAAta,EAAU,KAAKuB,CAAQ,GACvBT,EAAQ,KAAKT,CAAI;AAAA,MAClB;AAIL,SAAO,IAAIsZ,GAAW3Z,GAAWc,GAAS7B,GAAM+X,CAAE;AACpD;ACvBA,IAAIzW,KAAY0D,GAAU,UAAU;AAErB,SAAAsW,KAAW;AACxB,SAAO,IAAIha,GAAU,KAAK,SAAS,KAAK,QAAQ;AAClD;ACAA,SAASia,GAAUvb,GAAMkZ,GAAa;AACpC,MAAIE,GACAI,GACAF;AACJ,SAAO,WAAW;AAChB,QAAIC,IAAUiC,GAAM,MAAMxb,CAAI,GAC1BqZ,KAAW,KAAK,MAAM,eAAerZ,CAAI,GAAGwb,GAAM,MAAMxb,CAAI;AAChE,WAAOuZ,MAAYF,IAAU,OACvBE,MAAYH,KAAYC,MAAYG,IAAWF,IAC/CA,IAAeJ,EAAYE,IAAWG,GAASC,IAAWH,CAAO;AAAA,EAC3E;AACA;AAEA,SAASlS,GAAYnH,GAAM;AACzB,SAAO,WAAW;AAChB,SAAK,MAAM,eAAeA,CAAI;AAAA,EAClC;AACA;AAEA,SAASoH,GAAcpH,GAAMkZ,GAAaC,GAAQ;AAChD,MAAIC,GACAC,IAAUF,IAAS,IACnBG;AACJ,SAAO,WAAW;AAChB,QAAIC,IAAUiC,GAAM,MAAMxb,CAAI;AAC9B,WAAOuZ,MAAYF,IAAU,OACvBE,MAAYH,IAAWE,IACvBA,IAAeJ,EAAYE,IAAWG,GAASJ,CAAM;AAAA,EAC/D;AACA;AAEA,SAAS7R,GAActH,GAAMkZ,GAAanV,GAAO;AAC/C,MAAIqV,GACAI,GACAF;AACJ,SAAO,WAAW;AAChB,QAAIC,IAAUiC,GAAM,MAAMxb,CAAI,GAC1BmZ,IAASpV,EAAM,IAAI,GACnBsV,IAAUF,IAAS;AACvB,WAAIA,KAAU,SAAME,IAAUF,KAAU,KAAK,MAAM,eAAenZ,CAAI,GAAGwb,GAAM,MAAMxb,CAAI,KAClFuZ,MAAYF,IAAU,OACvBE,MAAYH,KAAYC,MAAYG,IAAWF,KAC9CE,IAAWH,GAASC,IAAeJ,EAAYE,IAAWG,GAASJ,CAAM;AAAA,EACpF;AACA;AAEA,SAASsC,GAAiB1D,GAAI/X,GAAM;AAClC,MAAI6a,GAAKC,GAAKY,GAAWhY,IAAM,WAAW1D,GAAMoK,IAAQ,SAAS1G,GAAKgG;AACtE,SAAO,WAAW;AAChB,QAAIoO,IAAWxL,GAAI,MAAMyL,CAAE,GACvBrN,IAAKoN,EAAS,IACd3N,IAAW2N,EAAS,MAAMpU,CAAG,KAAK,OAAOgG,MAAWA,IAASvC,GAAYnH,CAAI,KAAK;AAKtF,KAAI0K,MAAOmQ,KAAOa,MAAcvR,OAAW2Q,KAAOD,IAAMnQ,GAAI,KAAM,GAAE,GAAGN,GAAOsR,IAAYvR,CAAQ,GAElG2N,EAAS,KAAKgD;AAAA,EAClB;AACA;AAEe,SAAAa,GAAS3b,GAAM+D,GAAOsD,GAAU;AAC7C,MAAInH,KAAKF,KAAQ,OAAQ,cAAc4S,KAAuBsG;AAC9D,SAAOnV,KAAS,OAAO,KAClB,WAAW/D,GAAMub,GAAUvb,GAAME,CAAC,CAAC,EACnC,GAAG,eAAeF,GAAMmH,GAAYnH,CAAI,CAAC,IAC1C,OAAO+D,KAAU,aAAa,KAC7B,WAAW/D,GAAMsH,GAActH,GAAME,GAAG8Y,GAAW,MAAM,WAAWhZ,GAAM+D,CAAK,CAAC,CAAC,EACjF,KAAK0X,GAAiB,KAAK,KAAKzb,CAAI,CAAC,IACtC,KACC,WAAWA,GAAMoH,GAAcpH,GAAME,GAAG6D,CAAK,GAAGsD,CAAQ,EACxD,GAAG,eAAerH,GAAM,IAAI;AACnC;AC/EA,SAAS4b,GAAiB5b,GAAME,GAAGmH,GAAU;AAC3C,SAAO,SAASkD,GAAG;AACjB,SAAK,MAAM,YAAYvK,GAAME,EAAE,KAAK,MAAMqK,CAAC,GAAGlD,CAAQ;AAAA,EAC1D;AACA;AAEA,SAASwU,GAAW7b,GAAM+D,GAAOsD,GAAU;AACzC,MAAIkD,GAAGjG;AACP,WAAS+T,IAAQ;AACf,QAAInY,IAAI6D,EAAM,MAAM,MAAM,SAAS;AACnC,WAAI7D,MAAMoE,MAAIiG,KAAKjG,IAAKpE,MAAM0b,GAAiB5b,GAAME,GAAGmH,CAAQ,IACzDkD;AAAA,EACR;AACD,SAAA8N,EAAM,SAAStU,GACRsU;AACT;AAEe,SAAAyD,GAAS9b,GAAM+D,GAAOsD,GAAU;AAC7C,MAAI3D,IAAM,YAAY1D,KAAQ;AAC9B,MAAI,UAAU,SAAS;AAAG,YAAQ0D,IAAM,KAAK,MAAMA,CAAG,MAAMA,EAAI;AAChE,MAAIK,KAAS;AAAM,WAAO,KAAK,MAAML,GAAK,IAAI;AAC9C,MAAI,OAAOK,KAAU;AAAY,UAAM,IAAI;AAC3C,SAAO,KAAK,MAAML,GAAKmY,GAAW7b,GAAM+D,GAAOsD,KAAmB,EAAa,CAAC;AAClF;ACrBA,SAASqB,GAAa3E,GAAO;AAC3B,SAAO,WAAW;AAChB,SAAK,cAAcA;AAAA,EACvB;AACA;AAEA,SAAS4E,GAAa5E,GAAO;AAC3B,SAAO,WAAW;AAChB,QAAIoV,IAASpV,EAAM,IAAI;AACvB,SAAK,cAAcoV,KAAiB;AAAA,EACxC;AACA;AAEe,SAAQ4C,GAAChY,GAAO;AAC7B,SAAO,KAAK,MAAM,QAAQ,OAAOA,KAAU,aACrC4E,GAAaqQ,GAAW,MAAM,QAAQjV,CAAK,CAAC,IAC5C2E,GAAa3E,KAAS,OAAO,KAAKA,IAAQ,EAAE,CAAC;AACrD;ACnBA,SAASiY,GAAgB9b,GAAG;AAC1B,SAAO,SAASqK,GAAG;AACjB,SAAK,cAAcrK,EAAE,KAAK,MAAMqK,CAAC;AAAA,EACrC;AACA;AAEA,SAAS0R,GAAUlY,GAAO;AACxB,MAAIkT,GAAI3S;AACR,WAAS+T,IAAQ;AACf,QAAI,IAAItU,EAAM,MAAM,MAAM,SAAS;AACnC,WAAI,MAAMO,MAAI2S,KAAM3S,IAAK,MAAM0X,GAAgB,CAAC,IACzC/E;AAAA,EACR;AACD,SAAAoB,EAAM,SAAStU,GACRsU;AACT;AAEe,SAAQ6D,GAACnY,GAAO;AAC7B,MAAIL,IAAM;AACV,MAAI,UAAU,SAAS;AAAG,YAAQA,IAAM,KAAK,MAAMA,CAAG,MAAMA,EAAI;AAChE,MAAIK,KAAS;AAAM,WAAO,KAAK,MAAML,GAAK,IAAI;AAC9C,MAAI,OAAOK,KAAU;AAAY,UAAM,IAAI;AAC3C,SAAO,KAAK,MAAML,GAAKuY,GAAUlY,CAAK,CAAC;AACzC;ACpBe,SAAAoY,KAAW;AAKxB,WAJInc,IAAO,KAAK,OACZoc,IAAM,KAAK,KACXC,IAAMC,GAAK,GAENzb,IAAS,KAAK,SAASC,IAAID,EAAO,QAAQG,IAAI,GAAGA,IAAIF,GAAG,EAAEE;AACjE,aAASC,IAAQJ,EAAOG,CAAC,GAAGE,IAAID,EAAM,QAAQG,GAAMlB,IAAI,GAAGA,IAAIgB,GAAG,EAAEhB;AAClE,UAAIkB,IAAOH,EAAMf,CAAC,GAAG;AACnB,YAAImb,IAAUhP,GAAIjL,GAAMgb,CAAG;AAC3B,QAAAtE,GAAS1W,GAAMpB,GAAMqc,GAAKnc,GAAGe,GAAO;AAAA,UAClC,MAAMoa,EAAQ,OAAOA,EAAQ,QAAQA,EAAQ;AAAA,UAC7C,OAAO;AAAA,UACP,UAAUA,EAAQ;AAAA,UAClB,MAAMA,EAAQ;AAAA,QACxB,CAAS;AAAA,MACF;AAIL,SAAO,IAAIX,GAAW7Z,GAAQ,KAAK,UAAUb,GAAMqc,CAAG;AACxD;ACrBe,SAAAE,KAAW;AACxB,MAAI1B,GAAKC,GAAKtO,IAAO,MAAMuL,IAAKvL,EAAK,KAAKjG,IAAOiG,EAAK,KAAI;AAC1D,SAAO,IAAI,QAAQ,SAASgQ,GAASC,GAAQ;AAC3C,QAAIC,IAAS,EAAC,OAAOD,EAAM,GACvBtL,IAAM,EAAC,OAAO,WAAW;AAAE,MAAI,EAAE5K,MAAS,KAAGiW;IAAU,EAAE;AAE7D,IAAAhQ,EAAK,KAAK,WAAW;AACnB,UAAIsL,IAAWxL,GAAI,MAAMyL,CAAE,GACvBrN,IAAKoN,EAAS;AAKlB,MAAIpN,MAAOmQ,MACTC,KAAOD,IAAMnQ,GAAI,KAAI,GACrBoQ,EAAI,EAAE,OAAO,KAAK4B,CAAM,GACxB5B,EAAI,EAAE,UAAU,KAAK4B,CAAM,GAC3B5B,EAAI,EAAE,IAAI,KAAK3J,CAAG,IAGpB2G,EAAS,KAAKgD;AAAA,IACpB,CAAK,GAGGvU,MAAS,KAAGiW;EACpB,CAAG;AACH;ACNA,IAAIzE,KAAK;AAEF,SAAS2C,GAAW7Z,GAAQgB,GAAS7B,GAAM+X,GAAI;AACpD,OAAK,UAAUlX,GACf,KAAK,WAAWgB,GAChB,KAAK,QAAQ7B,GACb,KAAK,MAAM+X;AACb;AAMO,SAASuE,KAAQ;AACtB,SAAO,EAAEvE;AACX;AAEA,IAAI4E,KAAsB3X,GAAU;AAEpC0V,GAAW,YAAmC;AAAA,EAC5C,aAAaA;AAAA,EACb,QAAQS;AAAA,EACR,WAAWC;AAAA,EACX,aAAauB,GAAoB;AAAA,EACjC,gBAAgBA,GAAoB;AAAA,EACpC,QAAQlC;AAAA,EACR,OAAOE;AAAA,EACP,WAAWW;AAAA,EACX,YAAYa;AAAA,EACZ,MAAMQ,GAAoB;AAAA,EAC1B,OAAOA,GAAoB;AAAA,EAC3B,MAAMA,GAAoB;AAAA,EAC1B,MAAMA,GAAoB;AAAA,EAC1B,OAAOA,GAAoB;AAAA,EAC3B,MAAMA,GAAoB;AAAA,EAC1B,IAAI3B;AAAA,EACJ,MAAMvB;AAAA,EACN,WAAWK;AAAA,EACX,OAAO6B;AAAA,EACP,YAAYG;AAAA,EACZ,MAAMC;AAAA,EACN,WAAWG;AAAA,EACX,QAAQhB;AAAA,EACR,OAAOnC;AAAA,EACP,OAAOkB;AAAA,EACP,UAAUG;AAAA,EACV,MAAME;AAAA,EACN,aAAaE;AAAA,EACb,KAAK+B;AAAA,EACL,CAAC,OAAO,QAAQ,GAAGI,GAAoB,OAAO,QAAQ;AACxD;ACnEA,IAAIC,KAAgB;AAAA,EAClB,MAAM;AAAA;AAAA,EACN,OAAO;AAAA,EACP,UAAU;AAAA,EACV,MAAMC;AACR;AAEA,SAASxB,GAAQja,GAAM2W,GAAI;AAEzB,WADIE,GACG,EAAEA,IAAS7W,EAAK,iBAAiB,EAAE6W,IAASA,EAAOF,CAAE;AAC1D,QAAI,EAAE3W,IAAOA,EAAK;AAChB,YAAM,IAAI,MAAM,cAAc2W,CAAE,YAAY;AAGhD,SAAOE;AACT;AAEe,SAAQ6E,GAAC9c,GAAM;AAC5B,MAAI+X,GACAE;AAEJ,EAAIjY,aAAgB0a,MAClB3C,IAAK/X,EAAK,KAAKA,IAAOA,EAAK,UAE3B+X,IAAKuE,GAAO,IAAGrE,IAAS2E,IAAe,OAAOtG,MAAOtW,IAAOA,KAAQ,OAAO,OAAOA,IAAO;AAG3F,WAASa,IAAS,KAAK,SAASC,IAAID,EAAO,QAAQG,IAAI,GAAGA,IAAIF,GAAG,EAAEE;AACjE,aAASC,IAAQJ,EAAOG,CAAC,GAAGE,IAAID,EAAM,QAAQG,GAAMlB,IAAI,GAAGA,IAAIgB,GAAG,EAAEhB;AAClE,OAAIkB,IAAOH,EAAMf,CAAC,MAChB4X,GAAS1W,GAAMpB,GAAM+X,GAAI7X,GAAGe,GAAOgX,KAAUoD,GAAQja,GAAM2W,CAAE,CAAC;AAKpE,SAAO,IAAI2C,GAAW7Z,GAAQ,KAAK,UAAUb,GAAM+X,CAAE;AACvD;ACrCA/S,GAAU,UAAU,YAAY0T;AAChC1T,GAAU,UAAU,aAAa8X;ACLjC,MAAe7Y,KAAA,CAAAzC,MAAK,MAAMA;ACAX,SAASub,GAAU/R,GAAM;AAAA,EACtC,aAAAU;AAAA,EACA,QAAAsR;AAAA,EACA,WAAAC;AAAA,EACA,UAAAjR;AACF,GAAG;AACD,SAAO,iBAAiB,MAAM;AAAA,IAC5B,MAAM,EAAC,OAAOhB,GAAM,YAAY,IAAM,cAAc,GAAI;AAAA,IACxD,aAAa,EAAC,OAAOU,GAAa,YAAY,IAAM,cAAc,GAAI;AAAA,IACtE,QAAQ,EAAC,OAAOsR,GAAQ,YAAY,IAAM,cAAc,GAAI;AAAA,IAC5D,WAAW,EAAC,OAAOC,GAAW,YAAY,IAAM,cAAc,GAAI;AAAA,IAClE,GAAG,EAAC,OAAOjR,EAAQ;AAAA,EACvB,CAAG;AACH;ACbO,SAASkR,GAAUzN,GAAGjO,GAAGqP,GAAG;AACjC,OAAK,IAAIpB,GACT,KAAK,IAAIjO,GACT,KAAK,IAAIqP;AACX;AAEAqM,GAAU,YAAY;AAAA,EACpB,aAAaA;AAAA,EACb,OAAO,SAASzN,GAAG;AACjB,WAAOA,MAAM,IAAI,OAAO,IAAIyN,GAAU,KAAK,IAAIzN,GAAG,KAAK,GAAG,KAAK,CAAC;AAAA,EACjE;AAAA,EACD,WAAW,SAASjO,GAAGqP,GAAG;AACxB,WAAOrP,MAAM,IAAIqP,MAAM,IAAI,OAAO,IAAIqM,GAAU,KAAK,GAAG,KAAK,IAAI,KAAK,IAAI1b,GAAG,KAAK,IAAI,KAAK,IAAIqP,CAAC;AAAA,EACjG;AAAA,EACD,OAAO,SAAShF,GAAO;AACrB,WAAO,CAACA,EAAM,CAAC,IAAI,KAAK,IAAI,KAAK,GAAGA,EAAM,CAAC,IAAI,KAAK,IAAI,KAAK,CAAC;AAAA,EAC/D;AAAA,EACD,QAAQ,SAASrK,GAAG;AAClB,WAAOA,IAAI,KAAK,IAAI,KAAK;AAAA,EAC1B;AAAA,EACD,QAAQ,SAASqP,GAAG;AAClB,WAAOA,IAAI,KAAK,IAAI,KAAK;AAAA,EAC1B;AAAA,EACD,QAAQ,SAASsM,GAAU;AACzB,WAAO,EAAEA,EAAS,CAAC,IAAI,KAAK,KAAK,KAAK,IAAIA,EAAS,CAAC,IAAI,KAAK,KAAK,KAAK,CAAC;AAAA,EACzE;AAAA,EACD,SAAS,SAAS3b,GAAG;AACnB,YAAQA,IAAI,KAAK,KAAK,KAAK;AAAA,EAC5B;AAAA,EACD,SAAS,SAASqP,GAAG;AACnB,YAAQA,IAAI,KAAK,KAAK,KAAK;AAAA,EAC5B;AAAA,EACD,UAAU,SAASrP,GAAG;AACpB,WAAOA,EAAE,KAAM,EAAC,OAAOA,EAAE,MAAK,EAAG,IAAI,KAAK,SAAS,IAAI,EAAE,IAAIA,EAAE,QAAQA,CAAC,CAAC;AAAA,EAC1E;AAAA,EACD,UAAU,SAASqP,GAAG;AACpB,WAAOA,EAAE,KAAM,EAAC,OAAOA,EAAE,MAAK,EAAG,IAAI,KAAK,SAAS,IAAI,EAAE,IAAIA,EAAE,QAAQA,CAAC,CAAC;AAAA,EAC1E;AAAA,EACD,UAAU,WAAW;AACnB,WAAO,eAAe,KAAK,IAAI,MAAM,KAAK,IAAI,aAAa,KAAK,IAAI;AAAA,EACrE;AACH;AAEO,IAAIqB,KAAW,IAAIgL,GAAU,GAAG,GAAG,CAAC;AAErBA,GAAU;AC7CzB,SAASE,GAAchT,GAAO;AACnC,EAAAA,EAAM,yBAAwB;AAChC;AAEe,SAAQ2C,GAAC3C,GAAO;AAC7B,EAAAA,EAAM,eAAc,GACpBA,EAAM,yBAAwB;AAChC;ACKA,SAASiT,GAAcjT,GAAO;AAC5B,UAAQ,CAACA,EAAM,WAAWA,EAAM,SAAS,YAAY,CAACA,EAAM;AAC9D;AAEA,SAASkT,KAAgB;AACvB,MAAIlL,IAAI;AACR,SAAIA,aAAa,cACfA,IAAIA,EAAE,mBAAmBA,GACrBA,EAAE,aAAa,SAAS,KAC1BA,IAAIA,EAAE,QAAQ,SACP,CAAC,CAACA,EAAE,GAAGA,EAAE,CAAC,GAAG,CAACA,EAAE,IAAIA,EAAE,OAAOA,EAAE,IAAIA,EAAE,MAAM,CAAC,KAE9C,CAAC,CAAC,GAAG,CAAC,GAAG,CAACA,EAAE,MAAM,QAAQ,OAAOA,EAAE,OAAO,QAAQ,KAAK,CAAC,KAE1D,CAAC,CAAC,GAAG,CAAC,GAAG,CAACA,EAAE,aAAaA,EAAE,YAAY,CAAC;AACjD;AAEA,SAASmL,KAAmB;AAC1B,SAAO,KAAK,UAAUrL;AACxB;AAEA,SAASsL,GAAkBpT,GAAO;AAChC,SAAO,CAACA,EAAM,UAAUA,EAAM,cAAc,IAAI,OAAOA,EAAM,YAAY,IAAI,SAAUA,EAAM,UAAU,KAAK;AAC9G;AAEA,SAASqT,KAAmB;AAC1B,SAAO,UAAU,kBAAmB,kBAAkB;AACxD;AAEA,SAASC,GAAiBT,GAAWU,GAAQC,GAAiB;AAC5D,MAAIC,IAAMZ,EAAU,QAAQU,EAAO,CAAC,EAAE,CAAC,CAAC,IAAIC,EAAgB,CAAC,EAAE,CAAC,GAC5DE,IAAMb,EAAU,QAAQU,EAAO,CAAC,EAAE,CAAC,CAAC,IAAIC,EAAgB,CAAC,EAAE,CAAC,GAC5DG,IAAMd,EAAU,QAAQU,EAAO,CAAC,EAAE,CAAC,CAAC,IAAIC,EAAgB,CAAC,EAAE,CAAC,GAC5DI,IAAMf,EAAU,QAAQU,EAAO,CAAC,EAAE,CAAC,CAAC,IAAIC,EAAgB,CAAC,EAAE,CAAC;AAChE,SAAOX,EAAU;AAAA,IACfa,IAAMD,KAAOA,IAAMC,KAAO,IAAI,KAAK,IAAI,GAAGD,CAAG,KAAK,KAAK,IAAI,GAAGC,CAAG;AAAA,IACjEE,IAAMD,KAAOA,IAAMC,KAAO,IAAI,KAAK,IAAI,GAAGD,CAAG,KAAK,KAAK,IAAI,GAAGC,CAAG;AAAA,EACrE;AACA;AAEe,SAAAC,KAAW;AACxB,MAAI5b,IAASgb,IACTM,IAASL,IACTY,IAAYR,IACZS,IAAaX,IACbY,IAAYX,IACZY,IAAc,CAAC,GAAG,KAAQ,GAC1BT,IAAkB,CAAC,CAAC,QAAW,MAAS,GAAG,CAAC,OAAU,KAAQ,CAAC,GAC/DU,IAAW,KACXpF,IAAcnF,IACdwK,IAAYvS,GAAS,SAAS,QAAQ,KAAK,GAC3CwS,GACAC,GACAC,GACAC,IAAa,KACbC,IAAa,KACbC,IAAiB,GACjBC,IAAc;AAElB,WAAS1K,EAAKpP,GAAW;AACvB,IAAAA,EACK,SAAS,UAAUuY,EAAgB,EACnC,GAAG,cAAcwB,GAAS,EAAC,SAAS,GAAK,CAAC,EAC1C,GAAG,kBAAkBC,CAAW,EAChC,GAAG,iBAAiBC,CAAU,EAChC,OAAOb,CAAS,EACd,GAAG,mBAAmBc,CAAY,EAClC,GAAG,kBAAkBC,CAAU,EAC/B,GAAG,kCAAkCC,CAAU,EAC/C,MAAM,+BAA+B,eAAe;AAAA,EAC1D;AAED,EAAAhL,EAAK,YAAY,SAASiL,GAAYpC,GAAWpR,GAAOzB,GAAO;AAC7D,QAAIpF,IAAYqa,EAAW,YAAYA,EAAW,UAAW,IAAGA;AAChE,IAAAra,EAAU,SAAS,UAAUuY,EAAgB,GACzC8B,MAAera,IACjB8S,EAASuH,GAAYpC,GAAWpR,GAAOzB,CAAK,IAE5CpF,EAAU,YAAY,KAAK,WAAW;AACpC,MAAAsa,EAAQ,MAAM,SAAS,EACpB,MAAMlV,CAAK,EACX,MAAO,EACP,KAAK,MAAM,OAAO6S,KAAc,aAAaA,EAAU,MAAM,MAAM,SAAS,IAAIA,CAAS,EACzF;IACX,CAAO;AAAA,EAEP,GAEE7I,EAAK,UAAU,SAASpP,GAAWyK,GAAG8P,GAAGnV,GAAO;AAC9C,IAAAgK,EAAK,QAAQpP,GAAW,WAAW;AACjC,UAAIwa,IAAK,KAAK,OAAO,GACjBC,IAAK,OAAOhQ,KAAM,aAAaA,EAAE,MAAM,MAAM,SAAS,IAAIA;AAC9D,aAAO+P,IAAKC;AAAA,IAClB,GAAOF,GAAGnV,CAAK;AAAA,EACf,GAEEgK,EAAK,UAAU,SAASpP,GAAWyK,GAAG8P,GAAGnV,GAAO;AAC9C,IAAAgK,EAAK,UAAUpP,GAAW,WAAW;AACnC,UAAIoN,IAAIuL,EAAO,MAAM,MAAM,SAAS,GAChC1G,IAAK,KAAK,QACV5C,IAAKkL,KAAK,OAAOG,EAAStN,CAAC,IAAI,OAAOmN,KAAM,aAAaA,EAAE,MAAM,MAAM,SAAS,IAAIA,GACpFjL,IAAK2C,EAAG,OAAO5C,CAAE,GACjBoL,IAAK,OAAOhQ,KAAM,aAAaA,EAAE,MAAM,MAAM,SAAS,IAAIA;AAC9D,aAAOyO,EAAUhL,EAAUM,EAAMyD,GAAIwI,CAAE,GAAGpL,GAAIC,CAAE,GAAGlC,GAAGwL,CAAe;AAAA,IAC3E,GAAO2B,GAAGnV,CAAK;AAAA,EACf,GAEEgK,EAAK,cAAc,SAASpP,GAAWxD,GAAGqP,GAAGzG,GAAO;AAClD,IAAAgK,EAAK,UAAUpP,GAAW,WAAW;AACnC,aAAOkZ,EAAU,KAAK,OAAO;AAAA,QAC3B,OAAO1c,KAAM,aAAaA,EAAE,MAAM,MAAM,SAAS,IAAIA;AAAA,QACrD,OAAOqP,KAAM,aAAaA,EAAE,MAAM,MAAM,SAAS,IAAIA;AAAA,MAC7D,GAAS8M,EAAO,MAAM,MAAM,SAAS,GAAGC,CAAe;AAAA,IACvD,GAAO,MAAMxT,CAAK;AAAA,EAClB,GAEEgK,EAAK,cAAc,SAASpP,GAAWxD,GAAGqP,GAAG0O,GAAGnV,GAAO;AACrD,IAAAgK,EAAK,UAAUpP,GAAW,WAAW;AACnC,UAAIoN,IAAIuL,EAAO,MAAM,MAAM,SAAS,GAChCpT,IAAI,KAAK,QACT8J,IAAKkL,KAAK,OAAOG,EAAStN,CAAC,IAAI,OAAOmN,KAAM,aAAaA,EAAE,MAAM,MAAM,SAAS,IAAIA;AACxF,aAAOrB,EAAUhM,GAAS,UAAUmC,EAAG,CAAC,GAAGA,EAAG,CAAC,CAAC,EAAE,MAAM9J,EAAE,CAAC,EAAE;AAAA,QAC3D,OAAO/I,KAAM,aAAa,CAACA,EAAE,MAAM,MAAM,SAAS,IAAI,CAACA;AAAA,QACvD,OAAOqP,KAAM,aAAa,CAACA,EAAE,MAAM,MAAM,SAAS,IAAI,CAACA;AAAA,MAC/D,GAASuB,GAAGwL,CAAe;AAAA,IAC3B,GAAO2B,GAAGnV,CAAK;AAAA,EACf;AAEE,WAASoJ,EAAMyJ,GAAWxN,GAAG;AAC3B,WAAAA,IAAI,KAAK,IAAI4O,EAAY,CAAC,GAAG,KAAK,IAAIA,EAAY,CAAC,GAAG5O,CAAC,CAAC,GACjDA,MAAMwN,EAAU,IAAIA,IAAY,IAAIC,GAAUzN,GAAGwN,EAAU,GAAGA,EAAU,CAAC;AAAA,EACjF;AAED,WAAS/J,EAAU+J,GAAW5I,GAAIC,GAAI;AACpC,QAAI9S,IAAI6S,EAAG,CAAC,IAAIC,EAAG,CAAC,IAAI2I,EAAU,GAAGpM,IAAIwD,EAAG,CAAC,IAAIC,EAAG,CAAC,IAAI2I,EAAU;AACnE,WAAOzb,MAAMyb,EAAU,KAAKpM,MAAMoM,EAAU,IAAIA,IAAY,IAAIC,GAAUD,EAAU,GAAGzb,GAAGqP,CAAC;AAAA,EAC5F;AAED,WAAS6O,EAAS/B,GAAQ;AACxB,WAAO,EAAE,CAACA,EAAO,CAAC,EAAE,CAAC,IAAI,CAACA,EAAO,CAAC,EAAE,CAAC,KAAK,IAAI,CAACA,EAAO,CAAC,EAAE,CAAC,IAAI,CAACA,EAAO,CAAC,EAAE,CAAC,KAAK,CAAC;AAAA,EACjF;AAED,WAAS7F,EAASmB,GAAYgE,GAAWpR,GAAOzB,GAAO;AACrD,IAAA6O,EACK,GAAG,cAAc,WAAW;AAAE,MAAAqG,EAAQ,MAAM,SAAS,EAAE,MAAMlV,CAAK,EAAE,MAAK;AAAA,IAAG,CAAE,EAC9E,GAAG,2BAA2B,WAAW;AAAE,MAAAkV,EAAQ,MAAM,SAAS,EAAE,MAAMlV,CAAK,EAAE,IAAG;AAAA,IAAG,CAAE,EACzF,MAAM,QAAQ,WAAW;AACxB,UAAIoC,IAAO,MACPC,IAAO,WACP4C,IAAIiQ,EAAQ9S,GAAMC,CAAI,EAAE,MAAMrC,CAAK,GACnCgI,IAAIuL,EAAO,MAAMnR,GAAMC,CAAI,GAC3B8S,IAAI1T,KAAS,OAAO6T,EAAStN,CAAC,IAAI,OAAOvG,KAAU,aAAaA,EAAM,MAAMW,GAAMC,CAAI,IAAIZ,GAC1F8T,IAAI,KAAK,IAAIvN,EAAE,CAAC,EAAE,CAAC,IAAIA,EAAE,CAAC,EAAE,CAAC,GAAGA,EAAE,CAAC,EAAE,CAAC,IAAIA,EAAE,CAAC,EAAE,CAAC,CAAC,GACjDtM,IAAI0G,EAAK,QACTzG,IAAI,OAAOkX,KAAc,aAAaA,EAAU,MAAMzQ,GAAMC,CAAI,IAAIwQ,GACpE/c,IAAIgZ,EAAYpT,EAAE,OAAOyZ,CAAC,EAAE,OAAOI,IAAI7Z,EAAE,CAAC,GAAGC,EAAE,OAAOwZ,CAAC,EAAE,OAAOI,IAAI5Z,EAAE,CAAC,CAAC;AAC5E,aAAO,SAASwE,GAAG;AACjB,YAAIA,MAAM;AAAG,UAAAA,IAAIxE;AAAA,aACZ;AAAE,cAAIgJ,IAAI7O,EAAEqK,CAAC,GAAGkF,IAAIkQ,IAAI5Q,EAAE,CAAC;AAAG,UAAAxE,IAAI,IAAI2S,GAAUzN,GAAG8P,EAAE,CAAC,IAAIxQ,EAAE,CAAC,IAAIU,GAAG8P,EAAE,CAAC,IAAIxQ,EAAE,CAAC,IAAIU,CAAC;AAAA,QAAI;AAC5F,QAAAJ,EAAE,KAAK,MAAM9E,CAAC;AAAA,MAC1B;AAAA,IACA,CAAS;AAAA,EACN;AAED,WAAS+U,EAAQ9S,GAAMC,GAAMmT,GAAO;AAClC,WAAQ,CAACA,KAASpT,EAAK,aAAc,IAAIqT,EAAQrT,GAAMC,CAAI;AAAA,EAC5D;AAED,WAASoT,EAAQrT,GAAMC,GAAM;AAC3B,SAAK,OAAOD,GACZ,KAAK,OAAOC,GACZ,KAAK,SAAS,GACd,KAAK,cAAc,MACnB,KAAK,SAASkR,EAAO,MAAMnR,GAAMC,CAAI,GACrC,KAAK,OAAO;AAAA,EACb;AAED,EAAAoT,EAAQ,YAAY;AAAA,IAClB,OAAO,SAASzV,GAAO;AACrB,aAAIA,MAAO,KAAK,cAAcA,IACvB;AAAA,IACR;AAAA,IACD,OAAO,WAAW;AAChB,aAAI,EAAE,KAAK,WAAW,MACpB,KAAK,KAAK,YAAY,MACtB,KAAK,KAAK,OAAO,IAEZ;AAAA,IACR;AAAA,IACD,MAAM,SAAS1G,GAAKuZ,GAAW;AAC7B,aAAI,KAAK,SAASvZ,MAAQ,YAAS,KAAK,MAAM,CAAC,IAAIuZ,EAAU,OAAO,KAAK,MAAM,CAAC,CAAC,IAC7E,KAAK,UAAUvZ,MAAQ,YAAS,KAAK,OAAO,CAAC,IAAIuZ,EAAU,OAAO,KAAK,OAAO,CAAC,CAAC,IAChF,KAAK,UAAUvZ,MAAQ,YAAS,KAAK,OAAO,CAAC,IAAIuZ,EAAU,OAAO,KAAK,OAAO,CAAC,CAAC,IACpF,KAAK,KAAK,SAASA,GACnB,KAAK,KAAK,MAAM,GACT;AAAA,IACR;AAAA,IACD,KAAK,WAAW;AACd,aAAI,EAAE,KAAK,WAAW,MACpB,OAAO,KAAK,KAAK,WACjB,KAAK,KAAK,KAAK,IAEV;AAAA,IACR;AAAA,IACD,MAAM,SAASjS,GAAM;AACnB,UAAI2F,IAAI/P,EAAO,KAAK,IAAI,EAAE,MAAK;AAC/B,MAAA2d,EAAU;AAAA,QACRvT;AAAA,QACA,KAAK;AAAA,QACL,IAAI+R,GAAU/R,GAAM;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,QAAQoJ;AAAA,UACR,MAAApJ;AAAA,UACA,WAAW,KAAK,KAAK;AAAA,UACrB,UAAUuT;AAAA,QACpB,CAAS;AAAA,QACD5N;AAAA,MACR;AAAA,IACK;AAAA,EACL;AAEE,WAASoO,EAAQ3U,MAAUqC,GAAM;AAC/B,QAAI,CAACpK,EAAO,MAAM,MAAM,SAAS;AAAG;AACpC,QAAIgN,IAAIiQ,EAAQ,MAAM7S,CAAI,EAAE,MAAMrC,CAAK,GACnCG,IAAI,KAAK,QACTkF,IAAI,KAAK,IAAI4O,EAAY,CAAC,GAAG,KAAK,IAAIA,EAAY,CAAC,GAAG9T,EAAE,IAAI,KAAK,IAAI,GAAG4T,EAAW,MAAM,MAAM,SAAS,CAAC,CAAC,CAAC,GAC3GoB,IAAI5T,GAAQvB,CAAK;AAIrB,QAAIiF,EAAE;AACJ,OAAIA,EAAE,MAAM,CAAC,EAAE,CAAC,MAAMkQ,EAAE,CAAC,KAAKlQ,EAAE,MAAM,CAAC,EAAE,CAAC,MAAMkQ,EAAE,CAAC,OACjDlQ,EAAE,MAAM,CAAC,IAAI9E,EAAE,OAAO8E,EAAE,MAAM,CAAC,IAAIkQ,CAAC,IAEtC,aAAalQ,EAAE,KAAK;AAAA,SAIjB;AAAA,UAAI9E,EAAE,MAAMkF;AAAG;AAIlB,MAAAJ,EAAE,QAAQ,CAACkQ,GAAGhV,EAAE,OAAOgV,CAAC,CAAC,GACzB/G,GAAU,IAAI,GACdnJ,EAAE,MAAK;AAAA;AAGT,IAAAtC,GAAQ3C,CAAK,GACbiF,EAAE,QAAQ,WAAWyQ,GAAYlB,CAAU,GAC3CvP,EAAE,KAAK,SAAS6O,EAAUhL,EAAUM,EAAMjJ,GAAGkF,CAAC,GAAGJ,EAAE,MAAM,CAAC,GAAGA,EAAE,MAAM,CAAC,CAAC,GAAGA,EAAE,QAAQuO,CAAe,CAAC;AAEpG,aAASkC,IAAa;AACpB,MAAAzQ,EAAE,QAAQ,MACVA,EAAE,IAAG;AAAA,IACN;AAAA,EACF;AAED,WAAS2P,EAAY5U,MAAUqC,GAAM;AACnC,QAAIiS,KAAe,CAACrc,EAAO,MAAM,MAAM,SAAS;AAAG;AACnD,QAAI0d,IAAgB3V,EAAM,eACtBiF,IAAIiQ,EAAQ,MAAM7S,GAAM,EAAI,EAAE,MAAMrC,CAAK,GACzCrD,IAAInG,EAAOwJ,EAAM,IAAI,EAAE,GAAG,kBAAkB4V,GAAY,EAAI,EAAE,GAAG,gBAAgBC,GAAY,EAAI,GACjGV,IAAI5T,GAAQvB,GAAO2V,CAAa,GAChCG,IAAK9V,EAAM,SACX+V,IAAK/V,EAAM;AAEf,IAAAyC,GAAYzC,EAAM,IAAI,GACtBgT,GAAchT,CAAK,GACnBiF,EAAE,QAAQ,CAACkQ,GAAG,KAAK,OAAO,OAAOA,CAAC,CAAC,GACnC/G,GAAU,IAAI,GACdnJ,EAAE,MAAK;AAEP,aAAS2Q,EAAW5V,GAAO;AAEzB,UADA2C,GAAQ3C,CAAK,GACT,CAACiF,EAAE,OAAO;AACZ,YAAIwF,IAAKzK,EAAM,UAAU8V,GAAIpL,IAAK1K,EAAM,UAAU+V;AAClD,QAAA9Q,EAAE,QAAQwF,IAAKA,IAAKC,IAAKA,IAAK+J;AAAA,MAC/B;AACD,MAAAxP,EAAE,MAAMjF,CAAK,EACX,KAAK,SAAS8T,EAAUhL,EAAU7D,EAAE,KAAK,QAAQA,EAAE,MAAM,CAAC,IAAI1D,GAAQvB,GAAO2V,CAAa,GAAG1Q,EAAE,MAAM,CAAC,CAAC,GAAGA,EAAE,QAAQuO,CAAe,CAAC;AAAA,IACvI;AAED,aAASqC,EAAW7V,GAAO;AACzB,MAAArD,EAAE,GAAG,+BAA+B,IAAI,GACxCqZ,GAAWhW,EAAM,MAAMiF,EAAE,KAAK,GAC9BtC,GAAQ3C,CAAK,GACbiF,EAAE,MAAMjF,CAAK,EAAE,IAAG;AAAA,IACnB;AAAA,EACF;AAED,WAAS6U,EAAW7U,MAAUqC,GAAM;AAClC,QAAKpK,EAAO,MAAM,MAAM,SAAS,GACjC;AAAA,UAAI4U,IAAK,KAAK,QACV5C,IAAK1I,GAAQvB,EAAM,iBAAiBA,EAAM,eAAe,CAAC,IAAIA,GAAO,IAAI,GACzEkK,IAAK2C,EAAG,OAAO5C,CAAE,GACjBoL,IAAKxI,EAAG,KAAK7M,EAAM,WAAW,MAAM,IACpC8M,IAAKgH,EAAUhL,EAAUM,EAAMyD,GAAIwI,CAAE,GAAGpL,GAAIC,CAAE,GAAGqJ,EAAO,MAAM,MAAMlR,CAAI,GAAGmR,CAAe;AAE9F,MAAA7Q,GAAQ3C,CAAK,GACTkU,IAAW,IAAG1d,EAAO,IAAI,EAAE,WAAU,EAAG,SAAS0d,CAAQ,EAAE,KAAKxG,GAAUZ,GAAI7C,GAAIjK,CAAK,IACtFxJ,EAAO,IAAI,EAAE,KAAKwT,EAAK,WAAW8C,GAAI7C,GAAIjK,CAAK;AAAA;AAAA,EACrD;AAED,WAAS8U,EAAa9U,MAAUqC,GAAM;AACpC,QAAKpK,EAAO,MAAM,MAAM,SAAS,GACjC;AAAA,UAAIge,IAAUjW,EAAM,SAChBlJ,IAAImf,EAAQ,QACZhR,IAAIiQ,EAAQ,MAAM7S,GAAMrC,EAAM,eAAe,WAAWlJ,CAAC,EAAE,MAAMkJ,CAAK,GACtEkW,GAASpgB,GAAGqK,GAAGgV;AAGnB,WADAnC,GAAchT,CAAK,GACdlK,IAAI,GAAGA,IAAIgB,GAAG,EAAEhB;AACnB,QAAAqK,IAAI8V,EAAQngB,CAAC,GAAGqf,IAAI5T,GAAQpB,GAAG,IAAI,GACnCgV,IAAI,CAACA,GAAG,KAAK,OAAO,OAAOA,CAAC,GAAGhV,EAAE,UAAU,GACtC8E,EAAE,SACE,CAACA,EAAE,UAAUA,EAAE,OAAO,CAAC,MAAMkQ,EAAE,CAAC,MAAGlQ,EAAE,SAASkQ,GAAGlQ,EAAE,OAAO,MADpDA,EAAE,SAASkQ,GAAGe,IAAU,IAAMjR,EAAE,OAAO,IAAI,CAAC,CAACmP;AAI9D,MAAIA,MAAeA,IAAgB,aAAaA,CAAa,IAEzD8B,MACEjR,EAAE,OAAO,MAAGoP,IAAac,EAAE,CAAC,GAAGf,IAAgB,WAAW,WAAW;AAAE,QAAAA,IAAgB;AAAA,MAAO,GAAEG,CAAU,IAC9GnG,GAAU,IAAI,GACdnJ,EAAE,MAAK;AAAA;AAAA,EAEV;AAED,WAAS8P,EAAW/U,MAAUqC,GAAM;AAClC,QAAK,KAAK,WACV;AAAA,UAAI4C,IAAIiQ,EAAQ,MAAM7S,CAAI,EAAE,MAAMrC,CAAK,GACnCiW,IAAUjW,EAAM,gBAChBlJ,IAAImf,EAAQ,QAAQngB,GAAGqK,GAAGgV,GAAGxQ;AAGjC,WADAhC,GAAQ3C,CAAK,GACRlK,IAAI,GAAGA,IAAIgB,GAAG,EAAEhB;AACnB,QAAAqK,IAAI8V,EAAQngB,CAAC,GAAGqf,IAAI5T,GAAQpB,GAAG,IAAI,GAC/B8E,EAAE,UAAUA,EAAE,OAAO,CAAC,MAAM9E,EAAE,aAAY8E,EAAE,OAAO,CAAC,IAAIkQ,IACnDlQ,EAAE,UAAUA,EAAE,OAAO,CAAC,MAAM9E,EAAE,eAAY8E,EAAE,OAAO,CAAC,IAAIkQ;AAGnE,UADAhV,IAAI8E,EAAE,KAAK,QACPA,EAAE,QAAQ;AACZ,YAAIgF,IAAKhF,EAAE,OAAO,CAAC,GAAGkR,IAAKlR,EAAE,OAAO,CAAC,GACjCiF,IAAKjF,EAAE,OAAO,CAAC,GAAGmR,IAAKnR,EAAE,OAAO,CAAC,GACjCoR,KAAMA,IAAKnM,EAAG,CAAC,IAAID,EAAG,CAAC,KAAKoM,KAAMA,IAAKnM,EAAG,CAAC,IAAID,EAAG,CAAC,KAAKoM,GACxDC,KAAMA,IAAKF,EAAG,CAAC,IAAID,EAAG,CAAC,KAAKG,KAAMA,IAAKF,EAAG,CAAC,IAAID,EAAG,CAAC,KAAKG;AAC5D,QAAAnW,IAAIiJ,EAAMjJ,GAAG,KAAK,KAAKkW,IAAKC,CAAE,CAAC,GAC/BnB,IAAI,EAAElL,EAAG,CAAC,IAAIC,EAAG,CAAC,KAAK,IAAID,EAAG,CAAC,IAAIC,EAAG,CAAC,KAAK,CAAC,GAC7CvF,IAAI,EAAEwR,EAAG,CAAC,IAAIC,EAAG,CAAC,KAAK,IAAID,EAAG,CAAC,IAAIC,EAAG,CAAC,KAAK,CAAC;AAAA,MAC9C,WACQnR,EAAE;AAAQ,QAAAkQ,IAAIlQ,EAAE,OAAO,CAAC,GAAGN,IAAIM,EAAE,OAAO,CAAC;AAAA;AAC7C;AAEL,MAAAA,EAAE,KAAK,SAAS6O,EAAUhL,EAAU3I,GAAGgV,GAAGxQ,CAAC,GAAGM,EAAE,QAAQuO,CAAe,CAAC;AAAA;AAAA,EACzE;AAED,WAASwB,EAAWhV,MAAUqC,GAAM;AAClC,QAAK,KAAK,WACV;AAAA,UAAI4C,IAAIiQ,EAAQ,MAAM7S,CAAI,EAAE,MAAMrC,CAAK,GACnCiW,IAAUjW,EAAM,gBAChBlJ,IAAImf,EAAQ,QAAQngB,GAAGqK;AAK3B,WAHA6S,GAAchT,CAAK,GACfsU,KAAa,aAAaA,CAAW,GACzCA,IAAc,WAAW,WAAW;AAAE,QAAAA,IAAc;AAAA,MAAK,GAAIC,CAAU,GAClEze,IAAI,GAAGA,IAAIgB,GAAG,EAAEhB;AACnB,QAAAqK,IAAI8V,EAAQngB,CAAC,GACTmP,EAAE,UAAUA,EAAE,OAAO,CAAC,MAAM9E,EAAE,aAAY,OAAO8E,EAAE,SAC9CA,EAAE,UAAUA,EAAE,OAAO,CAAC,MAAM9E,EAAE,cAAY,OAAO8E,EAAE;AAG9D,UADIA,EAAE,UAAU,CAACA,EAAE,WAAQA,EAAE,SAASA,EAAE,QAAQ,OAAOA,EAAE,SACrDA,EAAE;AAAQ,QAAAA,EAAE,OAAO,CAAC,IAAI,KAAK,OAAO,OAAOA,EAAE,OAAO,CAAC,CAAC;AAAA,eAExDA,EAAE,IAAG,GAEDA,EAAE,SAAS,MACb9E,IAAIoB,GAAQpB,GAAG,IAAI,GACf,KAAK,MAAMkU,EAAW,CAAC,IAAIlU,EAAE,CAAC,GAAGkU,EAAW,CAAC,IAAIlU,EAAE,CAAC,CAAC,IAAIuU,IAAa;AACxE,YAAIS,IAAI3e,EAAO,IAAI,EAAE,GAAG,eAAe;AACvC,QAAI2e,KAAGA,EAAE,MAAM,MAAM,SAAS;AAAA,MAC/B;AAAA;AAAA,EAGN;AAED,SAAAnL,EAAK,aAAa,SAASnI,GAAG;AAC5B,WAAO,UAAU,UAAUkS,IAAa,OAAOlS,KAAM,aAAaA,IAAIhI,GAAS,CAACgI,CAAC,GAAGmI,KAAQ+J;AAAA,EAChG,GAEE/J,EAAK,SAAS,SAASnI,GAAG;AACxB,WAAO,UAAU,UAAU5J,IAAS,OAAO4J,KAAM,aAAaA,IAAIhI,GAAS,CAAC,CAACgI,CAAC,GAAGmI,KAAQ/R;AAAA,EAC7F,GAEE+R,EAAK,YAAY,SAASnI,GAAG;AAC3B,WAAO,UAAU,UAAUmS,IAAY,OAAOnS,KAAM,aAAaA,IAAIhI,GAAS,CAAC,CAACgI,CAAC,GAAGmI,KAAQgK;AAAA,EAChG,GAEEhK,EAAK,SAAS,SAASnI,GAAG;AACxB,WAAO,UAAU,UAAU0R,IAAS,OAAO1R,KAAM,aAAaA,IAAIhI,GAAS,CAAC,CAAC,CAACgI,EAAE,CAAC,EAAE,CAAC,GAAG,CAACA,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAACA,EAAE,CAAC,EAAE,CAAC,GAAG,CAACA,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAGmI,KAAQuJ;AAAA,EACtI,GAEEvJ,EAAK,cAAc,SAASnI,GAAG;AAC7B,WAAO,UAAU,UAAUoS,EAAY,CAAC,IAAI,CAACpS,EAAE,CAAC,GAAGoS,EAAY,CAAC,IAAI,CAACpS,EAAE,CAAC,GAAGmI,KAAQ,CAACiK,EAAY,CAAC,GAAGA,EAAY,CAAC,CAAC;AAAA,EACtH,GAEEjK,EAAK,kBAAkB,SAASnI,GAAG;AACjC,WAAO,UAAU,UAAU2R,EAAgB,CAAC,EAAE,CAAC,IAAI,CAAC3R,EAAE,CAAC,EAAE,CAAC,GAAG2R,EAAgB,CAAC,EAAE,CAAC,IAAI,CAAC3R,EAAE,CAAC,EAAE,CAAC,GAAG2R,EAAgB,CAAC,EAAE,CAAC,IAAI,CAAC3R,EAAE,CAAC,EAAE,CAAC,GAAG2R,EAAgB,CAAC,EAAE,CAAC,IAAI,CAAC3R,EAAE,CAAC,EAAE,CAAC,GAAGmI,KAAQ,CAAC,CAACwJ,EAAgB,CAAC,EAAE,CAAC,GAAGA,EAAgB,CAAC,EAAE,CAAC,CAAC,GAAG,CAACA,EAAgB,CAAC,EAAE,CAAC,GAAGA,EAAgB,CAAC,EAAE,CAAC,CAAC,CAAC;AAAA,EAC9Q,GAEExJ,EAAK,YAAY,SAASnI,GAAG;AAC3B,WAAO,UAAU,UAAUiS,IAAYjS,GAAGmI,KAAQ8J;AAAA,EACtD,GAEE9J,EAAK,WAAW,SAASnI,GAAG;AAC1B,WAAO,UAAU,UAAUqS,IAAW,CAACrS,GAAGmI,KAAQkK;AAAA,EACtD,GAEElK,EAAK,cAAc,SAASnI,GAAG;AAC7B,WAAO,UAAU,UAAUiN,IAAcjN,GAAGmI,KAAQ8E;AAAA,EACxD,GAEE9E,EAAK,KAAK,WAAW;AACnB,QAAIrQ,IAAQwa,EAAU,GAAG,MAAMA,GAAW,SAAS;AACnD,WAAOxa,MAAUwa,IAAYnK,IAAOrQ;AAAA,EACxC,GAEEqQ,EAAK,gBAAgB,SAASnI,GAAG;AAC/B,WAAO,UAAU,UAAU4S,KAAkB5S,IAAI,CAACA,KAAKA,GAAGmI,KAAQ,KAAK,KAAKyK,CAAc;AAAA,EAC9F,GAEEzK,EAAK,cAAc,SAASnI,GAAG;AAC7B,WAAO,UAAU,UAAU6S,IAAc,CAAC7S,GAAGmI,KAAQ0K;AAAA,EACzD,GAES1K;AACT;ACzbO,IAAIuM,KAAU,MACVC,KAAa,OAAO,eAAiB,MAAc,eAAe;AAkCxE,KAAK,UAAO,KAAK,QAAQ,WAAY;AAIxC,WAHI/P,IAAI,GACJ3Q,IAAI,UAAU,QAEXA;AACL,IAAA2Q,KAAK,UAAU3Q,CAAC,IAAI,UAAUA,CAAC;AAGjC,SAAO,KAAK,KAAK2Q,CAAC;AACpB;ACrCO,SAASvH,KAAS;AACvB,MAAIuX,IAAM,IAAIC,GAAoB,CAAC;AAEnC,SAAIA,MAAuB,iBACzBD,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,IAGXA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACFA;AACT;AA4gBO,SAASE,GAAeF,GAAK/a,GAAG;AACrC,MAAIkb,IAAMlb,EAAE,CAAC,GACTmb,IAAMnb,EAAE,CAAC,GACTob,IAAMpb,EAAE,CAAC,GACTqb,IAAMrb,EAAE,CAAC,GACTsb,IAAMtb,EAAE,CAAC,GACTub,IAAMvb,EAAE,CAAC,GACTwb,IAAMxb,EAAE,CAAC,GACTyb,IAAMzb,EAAE,CAAC,GACT0b,IAAM1b,EAAE,CAAC,GACT2b,IAAM3b,EAAE,CAAC,GACT4b,IAAM5b,EAAE,EAAE,GACV6b,IAAM7b,EAAE,EAAE,GACV8b,IAAM9b,EAAE,EAAE,GACV+b,IAAM/b,EAAE,EAAE,GACVgc,IAAMhc,EAAE,EAAE,GACVic,IAAMjc,EAAE,EAAE,GACVkc,IAAMhB,IAAMK,IAAMJ,IAAMG,GACxBa,IAAMjB,IAAMM,IAAMJ,IAAME,GACxBc,IAAMlB,IAAMO,IAAMJ,IAAMC,GACxBe,IAAMlB,IAAMK,IAAMJ,IAAMG,GACxBe,IAAMnB,IAAMM,IAAMJ,IAAME,GACxBgB,IAAMnB,IAAMK,IAAMJ,IAAMG,GACxBgB,IAAMd,IAAMK,IAAMJ,IAAMG,GACxBW,IAAMf,IAAMM,IAAMJ,IAAME,GACxBY,IAAMhB,IAAMO,IAAMJ,IAAMC,GACxBa,IAAMhB,IAAMK,IAAMJ,IAAMG,GACxBa,IAAMjB,IAAMM,IAAMJ,IAAME,GACxBc,IAAMjB,IAAMK,IAAMJ,IAAMG,GAExBc,IAAMZ,IAAMW,IAAMV,IAAMS,IAAMR,IAAMO,IAAMN,IAAMK,IAAMJ,IAAMG,IAAMF,IAAMC;AAE5E,SAAKM,KAILA,IAAM,IAAMA,GACZ/B,EAAI,CAAC,KAAKQ,IAAMsB,IAAMrB,IAAMoB,IAAMnB,IAAMkB,KAAOG,GAC/C/B,EAAI,CAAC,KAAKS,IAAMkB,IAAMpB,IAAMuB,IAAMpB,IAAMgB,KAAOK,GAC/C/B,EAAI,CAAC,KAAKO,IAAMsB,IAAMrB,IAAMmB,IAAMjB,IAAMe,KAAOM,GAC/C/B,EAAI,CAAC,KAAKK,IAAMwB,IAAMzB,IAAM0B,IAAMxB,IAAMsB,KAAOG,GAC/C/B,EAAI,CAAC,KAAKG,IAAM2B,IAAMzB,IAAMsB,IAAMrB,IAAMoB,KAAOK,GAC/C/B,EAAI,CAAC,KAAKI,IAAMuB,IAAMxB,IAAM0B,IAAMvB,IAAMmB,KAAOM,GAC/C/B,EAAI,CAAC,KAAKgB,IAAMQ,IAAMP,IAAMM,IAAML,IAAMI,KAAOS,GAC/C/B,EAAI,CAAC,KAAKiB,IAAMI,IAAMN,IAAMS,IAAMN,IAAME,KAAOW,GAC/C/B,EAAI,CAAC,KAAKe,IAAMQ,IAAMP,IAAMK,IAAMH,IAAMC,KAAOY,GACxC/B,KAbE;AAcX;AC3kBO,SAASvX,KAAS;AACvB,MAAIuX,IAAM,IAAIC,GAAoB,EAAE;AAEpC,SAAIA,MAAuB,iBACzBD,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,EAAE,IAAI,GACVA,EAAI,EAAE,IAAI,GACVA,EAAI,EAAE,IAAI,GACVA,EAAI,EAAE,IAAI,IAGZA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,EAAE,IAAI,GACVA,EAAI,EAAE,IAAI,GACHA;AACT;AAkJO,SAAS3O,GAAS2O,GAAK;AAC5B,SAAAA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,EAAE,IAAI,GACVA,EAAI,EAAE,IAAI,GACVA,EAAI,EAAE,IAAI,GACVA,EAAI,EAAE,IAAI,GACVA,EAAI,EAAE,IAAI,GACVA,EAAI,EAAE,IAAI,GACHA;AACT;AA6MO,SAASgC,GAAShC,GAAK/a,GAAGC,GAAG;AAClC,MAAIib,IAAMlb,EAAE,CAAC,GACTmb,IAAMnb,EAAE,CAAC,GACTob,IAAMpb,EAAE,CAAC,GACTqb,IAAMrb,EAAE,CAAC,GACTsb,IAAMtb,EAAE,CAAC,GACTub,IAAMvb,EAAE,CAAC,GACTwb,IAAMxb,EAAE,CAAC,GACTyb,IAAMzb,EAAE,CAAC,GACT0b,IAAM1b,EAAE,CAAC,GACT2b,IAAM3b,EAAE,CAAC,GACT4b,IAAM5b,EAAE,EAAE,GACV6b,IAAM7b,EAAE,EAAE,GACV8b,IAAM9b,EAAE,EAAE,GACV+b,IAAM/b,EAAE,EAAE,GACVgc,IAAMhc,EAAE,EAAE,GACVic,IAAMjc,EAAE,EAAE,GAEVoP,IAAKnP,EAAE,CAAC,GACRoP,IAAKpP,EAAE,CAAC,GACR+c,IAAK/c,EAAE,CAAC,GACRgd,IAAKhd,EAAE,CAAC;AACZ,SAAA8a,EAAI,CAAC,IAAI3L,IAAK8L,IAAM7L,IAAKiM,IAAM0B,IAAKtB,IAAMuB,IAAKnB,GAC/Cf,EAAI,CAAC,IAAI3L,IAAK+L,IAAM9L,IAAKkM,IAAMyB,IAAKrB,IAAMsB,IAAKlB,GAC/ChB,EAAI,CAAC,IAAI3L,IAAKgM,IAAM/L,IAAKmM,IAAMwB,IAAKpB,IAAMqB,IAAKjB,GAC/CjB,EAAI,CAAC,IAAI3L,IAAKiM,IAAMhM,IAAKoM,IAAMuB,IAAKnB,IAAMoB,IAAKhB,GAC/C7M,IAAKnP,EAAE,CAAC,GACRoP,IAAKpP,EAAE,CAAC,GACR+c,IAAK/c,EAAE,CAAC,GACRgd,IAAKhd,EAAE,CAAC,GACR8a,EAAI,CAAC,IAAI3L,IAAK8L,IAAM7L,IAAKiM,IAAM0B,IAAKtB,IAAMuB,IAAKnB,GAC/Cf,EAAI,CAAC,IAAI3L,IAAK+L,IAAM9L,IAAKkM,IAAMyB,IAAKrB,IAAMsB,IAAKlB,GAC/ChB,EAAI,CAAC,IAAI3L,IAAKgM,IAAM/L,IAAKmM,IAAMwB,IAAKpB,IAAMqB,IAAKjB,GAC/CjB,EAAI,CAAC,IAAI3L,IAAKiM,IAAMhM,IAAKoM,IAAMuB,IAAKnB,IAAMoB,IAAKhB,GAC/C7M,IAAKnP,EAAE,CAAC,GACRoP,IAAKpP,EAAE,CAAC,GACR+c,IAAK/c,EAAE,EAAE,GACTgd,IAAKhd,EAAE,EAAE,GACT8a,EAAI,CAAC,IAAI3L,IAAK8L,IAAM7L,IAAKiM,IAAM0B,IAAKtB,IAAMuB,IAAKnB,GAC/Cf,EAAI,CAAC,IAAI3L,IAAK+L,IAAM9L,IAAKkM,IAAMyB,IAAKrB,IAAMsB,IAAKlB,GAC/ChB,EAAI,EAAE,IAAI3L,IAAKgM,IAAM/L,IAAKmM,IAAMwB,IAAKpB,IAAMqB,IAAKjB,GAChDjB,EAAI,EAAE,IAAI3L,IAAKiM,IAAMhM,IAAKoM,IAAMuB,IAAKnB,IAAMoB,IAAKhB,GAChD7M,IAAKnP,EAAE,EAAE,GACToP,IAAKpP,EAAE,EAAE,GACT+c,IAAK/c,EAAE,EAAE,GACTgd,IAAKhd,EAAE,EAAE,GACT8a,EAAI,EAAE,IAAI3L,IAAK8L,IAAM7L,IAAKiM,IAAM0B,IAAKtB,IAAMuB,IAAKnB,GAChDf,EAAI,EAAE,IAAI3L,IAAK+L,IAAM9L,IAAKkM,IAAMyB,IAAKrB,IAAMsB,IAAKlB,GAChDhB,EAAI,EAAE,IAAI3L,IAAKgM,IAAM/L,IAAKmM,IAAMwB,IAAKpB,IAAMqB,IAAKjB,GAChDjB,EAAI,EAAE,IAAI3L,IAAKiM,IAAMhM,IAAKoM,IAAMuB,IAAKnB,IAAMoB,IAAKhB,GACzClB;AACT;AAUO,SAAS3N,GAAU2N,GAAK/a,GAAGiB,GAAG;AACnC,MAAIvF,IAAIuF,EAAE,CAAC,GACP8J,IAAI9J,EAAE,CAAC,GACPic,IAAIjc,EAAE,CAAC,GACPia,GAAKC,GAAKC,GAAKC,GACfC,GAAKC,GAAKC,GAAKC,GACfC,GAAKC,GAAKC,GAAKC;AAEnB,SAAI7b,MAAM+a,KACRA,EAAI,EAAE,IAAI/a,EAAE,CAAC,IAAItE,IAAIsE,EAAE,CAAC,IAAI+K,IAAI/K,EAAE,CAAC,IAAIkd,IAAIld,EAAE,EAAE,GAC/C+a,EAAI,EAAE,IAAI/a,EAAE,CAAC,IAAItE,IAAIsE,EAAE,CAAC,IAAI+K,IAAI/K,EAAE,CAAC,IAAIkd,IAAIld,EAAE,EAAE,GAC/C+a,EAAI,EAAE,IAAI/a,EAAE,CAAC,IAAItE,IAAIsE,EAAE,CAAC,IAAI+K,IAAI/K,EAAE,EAAE,IAAIkd,IAAIld,EAAE,EAAE,GAChD+a,EAAI,EAAE,IAAI/a,EAAE,CAAC,IAAItE,IAAIsE,EAAE,CAAC,IAAI+K,IAAI/K,EAAE,EAAE,IAAIkd,IAAIld,EAAE,EAAE,MAEhDkb,IAAMlb,EAAE,CAAC,GACTmb,IAAMnb,EAAE,CAAC,GACTob,IAAMpb,EAAE,CAAC,GACTqb,IAAMrb,EAAE,CAAC,GACTsb,IAAMtb,EAAE,CAAC,GACTub,IAAMvb,EAAE,CAAC,GACTwb,IAAMxb,EAAE,CAAC,GACTyb,IAAMzb,EAAE,CAAC,GACT0b,IAAM1b,EAAE,CAAC,GACT2b,IAAM3b,EAAE,CAAC,GACT4b,IAAM5b,EAAE,EAAE,GACV6b,IAAM7b,EAAE,EAAE,GACV+a,EAAI,CAAC,IAAIG,GACTH,EAAI,CAAC,IAAII,GACTJ,EAAI,CAAC,IAAIK,GACTL,EAAI,CAAC,IAAIM,GACTN,EAAI,CAAC,IAAIO,GACTP,EAAI,CAAC,IAAIQ,GACTR,EAAI,CAAC,IAAIS,GACTT,EAAI,CAAC,IAAIU,GACTV,EAAI,CAAC,IAAIW,GACTX,EAAI,CAAC,IAAIY,GACTZ,EAAI,EAAE,IAAIa,GACVb,EAAI,EAAE,IAAIc,GACVd,EAAI,EAAE,IAAIG,IAAMxf,IAAI4f,IAAMvQ,IAAI2Q,IAAMwB,IAAIld,EAAE,EAAE,GAC5C+a,EAAI,EAAE,IAAII,IAAMzf,IAAI6f,IAAMxQ,IAAI4Q,IAAMuB,IAAIld,EAAE,EAAE,GAC5C+a,EAAI,EAAE,IAAIK,IAAM1f,IAAI8f,IAAMzQ,IAAI6Q,IAAMsB,IAAIld,EAAE,EAAE,GAC5C+a,EAAI,EAAE,IAAIM,IAAM3f,IAAI+f,IAAM1Q,IAAI8Q,IAAMqB,IAAIld,EAAE,EAAE,IAGvC+a;AACT;AA0CO,SAAStN,GAAOsN,GAAK/a,GAAGmd,GAAKC,GAAM;AACxC,MAAI1hB,IAAI0hB,EAAK,CAAC,GACVrS,IAAIqS,EAAK,CAAC,GACVF,IAAIE,EAAK,CAAC,GACVC,IAAM,KAAK,MAAM3hB,GAAGqP,GAAGmS,CAAC,GACxB/S,GAAGvD,GAAGnC,GACNyW,GAAKC,GAAKC,GAAKC,GACfC,GAAKC,GAAKC,GAAKC,GACfC,GAAKC,GAAKC,GAAKC,GACfK,GAAKC,GAAKC,GACVQ,GAAKC,GAAKS,GACVC,GAAKC,GAAKC;AAEd,SAAIJ,IAAMK,KACD,QAGTL,IAAM,IAAIA,GACV3hB,KAAK2hB,GACLtS,KAAKsS,GACLH,KAAKG,GACLlT,IAAI,KAAK,IAAIgT,CAAG,GAChBvW,IAAI,KAAK,IAAIuW,CAAG,GAChB1Y,IAAI,IAAImC,GACRsU,IAAMlb,EAAE,CAAC,GACTmb,IAAMnb,EAAE,CAAC,GACTob,IAAMpb,EAAE,CAAC,GACTqb,IAAMrb,EAAE,CAAC,GACTsb,IAAMtb,EAAE,CAAC,GACTub,IAAMvb,EAAE,CAAC,GACTwb,IAAMxb,EAAE,CAAC,GACTyb,IAAMzb,EAAE,CAAC,GACT0b,IAAM1b,EAAE,CAAC,GACT2b,IAAM3b,EAAE,CAAC,GACT4b,IAAM5b,EAAE,EAAE,GACV6b,IAAM7b,EAAE,EAAE,GAEVkc,IAAMxgB,IAAIA,IAAI+I,IAAImC,GAClBuV,IAAMpR,IAAIrP,IAAI+I,IAAIyY,IAAI/S,GACtBiS,IAAMc,IAAIxhB,IAAI+I,IAAIsG,IAAIZ,GACtByS,IAAMlhB,IAAIqP,IAAItG,IAAIyY,IAAI/S,GACtB0S,IAAM9R,IAAIA,IAAItG,IAAImC,GAClB0W,IAAMJ,IAAInS,IAAItG,IAAI/I,IAAIyO,GACtBoT,IAAM7hB,IAAIwhB,IAAIzY,IAAIsG,IAAIZ,GACtBqT,IAAMzS,IAAImS,IAAIzY,IAAI/I,IAAIyO,GACtBsT,IAAMP,IAAIA,IAAIzY,IAAImC,GAElBmU,EAAI,CAAC,IAAIG,IAAMgB,IAAMZ,IAAMa,IAAMT,IAAMU,GACvCrB,EAAI,CAAC,IAAII,IAAMe,IAAMX,IAAMY,IAAMR,IAAMS,GACvCrB,EAAI,CAAC,IAAIK,IAAMc,IAAMV,IAAMW,IAAMP,IAAMQ,GACvCrB,EAAI,CAAC,IAAIM,IAAMa,IAAMT,IAAMU,IAAMN,IAAMO,GACvCrB,EAAI,CAAC,IAAIG,IAAM0B,IAAMtB,IAAMuB,IAAMnB,IAAM4B,GACvCvC,EAAI,CAAC,IAAII,IAAMyB,IAAMrB,IAAMsB,IAAMlB,IAAM2B,GACvCvC,EAAI,CAAC,IAAIK,IAAMwB,IAAMpB,IAAMqB,IAAMjB,IAAM0B,GACvCvC,EAAI,CAAC,IAAIM,IAAMuB,IAAMnB,IAAMoB,IAAMhB,IAAMyB,GACvCvC,EAAI,CAAC,IAAIG,IAAMqC,IAAMjC,IAAMkC,IAAM9B,IAAM+B,GACvC1C,EAAI,CAAC,IAAII,IAAMoC,IAAMhC,IAAMiC,IAAM7B,IAAM8B,GACvC1C,EAAI,EAAE,IAAIK,IAAMmC,IAAM/B,IAAMgC,IAAM5B,IAAM6B,GACxC1C,EAAI,EAAE,IAAIM,IAAMkC,IAAM9B,IAAM+B,IAAM3B,IAAM4B,GAEpCzd,MAAM+a,MAERA,EAAI,EAAE,IAAI/a,EAAE,EAAE,GACd+a,EAAI,EAAE,IAAI/a,EAAE,EAAE,GACd+a,EAAI,EAAE,IAAI/a,EAAE,EAAE,GACd+a,EAAI,EAAE,IAAI/a,EAAE,EAAE,IAGT+a;AACT;AAgvBO,SAAS4C,GAAc5C,GAAK6C,GAAMC,GAAQC,GAAMC,GAAK;AAC1D,MAAIxR,IAAI,IAAM,KAAK,IAAIqR,IAAO,CAAC,GAC3BI;AACJ,SAAAjD,EAAI,CAAC,IAAIxO,IAAIsR,GACb9C,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAIxO,GACTwO,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,EAAE,IAAI,IACVA,EAAI,EAAE,IAAI,GACVA,EAAI,EAAE,IAAI,GACVA,EAAI,EAAE,IAAI,GAENgD,KAAO,QAAQA,MAAQ,SACzBC,IAAK,KAAKF,IAAOC,IACjBhD,EAAI,EAAE,KAAKgD,IAAMD,KAAQE,GACzBjD,EAAI,EAAE,IAAI,IAAIgD,IAAMD,IAAOE,MAE3BjD,EAAI,EAAE,IAAI,IACVA,EAAI,EAAE,IAAI,KAAK+C,IAGV/C;AACT;AAMO,IAAIkD,KAAcN;AAgGlB,SAASO,GAAQnD,GAAKoD,GAAMC,GAAOC,GAAQC,GAAKR,GAAMC,GAAK;AAChE,MAAIQ,IAAK,KAAKJ,IAAOC,IACjBI,IAAK,KAAKH,IAASC,IACnBN,IAAK,KAAKF,IAAOC;AACrB,SAAAhD,EAAI,CAAC,IAAI,KAAKwD,GACdxD,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,KAAKyD,GACdzD,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,EAAE,IAAI,IAAIiD,GACdjD,EAAI,EAAE,IAAI,GACVA,EAAI,EAAE,KAAKoD,IAAOC,KAASG,GAC3BxD,EAAI,EAAE,KAAKuD,IAAMD,KAAUG,GAC3BzD,EAAI,EAAE,KAAKgD,IAAMD,KAAQE,GACzBjD,EAAI,EAAE,IAAI,GACHA;AACT;AAMO,IAAI0D,KAAQP;AC9+CZ,SAAS1a,KAAS;AACvB,MAAIuX,IAAM,IAAIC,GAAoB,CAAC;AAEnC,SAAIA,MAAuB,iBACzBD,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,IAGJA;AACT;AAAA,CA6tBqB,WAAY;AAC/B,MAAI2D,IAAMlb;AACV,SAAO,SAAUxD,GAAG2e,GAAQC,GAAQC,GAAOC,GAAIC,GAAK;AAClD,QAAI3kB,GAAG6O;AAgBP,SAdK0V,MACHA,IAAS,IAGNC,MACHA,IAAS,IAGPC,IACF5V,IAAI,KAAK,IAAI4V,IAAQF,IAASC,GAAQ5e,EAAE,MAAM,IAE9CiJ,IAAIjJ,EAAE,QAGH5F,IAAIwkB,GAAQxkB,IAAI6O,GAAG7O,KAAKukB;AAC3B,MAAAD,EAAI,CAAC,IAAI1e,EAAE5F,CAAC,GACZskB,EAAI,CAAC,IAAI1e,EAAE5F,IAAI,CAAC,GAChBskB,EAAI,CAAC,IAAI1e,EAAE5F,IAAI,CAAC,GAChB0kB,EAAGJ,GAAKA,GAAKK,CAAG,GAChB/e,EAAE5F,CAAC,IAAIskB,EAAI,CAAC,GACZ1e,EAAE5F,IAAI,CAAC,IAAIskB,EAAI,CAAC,GAChB1e,EAAE5F,IAAI,CAAC,IAAIskB,EAAI,CAAC;AAGlB,WAAO1e;AAAA,EACX;AACA,GAAC;ACtwBM,SAASwD,KAAS;AACvB,MAAIuX,IAAM,IAAIC,GAAoB,CAAC;AAEnC,SAAIA,MAAuB,iBACzBD,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,GACTA,EAAI,CAAC,IAAI,IAGJA;AACT;AAycO,SAASiE,GAAcjE,GAAK/a,GAAGhF,GAAG;AACvC,MAAIU,IAAIsE,EAAE,CAAC,GACP+K,IAAI/K,EAAE,CAAC,GACPkd,IAAIld,EAAE,CAAC,GACP6Z,IAAI7Z,EAAE,CAAC;AACX,SAAA+a,EAAI,CAAC,IAAI/f,EAAE,CAAC,IAAIU,IAAIV,EAAE,CAAC,IAAI+P,IAAI/P,EAAE,CAAC,IAAIkiB,IAAIliB,EAAE,EAAE,IAAI6e,GAClDkB,EAAI,CAAC,IAAI/f,EAAE,CAAC,IAAIU,IAAIV,EAAE,CAAC,IAAI+P,IAAI/P,EAAE,CAAC,IAAIkiB,IAAIliB,EAAE,EAAE,IAAI6e,GAClDkB,EAAI,CAAC,IAAI/f,EAAE,CAAC,IAAIU,IAAIV,EAAE,CAAC,IAAI+P,IAAI/P,EAAE,EAAE,IAAIkiB,IAAIliB,EAAE,EAAE,IAAI6e,GACnDkB,EAAI,CAAC,IAAI/f,EAAE,CAAC,IAAIU,IAAIV,EAAE,CAAC,IAAI+P,IAAI/P,EAAE,EAAE,IAAIkiB,IAAIliB,EAAE,EAAE,IAAI6e,GAC5CkB;AACT;AAAA,CA2IqB,WAAY;AAC/B,MAAI2D,IAAMlb;AACV,SAAO,SAAUxD,GAAG2e,GAAQC,GAAQC,GAAOC,GAAIC,GAAK;AAClD,QAAI3kB,GAAG6O;AAgBP,SAdK0V,MACHA,IAAS,IAGNC,MACHA,IAAS,IAGPC,IACF5V,IAAI,KAAK,IAAI4V,IAAQF,IAASC,GAAQ5e,EAAE,MAAM,IAE9CiJ,IAAIjJ,EAAE,QAGH5F,IAAIwkB,GAAQxkB,IAAI6O,GAAG7O,KAAKukB;AAC3B,MAAAD,EAAI,CAAC,IAAI1e,EAAE5F,CAAC,GACZskB,EAAI,CAAC,IAAI1e,EAAE5F,IAAI,CAAC,GAChBskB,EAAI,CAAC,IAAI1e,EAAE5F,IAAI,CAAC,GAChBskB,EAAI,CAAC,IAAI1e,EAAE5F,IAAI,CAAC,GAChB0kB,EAAGJ,GAAKA,GAAKK,CAAG,GAChB/e,EAAE5F,CAAC,IAAIskB,EAAI,CAAC,GACZ1e,EAAE5F,IAAI,CAAC,IAAIskB,EAAI,CAAC,GAChB1e,EAAE5F,IAAI,CAAC,IAAIskB,EAAI,CAAC,GAChB1e,EAAE5F,IAAI,CAAC,IAAIskB,EAAI,CAAC;AAGlB,WAAO1e;AAAA,EACX;AACA,GAAC;ACroBD,SAASif,GAAmBC,GAAQC,GAAa;AAChD,MAAI/c,IAAQ,CAAC,SAAS,sBAAsB,aAAa,WAAW,GAChEnD,IAAU;AACd,WAASmgB,IAAK,GAAGA,IAAKhd,EAAM,QAAQ,EAAEgd,GAAI;AACzC,QAAI;AACH,MAAAngB,IAAUigB,EAAO,WAAW9c,EAAMgd,CAAE,GAAGD,CAAW;AAAA,IACrD,QAAc;AAAA,IAAG;AACf,QAAIlgB;AACH;AAAA,EAED;AACD,SAAOA;AACR;AAoEA,SAASogB,EAAoBC,GAAIC,GAAKra,GAAM;AAC3C,MAAIsa;AASJ,SAPAA,IAASF,EAAG,aAAapa,CAAI,GAI7Boa,EAAG,aAAaE,GAAQD,CAAG,GAC3BD,EAAG,cAAcE,CAAM,GAElBF,EAAG,mBAAmBE,GAAQF,EAAG,cAAc,IAM7CE,KALN,QAAQ,IAAI,uBAAuBD,CAAG,GACtC,QAAQ,IAAID,EAAG,iBAAiBE,CAAM,CAAC,GAChC;AAIT;AAGA,SAASC,GAAcC,GAAcC,GAAgBC,GAAUC,GAAYC,GAAW;AACrF,MAAIC,IAAgBD,EAAU;AAM9B,MALAA,EAAU,aAAaC,GAAeL,CAAY,GAClDI,EAAU,aAAaC,GAAeJ,CAAc,GACpDG,EAAU,YAAYC,CAAa,GAG/B,CAACD,EAAU,oBAAoBC,GAAeD,EAAU,WAAW,GAAG;AACzE,UAAM,8BAA8BA,EAAU,kBAAkBC,CAAa,CAAC;AAC9E;AAAA,EACA;AAOD,MALA,KAAK,KAAKA,GAEV,KAAK,WAAW,IAAI,UACpB,KAAK,aAAa,IAAI,UAElBH;AACH,aAASxlB,IAAI,GAAGA,IAAIwlB,EAAS,QAAQxlB;AACpC,WAAK,SAASwlB,EAASxlB,CAAC,CAAC,IAAI0lB,EAAU,mBAAmB,KAAK,IAAIF,EAASxlB,CAAC,CAAC;AAYhF,MARA,KAAK,WAAW,SAAS,SAAU4lB,GAAe;AACjD,IAAAF,EAAU,wBAAwB,KAAKE,CAAa,CAAC;AAAA,EACrD,GAED,KAAK,WAAW,UAAU,SAAUA,GAAe;AAClD,IAAAF,EAAU,yBAAyB,KAAKE,CAAa,CAAC;AAAA,EACtD,GAEGH;AACH,aAASzlB,IAAI,GAAGA,IAAIylB,EAAW,QAAQzlB;AACtC,WAAK,WAAWylB,EAAWzlB,CAAC,CAAC,IAAI0lB,EAAU,kBAAkB,KAAK,IAAID,EAAWzlB,CAAC,CAAC;AAIrF,OAAK,MAAM,SAAU0lB,GAAW;AAC/B,IAAAA,EAAU,WAAW,KAAK,EAAE;AAAA,EAC5B;AACF;AAwHA,SAASG,GAAUC,GAAKC,IAAiB,IAAMC,IAAmB,IAAM;AACvE,MAAIC,IAAe;AAAA,IAClB;AAAA,IAAM;AAAA,IAAK;AAAA,IACX;AAAA,IAAM;AAAA,IAAM;AAAA,IACZ;AAAA,IAAK;AAAA,IAAK;AAAA,IACV;AAAA,IAAK;AAAA,IAAM;AAAA,EACb,GACKC,IAAa;AAAA,IAChB;AAAA,IAAK;AAAA,IAAK;AAAA,IACV;AAAA,IAAK;AAAA,IAAK;AAAA,IACV;AAAA,IAAK;AAAA,IAAK;AAAA,IACV;AAAA,IAAK;AAAA,IAAK;AAAA,EACZ,GACKC,IAAe;AAAA,IAClB;AAAA,IAAK;AAAA,IAAK;AAAA,IACV;AAAA,IAAK;AAAA,IAAK;AAAA,IACV;AAAA,IAAK;AAAA,IAAK;AAAA,IACV;AAAA,IAAK;AAAA,IAAK;AAAA,EACZ,GAEKC,IAAS,CAAA;AAEb,SAAIJ,MACHI,EAAO,iBAAiBN,EAAI,gBAC5BA,EAAI,WAAWA,EAAI,cAAcM,EAAO,cAAc,GACtDN,EAAI,WAAWA,EAAI,cAAc,IAAI,aAAaK,CAAY,GAAGL,EAAI,WAAW,IAG7EC,MACHK,EAAO,eAAeN,EAAI,gBAC1BA,EAAI,WAAWA,EAAI,cAAcM,EAAO,YAAY,GACpDN,EAAI,WAAWA,EAAI,cAAc,IAAI,aAAaI,CAAU,GAAGJ,EAAI,WAAW,IAG/EM,EAAO,eAAeN,EAAI,gBAC1BA,EAAI,WAAWA,EAAI,cAAcM,EAAO,YAAY,GACpDN,EAAI,WAAWA,EAAI,cAAc,IAAI,aAAaG,CAAY,GAAGH,EAAI,WAAW,GAChFM,EAAO,aAAa,GAQbA;AACR;AAGA,SAASC,GAAStU,GAAS;AAC1B,SAAOA,IAAU,KAAK,KAAK;AAC5B;ACxUA,SAASuU,GAAUC,GAAO1iB,GAAOmN,GAAOoH,GAAM;AAG1C,MAAIA,KAAQpH;AACR,WAAOA;AAEX,QAAM8G,IAAQ,KAAK,MAAM9G,KAASoH,IAAOpH,KAAS,CAAC,GAC7CwV,IAAQ3iB,IAAQ0iB,EAAMzO,CAAK,EAAE,OAC7B2O,IAAS5iB,IAAQ0iB,EAAMzO,IAAQ,CAAC,EAAE;AACxC,SAAI0O,IAAQ,IACDF,GAAUC,GAAO1iB,GAAOmN,GAAO8G,IAAQ,CAAC,IAE1C2O,IAAS,IACP3O,IAGAwO,GAAUC,GAAO1iB,GAAOiU,IAAQ,GAAGM,CAAI;AAEtD;AACA,MAAMsO,KAAc,CAAC7iB,GAAO8iB,GAAgBC,MAAmB;AAC3D,QAAMC,KAAQhjB,IAAQ8iB,MAAmBC,IAAiBD;AAC1D,SAAO,CAAC,IAAIE,GAAMA,CAAI;AAC1B;AAgBA,SAASC,GAAO5lB,GAAM;AAClB,SAAOA,EAAK,UAAU,UAAaA,EAAK,WAAW;AACvD;AACA,SAAS6lB,GAAYR,GAAO;AACxB,SAAOA,EAAM,SAAS,KAAKO,GAAOP,EAAM,CAAC,CAAC;AAC9C;AAIA,SAASS,GAAiBphB,GAAGqhB,GAAGphB,GAAGqhB,GAAG;AAClC,SAAO;AAAA,IACHthB,IAAIqhB,EAAE,CAAC,IAAIphB,IAAIqhB,EAAE,CAAC;AAAA,IAClBthB,IAAIqhB,EAAE,CAAC,IAAIphB,IAAIqhB,EAAE,CAAC;AAAA,IAClBthB,IAAIqhB,EAAE,CAAC,IAAIphB,IAAIqhB,EAAE,CAAC;AAAA,EAC1B;AACA;AACA,SAASC,GAAYC,GAAO;AACxB,SAAOA,KAAgBV;AAC3B;AACA,SAASW,GAAeC,GAAQhU,GAAO8T,GAAO;AAC1C,SAAI,CAAC,MAAM,QAAQE,CAAM,KAAKA,EAAO,SAAS,IACnCC,KAEPR,GAAYO,CAAM,IACXE,GAAmBF,GAAQhU,GAAO6T,GAAYC,CAAK,GAAGJ,EAAgB,IAGtES,GAAmBH,GAAQhU,GAAO6T,GAAYC,CAAK,GAAGJ,EAAgB;AAErF;AAiBA,SAASQ,GAAmBjB,GAAOjT,GAAO8T,GAAOM,GAAmB;AAChE,QAAMC,IAAcpB,EAAM,KAAK,CAAC,GAAG1gB,MAAM,EAAE,QAAQA,EAAE,QAAQ,KAAK,CAAC;AACnE,SAAO,SAAUhC,GAAO;AACpB,UAAM+jB,IAActU,EAAMzP,CAAK,GACzBiU,IAAQwO,GAAUqB,GAAaC,GAAa,GAAGD,EAAY,SAAS,CAAC;AAC3E,QAAI7P,KAAS,KAAK8P,IAAcD,EAAY,CAAC,EAAE;AAC3C,aAAOA,EAAY7P,CAAK,EAAE;AAEzB,QAAIA,KAAS6P,EAAY,SAAS;AACnC,aAAOA,EAAY7P,CAAK,EAAE;AAE9B,UAAM,CAAC+P,GAAQC,CAAM,IAAIV,EAAMQ,GAAaD,EAAY7P,CAAK,EAAE,OAAO6P,EAAY7P,IAAQ,CAAC,EAAE,KAAK;AAClG,WAAO4P,EAAkBG,GAAQF,EAAY7P,CAAK,EAAE,QAAQgQ,GAAQH,EAAY7P,IAAQ,CAAC,EAAE,MAAM;AAAA,EACzG;AACA;AACA,SAAS2P,GAAmBM,GAAKzU,GAAO8T,GAAOM,GAAmB;AAC9D,SAAO,SAAU7jB,GAAO;AACpB,UAAM+jB,IAActU,EAAMzP,CAAK,GACzBmkB,KAAcD,EAAI,SAAS,KAAKH;AACtC,QAAII,KAAc;AACd,aAAOD,EAAI,CAAC;AAEX,QAAIC,KAAcD,EAAI,SAAS;AAChC,aAAOA,EAAIA,EAAI,SAAS,CAAC;AAE7B,UAAMjQ,IAAQ,KAAK,MAAMkQ,CAAU,GAC7B,CAACH,GAAQC,CAAM,IAAIV,EAAMY,GAAYlQ,GAAOA,IAAQ,CAAC;AAC3D,WAAO4P,EAAkBG,GAAQE,EAAIjQ,CAAK,GAAGgQ,GAAQC,EAAIjQ,IAAQ,CAAC,CAAC;AAAA,EAC3E;AACA;AACA,SAASyP,GAAWU,GAAQ;AACxB,SAAO,CAAC,GAAG,GAAG,CAAC;AACnB;AAKA,SAASC,GAAYC,GAAQC,GAAO;AAChC,MAAI,CAACC,GAAItT,CAAE,IAAIoT;AACf,QAAM,CAACjT,GAAIC,CAAE,IAAIiT;AACjB,SAAI,KAAK,IAAIC,IAAKtT,CAAE,IAAI,OAAO,YAC3BA,IAAKsT,IAAK,IAEP,SAAUxkB,GAAO;AACpB,WAAOqR,KAAMC,IAAKD,OAAQrR,IAAQwkB,MAAOtT,IAAKsT;AAAA,EACtD;AACA;ACsIA,MAAMC,KAAW;AAAA,EACb,CAAC,SAAU,QAAU,QAAQ;AAAA,EAC7B,CAAC,SAAU,QAAS,OAAO;AAAA,EAC3B,CAAC,SAAU,SAAU,QAAQ;AAAA,EAC7B,CAAC,SAAU,SAAU,QAAQ;AAAA,EAC7B,CAAC,SAAU,SAAU,QAAQ;AAAA,EAC7B,CAAC,SAAU,SAAU,QAAQ;AAAA,EAC7B,CAAC,SAAU,SAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,SAAU,OAAO;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,OAAO;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,SAAS,SAAS,QAAQ;AAAA,EAC3B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,SAAS,UAAU,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,OAAO;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,SAAS,UAAU,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,QAAQ,QAAQ;AAAA,EAC3B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,SAAS,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,MAAM;AAAA,EAC3B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,SAAS,UAAU,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,SAAS,UAAU,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,SAAS,UAAU,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,SAAS,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,SAAS,QAAQ;AAAA,EAC5B,CAAC,SAAS,UAAU,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,SAAS,QAAQ;AAAA,EAC5B,CAAC,QAAQ,UAAU,QAAQ;AAAA,EAC3B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,MAAM;AAAA,EAC3B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,SAAS,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,SAAS,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,OAAO;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,QAAQ,UAAU,QAAQ;AAAA,EAC3B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,SAAS,UAAU,QAAQ;AAAA,EAC5B,CAAC,UAAU,SAAS,QAAQ;AAAA,EAC5B,CAAC,UAAU,SAAS,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,SAAS,UAAU,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,OAAO;AAAA,EAC5B,CAAC,SAAS,UAAU,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,SAAS,UAAU,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,SAAS,UAAU,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,SAAS,UAAU,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,QAAQ,UAAU,QAAQ;AAAA,EAC3B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,SAAS,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,SAAS,UAAU,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,OAAO;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,OAAO;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,OAAO;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,SAAS,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,SAAS,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,OAAO;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,SAAS,OAAO;AAAA,EAC3B,CAAC,SAAS,UAAU,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,OAAO;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,SAAS,UAAU,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,OAAO;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,SAAS,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,SAAS,UAAU,QAAQ;AAAA,EAC5B,CAAC,UAAU,SAAS,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,SAAS,OAAO;AAAA,EAC3B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,OAAO;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,OAAO;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,SAAS,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,SAAS,QAAQ;AAAA,EAC5B,CAAC,UAAU,SAAS,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,SAAS,OAAO;AAAA,EAC3B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,OAAO;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,SAAS,QAAQ;AAAA,EAC5B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,QAAQ;AAAA,EAC7B,CAAC,UAAU,UAAU,Q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AAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAsGjCzc;AAAAA;AAAAA,EAAyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAuGzB0c;AAAA;AAAA,EAAwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GA+BxBG;AAAA;AAAA,EAA6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,104,105,108,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,129,130]}